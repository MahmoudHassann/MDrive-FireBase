"use strict";(self.webpackChunkDrive=self.webpackChunkDrive||[]).push([[179],{2011:(Ut,qe,ee)=>{ee.d(qe,{Dh:()=>Le,GT:()=>Ue,cc:()=>we,hO:()=>be,on:()=>te,pX:()=>Ie,xv:()=>ue});var y=ee(4650),L=ee(127),J=ee(5813);Ut=ee.hmd(Ut);const me=["ngOnDestroy"],Ie=(Me,yt,ht,ze={})=>new Proxy(Me,{get:(Ce,je)=>ht.runOutsideAngular(()=>{var ft;if(Me[je])return!(null===(ft=ze?.spy)||void 0===ft)&&ft.get&&ze.spy.get(je,Me[je]),Me[je];if(me.indexOf(je)>-1)return()=>{};const rt=yt.toPromise().then(le=>{const He=le&&le[je];return"function"==typeof He?He.bind(le):He&&He.then?He.then(ge=>ht.run(()=>ge)):ht.run(()=>He)});return new Proxy(()=>{},{get:(le,He)=>rt[He],apply:(le,He,ge)=>rt.then(_e=>{var Re;const Ee=_e&&_e(...ge);return!(null===(Re=ze?.spy)||void 0===Re)&&Re.apply&&ze.spy.apply(je,ge,Ee),Ee})})})}),Ue=(Me,yt)=>{yt.forEach(ht=>{Object.getOwnPropertyNames(ht.prototype||ht).forEach(ze=>{Object.defineProperty(Me.prototype,ze,Object.getOwnPropertyDescriptor(ht.prototype||ht,ze))})})};class Oe{constructor(yt){return yt}}const Le=new y.OlP("angularfire2.app.options"),ue=new y.OlP("angularfire2.app.name");function te(Me,yt,ht){const Ce="object"==typeof ht&&ht||{};Ce.name=Ce.name||"string"==typeof ht&&ht||"[DEFAULT]";const ft=L.Z.apps.filter(rt=>rt&&rt.name===Ce.name)[0]||yt.runOutsideAngular(()=>L.Z.initializeApp(Me,Ce));try{JSON.stringify(Me)!==JSON.stringify(ft.options)&&X("error",`${ft.name} Firebase App already initialized with different options${Ut.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new Oe(ft)}const X=(Me,...yt)=>{(0,y.X6Q)()&&typeof console<"u"&&console[Me](...yt)},oe={provide:Oe,useFactory:te,deps:[Le,y.R0b,[new y.FiY,ue]]};let be=(()=>{class Me{constructor(ht){L.Z.registerVersion("angularfire",J.q4.full,"core"),L.Z.registerVersion("angularfire",J.q4.full,"app-compat"),L.Z.registerVersion("angular",y.q4F.full,ht.toString())}static initializeApp(ht,ze){return{ngModule:Me,providers:[{provide:Le,useValue:ht},{provide:ue,useValue:ze}]}}}return Me.\u0275fac=function(ht){return new(ht||Me)(y.LFG(y.Lbi))},Me.\u0275mod=y.oAB({type:Me}),Me.\u0275inj=y.cJS({providers:[oe]}),Me})();function we(Me,yt,ht,ze,Ce){const[,je,ft]=globalThis.\u0275AngularfireInstanceCache.find(rt=>rt[0]===Me)||[];if(je)return function Ne(Me,yt){try{return Me.toString()===yt.toString()}catch{return Me===yt}}(Ce,ft)||(Pe("error",`${yt} was already initialized on the ${ht} Firebase App with different settings.${ut?" You may need to reload as Firebase is not HMR aware.":""}`),Pe("warn",{is:Ce,was:ft})),je;{const rt=ze();return globalThis.\u0275AngularfireInstanceCache.push([Me,rt,Ce]),rt}}const ut=!!Ut.hot,Pe=(Me,...yt)=>{(0,y.X6Q)()&&typeof console<"u"&&console[Me](...yt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(Ut,qe,ee)=>{ee.d(qe,{q4:()=>Mt,iC:()=>Bo,fc:()=>hi,HU:()=>Vs,vb:()=>ya,JM:()=>Fi});var y=ee(4650),L=ee(5867),J=ee(5861),me=ee(9681),Ie=ee(2090),Ue=ee(4859),Oe=ee(1877),Le=ee(8766);const ue="@firebase/installations",te="0.5.12",oe=`w:${te}`,be="FIS_v2",yt=new Ie.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function ht(P){return P instanceof Ie.ZR&&P.code.includes("request-failed")}function ze({projectId:P}){return`https://firebaseinstallations.googleapis.com/v1/projects/${P}/installations`}function Ce(P){return{token:P.token,requestStatus:2,expiresIn:_e(P.expiresIn),creationTime:Date.now()}}function je(P,k){return ft.apply(this,arguments)}function ft(){return(ft=(0,J.Z)(function*(P,k){const ie=(yield k.json()).error;return yt.create("request-failed",{requestName:P,serverCode:ie.code,serverMessage:ie.message,serverStatus:ie.status})})).apply(this,arguments)}function rt({apiKey:P}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":P})}function le(P,{refreshToken:k}){const G=rt(P);return G.append("Authorization",function Re(P){return`${be} ${P}`}(k)),G}function He(P){return ge.apply(this,arguments)}function ge(){return(ge=(0,J.Z)(function*(P){const k=yield P();return k.status>=500&&k.status<600?P():k})).apply(this,arguments)}function _e(P){return Number(P.replace("s","000"))}function Ee(P,k){return ot.apply(this,arguments)}function ot(){return(ot=(0,J.Z)(function*({appConfig:P,heartbeatServiceProvider:k},{fid:G}){const ie=ze(P),ye=rt(P),Ae=k.getImmediate({optional:!0});if(Ae){const on=yield Ae.getHeartbeatsHeader();on&&ye.append("x-firebase-client",on)}const st={method:"POST",headers:ye,body:JSON.stringify({fid:G,authVersion:be,appId:P.appId,sdkVersion:oe})},xt=yield He(()=>fetch(ie,st));if(xt.ok){const on=yield xt.json();return{fid:on.fid||G,registrationStatus:2,refreshToken:on.refreshToken,authToken:Ce(on.authToken)}}throw yield je("Create Installation",xt)})).apply(this,arguments)}function Qe(P){return new Promise(k=>{setTimeout(k,P)})}const Jt=/^[cdef][\w-]{21}$/;function _t(){try{const P=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(P),P[0]=112+P[0]%16;const G=function St(P){return function Vt(P){return btoa(String.fromCharCode(...P)).replace(/\+/g,"-").replace(/\//g,"_")}(P).substr(0,22)}(P);return Jt.test(G)?G:""}catch{return""}}function Tt(P){return`${P.appName}!${P.appId}`}const Ot=new Map;function Xt(P,k){const G=Tt(P);jn(G,k),function go(P,k){const G=function Rr(){return!ci&&"BroadcastChannel"in self&&(ci=new BroadcastChannel("[Firebase] FID Change"),ci.onmessage=P=>{jn(P.data.key,P.data.fid)}),ci}();G&&G.postMessage({key:P,fid:k}),function Wr(){0===Ot.size&&ci&&(ci.close(),ci=null)}()}(G,k)}function jn(P,k){const G=Ot.get(P);if(G)for(const ie of G)ie(k)}let ci=null;const cn="firebase-installations-store";let lr=null;function mr(){return lr||(lr=(0,Le.X3)("firebase-installations-database",1,{upgrade:(P,k)=>{0===k&&P.createObjectStore(cn)}})),lr}function dt(P,k){return yr.apply(this,arguments)}function yr(){return(yr=(0,J.Z)(function*(P,k){const G=Tt(P),ye=(yield mr()).transaction(cn,"readwrite"),Ae=ye.objectStore(cn),We=yield Ae.get(G);return yield Ae.put(k,G),yield ye.done,(!We||We.fid!==k.fid)&&Xt(P,k.fid),k})).apply(this,arguments)}function vr(P){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,J.Z)(function*(P){const k=Tt(P),ie=(yield mr()).transaction(cn,"readwrite");yield ie.objectStore(cn).delete(k),yield ie.done})).apply(this,arguments)}function Hi(P,k){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,J.Z)(function*(P,k){const G=Tt(P),ye=(yield mr()).transaction(cn,"readwrite"),Ae=ye.objectStore(cn),We=yield Ae.get(G),st=k(We);return void 0===st?yield Ae.delete(G):yield Ae.put(st,G),yield ye.done,st&&(!We||We.fid!==st.fid)&&Xt(P,st.fid),st})).apply(this,arguments)}function Or(P){return kn.apply(this,arguments)}function kn(){return(kn=(0,J.Z)(function*(P){let k;const G=yield Hi(P.appConfig,ie=>{const ye=Kn(ie),Ae=qt(P,ye);return k=Ae.registrationPromise,Ae.installationEntry});return""===G.fid?{installationEntry:yield k}:{installationEntry:G,registrationPromise:k}})).apply(this,arguments)}function Kn(P){return nn(P||{fid:_t(),registrationStatus:0})}function qt(P,k){if(0===k.registrationStatus){if(!navigator.onLine)return{installationEntry:k,registrationPromise:Promise.reject(yt.create("app-offline"))};const G={fid:k.fid,registrationStatus:1,registrationTime:Date.now()},ie=function Pt(P,k){return Yn.apply(this,arguments)}(P,G);return{installationEntry:G,registrationPromise:ie}}return 1===k.registrationStatus?{installationEntry:k,registrationPromise:Zr(P)}:{installationEntry:k}}function Yn(){return(Yn=(0,J.Z)(function*(P,k){try{const G=yield Ee(P,k);return dt(P.appConfig,G)}catch(G){throw ht(G)&&409===G.customData.serverCode?yield vr(P.appConfig):yield dt(P.appConfig,{fid:k.fid,registrationStatus:0}),G}})).apply(this,arguments)}function Zr(P){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,J.Z)(function*(P){let k=yield Kr(P.appConfig);for(;1===k.registrationStatus;)yield Qe(100),k=yield Kr(P.appConfig);if(0===k.registrationStatus){const{installationEntry:G,registrationPromise:ie}=yield Or(P);return ie||G}return k})).apply(this,arguments)}function Kr(P){return Hi(P,k=>{if(!k)throw yt.create("installation-not-found");return nn(k)})}function nn(P){return function To(P){return 1===P.registrationStatus&&P.registrationTime+1e4<Date.now()}(P)?{fid:P.fid,registrationStatus:0}:P}function Fn(P,k){return $i.apply(this,arguments)}function $i(){return($i=(0,J.Z)(function*({appConfig:P,heartbeatServiceProvider:k},G){const ie=ce(P,G),ye=le(P,G),Ae=k.getImmediate({optional:!0});if(Ae){const on=yield Ae.getHeartbeatsHeader();on&&ye.append("x-firebase-client",on)}const st={method:"POST",headers:ye,body:JSON.stringify({installation:{sdkVersion:oe,appId:P.appId}})},xt=yield He(()=>fetch(ie,st));if(xt.ok)return Ce(yield xt.json());throw yield je("Generate Auth Token",xt)})).apply(this,arguments)}function ce(P,{fid:k}){return`${ze(P)}/${k}/authTokens:generate`}function j(P){return q.apply(this,arguments)}function q(){return(q=(0,J.Z)(function*(P,k=!1){let G;const ie=yield Hi(P.appConfig,Ae=>{if(!mt(Ae))throw yt.create("not-registered");const We=Ae.authToken;if(!k&&zt(We))return Ae;if(1===We.requestStatus)return G=Z(P,k),Ae;{if(!navigator.onLine)throw yt.create("app-offline");const st=ln(Ae);return G=xe(P,st),st}});return G?yield G:ie.authToken})).apply(this,arguments)}function Z(P,k){return z.apply(this,arguments)}function z(){return(z=(0,J.Z)(function*(P,k){let G=yield re(P.appConfig);for(;1===G.authToken.requestStatus;)yield Qe(100),G=yield re(P.appConfig);const ie=G.authToken;return 0===ie.requestStatus?j(P,k):ie})).apply(this,arguments)}function re(P){return Hi(P,k=>{if(!mt(k))throw yt.create("not-registered");return function Nt(P){return 1===P.requestStatus&&P.requestTime+1e4<Date.now()}(k.authToken)?Object.assign(Object.assign({},k),{authToken:{requestStatus:0}}):k})}function xe(P,k){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,J.Z)(function*(P,k){try{const G=yield Fn(P,k),ie=Object.assign(Object.assign({},k),{authToken:G});return yield dt(P.appConfig,ie),G}catch(G){if(!ht(G)||401!==G.customData.serverCode&&404!==G.customData.serverCode){const ie=Object.assign(Object.assign({},k),{authToken:{requestStatus:0}});yield dt(P.appConfig,ie)}else yield vr(P.appConfig);throw G}})).apply(this,arguments)}function mt(P){return void 0!==P&&2===P.registrationStatus}function zt(P){return 2===P.requestStatus&&!function gn(P){const k=Date.now();return k<P.creationTime||P.creationTime+P.expiresIn<k+36e5}(P)}function ln(P){const k={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},P),{authToken:k})}function er(){return(er=(0,J.Z)(function*(P){const k=P,{installationEntry:G,registrationPromise:ie}=yield Or(k);return ie?ie.catch(console.error):j(k).catch(console.error),G.fid})).apply(this,arguments)}function Ts(){return(Ts=(0,J.Z)(function*(P,k=!1){const G=P;return yield Gi(G),(yield j(G,k)).token})).apply(this,arguments)}function Gi(P){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,J.Z)(function*(P){const{registrationPromise:k}=yield Or(P);k&&(yield k)})).apply(this,arguments)}function Ss(P){return yt.create("missing-app-config-values",{valueName:P})}const ta="installations",_r=P=>{const k=P.getProvider("app").getImmediate(),G=function sr(P){if(!P||!P.options)throw Ss("App Configuration");if(!P.name)throw Ss("App Name");const k=["projectId","apiKey","appId"];for(const G of k)if(!P.options[G])throw Ss(G);return{appName:P.name,projectId:P.options.projectId,apiKey:P.options.apiKey,appId:P.options.appId}}(k);return{app:k,appConfig:G,heartbeatServiceProvider:(0,me._getProvider)(k,"heartbeat"),_delete:()=>Promise.resolve()}},rs=P=>{const k=P.getProvider("app").getImmediate(),G=(0,me._getProvider)(k,ta).getImmediate();return{getId:()=>function an(P){return er.apply(this,arguments)}(G),getToken:ye=>function Yr(P){return Ts.apply(this,arguments)}(G,ye)}};(function El(){(0,me._registerComponent)(new Ue.wA(ta,_r,"PUBLIC")),(0,me._registerComponent)(new Ue.wA("installations-internal",rs,"PRIVATE"))})(),(0,me.registerVersion)(ue,te),(0,me.registerVersion)(ue,te,"esm2017");const is="@firebase/remote-config",dr=new Ie.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class kd{constructor(k,G,ie,ye){this.client=k,this.storage=G,this.storageCache=ie,this.logger=ye}isCachedDataFresh(k,G){if(!G)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const ie=Date.now()-G,ye=ie<=k;return this.logger.debug(`Config fetch cache check. Cache age millis: ${ie}. Cache max age millis (minimumFetchIntervalMillis setting): ${k}. Is cache hit: ${ye}.`),ye}fetch(k){var G=this;return(0,J.Z)(function*(){const[ie,ye]=yield Promise.all([G.storage.getLastSuccessfulFetchTimestampMillis(),G.storage.getLastSuccessfulFetchResponse()]);if(ye&&G.isCachedDataFresh(k.cacheMaxAgeMillis,ie))return ye;k.eTag=ye&&ye.eTag;const Ae=yield G.client.fetch(k),We=[G.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Ae.status&&We.push(G.storage.setLastSuccessfulFetchResponse(Ae)),yield Promise.all(We),Ae})()}}function qu(P=navigator){return P.languages&&P.languages[0]||P.language}class au{constructor(k,G,ie,ye,Ae,We){this.firebaseInstallations=k,this.sdkVersion=G,this.namespace=ie,this.projectId=ye,this.apiKey=Ae,this.appId=We}fetch(k){var G=this;return(0,J.Z)(function*(){var ie,ye,Ae;const[We,st]=yield Promise.all([G.firebaseInstallations.getId(),G.firebaseInstallations.getToken()]),on=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${G.projectId}/namespaces/${G.namespace}:fetch?key=${G.apiKey}`,Bt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":k.eTag||"*"},$t={sdk_version:G.sdkVersion,app_instance_id:We,app_instance_id_token:st,app_id:G.appId,language_code:qu()},ar={method:"POST",headers:Bt,body:JSON.stringify($t)},Li=fetch(on,ar),ja=new Promise((_u,$a)=>{k.signal.addEventListener(()=>{const Ho=new Error("The operation was aborted.");Ho.name="AbortError",$a(Ho)})});let Ha;try{yield Promise.race([Li,ja]),Ha=yield Li}catch(_u){let $a="fetch-client-network";throw"AbortError"===(null===(ie=_u)||void 0===ie?void 0:ie.name)&&($a="fetch-timeout"),dr.create($a,{originalErrorMessage:null===(ye=_u)||void 0===ye?void 0:ye.message})}let pn=Ha.status;const ps=Ha.headers.get("ETag")||void 0;let jo,ii;if(200===Ha.status){let _u;try{_u=yield Ha.json()}catch($a){throw dr.create("fetch-client-parse",{originalErrorMessage:null===(Ae=$a)||void 0===Ae?void 0:Ae.message})}jo=_u.entries,ii=_u.state}if("INSTANCE_STATE_UNSPECIFIED"===ii?pn=500:"NO_CHANGE"===ii?pn=304:("NO_TEMPLATE"===ii||"EMPTY_CONFIG"===ii)&&(jo={}),304!==pn&&200!==pn)throw dr.create("fetch-status",{httpStatus:pn});return{status:pn,eTag:ps,config:jo}})()}}class Vh{constructor(k,G){this.client=k,this.storage=G}fetch(k){var G=this;return(0,J.Z)(function*(){const ie=(yield G.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return G.attemptFetch(k,ie)})()}attemptFetch(k,{throttleEndTimeMillis:G,backoffCount:ie}){var ye=this;return(0,J.Z)(function*(){yield function ei(P,k){return new Promise((G,ie)=>{const ye=Math.max(k-Date.now(),0),Ae=setTimeout(G,ye);P.addEventListener(()=>{clearTimeout(Ae),ie(dr.create("fetch-throttle",{throttleEndTimeMillis:k}))})})}(k.signal,G);try{const Ae=yield ye.client.fetch(k);return yield ye.storage.deleteThrottleMetadata(),Ae}catch(Ae){if(!function Lh(P){if(!(P instanceof Ie.ZR&&P.customData))return!1;const k=Number(P.customData.httpStatus);return 429===k||500===k||503===k||504===k}(Ae))throw Ae;const We={throttleEndTimeMillis:Date.now()+(0,Ie.$s)(ie),backoffCount:ie+1};return yield ye.storage.setThrottleMetadata(We),ye.attemptFetch(k,We)}})()}}class Fd{constructor(k,G,ie,ye,Ae){this.app=k,this._client=G,this._storageCache=ie,this._storage=ye,this._logger=Ae,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Sl(P,k){var G;const ie=P.target.error||void 0;return dr.create(k,{originalErrorMessage:ie&&(null===(G=ie)||void 0===G?void 0:G.message)})}const ia="app_namespace_store";class Ld{constructor(k,G,ie,ye=function Jf(){return new Promise((P,k)=>{var G;try{const ie=indexedDB.open("firebase_remote_config",1);ie.onerror=ye=>{k(Sl(ye,"storage-open"))},ie.onsuccess=ye=>{P(ye.target.result)},ie.onupgradeneeded=ye=>{0===ye.oldVersion&&ye.target.result.createObjectStore(ia,{keyPath:"compositeKey"})}}catch(ie){k(dr.create("storage-open",{originalErrorMessage:null===(G=ie)||void 0===G?void 0:G.message}))}})}()){this.appId=k,this.appName=G,this.namespace=ie,this.openDbPromise=ye}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(k){return this.set("last_fetch_status",k)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(k){return this.set("last_successful_fetch_timestamp_millis",k)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(k){return this.set("last_successful_fetch_response",k)}getActiveConfig(){return this.get("active_config")}setActiveConfig(k){return this.set("active_config",k)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(k){return this.set("active_config_etag",k)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(k){return this.set("throttle_metadata",k)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(k){var G=this;return(0,J.Z)(function*(){const ie=yield G.openDbPromise;return new Promise((ye,Ae)=>{var We;const xt=ie.transaction([ia],"readonly").objectStore(ia),on=G.createCompositeKey(k);try{const Bt=xt.get(on);Bt.onerror=$t=>{Ae(Sl($t,"storage-get"))},Bt.onsuccess=$t=>{const ar=$t.target.result;ye(ar?ar.value:void 0)}}catch(Bt){Ae(dr.create("storage-get",{originalErrorMessage:null===(We=Bt)||void 0===We?void 0:We.message}))}})})()}set(k,G){var ie=this;return(0,J.Z)(function*(){const ye=yield ie.openDbPromise;return new Promise((Ae,We)=>{var st;const on=ye.transaction([ia],"readwrite").objectStore(ia),Bt=ie.createCompositeKey(k);try{const $t=on.put({compositeKey:Bt,value:G});$t.onerror=ar=>{We(Sl(ar,"storage-set"))},$t.onsuccess=()=>{Ae()}}catch($t){We(dr.create("storage-set",{originalErrorMessage:null===(st=$t)||void 0===st?void 0:st.message}))}})})()}delete(k){var G=this;return(0,J.Z)(function*(){const ie=yield G.openDbPromise;return new Promise((ye,Ae)=>{var We;const xt=ie.transaction([ia],"readwrite").objectStore(ia),on=G.createCompositeKey(k);try{const Bt=xt.delete(on);Bt.onerror=$t=>{Ae(Sl($t,"storage-delete"))},Bt.onsuccess=()=>{ye()}}catch(Bt){Ae(dr.create("storage-delete",{originalErrorMessage:null===(We=Bt)||void 0===We?void 0:We.message}))}})})()}createCompositeKey(k){return[this.appId,this.appName,this.namespace,k].join()}}class Wu{constructor(k){this.storage=k}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var k=this;return(0,J.Z)(function*(){const G=k.storage.getLastFetchStatus(),ie=k.storage.getLastSuccessfulFetchTimestampMillis(),ye=k.storage.getActiveConfig(),Ae=yield G;Ae&&(k.lastFetchStatus=Ae);const We=yield ie;We&&(k.lastSuccessfulFetchTimestampMillis=We);const st=yield ye;st&&(k.activeConfig=st)})()}setLastFetchStatus(k){return this.lastFetchStatus=k,this.storage.setLastFetchStatus(k)}setLastSuccessfulFetchTimestampMillis(k){return this.lastSuccessfulFetchTimestampMillis=k,this.storage.setLastSuccessfulFetchTimestampMillis(k)}setActiveConfig(k){return this.activeConfig=k,this.storage.setActiveConfig(k)}}function Zu(){return Ku.apply(this,arguments)}function Ku(){return(Ku=(0,J.Z)(function*(){if(!(0,Ie.hl)())return!1;try{return yield(0,Ie.eu)()}catch{return!1}})).apply(this,arguments)}!function to(){(0,me._registerComponent)(new Ue.wA("remote-config",function P(k,{instanceIdentifier:G}){const ie=k.getProvider("app").getImmediate(),ye=k.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw dr.create("registration-window");if(!(0,Ie.hl)())throw dr.create("indexed-db-unavailable");const{projectId:Ae,apiKey:We,appId:st}=ie.options;if(!Ae)throw dr.create("registration-project-id");if(!We)throw dr.create("registration-api-key");if(!st)throw dr.create("registration-app-id");const xt=new Ld(st,ie.name,G=G||"firebase"),on=new Wu(xt),Bt=new Oe.Yd(is);Bt.logLevel=Oe.in.ERROR;const $t=new au(ye,me.SDK_VERSION,G,Ae,We,st),ar=new Vh($t,xt),Li=new kd(ar,xt,on,Bt),ja=new Fd(ie,Li,on,xt,Bt);return function Nr(P){const k=(0,Ie.m9)(P);k._initializePromise||(k._initializePromise=k._storageCache.loadFromStorage().then(()=>{k._isInitializationComplete=!0}))}(ja),ja},"PUBLIC").setMultipleInstances(!0)),(0,me.registerVersion)(is,"0.3.11"),(0,me.registerVersion)(is,"0.3.11","esm2017")}();const xo="/firebase-messaging-sw.js",zi="/firebase-cloud-messaging-push-scope",xs="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ss="google.c.a.c_id",Mo="google.c.a.c_l",Yu="google.c.a.ts",xl="google.c.a.e";var Ms=(()=>{return(P=Ms||(Ms={})).PUSH_RECEIVED="push-received",P.NOTIFICATION_CLICKED="notification-clicked",Ms;var P})();function Nn(P){const k=new Uint8Array(P);return btoa(String.fromCharCode(...k)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Oi(P){const G=(P+"=".repeat((4-P.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),ie=atob(G),ye=new Uint8Array(ie.length);for(let Ae=0;Ae<ie.length;++Ae)ye[Ae]=ie.charCodeAt(Ae);return ye}const Qu="fcm_token_details_db",$r="fcm_token_object_Store";function Lc(P){return Xf.apply(this,arguments)}function Xf(){return Xf=(0,J.Z)(function*(P){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Ae=>Ae.name).includes(Qu))return null;let k=null;return(yield(0,Le.X3)(Qu,5,{upgrade:(ie=(0,J.Z)(function*(ye,Ae,We,st){var xt;if(Ae<2||!ye.objectStoreNames.contains($r))return;const on=st.objectStore($r),Bt=yield on.index("fcmSenderId").get(P);if(yield on.clear(),Bt)if(2===Ae){const $t=Bt;if(!$t.auth||!$t.p256dh||!$t.endpoint)return;k={token:$t.fcmToken,createTime:null!==(xt=$t.createTime)&&void 0!==xt?xt:Date.now(),subscriptionOptions:{auth:$t.auth,p256dh:$t.p256dh,endpoint:$t.endpoint,swScope:$t.swScope,vapidKey:"string"==typeof $t.vapidKey?$t.vapidKey:Nn($t.vapidKey)}}}else if(3===Ae){const $t=Bt;k={token:$t.fcmToken,createTime:$t.createTime,subscriptionOptions:{auth:Nn($t.auth),p256dh:Nn($t.p256dh),endpoint:$t.endpoint,swScope:$t.swScope,vapidKey:Nn($t.vapidKey)}}}else if(4===Ae){const $t=Bt;k={token:$t.fcmToken,createTime:$t.createTime,subscriptionOptions:{auth:Nn($t.auth),p256dh:Nn($t.p256dh),endpoint:$t.endpoint,swScope:$t.swScope,vapidKey:Nn($t.vapidKey)}}}}),function(Ae,We,st,xt){return ie.apply(this,arguments)})})).close(),yield(0,Le.Lj)(Qu),yield(0,Le.Lj)("fcm_vapid_details_db"),yield(0,Le.Lj)("undefined"),Dr(k)?k:null;var ie}),Xf.apply(this,arguments)}function Dr(P){if(!P||!P.subscriptionOptions)return!1;const{subscriptionOptions:k}=P;return"number"==typeof P.createTime&&P.createTime>0&&"string"==typeof P.token&&P.token.length>0&&"string"==typeof k.auth&&k.auth.length>0&&"string"==typeof k.p256dh&&k.p256dh.length>0&&"string"==typeof k.endpoint&&k.endpoint.length>0&&"string"==typeof k.swScope&&k.swScope.length>0&&"string"==typeof k.vapidKey&&k.vapidKey.length>0}const Ro="firebase-messaging-store";let no=null;function xa(){return no||(no=(0,Le.X3)("firebase-messaging-database",1,{upgrade:(P,k)=>{0===k&&P.createObjectStore(Ro)}})),no}function ro(P){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,J.Z)(function*(P){const k=as(P),ie=yield(yield xa()).transaction(Ro).objectStore(Ro).get(k);if(ie)return ie;{const ye=yield Lc(P.appConfig.senderId);if(ye)return yield Ln(P,ye),ye}})).apply(this,arguments)}function Ln(P,k){return Ju.apply(this,arguments)}function Ju(){return(Ju=(0,J.Z)(function*(P,k){const G=as(P),ye=(yield xa()).transaction(Ro,"readwrite");return yield ye.objectStore(Ro).put(k,G),yield ye.done,k})).apply(this,arguments)}function Oo(P){return Rl.apply(this,arguments)}function Rl(){return(Rl=(0,J.Z)(function*(P){const k=as(P),ie=(yield xa()).transaction(Ro,"readwrite");yield ie.objectStore(Ro).delete(k),yield ie.done})).apply(this,arguments)}function as({appConfig:P}){return P.appId}const Tr=new Ie.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function dn(P,k){return Uc.apply(this,arguments)}function Uc(){return(Uc=(0,J.Z)(function*(P,k){var G;const ie=yield Ud(P),ye=Je(k),Ae={method:"POST",headers:ie,body:JSON.stringify(ye)};let We;try{We=yield(yield fetch(us(P.appConfig),Ae)).json()}catch(st){throw Tr.create("token-subscribe-failed",{errorInfo:null===(G=st)||void 0===G?void 0:G.toString()})}if(We.error)throw Tr.create("token-subscribe-failed",{errorInfo:We.error.message});if(!We.token)throw Tr.create("token-subscribe-no-token");return We.token})).apply(this,arguments)}function Vd(P,k){return Xu.apply(this,arguments)}function Xu(){return(Xu=(0,J.Z)(function*(P,k){var G;const ie=yield Ud(P),ye=Je(k.subscriptionOptions),Ae={method:"PATCH",headers:ie,body:JSON.stringify(ye)};let We;try{We=yield(yield fetch(`${us(P.appConfig)}/${k.token}`,Ae)).json()}catch(st){throw Tr.create("token-update-failed",{errorInfo:null===(G=st)||void 0===G?void 0:G.toString()})}if(We.error)throw Tr.create("token-update-failed",{errorInfo:We.error.message});if(!We.token)throw Tr.create("token-update-no-token");return We.token})).apply(this,arguments)}function Bc(P,k){return Ol.apply(this,arguments)}function Ol(){return(Ol=(0,J.Z)(function*(P,k){var G;const ye={method:"DELETE",headers:yield Ud(P)};try{const We=yield(yield fetch(`${us(P.appConfig)}/${k}`,ye)).json();if(We.error)throw Tr.create("token-unsubscribe-failed",{errorInfo:We.error.message})}catch(Ae){throw Tr.create("token-unsubscribe-failed",{errorInfo:null===(G=Ae)||void 0===G?void 0:G.toString()})}})).apply(this,arguments)}function us({projectId:P}){return`https://fcmregistrations.googleapis.com/v1/projects/${P}/registrations`}function Ud(P){return jc.apply(this,arguments)}function jc(){return(jc=(0,J.Z)(function*({appConfig:P,installations:k}){const G=yield k.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":P.apiKey,"x-goog-firebase-installations-auth":`FIS ${G}`})})).apply(this,arguments)}function Je({p256dh:P,auth:k,endpoint:G,vapidKey:ie}){const ye={web:{endpoint:G,auth:k,p256dh:P}};return ie!==xs&&(ye.web.applicationPubKey=ie),ye}const Tn=6048e5;function Ma(P){return cu.apply(this,arguments)}function cu(){return(cu=(0,J.Z)(function*(P){const k=yield Nl(P.swRegistration,P.vapidKey),G={vapidKey:P.vapidKey,swScope:P.swRegistration.scope,endpoint:k.endpoint,auth:Nn(k.getKey("auth")),p256dh:Nn(k.getKey("p256dh"))},ie=yield ro(P.firebaseDependencies);if(ie){if(Hh(ie.subscriptionOptions,G))return Date.now()>=ie.createTime+Tn?Os(P,{token:ie.token,createTime:Date.now(),subscriptionOptions:G}):ie.token;try{yield Bc(P.firebaseDependencies,ie.token)}catch(ye){console.warn(ye)}return $c(P.firebaseDependencies,G)}return $c(P.firebaseDependencies,G)})).apply(this,arguments)}function wr(P){return Hc.apply(this,arguments)}function Hc(){return(Hc=(0,J.Z)(function*(P){const k=yield ro(P.firebaseDependencies);k&&(yield Bc(P.firebaseDependencies,k.token),yield Oo(P.firebaseDependencies));const G=yield P.swRegistration.pushManager.getSubscription();return!G||G.unsubscribe()})).apply(this,arguments)}function Os(P,k){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,J.Z)(function*(P,k){try{const G=yield Vd(P.firebaseDependencies,k),ie=Object.assign(Object.assign({},k),{token:G,createTime:Date.now()});return yield Ln(P.firebaseDependencies,ie),G}catch(G){throw yield wr(P),G}})).apply(this,arguments)}function $c(P,k){return hr.apply(this,arguments)}function hr(){return(hr=(0,J.Z)(function*(P,k){const ie={token:yield dn(P,k),createTime:Date.now(),subscriptionOptions:k};return yield Ln(P,ie),ie.token})).apply(this,arguments)}function Nl(P,k){return Bd.apply(this,arguments)}function Bd(){return(Bd=(0,J.Z)(function*(P,k){return(yield P.pushManager.getSubscription())||P.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Oi(k)})})).apply(this,arguments)}function Hh(P,k){return k.vapidKey===P.vapidKey&&k.endpoint===P.endpoint&&k.auth===P.auth&&k.p256dh===P.p256dh}function lu(P){const k={from:P.from,collapseKey:P.collapse_key,messageId:P.fcmMessageId};return function Pr(P,k){if(!k.notification)return;P.notification={};const G=k.notification.title;G&&(P.notification.title=G);const ie=k.notification.body;ie&&(P.notification.body=ie);const ye=k.notification.image;ye&&(P.notification.image=ye)}(k,P),function cs(P,k){!k.data||(P.data=k.data)}(k,P),function Pl(P,k){var G,ie,ye,Ae,We;if(!(k.fcmOptions||null!==(G=k.notification)&&void 0!==G&&G.click_action))return;P.fcmOptions={};const st=null!==(ye=null===(ie=k.fcmOptions)||void 0===ie?void 0:ie.link)&&void 0!==ye?ye:null===(Ae=k.notification)||void 0===Ae?void 0:Ae.click_action;st&&(P.fcmOptions.link=st);const xt=null===(We=k.fcmOptions)||void 0===We?void 0:We.analytics_label;xt&&(P.fcmOptions.analyticsLabel=xt)}(k,P),k}function Ra(P){return"object"==typeof P&&!!P&&ss in P}function No(P,k){const G=[];for(let ie=0;ie<P.length;ie++)G.push(P.charAt(ie)),ie<k.length&&G.push(k.charAt(ie));return G.join("")}function vo(P){return Tr.create("missing-app-config-values",{valueName:P})}No("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),No("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class np{constructor(k,G,ie){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const ye=function tp(P){if(!P||!P.options)throw vo("App Configuration Object");if(!P.name)throw vo("App Name");const k=["projectId","apiKey","appId","messagingSenderId"],{options:G}=P;for(const ie of k)if(!G[ie])throw vo(ie);return{appName:P.name,projectId:G.projectId,apiKey:G.apiKey,appId:G.appId,senderId:G.messagingSenderId}}(k);this.firebaseDependencies={app:k,appConfig:ye,installations:G,analyticsProvider:ie}}_delete(){return Promise.resolve()}}function jd(P){return ec.apply(this,arguments)}function ec(){return(ec=(0,J.Z)(function*(P){var k;try{P.swRegistration=yield navigator.serviceWorker.register(xo,{scope:zi}),P.swRegistration.update().catch(()=>{})}catch(G){throw Tr.create("failed-service-worker-registration",{browserErrorMessage:null===(k=G)||void 0===k?void 0:k.message})}})).apply(this,arguments)}function oa(P,k){return kl.apply(this,arguments)}function kl(){return(kl=(0,J.Z)(function*(P,k){if(!k&&!P.swRegistration&&(yield jd(P)),k||!P.swRegistration){if(!(k instanceof ServiceWorkerRegistration))throw Tr.create("invalid-sw-registration");P.swRegistration=k}})).apply(this,arguments)}function du(P,k){return tc.apply(this,arguments)}function tc(){return(tc=(0,J.Z)(function*(P,k){k?P.vapidKey=k:P.vapidKey||(P.vapidKey=xs)})).apply(this,arguments)}function nc(){return(nc=(0,J.Z)(function*(P,k){if(!navigator)throw Tr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Tr.create("permission-blocked");return yield du(P,k?.vapidKey),yield oa(P,k?.serviceWorkerRegistration),Ma(P)})).apply(this,arguments)}function rc(P,k,G){return Hd.apply(this,arguments)}function Hd(){return(Hd=(0,J.Z)(function*(P,k,G){const ie=Fl(k);(yield P.firebaseDependencies.analyticsProvider.get()).logEvent(ie,{message_id:G[ss],message_name:G[Mo],message_time:G[Yu],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Fl(P){switch(P){case Ms.NOTIFICATION_CLICKED:return"notification_open";case Ms.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Oa(){return(Oa=(0,J.Z)(function*(P,k){const G=k.data;if(!G.isFirebaseMessaging)return;P.onMessageHandler&&G.messageType===Ms.PUSH_RECEIVED&&("function"==typeof P.onMessageHandler?P.onMessageHandler(lu(G)):P.onMessageHandler.next(lu(G)));const ie=G.data;Ra(ie)&&"1"===ie[xl]&&(yield rc(P,G.messageType,ie))})).apply(this,arguments)}const Na="@firebase/messaging",Gr=P=>{const k=new np(P.getProvider("app").getImmediate(),P.getProvider("installations-internal").getImmediate(),P.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",G=>function ic(P,k){return Oa.apply(this,arguments)}(k,G)),k},io=P=>{const k=P.getProvider("messaging").getImmediate();return{getToken:ie=>function Gc(P,k){return nc.apply(this,arguments)}(k,ie)}};function $d(){return Ll.apply(this,arguments)}function Ll(){return(Ll=(0,J.Z)(function*(){try{yield(0,Ie.eu)()}catch{return!1}return typeof window<"u"&&(0,Ie.hl)()&&(0,Ie.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function nr(){(0,me._registerComponent)(new Ue.wA("messaging",Gr,"PUBLIC")),(0,me._registerComponent)(new Ue.wA("messaging-internal",io,"PRIVATE")),(0,me.registerVersion)(Na,"0.9.16"),(0,me.registerVersion)(Na,"0.9.16","esm2017")}();const fu="analytics",pu="firebase_id",Ns="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",zc="https://www.googletagmanager.com/gtag/js",Sr=new Oe.Yd("@firebase/analytics");function sc(P){return Promise.all(P.map(k=>k.catch(G=>G)))}function Wc(P,k){const G=document.createElement("script");G.src=`${zc}?l=${P}&id=${k}`,G.async=!0,document.head.appendChild(G)}function $h(P,k,G,ie,ye,Ae){return Zc.apply(this,arguments)}function Zc(){return(Zc=(0,J.Z)(function*(P,k,G,ie,ye,Ae){const We=ie[ye];try{if(We)yield k[We];else{const xt=(yield sc(G)).find(on=>on.measurementId===ye);xt&&(yield k[xt.appId])}}catch(st){Sr.error(st)}P("config",ye,Ae)})).apply(this,arguments)}function Kc(P,k,G,ie,ye){return ti.apply(this,arguments)}function ti(){return(ti=(0,J.Z)(function*(P,k,G,ie,ye){try{let Ae=[];if(ye&&ye.send_to){let We=ye.send_to;Array.isArray(We)||(We=[We]);const st=yield sc(G);for(const xt of We){const on=st.find($t=>$t.measurementId===xt),Bt=on&&k[on.appId];if(!Bt){Ae=[];break}Ae.push(Bt)}}0===Ae.length&&(Ae=Object.values(k)),yield Promise.all(Ae),P("event",ie,ye||{})}catch(Ae){Sr.error(Ae)}})).apply(this,arguments)}function Po(){const P=window.document.getElementsByTagName("script");for(const k of Object.values(P))if(k.src&&k.src.includes(zc))return k;return null}const tt=new Ie.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),kt=new class ko{constructor(k={},G=1e3){this.throttleMetadata=k,this.intervalMillis=G}getThrottleMetadata(k){return this.throttleMetadata[k]}setThrottleMetadata(k,G){this.throttleMetadata[k]=G}deleteThrottleMetadata(k){delete this.throttleMetadata[k]}};function rn(P){return new Headers({Accept:"application/json","x-goog-api-key":P})}function vt(P){return zd.apply(this,arguments)}function zd(){return(zd=(0,J.Z)(function*(P){var k;const{appId:G,apiKey:ie}=P,ye={method:"GET",headers:rn(ie)},Ae=Ns.replace("{app-id}",G),We=yield fetch(Ae,ye);if(200!==We.status&&304!==We.status){let st="";try{const xt=yield We.json();null!==(k=xt.error)&&void 0!==k&&k.message&&(st=xt.error.message)}catch{}throw tt.create("config-fetch-failed",{httpStatus:We.status,responseMessage:st})}return We.json()})).apply(this,arguments)}function kr(P){return fn.apply(this,arguments)}function fn(){return(fn=(0,J.Z)(function*(P,k=kt,G){const{appId:ie,apiKey:ye,measurementId:Ae}=P.options;if(!ie)throw tt.create("no-app-id");if(!ye){if(Ae)return{measurementId:Ae,appId:ie};throw tt.create("no-api-key")}const We=k.getThrottleMetadata(ie)||{backoffCount:0,throttleEndTimeMillis:Date.now()},st=new Yc;return setTimeout((0,J.Z)(function*(){st.abort()}),void 0!==G?G:6e4),la({appId:ie,apiKey:ye,measurementId:Ae},We,st,k)})).apply(this,arguments)}function la(P,k,G){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,J.Z)(function*(P,{throttleEndTimeMillis:k,backoffCount:G},ie,ye=kt){var Ae,We;const{appId:st,measurementId:xt}=P;try{yield di(ie,k)}catch(on){if(xt)return Sr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${xt} provided in the "measurementId" field in the local Firebase config. [${null===(Ae=on)||void 0===Ae?void 0:Ae.message}]`),{appId:st,measurementId:xt};throw on}try{const on=yield vt(P);return ye.deleteThrottleMetadata(st),on}catch(on){const Bt=on;if(!bn(Bt)){if(ye.deleteThrottleMetadata(st),xt)return Sr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${xt} provided in the "measurementId" field in the local Firebase config. [${Bt?.message}]`),{appId:st,measurementId:xt};throw on}const $t=503===Number(null===(We=Bt?.customData)||void 0===We?void 0:We.httpStatus)?(0,Ie.$s)(G,ye.intervalMillis,30):(0,Ie.$s)(G,ye.intervalMillis),ar={throttleEndTimeMillis:Date.now()+$t,backoffCount:G+1};return ye.setThrottleMetadata(st,ar),Sr.debug(`Calling attemptFetch again in ${$t} millis`),la(P,ar,ie,ye)}})).apply(this,arguments)}function di(P,k){return new Promise((G,ie)=>{const ye=Math.max(k-Date.now(),0),Ae=setTimeout(G,ye);P.addEventListener(()=>{clearTimeout(Ae),ie(tt.create("fetch-throttle",{throttleEndTimeMillis:k}))})})}function bn(P){if(!(P instanceof Ie.ZR&&P.customData))return!1;const k=Number(P.customData.httpStatus);return 429===k||500===k||503===k||504===k}class Yc{constructor(){this.listeners=[]}addEventListener(k){this.listeners.push(k)}abort(){this.listeners.forEach(k=>k())}}let oo,ks;function da(){return(da=(0,J.Z)(function*(P,k,G,ie,ye){if(ye&&ye.global)P("event",G,ie);else{const Ae=yield k;P("event",G,Object.assign(Object.assign({},ie),{send_to:Ae}))}})).apply(this,arguments)}function fa(P){ks=P}function jl(P){oo=P}function _o(){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,J.Z)(function*(){var P;if(!(0,Ie.hl)())return Sr.warn(tt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,Ie.eu)()}catch(k){return Sr.warn(tt.create("indexeddb-unavailable",{errorInfo:null===(P=k)||void 0===P?void 0:P.toString()}).message),!1}return!0})).apply(this,arguments)}function yu(){return(yu=(0,J.Z)(function*(P,k,G,ie,ye,Ae,We){var st;const xt=kr(P);xt.then(Li=>{G[Li.measurementId]=Li.appId,P.options.measurementId&&Li.measurementId!==P.options.measurementId&&Sr.warn(`The measurement ID in the local Firebase config (${P.options.measurementId}) does not match the measurement ID fetched from the server (${Li.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Li=>Sr.error(Li)),k.push(xt);const on=_o().then(Li=>{if(Li)return ie.getId()}),[Bt,$t]=yield Promise.all([xt,on]);Po()||Wc(Ae,Bt.measurementId),ks&&(ye("consent","default",ks),fa(void 0)),ye("js",new Date);const ar=null!==(st=We?.config)&&void 0!==st?st:{};return ar.origin="firebase",ar.update=!0,null!=$t&&(ar[pu]=$t),ye("config",Bt.measurementId,ar),oo&&(ye("set",oo),jl(void 0)),Bt.measurementId})).apply(this,arguments)}class jt{constructor(k){this.app=k}_delete(){return delete ni[this.app.options.appId],Promise.resolve()}}let ni={},Ii=[];const Ls={};let ka,ga,ls="dataLayer",Fa=!1;function mg(P,k,G){!function Gh(){const P=[];if((0,Ie.ru)()&&P.push("This is a browser extension environment."),(0,Ie.zI)()||P.push("Cookies are not available."),P.length>0){const k=P.map((ie,ye)=>`(${ye+1}) ${ie}`).join(" "),G=tt.create("invalid-analytics-context",{errorInfo:k});Sr.warn(G.message)}}();const ie=P.options.appId;if(!ie)throw tt.create("no-app-id");if(!P.options.apiKey){if(!P.options.measurementId)throw tt.create("no-api-key");Sr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${P.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ni[ie])throw tt.create("already-exists",{id:ie});if(!Fa){!function ac(P){let k=[];Array.isArray(window[P])?k=window[P]:window[P]=k}(ls);const{wrappedGtag:Ae,gtagCore:We}=function et(P,k,G,ie,ye){let Ae=function(...We){window[ie].push(arguments)};return window[ye]&&"function"==typeof window[ye]&&(Ae=window[ye]),window[ye]=function ke(P,k,G,ie){function Ae(){return(Ae=(0,J.Z)(function*(We,st,xt){try{"event"===We?yield Kc(P,k,G,st,xt):"config"===We?yield $h(P,k,G,ie,st,xt):"consent"===We?P("consent","update",xt):P("set",st)}catch(on){Sr.error(on)}})).apply(this,arguments)}return function ye(We,st,xt){return Ae.apply(this,arguments)}}(Ae,P,k,G),{gtagCore:Ae,wrappedGtag:window[ye]}}(ni,Ii,Ls,ls,"gtag");ga=Ae,ka=We,Fa=!0}return ni[ie]=function pa(P,k,G,ie,ye,Ae,We){return yu.apply(this,arguments)}(P,Ii,Ls,k,ka,ls,G),new jt(P)}function Zd(){return wo.apply(this,arguments)}function wo(){return(wo=(0,J.Z)(function*(){if((0,Ie.ru)()||!(0,Ie.zI)()||!(0,Ie.hl)())return!1;try{return yield(0,Ie.eu)()}catch{return!1}})).apply(this,arguments)}const Et="@firebase/analytics";!function Ir(){(0,me._registerComponent)(new Ue.wA(fu,(k,{options:G})=>mg(k.getProvider("app").getImmediate(),k.getProvider("installations-internal").getImmediate(),G),"PUBLIC")),(0,me._registerComponent)(new Ue.wA("analytics-internal",function P(k){try{const G=k.getProvider(fu).getImmediate();return{logEvent:(ie,ye,Ae)=>function Un(P,k,G,ie){P=(0,Ie.m9)(P),function Wd(P,k,G,ie,ye){return da.apply(this,arguments)}(ga,ni[P.app.options.appId],k,G,ie).catch(ye=>Sr.error(ye))}(G,ie,ye,Ae)}}catch(G){throw tt.create("interop-component-reg-failed",{reason:G})}},"PRIVATE")),(0,me.registerVersion)(Et,"0.8.0"),(0,me.registerVersion)(Et,"0.8.0","esm2017")}();var ds=ee(4408),Pi=ee(7565);const Hl=new class La extends Pi.v{}(class uc extends ds.o{constructor(k,G){super(k,G),this.scheduler=k,this.work=G}schedule(k,G=0){return G>0?super.schedule(k,G):(this.delay=G,this.state=k,this.scheduler.flush(this),this)}execute(k,G){return G>0||this.closed?super.execute(k,G):this._execute(k,G)}requestAsyncId(k,G,ie=0){return null!=ie&&ie>0||null==ie&&this.delay>0?super.requestAsyncId(k,G,ie):k.flush(this)}});var vu=ee(4986),Va=ee(8505),Lo=ee(5363),Ua=ee(9468);const Mt=new y.GfV("7.4.1"),cc="__angularfire_symbol__analyticsIsSupportedValue",ki="__angularfire_symbol__analyticsIsSupported",lc="__angularfire_symbol__remoteConfigIsSupportedValue",hs="__angularfire_symbol__remoteConfigIsSupported",Ar="__angularfire_symbol__messagingIsSupportedValue",dc="__angularfire_symbol__messagingIsSupported";function Fi(P,k,G){if(k){if(1===k.length)return k[0];const Ae=k.filter(We=>We.app===G);if(1===Ae.length)return Ae[0]}return G.container.getProvider(P).getImmediate({optional:!0})}globalThis[ki]||(globalThis[ki]=Zd().then(P=>globalThis[cc]=P).catch(()=>globalThis[cc]=!1)),globalThis[dc]||(globalThis[dc]=$d().then(P=>globalThis[Ar]=P).catch(()=>globalThis[Ar]=!1)),globalThis[hs]||(globalThis[hs]=Zu().then(P=>globalThis[lc]=P).catch(()=>globalThis[lc]=!1));const ya=(P,k)=>{const G=k?[k]:(0,L.C6)(),ie=[];return G.forEach(ye=>{ye.container.getProvider(P).instances.forEach(We=>{ie.includes(We)||ie.push(We)})}),ie};function Vo(){}class Uo{constructor(k,G=Hl){this.zone=k,this.delegate=G}now(){return this.delegate.now()}schedule(k,G,ie){const ye=this.zone;return this.delegate.schedule(function(We){ye.runGuarded(()=>{k.apply(this,[We])})},G,ie)}}class Xc{constructor(k){this.zone=k,this.task=null}call(k,G){const ie=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Vo,{},Vo,Vo)),G.pipe((0,Va.b)({next:ie,complete:ie,error:ie})).subscribe(k).add(ie)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Vs=(()=>{class P{constructor(G){this.ngZone=G,this.outsideAngular=G.runOutsideAngular(()=>new Uo(Zone.current)),this.insideAngular=G.run(()=>new Uo(Zone.current,vu.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return P.\u0275fac=function(G){return new(G||P)(y.LFG(y.R0b))},P.\u0275prov=y.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"}),P})();function ao(){const P=globalThis.\u0275AngularFireScheduler;if(!P)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return P}function hi(P){return P.pipe((0,Lo.Q)(ao().outsideAngular))}function Bo(P){return ao(),function Lr(P){return function(G){return(G=G.lift(new Xc(P.ngZone))).pipe((0,Ua.R)(P.outsideAngular),(0,Lo.Q)(P.insideAngular))}}(ao())(P)}},2090:(Ut,qe,ee)=>{ee.d(qe,{$s:()=>To,BH:()=>be,G6:()=>rt,L:()=>Le,LL:()=>ot,Sg:()=>we,UG:()=>Pe,US:()=>Ue,ZB:()=>X,ZR:()=>Ee,b$:()=>ht,eu:()=>He,hl:()=>le,jU:()=>Me,m9:()=>ce,ne:()=>mr,pd:()=>cn,r3:()=>Xn,ru:()=>yt,tV:()=>ue,uI:()=>ut,vZ:()=>ci,w1:()=>Ce,xO:()=>ns,xb:()=>jn,z$:()=>Ne,zI:()=>ge,zd:()=>wn});const me=function(j){const q=[];let Z=0;for(let z=0;z<j.length;z++){let re=j.charCodeAt(z);re<128?q[Z++]=re:re<2048?(q[Z++]=re>>6|192,q[Z++]=63&re|128):55296==(64512&re)&&z+1<j.length&&56320==(64512&j.charCodeAt(z+1))?(re=65536+((1023&re)<<10)+(1023&j.charCodeAt(++z)),q[Z++]=re>>18|240,q[Z++]=re>>12&63|128,q[Z++]=re>>6&63|128,q[Z++]=63&re|128):(q[Z++]=re>>12|224,q[Z++]=re>>6&63|128,q[Z++]=63&re|128)}return q},Ue={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(j,q){if(!Array.isArray(j))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Z=q?this.byteToCharMapWebSafe_:this.byteToCharMap_,z=[];for(let re=0;re<j.length;re+=3){const xe=j[re],Ke=re+1<j.length,mt=Ke?j[re+1]:0,zt=re+2<j.length,gn=zt?j[re+2]:0;let an=(15&mt)<<2|gn>>6,er=63&gn;zt||(er=64,Ke||(an=64)),z.push(Z[xe>>2],Z[(3&xe)<<4|mt>>4],Z[an],Z[er])}return z.join("")},encodeString(j,q){return this.HAS_NATIVE_SUPPORT&&!q?btoa(j):this.encodeByteArray(me(j),q)},decodeString(j,q){return this.HAS_NATIVE_SUPPORT&&!q?atob(j):function(j){const q=[];let Z=0,z=0;for(;Z<j.length;){const re=j[Z++];if(re<128)q[z++]=String.fromCharCode(re);else if(re>191&&re<224){const xe=j[Z++];q[z++]=String.fromCharCode((31&re)<<6|63&xe)}else if(re>239&&re<365){const zt=((7&re)<<18|(63&j[Z++])<<12|(63&j[Z++])<<6|63&j[Z++])-65536;q[z++]=String.fromCharCode(55296+(zt>>10)),q[z++]=String.fromCharCode(56320+(1023&zt))}else{const xe=j[Z++],Ke=j[Z++];q[z++]=String.fromCharCode((15&re)<<12|(63&xe)<<6|63&Ke)}}return q.join("")}(this.decodeStringToByteArray(j,q))},decodeStringToByteArray(j,q){this.init_();const Z=q?this.charToByteMapWebSafe_:this.charToByteMap_,z=[];for(let re=0;re<j.length;){const xe=Z[j.charAt(re++)],mt=re<j.length?Z[j.charAt(re)]:0;++re;const gn=re<j.length?Z[j.charAt(re)]:64;++re;const Nt=re<j.length?Z[j.charAt(re)]:64;if(++re,null==xe||null==mt||null==gn||null==Nt)throw Error();z.push(xe<<2|mt>>4),64!==gn&&(z.push(mt<<4&240|gn>>2),64!==Nt&&z.push(gn<<6&192|Nt))}return z},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let j=0;j<this.ENCODED_VALS.length;j++)this.byteToCharMap_[j]=this.ENCODED_VALS.charAt(j),this.charToByteMap_[this.byteToCharMap_[j]]=j,this.byteToCharMapWebSafe_[j]=this.ENCODED_VALS_WEBSAFE.charAt(j),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[j]]=j,j>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(j)]=j,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(j)]=j)}}},Le=function(j){return function(j){const q=me(j);return Ue.encodeByteArray(q,!0)}(j).replace(/\./g,"")},ue=function(j){try{return Ue.decodeString(j,!0)}catch(q){console.error("base64Decode failed: ",q)}return null};function X(j,q){if(!(q instanceof Object))return q;switch(q.constructor){case Date:return new Date(q.getTime());case Object:void 0===j&&(j={});break;case Array:j=[];break;default:return q}for(const Z in q)!q.hasOwnProperty(Z)||!oe(Z)||(j[Z]=X(j[Z],q[Z]));return j}function oe(j){return"__proto__"!==j}class be{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((q,Z)=>{this.resolve=q,this.reject=Z})}wrapCallback(q){return(Z,z)=>{Z?this.reject(Z):this.resolve(z),"function"==typeof q&&(this.promise.catch(()=>{}),1===q.length?q(Z):q(Z,z))}}}function we(j,q){if(j.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const z=q||"demo-project",re=j.iat||0,xe=j.sub||j.user_id;if(!xe)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ke=Object.assign({iss:`https://securetoken.google.com/${z}`,aud:z,iat:re,exp:re+3600,auth_time:re,sub:xe,user_id:xe,firebase:{sign_in_provider:"custom",identities:{}}},j);return[Le(JSON.stringify({alg:"none",type:"JWT"})),Le(JSON.stringify(Ke)),""].join(".")}function Ne(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ut(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ne())}function Pe(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Me(){return"object"==typeof self&&self.self===self}function yt(){const j="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof j&&void 0!==j.id}function ht(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ce(){const j=Ne();return j.indexOf("MSIE ")>=0||j.indexOf("Trident/")>=0}function rt(){return!Pe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function le(){return"object"==typeof indexedDB}function He(){return new Promise((j,q)=>{try{let Z=!0;const z="validate-browser-context-for-indexeddb-analytics-module",re=self.indexedDB.open(z);re.onsuccess=()=>{re.result.close(),Z||self.indexedDB.deleteDatabase(z),j(!0)},re.onupgradeneeded=()=>{Z=!1},re.onerror=()=>{var xe;q((null===(xe=re.error)||void 0===xe?void 0:xe.message)||"")}}catch(Z){q(Z)}})}function ge(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Ee extends Error{constructor(q,Z,z){super(Z),this.code=q,this.customData=z,this.name="FirebaseError",Object.setPrototypeOf(this,Ee.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ot.prototype.create)}}class ot{constructor(q,Z,z){this.service=q,this.serviceName=Z,this.errors=z}create(q,...Z){const z=Z[0]||{},re=`${this.service}/${q}`,xe=this.errors[q],Ke=xe?function Qe(j,q){return j.replace(Vt,(Z,z)=>{const re=q[z];return null!=re?String(re):`<${z}?>`})}(xe,z):"Error";return new Ee(re,`${this.serviceName}: ${Ke} (${re}).`,z)}}const Vt=/\{\$([^}]+)}/g;function Xn(j,q){return Object.prototype.hasOwnProperty.call(j,q)}function jn(j){for(const q in j)if(Object.prototype.hasOwnProperty.call(j,q))return!1;return!0}function ci(j,q){if(j===q)return!0;const Z=Object.keys(j),z=Object.keys(q);for(const re of Z){if(!z.includes(re))return!1;const xe=j[re],Ke=q[re];if(Rr(xe)&&Rr(Ke)){if(!ci(xe,Ke))return!1}else if(xe!==Ke)return!1}for(const re of z)if(!Z.includes(re))return!1;return!0}function Rr(j){return null!==j&&"object"==typeof j}function ns(j){const q=[];for(const[Z,z]of Object.entries(j))Array.isArray(z)?z.forEach(re=>{q.push(encodeURIComponent(Z)+"="+encodeURIComponent(re))}):q.push(encodeURIComponent(Z)+"="+encodeURIComponent(z));return q.length?"&"+q.join("&"):""}function wn(j){const q={};return j.replace(/^\?/,"").split("&").forEach(z=>{if(z){const[re,xe]=z.split("=");q[decodeURIComponent(re)]=decodeURIComponent(xe)}}),q}function cn(j){const q=j.indexOf("?");if(!q)return"";const Z=j.indexOf("#",q);return j.substring(q,Z>0?Z:void 0)}function mr(j,q){const Z=new dt(j,q);return Z.subscribe.bind(Z)}class dt{constructor(q,Z){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Z,this.task.then(()=>{q(this)}).catch(z=>{this.error(z)})}next(q){this.forEachObserver(Z=>{Z.next(q)})}error(q){this.forEachObserver(Z=>{Z.error(q)}),this.close(q)}complete(){this.forEachObserver(q=>{q.complete()}),this.close()}subscribe(q,Z,z){let re;if(void 0===q&&void 0===Z&&void 0===z)throw new Error("Missing Observer.");re=function vr(j,q){if("object"!=typeof j||null===j)return!1;for(const Z of q)if(Z in j&&"function"==typeof j[Z])return!0;return!1}(q,["next","error","complete"])?q:{next:q,error:Z,complete:z},void 0===re.next&&(re.next=Mn),void 0===re.error&&(re.error=Mn),void 0===re.complete&&(re.complete=Mn);const xe=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?re.error(this.finalError):re.complete()}catch{}}),this.observers.push(re),xe}unsubscribeOne(q){void 0===this.observers||void 0===this.observers[q]||(delete this.observers[q],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(q){if(!this.finalized)for(let Z=0;Z<this.observers.length;Z++)this.sendOne(Z,q)}sendOne(q,Z){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[q])try{Z(this.observers[q])}catch(z){typeof console<"u"&&console.error&&console.error(z)}})}close(q){this.finalized||(this.finalized=!0,void 0!==q&&(this.finalError=q),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Mn(){}function To(j,q=1e3,Z=2){const z=q*Math.pow(Z,j),re=Math.round(.5*z*(Math.random()-.5)*2);return Math.min(144e5,z+re)}function ce(j){return j&&j._delegate?j._delegate:j}},6150:(Ut,qe,ee)=>{var y=ee(4650);let L=null;function J(){return L}const Oe=new y.OlP("DocumentToken");let Le=(()=>{class i{historyGo(t){throw new Error("Not implemented")}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=y.Yz7({token:i,factory:function(){return function ue(){return(0,y.LFG)(X)}()},providedIn:"platform"}),i})();const te=new y.OlP("Location Initialized");let X=(()=>{class i extends Le{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return J().getBaseHref(this._doc)}onPopState(t){const o=J().getGlobalEventTarget(this._doc,"window");return o.addEventListener("popstate",t,!1),()=>o.removeEventListener("popstate",t)}onHashChange(t){const o=J().getGlobalEventTarget(this._doc,"window");return o.addEventListener("hashchange",t,!1),()=>o.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,o,c){oe()?this._history.pushState(t,o,c):this.location.hash=c}replaceState(t,o,c){oe()?this._history.replaceState(t,o,c):this.location.hash=c}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return i.\u0275fac=function(t){return new(t||i)(y.LFG(Oe))},i.\u0275prov=y.Yz7({token:i,factory:function(){return function be(){return new X((0,y.LFG)(Oe))}()},providedIn:"platform"}),i})();function oe(){return!!window.history.pushState}function we(i,e){if(0==i.length)return e;if(0==e.length)return i;let t=0;return i.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?i+e.substring(1):1==t?i+e:i+"/"+e}function Ne(i){const e=i.match(/#|\?|$/),t=e&&e.index||i.length;return i.slice(0,t-("/"===i[t-1]?1:0))+i.slice(t)}function ut(i){return i&&"?"!==i[0]?"?"+i:i}let Pe=(()=>{class i{historyGo(t){throw new Error("Not implemented")}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=y.Yz7({token:i,factory:function(){return(0,y.f3M)(yt)},providedIn:"root"}),i})();const Me=new y.OlP("appBaseHref");let yt=(()=>{class i extends Pe{constructor(t,o){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=o??this._platformLocation.getBaseHrefFromDOM()??(0,y.f3M)(Oe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return we(this._baseHref,t)}path(t=!1){const o=this._platformLocation.pathname+ut(this._platformLocation.search),c=this._platformLocation.hash;return c&&t?`${o}${c}`:o}pushState(t,o,c,p){const v=this.prepareExternalUrl(c+ut(p));this._platformLocation.pushState(t,o,v)}replaceState(t,o,c,p){const v=this.prepareExternalUrl(c+ut(p));this._platformLocation.replaceState(t,o,v)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return i.\u0275fac=function(t){return new(t||i)(y.LFG(Le),y.LFG(Me,8))},i.\u0275prov=y.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),ht=(()=>{class i extends Pe{constructor(t,o){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=o&&(this._baseHref=o)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let o=this._platformLocation.hash;return null==o&&(o="#"),o.length>0?o.substring(1):o}prepareExternalUrl(t){const o=we(this._baseHref,t);return o.length>0?"#"+o:o}pushState(t,o,c,p){let v=this.prepareExternalUrl(c+ut(p));0==v.length&&(v=this._platformLocation.pathname),this._platformLocation.pushState(t,o,v)}replaceState(t,o,c,p){let v=this.prepareExternalUrl(c+ut(p));0==v.length&&(v=this._platformLocation.pathname),this._platformLocation.replaceState(t,o,v)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return i.\u0275fac=function(t){return new(t||i)(y.LFG(Le),y.LFG(Me,8))},i.\u0275prov=y.Yz7({token:i,factory:i.\u0275fac}),i})(),ze=(()=>{class i{constructor(t){this._subject=new y.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const o=this._locationStrategy.getBaseHref();this._baseHref=Ne(ft(o)),this._locationStrategy.onPopState(c=>{this._subject.emit({url:this.path(!0),pop:!0,state:c.state,type:c.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,o=""){return this.path()==this.normalize(t+ut(o))}normalize(t){return i.stripTrailingSlash(function je(i,e){return i&&e.startsWith(i)?e.substring(i.length):e}(this._baseHref,ft(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,o="",c=null){this._locationStrategy.pushState(c,"",t,o),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ut(o)),c)}replaceState(t,o="",c=null){this._locationStrategy.replaceState(c,"",t,o),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ut(o)),c)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(o=>{this._notifyUrlChangeListeners(o.url,o.state)})),()=>{const o=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(o,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",o){this._urlChangeListeners.forEach(c=>c(t,o))}subscribe(t,o,c){return this._subject.subscribe({next:t,error:o,complete:c})}}return i.normalizeQueryParams=ut,i.joinWithSlash=we,i.stripTrailingSlash=Ne,i.\u0275fac=function(t){return new(t||i)(y.LFG(Pe))},i.\u0275prov=y.Yz7({token:i,factory:function(){return function Ce(){return new ze((0,y.LFG)(Pe))}()},providedIn:"root"}),i})();function ft(i){return i.replace(/\/index.html$/,"")}function Fc(i,e){e=encodeURIComponent(e);for(const t of i.split(";")){const o=t.indexOf("="),[c,p]=-1==o?[t,""]:[t.slice(0,o),t.slice(o+1)];if(c.trim()===e)return decodeURIComponent(p)}return null}class Hu{constructor(e,t,o,c){this.$implicit=e,this.ngForOf=t,this.index=o,this.count=c}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let yo=(()=>{class i{constructor(t,o,c){this._viewContainer=t,this._template=o,this._differs=c,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const o=this._viewContainer;t.forEachOperation((c,p,v)=>{if(null==c.previousIndex)o.createEmbeddedView(this._template,new Hu(c.item,this._ngForOf,-1,-1),null===v?void 0:v);else if(null==v)o.remove(null===p?void 0:p);else if(null!==p){const C=o.get(p);o.move(C,v),ra(C,c)}});for(let c=0,p=o.length;c<p;c++){const C=o.get(c).context;C.index=c,C.count=p,C.ngForOf=this._ngForOf}t.forEachIdentityChange(c=>{ra(o.get(c.currentIndex),c)})}static ngTemplateContextGuard(t,o){return!0}}return i.\u0275fac=function(t){return new(t||i)(y.Y36(y.s_b),y.Y36(y.Rgc),y.Y36(y.ZZ4))},i.\u0275dir=y.lG2({type:i,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),i})();function ra(i,e){i.context.$implicit=e.item}let Nr=(()=>{class i{constructor(t,o){this._viewContainer=t,this._context=new su,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=o}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Hr("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Hr("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,o){return!0}}return i.\u0275fac=function(t){return new(t||i)(y.Y36(y.s_b),y.Y36(y.Rgc))},i.\u0275dir=y.lG2({type:i,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),i})();class su{constructor(){this.$implicit=null,this.ngIf=null}}function Hr(i,e){if(e&&!e.createEmbeddedView)throw new Error(`${i} must be a TemplateRef, but received '${(0,y.AaK)(e)}'.`)}let Aa=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=y.oAB({type:i}),i.\u0275inj=y.cJS({}),i})();function $r(i){return"server"===i}let Ml=(()=>{class i{}return i.\u0275prov=(0,y.Yz7)({token:i,providedIn:"root",factory:()=>new ep((0,y.LFG)(Oe),window)}),i})();class ep{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function no(i,e){const t=i.getElementById(e)||i.getElementsByName(e)[0];if(t)return t;if("function"==typeof i.createTreeWalker&&i.body&&(i.body.createShadowRoot||i.body.attachShadow)){const o=i.createTreeWalker(i.body,NodeFilter.SHOW_ELEMENT);let c=o.currentNode;for(;c;){const p=c.shadowRoot;if(p){const v=p.getElementById(e)||p.querySelector(`[name="${e}"]`);if(v)return v}c=o.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),o=t.left+this.window.pageXOffset,c=t.top+this.window.pageYOffset,p=this.offset();this.window.scrollTo(o-p[0],c-p[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Ro(this.window.history)||Ro(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Ro(i){return Object.getOwnPropertyDescriptor(i,"scrollRestoration")}class ro{}class Oa extends class ic extends class Ue{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function Ie(i){L||(L=i)}(new Oa)}onAndCancel(e,t,o){return e.addEventListener(t,o,!1),()=>{e.removeEventListener(t,o,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function oc(){return Na=Na||document.querySelector("base"),Na?Na.getAttribute("href"):null}();return null==t?null:function io(i){Gr=Gr||document.createElement("a"),Gr.setAttribute("href",i);const e=Gr.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Na=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Fc(document.cookie,e)}}let Gr,Na=null;const nr=new y.OlP("TRANSITION_ID"),Ll=[{provide:y.ip1,useFactory:function $d(i,e,t){return()=>{t.get(y.CZH).donePromise.then(()=>{const o=J(),c=e.querySelectorAll(`style[ng-transition="${i}"]`);for(let p=0;p<c.length;p++)o.remove(c[p])})}},deps:[nr,Oe,y.zs3],multi:!0}];let Vl=(()=>{class i{build(){return new XMLHttpRequest}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=y.Yz7({token:i,factory:i.\u0275fac}),i})();const qc=new y.OlP("EventManagerPlugins");let Gd=(()=>{class i{constructor(t,o){this._zone=o,this._eventNameToPlugin=new Map,t.forEach(c=>c.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,o,c){return this._findPluginFor(o).addEventListener(t,o,c)}addGlobalEventListener(t,o,c){return this._findPluginFor(o).addGlobalEventListener(t,o,c)}getZone(){return this._zone}_findPluginFor(t){const o=this._eventNameToPlugin.get(t);if(o)return o;const c=this._plugins;for(let p=0;p<c.length;p++){const v=c[p];if(v.supports(t))return this._eventNameToPlugin.set(t,v),v}throw new Error(`No event manager plugin found for event ${t}`)}}return i.\u0275fac=function(t){return new(t||i)(y.LFG(qc),y.LFG(y.R0b))},i.\u0275prov=y.Yz7({token:i,factory:i.\u0275fac}),i})();class Ul{constructor(e){this._doc=e}addGlobalEventListener(e,t,o){const c=J().getGlobalEventTarget(this._doc,e);if(!c)throw new Error(`Unsupported event target ${c} for event ${t}`);return this.addEventListener(c,t,o)}}let sa=(()=>{class i{constructor(){this._stylesSet=new Set}addStyles(t){const o=new Set;t.forEach(c=>{this._stylesSet.has(c)||(this._stylesSet.add(c),o.add(c))}),this.onStylesAdded(o)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=y.Yz7({token:i,factory:i.\u0275fac}),i})(),li=(()=>{class i extends sa{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,o,c){t.forEach(p=>{const v=this._doc.createElement("style");v.textContent=p,c.push(o.appendChild(v))})}addHost(t){const o=[];this._addStylesToHost(this._stylesSet,t,o),this._hostNodes.set(t,o)}removeHost(t){const o=this._hostNodes.get(t);o&&o.forEach(qd),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((o,c)=>{this._addStylesToHost(t,c,o)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(qd))}}return i.\u0275fac=function(t){return new(t||i)(y.LFG(Oe))},i.\u0275prov=y.Yz7({token:i,factory:i.\u0275fac}),i})();function qd(i){J().remove(i)}const fu={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},pu=/%COMP%/g;function Wc(i,e,t){for(let o=0;o<e.length;o++){let c=e[o];Array.isArray(c)?Wc(i,c,t):(c=c.replace(pu,i),t.push(c))}return t}function ac(i){return e=>{if("__ngUnwrap__"===e)return i;!1===i(e)&&(e.preventDefault(),e.returnValue=!1)}}let Zc=(()=>{class i{constructor(t,o,c){this.eventManager=t,this.sharedStylesHost=o,this.appId=c,this.rendererByCompId=new Map,this.defaultRenderer=new Kc(t)}createRenderer(t,o){if(!t||!o)return this.defaultRenderer;switch(o.encapsulation){case y.ifc.Emulated:{let c=this.rendererByCompId.get(o.id);return c||(c=new Po(this.eventManager,this.sharedStylesHost,o,this.appId),this.rendererByCompId.set(o.id,c)),c.applyToHost(t),c}case 1:case y.ifc.ShadowDom:return new Bl(this.eventManager,this.sharedStylesHost,t,o);default:if(!this.rendererByCompId.has(o.id)){const c=Wc(o.id,o.styles,[]);this.sharedStylesHost.addStyles(c),this.rendererByCompId.set(o.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return i.\u0275fac=function(t){return new(t||i)(y.LFG(Gd),y.LFG(li),y.LFG(y.AFp))},i.\u0275prov=y.Yz7({token:i,factory:i.\u0275fac}),i})();class Kc{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(fu[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(et(e)?e.content:e).appendChild(t)}insertBefore(e,t,o){e&&(et(e)?e.content:e).insertBefore(t,o)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let o="string"==typeof e?document.querySelector(e):e;if(!o)throw new Error(`The selector "${e}" did not match any elements`);return t||(o.textContent=""),o}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,o,c){if(c){t=c+":"+t;const p=fu[c];p?e.setAttributeNS(p,t,o):e.setAttribute(t,o)}else e.setAttribute(t,o)}removeAttribute(e,t,o){if(o){const c=fu[o];c?e.removeAttributeNS(c,t):e.removeAttribute(`${o}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,o,c){c&(y.JOm.DashCase|y.JOm.Important)?e.style.setProperty(t,o,c&y.JOm.Important?"important":""):e.style[t]=o}removeStyle(e,t,o){o&y.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,o){e[t]=o}setValue(e,t){e.nodeValue=t}listen(e,t,o){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,ac(o)):this.eventManager.addEventListener(e,t,ac(o))}}function et(i){return"TEMPLATE"===i.tagName&&void 0!==i.content}class Po extends Kc{constructor(e,t,o,c){super(e),this.component=o;const p=Wc(c+"-"+o.id,o.styles,[]);t.addStyles(p),this.contentAttr=function Sr(i){return"_ngcontent-%COMP%".replace(pu,i)}(c+"-"+o.id),this.hostAttr=function sc(i){return"_nghost-%COMP%".replace(pu,i)}(c+"-"+o.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const o=super.createElement(e,t);return super.setAttribute(o,this.contentAttr,""),o}}class Bl extends Kc{constructor(e,t,o,c){super(e),this.sharedStylesHost=t,this.hostEl=o,this.shadowRoot=o.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const p=Wc(c.id,c.styles,[]);for(let v=0;v<p.length;v++){const C=document.createElement("style");C.textContent=p[v],this.shadowRoot.appendChild(C)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,o){return super.insertBefore(this.nodeOrShadowRoot(e),t,o)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let tt=(()=>{class i extends Ul{constructor(t){super(t)}supports(t){return!0}addEventListener(t,o,c){return t.addEventListener(o,c,!1),()=>this.removeEventListener(t,o,c)}removeEventListener(t,o,c){return t.removeEventListener(o,c)}}return i.\u0275fac=function(t){return new(t||i)(y.LFG(Oe))},i.\u0275prov=y.Yz7({token:i,factory:i.\u0275fac}),i})();const fr=["alt","control","meta","shift"],ca={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ko={alt:i=>i.altKey,control:i=>i.ctrlKey,meta:i=>i.metaKey,shift:i=>i.shiftKey};let kt=(()=>{class i extends Ul{constructor(t){super(t)}supports(t){return null!=i.parseEventName(t)}addEventListener(t,o,c){const p=i.parseEventName(o),v=i.eventCallback(p.fullKey,c,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>J().onAndCancel(t,p.domEventName,v))}static parseEventName(t){const o=t.toLowerCase().split("."),c=o.shift();if(0===o.length||"keydown"!==c&&"keyup"!==c)return null;const p=i._normalizeKey(o.pop());let v="",C=o.indexOf("code");if(C>-1&&(o.splice(C,1),v="code."),fr.forEach(N=>{const B=o.indexOf(N);B>-1&&(o.splice(B,1),v+=N+".")}),v+=p,0!=o.length||0===p.length)return null;const A={};return A.domEventName=c,A.fullKey=v,A}static matchEventFullKeyCode(t,o){let c=ca[t.key]||t.key,p="";return o.indexOf("code.")>-1&&(c=t.code,p="code."),!(null==c||!c)&&(c=c.toLowerCase()," "===c?c="space":"."===c&&(c="dot"),fr.forEach(v=>{v!==c&&(0,ko[v])(t)&&(p+=v+".")}),p+=c,p===o)}static eventCallback(t,o,c){return p=>{i.matchEventFullKeyCode(p,t)&&c.runGuarded(()=>o(p))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return i.\u0275fac=function(t){return new(t||i)(y.LFG(Oe))},i.\u0275prov=y.Yz7({token:i,factory:i.\u0275fac}),i})();const Yc=(0,y.eFA)(y._c5,"browser",[{provide:y.Lbi,useValue:"browser"},{provide:y.g9A,useValue:function la(){Oa.makeCurrent()},multi:!0},{provide:Oe,useFactory:function di(){return(0,y.RDi)(document),document},deps:[]}]),oo=new y.OlP(""),Wd=[{provide:y.rWj,useClass:class hu{addToWindow(e){y.dqk.getAngularTestability=(o,c=!0)=>{const p=e.findTestabilityInTree(o,c);if(null==p)throw new Error("Could not find testability for element.");return p},y.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),y.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),y.dqk.frameworkStabilizers||(y.dqk.frameworkStabilizers=[]),y.dqk.frameworkStabilizers.push(o=>{const c=y.dqk.getAllAngularTestabilities();let p=c.length,v=!1;const C=function(A){v=v||A,p--,0==p&&o(v)};c.forEach(function(A){A.whenStable(C)})})}findTestabilityInTree(e,t,o){return null==t?null:e.getTestability(t)??(o?J().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:y.lri,useClass:y.dDg,deps:[y.R0b,y.eoX,y.rWj]},{provide:y.dDg,useClass:y.dDg,deps:[y.R0b,y.eoX,y.rWj]}],da=[{provide:y.zSh,useValue:"root"},{provide:y.qLn,useFactory:function Pa(){return new y.qLn},deps:[]},{provide:qc,useClass:tt,multi:!0,deps:[Oe,y.R0b,y.Lbi]},{provide:qc,useClass:kt,multi:!0,deps:[Oe]},{provide:Zc,useClass:Zc,deps:[Gd,li,y.AFp]},{provide:y.FYo,useExisting:Zc},{provide:sa,useExisting:li},{provide:li,useClass:li,deps:[Oe]},{provide:Gd,useClass:Gd,deps:[qc,y.R0b]},{provide:ro,useClass:Vl,deps:[]},[]];let Vn=(()=>{class i{constructor(t){}static withServerTransition(t){return{ngModule:i,providers:[{provide:y.AFp,useValue:t.appId},{provide:nr,useExisting:y.AFp},Ll]}}}return i.\u0275fac=function(t){return new(t||i)(y.LFG(oo,12))},i.\u0275mod=y.oAB({type:i}),i.\u0275inj=y.cJS({providers:[...da,...Wd],imports:[Aa,y.hGG]}),i})(),ha=(()=>{class i{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return i.\u0275fac=function(t){return new(t||i)(y.LFG(Oe))},i.\u0275prov=y.Yz7({token:i,factory:function(t){let o=null;return o=t?new t:function qr(){return new ha((0,y.LFG)(Oe))}(),o},providedIn:"root"}),i})();typeof window<"u"&&window;var Un=ee(8996),so=ee(7669);function Et(...i){const e=(0,so.yG)(i);return(0,Un.D)(i,e)}var Fo=ee(7579);class Ir extends Fo.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:o}=this;if(e)throw t;return this._throwIfClosed(),o}next(e){super.next(this._value=e)}}const uc=(0,ee(3888).d)(i=>function(){i(this),this.name="EmptyError",this.message="no elements in sequence"});var Pi=ee(9751);const{isArray:La}=Array,{getPrototypeOf:Hl,prototype:vg,keys:vu}=Object;function Va(i){if(1===i.length){const e=i[0];if(La(e))return{args:e,keys:null};if(function Lo(i){return i&&"object"==typeof i&&Hl(i)===vg}(e)){const t=vu(e);return{args:t.map(o=>e[o]),keys:t}}}return{args:i,keys:null}}var Ua=ee(4671),Mt=ee(4004);const{isArray:cc}=Array;function lc(i){return(0,Mt.U)(e=>function ki(i,e){return cc(e)?i(...e):i(e)}(i,e))}function hs(i,e){return i.reduce((t,o,c)=>(t[o]=e[c],t),{})}var Ar=ee(5403),dc=ee(9672);function Ba(...i){const e=(0,so.yG)(i),t=(0,so.jO)(i),{args:o,keys:c}=Va(i);if(0===o.length)return(0,Un.D)([],e);const p=new Pi.y(function zh(i,e,t=Ua.y){return o=>{Jc(e,()=>{const{length:c}=i,p=new Array(c);let v=c,C=c;for(let A=0;A<c;A++)Jc(e,()=>{const N=(0,Un.D)(i[A],e);let B=!1;N.subscribe((0,Ar.x)(o,W=>{p[A]=W,B||(B=!0,C--),C||o.next(t(p.slice()))},()=>{--v||o.complete()}))},o)},o)}}(o,e,c?v=>hs(c,v):Ua.y));return t?p.pipe(lc(t)):p}function Jc(i,e,t){i?(0,dc.f)(t,i,e):e()}var ma=ee(8189);function ya(...i){return function Fi(){return(0,ma.J)(1)}()((0,Un.D)(i,(0,so.yG)(i)))}var Vo=ee(8421);function Uo(i){return new Pi.y(e=>{(0,Vo.Xf)(i()).subscribe(e)})}var Xc=ee(9635),Vs=ee(576);function ao(i,e){const t=(0,Vs.m)(i)?i:()=>i,o=c=>c.error(t());return new Pi.y(e?c=>e.schedule(o,0,c):o)}var va=ee(515),fs=ee(727),hi=ee(4482);function _a(){return(0,hi.e)((i,e)=>{let t=null;i._refCount++;const o=(0,Ar.x)(e,void 0,void 0,void 0,()=>{if(!i||i._refCount<=0||0<--i._refCount)return void(t=null);const c=i._connection,p=t;t=null,c&&(!p||c===p)&&c.unsubscribe(),e.unsubscribe()});i.subscribe(o),o.closed||(t=i.connect())})}class Bo extends Pi.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,hi.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new fs.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Ar.x)(t,void 0,()=>{this._teardown(),t.complete()},o=>{this._teardown(),t.error(o)},()=>this._teardown()))),e.closed&&(this._connection=null,e=fs.w0.EMPTY)}return e}refCount(){return _a()(this)}}function Lr(i,e){return(0,hi.e)((t,o)=>{let c=null,p=0,v=!1;const C=()=>v&&!c&&o.complete();t.subscribe((0,Ar.x)(o,A=>{c?.unsubscribe();let N=0;const B=p++;(0,Vo.Xf)(i(A,B)).subscribe(c=(0,Ar.x)(o,W=>o.next(e?e(A,W,B,N++):W),()=>{c=null,C()}))},()=>{v=!0,C()}))})}function pr(i){return i<=0?()=>va.E:(0,hi.e)((e,t)=>{let o=0;e.subscribe((0,Ar.x)(t,c=>{++o<=i&&(t.next(c),i<=o&&t.complete())}))})}function el(...i){const e=(0,so.yG)(i);return(0,hi.e)((t,o)=>{(e?ya(i,t,e):ya(i,t)).subscribe(o)})}function P(i,e){return(0,hi.e)((t,o)=>{let c=0;t.subscribe((0,Ar.x)(o,p=>i.call(e,p,c++)&&o.next(p)))})}var k=ee(5577);function G(i){return(0,hi.e)((e,t)=>{let o=!1;e.subscribe((0,Ar.x)(t,c=>{o=!0,t.next(c)},()=>{o||t.next(i),t.complete()}))})}function ie(i=ye){return(0,hi.e)((e,t)=>{let o=!1;e.subscribe((0,Ar.x)(t,c=>{o=!0,t.next(c)},()=>o?t.complete():t.error(i())))})}function ye(){return new uc}function Ae(i,e){const t=arguments.length>=2;return o=>o.pipe(i?P((c,p)=>i(c,p,o)):Ua.y,pr(1),t?G(e):ie(()=>new uc))}function We(i,e){return(0,Vs.m)(e)?(0,k.z)(i,e,1):(0,k.z)(i,1)}var st=ee(8505);function xt(i){return(0,hi.e)((e,t)=>{let p,o=null,c=!1;o=e.subscribe((0,Ar.x)(t,void 0,void 0,v=>{p=(0,Vo.Xf)(i(v,xt(i)(e))),o?(o.unsubscribe(),o=null,p.subscribe(t)):c=!0})),c&&(o.unsubscribe(),o=null,p.subscribe(t))})}function on(i,e,t,o,c){return(p,v)=>{let C=t,A=e,N=0;p.subscribe((0,Ar.x)(v,B=>{const W=N++;A=C?i(A,B,W):(C=!0,B),o&&v.next(A)},c&&(()=>{C&&v.next(A),v.complete()})))}}function Bt(i,e){return(0,hi.e)(on(i,e,arguments.length>=2,!0))}function $t(i){return i<=0?()=>va.E:(0,hi.e)((e,t)=>{let o=[];e.subscribe((0,Ar.x)(t,c=>{o.push(c),i<o.length&&o.shift()},()=>{for(const c of o)t.next(c);t.complete()},void 0,()=>{o=null}))})}function ar(i,e){const t=arguments.length>=2;return o=>o.pipe(i?P((c,p)=>i(c,p,o)):Ua.y,$t(1),t?G(e):ie(()=>new uc))}function Ha(i){return(0,hi.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(i)}})}const pn="primary",ps=Symbol("RouteTitle");class jo{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function ii(i){return new jo(i)}function _u(i,e,t){const o=t.path.split("/");if(o.length>i.length||"full"===t.pathMatch&&(e.hasChildren()||o.length<i.length))return null;const c={};for(let p=0;p<o.length;p++){const v=o[p],C=i[p];if(v.startsWith(":"))c[v.substring(1)]=C;else if(v!==C.path)return null}return{consumed:i.slice(0,o.length),posParams:c}}function Ho(i,e){const t=i?Object.keys(i):void 0,o=e?Object.keys(e):void 0;if(!t||!o||t.length!=o.length)return!1;let c;for(let p=0;p<t.length;p++)if(c=t[p],!zr(i[c],e[c]))return!1;return!0}function zr(i,e){if(Array.isArray(i)&&Array.isArray(e)){if(i.length!==e.length)return!1;const t=[...i].sort(),o=[...e].sort();return t.every((c,p)=>o[p]===c)}return i===e}function Bn(i){return Array.prototype.concat.apply([],i)}function $l(i){return i.length>0?i[i.length-1]:null}function fi(i,e){for(const t in i)i.hasOwnProperty(t)&&e(i[t],t)}function gs(i){return(0,y.CqO)(i)?i:(0,y.QGY)(i)?(0,Un.D)(Promise.resolve(i)):Et(i)}const op={exact:function _g(i,e,t){if(!Us(i.segments,e.segments)||!wu(i.segments,e.segments,t)||i.numberOfChildren!==e.numberOfChildren)return!1;for(const o in e.children)if(!i.children[o]||!_g(i.children[o],e.children[o],t))return!1;return!0},subset:tl},Ga={exact:function Zh(i,e){return Ho(i,e)},subset:function ms(i,e){return Object.keys(e).length<=Object.keys(i).length&&Object.keys(e).every(t=>zr(i[t],e[t]))},ignored:()=>!0};function Ei(i,e,t){return op[t.paths](i.root,e.root,t.matrixParams)&&Ga[t.queryParams](i.queryParams,e.queryParams)&&!("exact"===t.fragment&&i.fragment!==e.fragment)}function tl(i,e,t){return Gl(i,e,e.segments,t)}function Gl(i,e,t,o){if(i.segments.length>t.length){const c=i.segments.slice(0,t.length);return!(!Us(c,t)||e.hasChildren()||!wu(c,t,o))}if(i.segments.length===t.length){if(!Us(i.segments,t)||!wu(i.segments,t,o))return!1;for(const c in e.children)if(!i.children[c]||!tl(i.children[c],e.children[c],o))return!1;return!0}{const c=t.slice(0,i.segments.length),p=t.slice(i.segments.length);return!!(Us(i.segments,c)&&wu(i.segments,c,o)&&i.children[pn])&&Gl(i.children[pn],e,p,o)}}function wu(i,e,t){return e.every((o,c)=>Ga[t](i[c].parameters,o.parameters))}class hc{constructor(e,t,o){this.root=e,this.queryParams=t,this.fragment=o}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ii(this.queryParams)),this._queryParamMap}toString(){return Qd.serialize(this)}}class Rn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,fi(t,(o,c)=>o.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Jd(this)}}class qn{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=ii(this.parameters)),this._parameterMap}toString(){return zl(this)}}function Us(i,e){return i.length===e.length&&i.every((t,o)=>t.path===e[o].path)}let Yd=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=y.Yz7({token:i,factory:function(){return new nl},providedIn:"root"}),i})();class nl{parse(e){const t=new Ig(e);return new hc(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${fc(e.root,!0)}`,o=function o_(i){const e=Object.keys(i).map(t=>{const o=i[t];return Array.isArray(o)?o.map(c=>`${ql(t)}=${ql(c)}`).join("&"):`${ql(t)}=${ql(o)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${o}${"string"==typeof e.fragment?`#${function bg(i){return encodeURI(i)}(e.fragment)}`:""}`}}const Qd=new nl;function Jd(i){return i.segments.map(e=>zl(e)).join("/")}function fc(i,e){if(!i.hasChildren())return Jd(i);if(e){const t=i.children[pn]?fc(i.children[pn],!1):"",o=[];return fi(i.children,(c,p)=>{p!==pn&&o.push(`${p}:${fc(c,!1)}`)}),o.length>0?`${t}(${o.join("//")})`:t}{const t=function Kh(i,e){let t=[];return fi(i.children,(o,c)=>{c===pn&&(t=t.concat(e(o,c)))}),fi(i.children,(o,c)=>{c!==pn&&(t=t.concat(e(o,c)))}),t}(i,(o,c)=>c===pn?[fc(i.children[pn],!1)]:[`${c}:${fc(o,!1)}`]);return 1===Object.keys(i.children).length&&null!=i.children[pn]?`${Jd(i)}/${t[0]}`:`${Jd(i)}/(${t.join("//")})`}}function wg(i){return encodeURIComponent(i).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ql(i){return wg(i).replace(/%3B/gi,";")}function Bs(i){return wg(i).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function pc(i){return decodeURIComponent(i)}function sp(i){return pc(i.replace(/\+/g,"%20"))}function zl(i){return`${Bs(i.path)}${function Qm(i){return Object.keys(i).map(e=>`;${Bs(e)}=${Bs(i[e])}`).join("")}(i.parameters)}`}const Ki=/^[^\/()?;=#]+/;function Yh(i){const e=i.match(Ki);return e?e[0]:""}const bu=/^[^=?&#]+/,qa=/^[^&#]+/;class Ig{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Rn([],{}):new Rn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let o={};return this.peekStartsWith("(")&&(o=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(o[pn]=new Rn(e,t)),o}parseSegment(){const e=Yh(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new y.vHH(4009,!1);return this.capture(e),new qn(pc(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Yh(this.remaining);if(!t)return;this.capture(t);let o="";if(this.consumeOptional("=")){const c=Yh(this.remaining);c&&(o=c,this.capture(o))}e[pc(t)]=pc(o)}parseQueryParam(e){const t=function Xd(i){const e=i.match(bu);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let o="";if(this.consumeOptional("=")){const v=function eh(i){const e=i.match(qa);return e?e[0]:""}(this.remaining);v&&(o=v,this.capture(o))}const c=sp(t),p=sp(o);if(e.hasOwnProperty(c)){let v=e[c];Array.isArray(v)||(v=[v],e[c]=v),v.push(p)}else e[c]=p}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const o=Yh(this.remaining),c=this.remaining[o.length];if("/"!==c&&")"!==c&&";"!==c)throw new y.vHH(4010,!1);let p;o.indexOf(":")>-1?(p=o.slice(0,o.indexOf(":")),this.capture(p),this.capture(":")):e&&(p=pn);const v=this.parseChildren();t[p]=1===Object.keys(v).length?v[pn]:new Rn([],v),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new y.vHH(4011,!1)}}function js(i){return i.segments.length>0?new Rn([],{[pn]:i}):i}function Wl(i){const e={};for(const o of Object.keys(i.children)){const p=Wl(i.children[o]);(p.segments.length>0||p.hasChildren())&&(e[o]=p)}return function wa(i){if(1===i.numberOfChildren&&i.children[pn]){const e=i.children[pn];return new Rn(i.segments.concat(e.segments),e.children)}return i}(new Rn(i.segments,e))}function $o(i){return i instanceof hc}function Xm(i,e,t,o,c){if(0===t.length)return Iu(e.root,e.root,e.root,o,c);const p=function Zl(i){if("string"==typeof i[0]&&1===i.length&&"/"===i[0])return new ap(!0,0,i);let e=0,t=!1;const o=i.reduce((c,p,v)=>{if("object"==typeof p&&null!=p){if(p.outlets){const C={};return fi(p.outlets,(A,N)=>{C[N]="string"==typeof A?A.split("/"):A}),[...c,{outlets:C}]}if(p.segmentPath)return[...c,p.segmentPath]}return"string"!=typeof p?[...c,p]:0===v?(p.split("/").forEach((C,A)=>{0==A&&"."===C||(0==A&&""===C?t=!0:".."===C?e++:""!=C&&c.push(C))}),c):[...c,p]},[]);return new ap(t,e,o)}(t);return p.toRoot()?Iu(e.root,e.root,new Rn([],{}),o,c):function v(A){const N=function cp(i,e,t,o){if(i.isAbsolute)return new Hs(e.root,!0,0);if(-1===o)return new Hs(t,t===e.root,0);return function Cg(i,e,t){let o=i,c=e,p=t;for(;p>c;){if(p-=c,o=o.parent,!o)throw new y.vHH(4005,!1);c=o.segments.length}return new Hs(o,!1,c-p)}(t,o+(nh(i.commands[0])?0:1),i.numberOfDoubleDots)}(p,e,i.snapshot?._urlSegment,A),B=N.processChildren?mc(N.segmentGroup,N.index,p.commands):Yi(N.segmentGroup,N.index,p.commands);return Iu(e.root,N.segmentGroup,B,o,c)}(i.snapshot?._lastPathIndex)}function nh(i){return"object"==typeof i&&null!=i&&!i.outlets&&!i.segmentPath}function gc(i){return"object"==typeof i&&null!=i&&i.outlets}function Iu(i,e,t,o,c){let v,p={};o&&fi(o,(A,N)=>{p[N]=Array.isArray(A)?A.map(B=>`${B}`):`${A}`}),v=i===e?t:rh(i,e,t);const C=js(Wl(v));return new hc(C,p,c)}function rh(i,e,t){const o={};return fi(i.children,(c,p)=>{o[p]=c===e?t:rh(c,e,t)}),new Rn(i.segments,o)}class ap{constructor(e,t,o){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=o,e&&o.length>0&&nh(o[0]))throw new y.vHH(4003,!1);const c=o.find(gc);if(c&&c!==$l(o))throw new y.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Hs{constructor(e,t,o){this.segmentGroup=e,this.processChildren=t,this.index=o}}function Yi(i,e,t){if(i||(i=new Rn([],{})),0===i.segments.length&&i.hasChildren())return mc(i,e,t);const o=function Tg(i,e,t){let o=0,c=e;const p={match:!1,pathIndex:0,commandIndex:0};for(;c<i.segments.length;){if(o>=t.length)return p;const v=i.segments[c],C=t[o];if(gc(C))break;const A=`${C}`,N=o<t.length-1?t[o+1]:null;if(c>0&&void 0===A)break;if(A&&N&&"object"==typeof N&&void 0===N.outlets){if(!Eu(A,N,v))return p;o+=2}else{if(!Eu(A,{},v))return p;o++}c++}return{match:!0,pathIndex:c,commandIndex:o}}(i,e,t),c=t.slice(o.commandIndex);if(o.match&&o.pathIndex<i.segments.length){const p=new Rn(i.segments.slice(0,o.pathIndex),{});return p.children[pn]=new Rn(i.segments.slice(o.pathIndex),i.children),mc(p,0,c)}return o.match&&0===c.length?new Rn(i.segments,{}):o.match&&!i.hasChildren()?ys(i,e,t):o.match?mc(i,0,c):ys(i,e,t)}function mc(i,e,t){if(0===t.length)return new Rn(i.segments,{});{const o=function Dg(i){return gc(i[0])?i[0].outlets:{[pn]:i}}(t),c={};return fi(o,(p,v)=>{"string"==typeof p&&(p=[p]),null!==p&&(c[v]=Yi(i.children[v],e,p))}),fi(i.children,(p,v)=>{void 0===o[v]&&(c[v]=p)}),new Rn(i.segments,c)}}function ys(i,e,t){const o=i.segments.slice(0,e);let c=0;for(;c<t.length;){const p=t[c];if(gc(p)){const A=Sg(p.outlets);return new Rn(o,A)}if(0===c&&nh(t[0])){o.push(new qn(i.segments[e].path,$n(t[0]))),c++;continue}const v=gc(p)?p.outlets[pn]:`${p}`,C=c<t.length-1?t[c+1]:null;v&&C&&nh(C)?(o.push(new qn(v,$n(C))),c+=2):(o.push(new qn(v,{})),c++)}return new Rn(o,{})}function Sg(i){const e={};return fi(i,(t,o)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[o]=ys(new Rn([],{}),0,t))}),e}function $n(i){const e={};return fi(i,(t,o)=>e[o]=`${t}`),e}function Eu(i,e,t){return i==t.path&&Ho(e,t.parameters)}class Gn{constructor(e,t){this.id=e,this.url=t}}class pi extends Gn{constructor(e,t,o="imperative",c=null){super(e,t),this.type=0,this.navigationTrigger=o,this.restoredState=c}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class $s extends Gn{constructor(e,t,o){super(e,t),this.urlAfterRedirects=o,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Qh extends Gn{constructor(e,t,o,c){super(e,t),this.reason=o,this.code=c,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class xr extends Gn{constructor(e,t,o,c){super(e,t),this.error=o,this.target=c,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class za extends Gn{constructor(e,t,o,c){super(e,t),this.urlAfterRedirects=o,this.state=c,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Go extends Gn{constructor(e,t,o,c){super(e,t),this.urlAfterRedirects=o,this.state=c,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Qi extends Gn{constructor(e,t,o,c,p){super(e,t),this.urlAfterRedirects=o,this.state=c,this.shouldActivate=p,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Gs extends Gn{constructor(e,t,o,c){super(e,t),this.urlAfterRedirects=o,this.state=c,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class il extends Gn{constructor(e,t,o,c){super(e,t),this.urlAfterRedirects=o,this.state=c,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class bo{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Wa{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class yc{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ag{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ih{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xg{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Jn{constructor(e,t,o){this.routerEvent=e,this.position=t,this.anchor=o,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Kl{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=ol(e,this._root);return t?t.children.map(o=>o.value):[]}firstChild(e){const t=ol(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=oh(e,this._root);return t.length<2?[]:t[t.length-2].children.map(c=>c.value).filter(c=>c!==e)}pathFromRoot(e){return oh(e,this._root).map(t=>t.value)}}function ol(i,e){if(i===e.value)return e;for(const t of e.children){const o=ol(i,t);if(o)return o}return null}function oh(i,e){if(i===e.value)return[e];for(const t of e.children){const o=oh(i,t);if(o.length)return o.unshift(e),o}return[]}class Ji{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function vs(i){const e={};return i&&i.children.forEach(t=>e[t.value.outlet]=t),e}class Jh extends Kl{constructor(e,t){super(e),this.snapshot=t,Er(this,e)}toString(){return this.snapshot.toString()}}function qo(i,e){const t=function Cu(i,e){const v=new vc([],{},{},"",{},pn,e,null,i.root,-1,{});return new Ql("",new Ji(v,[]))}(i,e),o=new Ir([new qn("",{})]),c=new Ir({}),p=new Ir({}),v=new Ir({}),C=new Ir(""),A=new qs(o,c,v,C,p,pn,e,t.root);return A.snapshot=t.root,new Jh(new Ji(A,[]),t)}class qs{constructor(e,t,o,c,p,v,C,A){this.url=e,this.params=t,this.queryParams=o,this.fragment=c,this.data=p,this.outlet=v,this.component=C,this.title=this.data?.pipe((0,Mt.U)(N=>N[ps]))??Et(void 0),this._futureSnapshot=A}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Mt.U)(e=>ii(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Mt.U)(e=>ii(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Yl(i,e="emptyOnly"){const t=i.pathFromRoot;let o=0;if("always"!==e)for(o=t.length-1;o>=1;){const c=t[o],p=t[o-1];if(c.routeConfig&&""===c.routeConfig.path)o--;else{if(p.component)break;o--}}return function zo(i){return i.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(o))}class vc{constructor(e,t,o,c,p,v,C,A,N,B,W,ae){this.url=e,this.params=t,this.queryParams=o,this.fragment=c,this.data=p,this.outlet=v,this.component=C,this.title=this.data?.[ps],this.routeConfig=A,this._urlSegment=N,this._lastPathIndex=B,this._correctedLastPathIndex=ae??B,this._resolve=W}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ii(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ii(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(o=>o.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ql extends Kl{constructor(e,t){super(t),this.url=e,Er(this,t)}toString(){return Jl(this._root)}}function Er(i,e){e.value._routerState=i,e.children.forEach(t=>Er(i,t))}function Jl(i){const e=i.children.length>0?` { ${i.children.map(Jl).join(", ")} } `:"";return`${i.value}${e}`}function Du(i){if(i.snapshot){const e=i.snapshot,t=i._futureSnapshot;i.snapshot=t,Ho(e.queryParams,t.queryParams)||i.queryParams.next(t.queryParams),e.fragment!==t.fragment&&i.fragment.next(t.fragment),Ho(e.params,t.params)||i.params.next(t.params),function $a(i,e){if(i.length!==e.length)return!1;for(let t=0;t<i.length;++t)if(!Ho(i[t],e[t]))return!1;return!0}(e.url,t.url)||i.url.next(t.url),Ho(e.data,t.data)||i.data.next(t.data)}else i.snapshot=i._futureSnapshot,i.data.next(i._futureSnapshot.data)}function Xh(i,e){const t=Ho(i.params,e.params)&&function Kd(i,e){return Us(i,e)&&i.every((t,o)=>Ho(t.parameters,e[o].parameters))}(i.url,e.url);return t&&!(!i.parent!=!e.parent)&&(!i.parent||Xh(i.parent,e.parent))}function Ia(i,e,t){if(t&&i.shouldReuseRoute(e.value,t.value.snapshot)){const o=t.value;o._futureSnapshot=e.value;const c=function zs(i,e,t){return e.children.map(o=>{for(const c of t.children)if(i.shouldReuseRoute(o.value,c.value.snapshot))return Ia(i,o,c);return Ia(i,o)})}(i,e,t);return new Ji(o,c)}{if(i.shouldAttach(e.value)){const p=i.retrieve(e.value);if(null!==p){const v=p.route;return v.value._futureSnapshot=e.value,v.children=e.children.map(C=>Ia(i,C)),v}}const o=function sl(i){return new qs(new Ir(i.url),new Ir(i.params),new Ir(i.queryParams),new Ir(i.fragment),new Ir(i.data),i.outlet,i.component,i)}(e.value),c=e.children.map(p=>Ia(i,p));return new Ji(o,c)}}const _c="ngNavigationCancelingError";function wc(i,e){const{redirectTo:t,navigationBehaviorOptions:o}=$o(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,c=lp(!1,0,e);return c.url=t,c.navigationBehaviorOptions=o,c}function lp(i,e,t){const o=new Error("NavigationCancelingError: "+(i||""));return o[_c]=!0,o.cancellationCode=e,t&&(o.url=t),o}function Xl(i){return Mg(i)&&$o(i.url)}function Mg(i){return i&&i[_c]}class dp{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new T,this.attachRef=null}}let T=(()=>{class i{constructor(){this.contexts=new Map}onChildOutletCreated(t,o){const c=this.getOrCreateContext(t);c.outlet=o,this.contexts.set(t,c)}onChildOutletDestroyed(t){const o=this.getContext(t);o&&(o.outlet=null,o.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let o=this.getContext(t);return o||(o=new dp,this.contexts.set(t,o)),o}getContext(t){return this.contexts.get(t)||null}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=y.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const w=!1;let E=(()=>{class i{constructor(t,o,c,p,v){this.parentContexts=t,this.location=o,this.changeDetector=p,this.environmentInjector=v,this.activated=null,this._activatedRoute=null,this.activateEvents=new y.vpe,this.deactivateEvents=new y.vpe,this.attachEvents=new y.vpe,this.detachEvents=new y.vpe,this.name=c||pn,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new y.vHH(4012,w);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new y.vHH(4012,w);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new y.vHH(4012,w);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,o){this.activated=t,this._activatedRoute=o,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,o){if(this.isActivated)throw new y.vHH(4013,w);this._activatedRoute=t;const c=this.location,v=t._futureSnapshot.component,C=this.parentContexts.getOrCreateContext(this.name).children,A=new x(t,C,c.injector);if(o&&function U(i){return!!i.resolveComponentFactory}(o)){const N=o.resolveComponentFactory(v);this.activated=c.createComponent(N,c.length,A)}else this.activated=c.createComponent(v,{index:c.length,injector:A,environmentInjector:o??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return i.\u0275fac=function(t){return new(t||i)(y.Y36(T),y.Y36(y.s_b),y.$8M("name"),y.Y36(y.sBO),y.Y36(y.lqb))},i.\u0275dir=y.lG2({type:i,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),i})();class x{constructor(e,t,o){this.route=e,this.childContexts=t,this.parent=o}get(e,t){return e===qs?this.route:e===T?this.childContexts:this.parent.get(e,t)}}let Q=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=y.Xpm({type:i,selectors:[["ng-component"]],standalone:!0,features:[y.jDz],decls:1,vars:0,template:function(t,o){1&t&&y._UZ(0,"router-outlet")},dependencies:[E],encapsulation:2}),i})();function he(i,e){return i.providers&&!i._injector&&(i._injector=(0,y.MMx)(i.providers,e,`Route: ${i.path}`)),i._injector??e}function sh(i){const e=i.children&&i.children.map(sh),t=e?{...i,children:e}:{...i};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==pn&&(t.component=Q),t}function oi(i){return i.outlet||pn}function ef(i,e){const t=i.filter(o=>oi(o)===e);return t.push(...i.filter(o=>oi(o)!==e)),t}function _s(i){if(!i)return null;if(i.routeConfig?._injector)return i.routeConfig._injector;for(let e=i.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class Rg{constructor(e,t,o,c){this.routeReuseStrategy=e,this.futureState=t,this.currState=o,this.forwardEvent=c}activate(e){const t=this.futureState._root,o=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,o,e),Du(this.futureState.root),this.activateChildRoutes(t,o,e)}deactivateChildRoutes(e,t,o){const c=vs(t);e.children.forEach(p=>{const v=p.value.outlet;this.deactivateRoutes(p,c[v],o),delete c[v]}),fi(c,(p,v)=>{this.deactivateRouteAndItsChildren(p,o)})}deactivateRoutes(e,t,o){const c=e.value,p=t?t.value:null;if(c===p)if(c.component){const v=o.getContext(c.outlet);v&&this.deactivateChildRoutes(e,t,v.children)}else this.deactivateChildRoutes(e,t,o);else p&&this.deactivateRouteAndItsChildren(t,o)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const o=t.getContext(e.value.outlet),c=o&&e.value.component?o.children:t,p=vs(e);for(const v of Object.keys(p))this.deactivateRouteAndItsChildren(p[v],c);if(o&&o.outlet){const v=o.outlet.detach(),C=o.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:v,route:e,contexts:C})}}deactivateRouteAndOutlet(e,t){const o=t.getContext(e.value.outlet),c=o&&e.value.component?o.children:t,p=vs(e);for(const v of Object.keys(p))this.deactivateRouteAndItsChildren(p[v],c);o&&o.outlet&&(o.outlet.deactivate(),o.children.onOutletDeactivated(),o.attachRef=null,o.resolver=null,o.route=null)}activateChildRoutes(e,t,o){const c=vs(t);e.children.forEach(p=>{this.activateRoutes(p,c[p.value.outlet],o),this.forwardEvent(new xg(p.value.snapshot))}),e.children.length&&this.forwardEvent(new Ag(e.value.snapshot))}activateRoutes(e,t,o){const c=e.value,p=t?t.value:null;if(Du(c),c===p)if(c.component){const v=o.getOrCreateContext(c.outlet);this.activateChildRoutes(e,t,v.children)}else this.activateChildRoutes(e,t,o);else if(c.component){const v=o.getOrCreateContext(c.outlet);if(this.routeReuseStrategy.shouldAttach(c.snapshot)){const C=this.routeReuseStrategy.retrieve(c.snapshot);this.routeReuseStrategy.store(c.snapshot,null),v.children.onOutletReAttached(C.contexts),v.attachRef=C.componentRef,v.route=C.route.value,v.outlet&&v.outlet.attach(C.componentRef,C.route.value),Du(C.route.value),this.activateChildRoutes(e,null,v.children)}else{const C=_s(c.snapshot),A=C?.get(y._Vd)??null;v.attachRef=null,v.route=c,v.resolver=A,v.injector=C,v.outlet&&v.outlet.activateWith(c,v.injector),this.activateChildRoutes(e,null,v.children)}}else this.activateChildRoutes(e,null,o)}}class Og{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Ic{constructor(e,t){this.component=e,this.route=t}}function ey(i,e,t){const o=i._root;return Tu(o,e?e._root:null,t,[o.value])}function Za(i,e){const t=Symbol(),o=e.get(i,t);return o===t?"function"!=typeof i||(0,y.Z0I)(i)?e.get(i):i:o}function Tu(i,e,t,o,c={canDeactivateChecks:[],canActivateChecks:[]}){const p=vs(e);return i.children.forEach(v=>{(function Mw(i,e,t,o,c={canDeactivateChecks:[],canActivateChecks:[]}){const p=i.value,v=e?e.value:null,C=t?t.getContext(i.value.outlet):null;if(v&&p.routeConfig===v.routeConfig){const A=function Rw(i,e,t){if("function"==typeof t)return t(i,e);switch(t){case"pathParamsChange":return!Us(i.url,e.url);case"pathParamsOrQueryParamsChange":return!Us(i.url,e.url)||!Ho(i.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Xh(i,e)||!Ho(i.queryParams,e.queryParams);default:return!Xh(i,e)}}(v,p,p.routeConfig.runGuardsAndResolvers);A?c.canActivateChecks.push(new Og(o)):(p.data=v.data,p._resolvedData=v._resolvedData),Tu(i,e,p.component?C?C.children:null:t,o,c),A&&C&&C.outlet&&C.outlet.isActivated&&c.canDeactivateChecks.push(new Ic(C.outlet.component,v))}else v&&tf(e,C,c),c.canActivateChecks.push(new Og(o)),Tu(i,null,p.component?C?C.children:null:t,o,c)})(v,p[v.value.outlet],t,o.concat([v.value]),c),delete p[v.value.outlet]}),fi(p,(v,C)=>tf(v,t.getContext(C),c)),c}function tf(i,e,t){const o=vs(i),c=i.value;fi(o,(p,v)=>{tf(p,c.component?e?e.children.getContext(v):null:e,t)}),t.canDeactivateChecks.push(new Ic(c.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,c))}function ed(i){return"function"==typeof i}function fp(i){return i instanceof uc||"EmptyError"===i?.name}const kg=Symbol("INITIAL_VALUE");function nd(){return Lr(i=>Ba(i.map(e=>e.pipe(pr(1),el(kg)))).pipe((0,Mt.U)(e=>{for(const t of e)if(!0!==t){if(t===kg)return kg;if(!1===t||t instanceof hc)return t}return!0}),P(e=>e!==kg),pr(1)))}function d_(i){return(0,Xc.z)((0,st.b)(e=>{if($o(e))throw wc(0,e)}),(0,Mt.U)(e=>!0===e))}const gi={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ah(i,e,t,o,c){const p=pp(i,e,t);return p.matched?function nf(i,e,t,o){const c=e.canMatch;return c&&0!==c.length?Et(c.map(v=>{const C=Za(v,i);return gs(function ny(i){return i&&ed(i.canMatch)}(C)?C.canMatch(e,t):i.runInContext(()=>C(e,t)))})).pipe(nd(),d_()):Et(!0)}(o=he(e,o),e,t).pipe((0,Mt.U)(v=>!0===v?p:{...gi})):Et(p)}function pp(i,e,t){if(""===e.path)return"full"===e.pathMatch&&(i.hasChildren()||t.length>0)?{...gi}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const c=(e.matcher||_u)(t,i,e);if(!c)return{...gi};const p={};fi(c.posParams,(C,A)=>{p[A]=C.path});const v=c.consumed.length>0?{...p,...c.consumed[c.consumed.length-1].parameters}:p;return{matched:!0,consumedSegments:c.consumed,remainingSegments:t.slice(c.consumed.length),parameters:v,positionalParamSegments:c.posParams??{}}}function uh(i,e,t,o,c="corrected"){if(t.length>0&&function iy(i,e,t){return t.some(o=>rf(i,e,o)&&oi(o)!==pn)}(i,t,o)){const v=new Rn(e,function gp(i,e,t,o){const c={};c[pn]=o,o._sourceSegment=i,o._segmentIndexShift=e.length;for(const p of t)if(""===p.path&&oi(p)!==pn){const v=new Rn([],{});v._sourceSegment=i,v._segmentIndexShift=e.length,c[oi(p)]=v}return c}(i,e,o,new Rn(t,i.children)));return v._sourceSegment=i,v._segmentIndexShift=e.length,{segmentGroup:v,slicedSegments:[]}}if(0===t.length&&function Fw(i,e,t){return t.some(o=>rf(i,e,o))}(i,t,o)){const v=new Rn(i.segments,function Wo(i,e,t,o,c,p){const v={};for(const C of o)if(rf(i,t,C)&&!c[oi(C)]){const A=new Rn([],{});A._sourceSegment=i,A._segmentIndexShift="legacy"===p?i.segments.length:e.length,v[oi(C)]=A}return{...c,...v}}(i,e,t,o,i.children,c));return v._sourceSegment=i,v._segmentIndexShift=e.length,{segmentGroup:v,slicedSegments:t}}const p=new Rn(i.segments,i.children);return p._sourceSegment=i,p._segmentIndexShift=e.length,{segmentGroup:p,slicedSegments:t}}function rf(i,e,t){return(!(i.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Vi(i,e,t,o){return!!(oi(i)===o||o!==pn&&rf(e,t,i))&&("**"===i.path||pp(e,i,t).matched)}function h_(i,e,t){return 0===e.length&&!i.children[t]}const mp=!1;class Lg{constructor(e){this.segmentGroup=e||null}}class oy{constructor(e){this.urlTree=e}}function yp(i){return ao(new Lg(i))}function f_(i){return ao(new oy(i))}class ch{constructor(e,t,o,c,p){this.injector=e,this.configLoader=t,this.urlSerializer=o,this.urlTree=c,this.config=p,this.allowRedirects=!0}apply(){const e=uh(this.urlTree.root,[],[],this.config).segmentGroup,t=new Rn(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,pn).pipe((0,Mt.U)(p=>this.createUrlTree(Wl(p),this.urlTree.queryParams,this.urlTree.fragment))).pipe(xt(p=>{if(p instanceof oy)return this.allowRedirects=!1,this.match(p.urlTree);throw p instanceof Lg?this.noMatchError(p):p}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,pn).pipe((0,Mt.U)(c=>this.createUrlTree(Wl(c),e.queryParams,e.fragment))).pipe(xt(c=>{throw c instanceof Lg?this.noMatchError(c):c}))}noMatchError(e){return new y.vHH(4002,mp)}createUrlTree(e,t,o){const c=js(e);return new hc(c,t,o)}expandSegmentGroup(e,t,o,c){return 0===o.segments.length&&o.hasChildren()?this.expandChildren(e,t,o).pipe((0,Mt.U)(p=>new Rn([],p))):this.expandSegment(e,o,t,o.segments,c,!0)}expandChildren(e,t,o){const c=[];for(const p of Object.keys(o.children))"primary"===p?c.unshift(p):c.push(p);return(0,Un.D)(c).pipe(We(p=>{const v=o.children[p],C=ef(t,p);return this.expandSegmentGroup(e,C,v,p).pipe((0,Mt.U)(A=>({segment:A,outlet:p})))}),Bt((p,v)=>(p[v.outlet]=v.segment,p),{}),ar())}expandSegment(e,t,o,c,p,v){return(0,Un.D)(o).pipe(We(C=>this.expandSegmentAgainstRoute(e,t,o,C,c,p,v).pipe(xt(N=>{if(N instanceof Lg)return Et(null);throw N}))),Ae(C=>!!C),xt((C,A)=>{if(fp(C))return h_(t,c,p)?Et(new Rn([],{})):yp(t);throw C}))}expandSegmentAgainstRoute(e,t,o,c,p,v,C){return Vi(c,t,p,v)?void 0===c.redirectTo?this.matchSegmentAgainstRoute(e,t,c,p,v):C&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,o,c,p,v):yp(t):yp(t)}expandSegmentAgainstRouteUsingRedirect(e,t,o,c,p,v){return"**"===c.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,o,c,v):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,o,c,p,v)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,o,c){const p=this.applyRedirectCommands([],o.redirectTo,{});return o.redirectTo.startsWith("/")?f_(p):this.lineralizeSegments(o,p).pipe((0,k.z)(v=>{const C=new Rn(v,{});return this.expandSegment(e,C,t,v,c,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,o,c,p,v){const{matched:C,consumedSegments:A,remainingSegments:N,positionalParamSegments:B}=pp(t,c,p);if(!C)return yp(t);const W=this.applyRedirectCommands(A,c.redirectTo,B);return c.redirectTo.startsWith("/")?f_(W):this.lineralizeSegments(c,W).pipe((0,k.z)(ae=>this.expandSegment(e,t,o,ae.concat(N),v,!1)))}matchSegmentAgainstRoute(e,t,o,c,p){return"**"===o.path?(e=he(o,e),o.loadChildren?(o._loadedRoutes?Et({routes:o._loadedRoutes,injector:o._loadedInjector}):this.configLoader.loadChildren(e,o)).pipe((0,Mt.U)(C=>(o._loadedRoutes=C.routes,o._loadedInjector=C.injector,new Rn(c,{})))):Et(new Rn(c,{}))):ah(t,o,c,e).pipe(Lr(({matched:v,consumedSegments:C,remainingSegments:A})=>v?this.getChildConfig(e=o._injector??e,o,c).pipe((0,k.z)(B=>{const W=B.injector??e,ae=B.routes,{segmentGroup:fe,slicedSegments:ve}=uh(t,C,A,ae),Ye=new Rn(fe.segments,fe.children);if(0===ve.length&&Ye.hasChildren())return this.expandChildren(W,ae,Ye).pipe((0,Mt.U)(Zt=>new Rn(C,Zt)));if(0===ae.length&&0===ve.length)return Et(new Rn(C,{}));const Xe=oi(o)===p;return this.expandSegment(W,Ye,ae,ve,Xe?pn:p,!0).pipe((0,Mt.U)(Wt=>new Rn(C.concat(Wt.segments),Wt.children)))})):yp(t)))}getChildConfig(e,t,o){return t.children?Et({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Et({routes:t._loadedRoutes,injector:t._loadedInjector}):function ry(i,e,t,o){const c=e.canLoad;return void 0===c||0===c.length?Et(!0):Et(c.map(v=>{const C=Za(v,i);return gs(function hp(i){return i&&ed(i.canLoad)}(C)?C.canLoad(e,t):i.runInContext(()=>C(e,t)))})).pipe(nd(),d_())}(e,t,o).pipe((0,k.z)(c=>c?this.configLoader.loadChildren(e,t).pipe((0,st.b)(p=>{t._loadedRoutes=p.routes,t._loadedInjector=p.injector})):function Io(i){return ao(lp(mp,3))}())):Et({routes:[],injector:e})}lineralizeSegments(e,t){let o=[],c=t.root;for(;;){if(o=o.concat(c.segments),0===c.numberOfChildren)return Et(o);if(c.numberOfChildren>1||!c.children[pn])return ao(new y.vHH(4e3,mp));c=c.children[pn]}}applyRedirectCommands(e,t,o){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,o)}applyRedirectCreateUrlTree(e,t,o,c){const p=this.createSegmentGroup(e,t.root,o,c);return new hc(p,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const o={};return fi(e,(c,p)=>{if("string"==typeof c&&c.startsWith(":")){const C=c.substring(1);o[p]=t[C]}else o[p]=c}),o}createSegmentGroup(e,t,o,c){const p=this.createSegments(e,t.segments,o,c);let v={};return fi(t.children,(C,A)=>{v[A]=this.createSegmentGroup(e,C,o,c)}),new Rn(p,v)}createSegments(e,t,o,c){return t.map(p=>p.path.startsWith(":")?this.findPosParam(e,p,c):this.findOrReturn(p,o))}findPosParam(e,t,o){const c=o[t.path.substring(1)];if(!c)throw new y.vHH(4001,mp);return c}findOrReturn(e,t){let o=0;for(const c of t){if(c.path===e.path)return t.splice(o),c;o++}return e}}class sy{}class Vg{constructor(e,t,o,c,p,v,C,A){this.injector=e,this.rootComponentType=t,this.config=o,this.urlTree=c,this.url=p,this.paramsInheritanceStrategy=v,this.relativeLinkResolution=C,this.urlSerializer=A}recognize(){const e=uh(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,pn).pipe((0,Mt.U)(t=>{if(null===t)return null;const o=new vc([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},pn,this.rootComponentType,null,this.urlTree.root,-1,{}),c=new Ji(o,t),p=new Ql(this.url,c);return this.inheritParamsAndData(p._root),p}))}inheritParamsAndData(e){const t=e.value,o=Yl(t,this.paramsInheritanceStrategy);t.params=Object.freeze(o.params),t.data=Object.freeze(o.data),e.children.forEach(c=>this.inheritParamsAndData(c))}processSegmentGroup(e,t,o,c){return 0===o.segments.length&&o.hasChildren()?this.processChildren(e,t,o):this.processSegment(e,t,o,o.segments,c)}processChildren(e,t,o){return(0,Un.D)(Object.keys(o.children)).pipe(We(c=>{const p=o.children[c],v=ef(t,c);return this.processSegmentGroup(e,v,p,c)}),Bt((c,p)=>c&&p?(c.push(...p),c):null),function Li(i,e=!1){return(0,hi.e)((t,o)=>{let c=0;t.subscribe((0,Ar.x)(o,p=>{const v=i(p,c++);(v||e)&&o.next(p),!v&&o.complete()}))})}(c=>null!==c),G(null),ar(),(0,Mt.U)(c=>{if(null===c)return null;const p=_p(c);return function g_(i){i.sort((e,t)=>e.value.outlet===pn?-1:t.value.outlet===pn?1:e.value.outlet.localeCompare(t.value.outlet))}(p),p}))}processSegment(e,t,o,c,p){return(0,Un.D)(t).pipe(We(v=>this.processSegmentAgainstRoute(v._injector??e,v,o,c,p)),Ae(v=>!!v),xt(v=>{if(fp(v))return h_(o,c,p)?Et([]):Et(null);throw v}))}processSegmentAgainstRoute(e,t,o,c,p){if(t.redirectTo||!Vi(t,o,c,p))return Et(null);let v;if("**"===t.path){const C=c.length>0?$l(c).parameters:{},A=m_(o)+c.length;v=Et({snapshot:new vc(c,C,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,wp(t),oi(t),t.component??t._loadedComponent??null,t,uy(o),A,sf(t),A),consumedSegments:[],remainingSegments:[]})}else v=ah(o,t,c,e).pipe((0,Mt.U)(({matched:C,consumedSegments:A,remainingSegments:N,parameters:B})=>{if(!C)return null;const W=m_(o)+A.length;return{snapshot:new vc(A,B,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,wp(t),oi(t),t.component??t._loadedComponent??null,t,uy(o),W,sf(t),W),consumedSegments:A,remainingSegments:N}}));return v.pipe(Lr(C=>{if(null===C)return Et(null);const{snapshot:A,consumedSegments:N,remainingSegments:B}=C;e=t._injector??e;const W=t._loadedInjector??e,ae=function Au(i){return i.children?i.children:i.loadChildren?i._loadedRoutes:[]}(t),{segmentGroup:fe,slicedSegments:ve}=uh(o,N,B,ae.filter(Xe=>void 0===Xe.redirectTo),this.relativeLinkResolution);if(0===ve.length&&fe.hasChildren())return this.processChildren(W,ae,fe).pipe((0,Mt.U)(Xe=>null===Xe?null:[new Ji(A,Xe)]));if(0===ae.length&&0===ve.length)return Et([new Ji(A,[])]);const Ye=oi(t)===p;return this.processSegment(W,ae,fe,ve,Ye?pn:p).pipe((0,Mt.U)(Xe=>null===Xe?null:[new Ji(A,Xe)]))}))}}function ay(i){const e=i.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function _p(i){const e=[],t=new Set;for(const o of i){if(!ay(o)){e.push(o);continue}const c=e.find(p=>o.value.routeConfig===p.value.routeConfig);void 0!==c?(c.children.push(...o.children),t.add(c)):e.push(o)}for(const o of t){const c=_p(o.children);e.push(new Ji(o.value,c))}return e.filter(o=>!t.has(o))}function uy(i){let e=i;for(;e._sourceSegment;)e=e._sourceSegment;return e}function m_(i){let e=i,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function wp(i){return i.data||{}}function sf(i){return i.resolve||{}}function ly(i){return"string"==typeof i.title||null===i.title}function dh(i){return Lr(e=>{const t=i(e);return t?(0,Un.D)(t).pipe((0,Mt.U)(()=>e)):Et(e)})}let ul=(()=>{class i{buildTitle(t){let o,c=t.root;for(;void 0!==c;)o=this.getResolvedTitleForRoute(c)??o,c=c.children.find(p=>p.outlet===pn);return o}getResolvedTitleForRoute(t){return t.data[ps]}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=y.Yz7({token:i,factory:function(){return(0,y.f3M)(Ip)},providedIn:"root"}),i})(),Ip=(()=>{class i extends ul{constructor(t){super(),this.title=t}updateTitle(t){const o=this.buildTitle(t);void 0!==o&&this.title.setTitle(o)}}return i.\u0275fac=function(t){return new(t||i)(y.LFG(ha))},i.\u0275prov=y.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class dy{}class hy extends class v_{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Ka=new y.OlP("",{providedIn:"root",factory:()=>({})}),jg=new y.OlP("ROUTES");let Cp=(()=>{class i{constructor(t,o){this.injector=t,this.compiler=o,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Et(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const o=gs(t.loadComponent()).pipe((0,st.b)(p=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=p}),Ha(()=>{this.componentLoaders.delete(t)})),c=new Bo(o,()=>new Fo.x).pipe(_a());return this.componentLoaders.set(t,c),c}loadChildren(t,o){if(this.childrenLoaders.get(o))return this.childrenLoaders.get(o);if(o._loadedRoutes)return Et({routes:o._loadedRoutes,injector:o._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(o);const p=this.loadModuleFactoryOrRoutes(o.loadChildren).pipe((0,Mt.U)(C=>{this.onLoadEndListener&&this.onLoadEndListener(o);let A,N,B=!1;Array.isArray(C)?N=C:(A=C.create(t).injector,N=Bn(A.get(jg,[],y.XFs.Self|y.XFs.Optional)));return{routes:N.map(sh),injector:A}}),Ha(()=>{this.childrenLoaders.delete(o)})),v=new Bo(p,()=>new Fo.x).pipe(_a());return this.childrenLoaders.set(o,v),v}loadModuleFactoryOrRoutes(t){return gs(t()).pipe((0,k.z)(o=>o instanceof y.YKP||Array.isArray(o)?Et(o):(0,Un.D)(this.compiler.compileModuleAsync(o))))}}return i.\u0275fac=function(t){return new(t||i)(y.LFG(y.zs3),y.LFG(y.Sil))},i.\u0275prov=y.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class Bw{}class Hg{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function hh(i){throw i}function rd(i,e,t){return e.parse("/")}const py={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},__={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function Hw(){const i=(0,y.f3M)(Yd),e=(0,y.f3M)(T),t=(0,y.f3M)(ze),o=(0,y.f3M)(y.zs3),c=(0,y.f3M)(y.Sil),p=(0,y.f3M)(jg,{optional:!0})??[],v=(0,y.f3M)(Ka,{optional:!0})??{},C=(0,y.f3M)(Ip),A=(0,y.f3M)(ul,{optional:!0}),N=(0,y.f3M)(Bw,{optional:!0}),B=(0,y.f3M)(dy,{optional:!0}),W=new Vr(null,i,e,t,o,c,Bn(p));return N&&(W.urlHandlingStrategy=N),B&&(W.routeReuseStrategy=B),W.titleStrategy=A??C,function jw(i,e){i.errorHandler&&(e.errorHandler=i.errorHandler),i.malformedUriErrorHandler&&(e.malformedUriErrorHandler=i.malformedUriErrorHandler),i.onSameUrlNavigation&&(e.onSameUrlNavigation=i.onSameUrlNavigation),i.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=i.paramsInheritanceStrategy),i.relativeLinkResolution&&(e.relativeLinkResolution=i.relativeLinkResolution),i.urlUpdateStrategy&&(e.urlUpdateStrategy=i.urlUpdateStrategy),i.canceledNavigationResolution&&(e.canceledNavigationResolution=i.canceledNavigationResolution)}(v,W),W}let Vr=(()=>{class i{constructor(t,o,c,p,v,C,A){this.rootComponentType=t,this.urlSerializer=o,this.rootContexts=c,this.location=p,this.config=A,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Fo.x,this.errorHandler=hh,this.malformedUriErrorHandler=rd,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>Et(void 0),this.urlHandlingStrategy=new Hg,this.routeReuseStrategy=new hy,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=v.get(Cp),this.configLoader.onLoadEndListener=ae=>this.triggerEvent(new Wa(ae)),this.configLoader.onLoadStartListener=ae=>this.triggerEvent(new bo(ae)),this.ngModule=v.get(y.h0i),this.console=v.get(y.c2e);const W=v.get(y.R0b);this.isNgZoneEnabled=W instanceof y.R0b&&y.R0b.isInAngularZone(),this.resetConfig(A),this.currentUrlTree=function Zi(){return new hc(new Rn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=qo(this.currentUrlTree,this.rootComponentType),this.transitions=new Ir({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const o=this.events;return t.pipe(P(c=>0!==c.id),(0,Mt.U)(c=>({...c,extractedUrl:this.urlHandlingStrategy.extract(c.rawUrl)})),Lr(c=>{let p=!1,v=!1;return Et(c).pipe((0,st.b)(C=>{this.currentNavigation={id:C.id,initialUrl:C.rawUrl,extractedUrl:C.extractedUrl,trigger:C.source,extras:C.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Lr(C=>{const A=this.browserUrlTree.toString(),N=!this.navigated||C.extractedUrl.toString()!==A||A!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||N)&&this.urlHandlingStrategy.shouldProcessUrl(C.rawUrl))return id(C.source)&&(this.browserUrlTree=C.extractedUrl),Et(C).pipe(Lr(W=>{const ae=this.transitions.getValue();return o.next(new pi(W.id,this.serializeUrl(W.extractedUrl),W.source,W.restoredState)),ae!==this.transitions.getValue()?va.E:Promise.resolve(W)}),function Su(i,e,t,o){return Lr(c=>function p_(i,e,t,o,c){return new ch(i,e,t,o,c).apply()}(i,e,t,c.extractedUrl,o).pipe((0,Mt.U)(p=>({...c,urlAfterRedirects:p}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,st.b)(W=>{this.currentNavigation={...this.currentNavigation,finalUrl:W.urlAfterRedirects},c.urlAfterRedirects=W.urlAfterRedirects}),function bp(i,e,t,o,c,p){return(0,k.z)(v=>function mE(i,e,t,o,c,p,v="emptyOnly",C="legacy"){return new Vg(i,e,t,o,c,v,C,p).recognize().pipe(Lr(A=>null===A?function Vw(i){return new Pi.y(e=>e.error(i))}(new sy):Et(A)))}(i,e,t,v.urlAfterRedirects,o.serialize(v.urlAfterRedirects),o,c,p).pipe((0,Mt.U)(C=>({...v,targetSnapshot:C}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,st.b)(W=>{if(c.targetSnapshot=W.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!W.extras.skipLocationChange){const fe=this.urlHandlingStrategy.merge(W.urlAfterRedirects,W.rawUrl);this.setBrowserUrl(fe,W)}this.browserUrlTree=W.urlAfterRedirects}const ae=new za(W.id,this.serializeUrl(W.extractedUrl),this.serializeUrl(W.urlAfterRedirects),W.targetSnapshot);o.next(ae)}));if(N&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:ae,extractedUrl:fe,source:ve,restoredState:Ye,extras:Xe}=C,At=new pi(ae,this.serializeUrl(fe),ve,Ye);o.next(At);const Wt=qo(fe,this.rootComponentType).snapshot;return Et(c={...C,targetSnapshot:Wt,urlAfterRedirects:fe,extras:{...Xe,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=C.rawUrl,C.resolve(null),va.E}),(0,st.b)(C=>{const A=new Go(C.id,this.serializeUrl(C.extractedUrl),this.serializeUrl(C.urlAfterRedirects),C.targetSnapshot);this.triggerEvent(A)}),(0,Mt.U)(C=>c={...C,guards:ey(C.targetSnapshot,C.currentSnapshot,this.rootContexts)}),function Ow(i,e){return(0,k.z)(t=>{const{targetSnapshot:o,currentSnapshot:c,guards:{canActivateChecks:p,canDeactivateChecks:v}}=t;return 0===v.length&&0===p.length?Et({...t,guardsResult:!0}):function u_(i,e,t,o){return(0,Un.D)(i).pipe((0,k.z)(c=>function kw(i,e,t,o,c){const p=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return p&&0!==p.length?Et(p.map(C=>{const A=_s(e)??c,N=Za(C,A);return gs(function ty(i){return i&&ed(i.canDeactivate)}(N)?N.canDeactivate(i,e,t,o):A.runInContext(()=>N(i,e,t,o))).pipe(Ae())})).pipe(nd()):Et(!0)}(c.component,c.route,t,e,o)),Ae(c=>!0!==c,!0))}(v,o,c,i).pipe((0,k.z)(C=>C&&function al(i){return"boolean"==typeof i}(C)?function Nw(i,e,t,o){return(0,Un.D)(e).pipe(We(c=>ya(function Fg(i,e){return null!==i&&e&&e(new yc(i)),Et(!0)}(c.route.parent,o),function c_(i,e){return null!==i&&e&&e(new ih(i)),Et(!0)}(c.route,o),function l_(i,e,t){const o=e[e.length-1],p=e.slice(0,e.length-1).reverse().map(v=>function s_(i){const e=i.routeConfig?i.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:i,guards:e}:null}(v)).filter(v=>null!==v).map(v=>Uo(()=>Et(v.guards.map(A=>{const N=_s(v.node)??t,B=Za(A,N);return gs(function Ng(i){return i&&ed(i.canActivateChild)}(B)?B.canActivateChild(o,i):N.runInContext(()=>B(o,i))).pipe(Ae())})).pipe(nd())));return Et(p).pipe(nd())}(i,c.path,t),function Pw(i,e,t){const o=e.routeConfig?e.routeConfig.canActivate:null;if(!o||0===o.length)return Et(!0);const c=o.map(p=>Uo(()=>{const v=_s(e)??t,C=Za(p,v);return gs(function a_(i){return i&&ed(i.canActivate)}(C)?C.canActivate(e,i):v.runInContext(()=>C(e,i))).pipe(Ae())}));return Et(c).pipe(nd())}(i,c.route,t))),Ae(c=>!0!==c,!0))}(o,p,i,e):Et(C)),(0,Mt.U)(C=>({...t,guardsResult:C})))})}(this.ngModule.injector,C=>this.triggerEvent(C)),(0,st.b)(C=>{if(c.guardsResult=C.guardsResult,$o(C.guardsResult))throw wc(0,C.guardsResult);const A=new Qi(C.id,this.serializeUrl(C.extractedUrl),this.serializeUrl(C.urlAfterRedirects),C.targetSnapshot,!!C.guardsResult);this.triggerEvent(A)}),P(C=>!!C.guardsResult||(this.restoreHistory(C),this.cancelNavigationTransition(C,"",3),!1)),dh(C=>{if(C.guards.canActivateChecks.length)return Et(C).pipe((0,st.b)(A=>{const N=new Gs(A.id,this.serializeUrl(A.extractedUrl),this.serializeUrl(A.urlAfterRedirects),A.targetSnapshot);this.triggerEvent(N)}),Lr(A=>{let N=!1;return Et(A).pipe(function Ug(i,e){return(0,k.z)(t=>{const{targetSnapshot:o,guards:{canActivateChecks:c}}=t;if(!c.length)return Et(t);let p=0;return(0,Un.D)(c).pipe(We(v=>function y_(i,e,t,o){const c=i.routeConfig,p=i._resolve;return void 0!==c?.title&&!ly(c)&&(p[ps]=c.title),function yE(i,e,t,o){const c=function af(i){return[...Object.keys(i),...Object.getOwnPropertySymbols(i)]}(i);if(0===c.length)return Et({});const p={};return(0,Un.D)(c).pipe((0,k.z)(v=>function cy(i,e,t,o){const c=_s(e)??o,p=Za(i,c);return gs(p.resolve?p.resolve(e,t):c.runInContext(()=>p(e,t)))}(i[v],e,t,o).pipe(Ae(),(0,st.b)(C=>{p[v]=C}))),$t(1),function ja(i){return(0,Mt.U)(()=>i)}(p),xt(v=>fp(v)?va.E:ao(v)))}(p,i,e,o).pipe((0,Mt.U)(v=>(i._resolvedData=v,i.data=Yl(i,t).resolve,c&&ly(c)&&(i.data[ps]=c.title),null)))}(v.route,o,i,e)),(0,st.b)(()=>p++),$t(1),(0,k.z)(v=>p===c.length?Et(t):va.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,st.b)({next:()=>N=!0,complete:()=>{N||(this.restoreHistory(A),this.cancelNavigationTransition(A,"",2))}}))}),(0,st.b)(A=>{const N=new il(A.id,this.serializeUrl(A.extractedUrl),this.serializeUrl(A.urlAfterRedirects),A.targetSnapshot);this.triggerEvent(N)}))}),dh(C=>{const A=N=>{const B=[];N.routeConfig?.loadComponent&&!N.routeConfig._loadedComponent&&B.push(this.configLoader.loadComponent(N.routeConfig).pipe((0,st.b)(W=>{N.component=W}),(0,Mt.U)(()=>{})));for(const W of N.children)B.push(...A(W));return B};return Ba(A(C.targetSnapshot.root)).pipe(G(),pr(1))}),dh(()=>this.afterPreactivation()),(0,Mt.U)(C=>{const A=function ba(i,e,t){const o=Ia(i,e._root,t?t._root:void 0);return new Jh(o,e)}(this.routeReuseStrategy,C.targetSnapshot,C.currentRouterState);return c={...C,targetRouterState:A}}),(0,st.b)(C=>{this.currentUrlTree=C.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(C.urlAfterRedirects,C.rawUrl),this.routerState=C.targetRouterState,"deferred"===this.urlUpdateStrategy&&(C.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,C),this.browserUrlTree=C.urlAfterRedirects)}),((i,e,t)=>(0,Mt.U)(o=>(new Rg(e,o.targetRouterState,o.currentRouterState,t).activate(i),o)))(this.rootContexts,this.routeReuseStrategy,C=>this.triggerEvent(C)),(0,st.b)({next(){p=!0},complete(){p=!0}}),Ha(()=>{p||v||this.cancelNavigationTransition(c,"",1),this.currentNavigation?.id===c.id&&(this.currentNavigation=null)}),xt(C=>{if(v=!0,Mg(C)){Xl(C)||(this.navigated=!0,this.restoreHistory(c,!0));const A=new Qh(c.id,this.serializeUrl(c.extractedUrl),C.message,C.cancellationCode);if(o.next(A),Xl(C)){const N=this.urlHandlingStrategy.merge(C.url,this.rawUrlTree),B={skipLocationChange:c.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||id(c.source)};this.scheduleNavigation(N,"imperative",null,B,{resolve:c.resolve,reject:c.reject,promise:c.promise})}else c.resolve(!1)}else{this.restoreHistory(c,!0);const A=new xr(c.id,this.serializeUrl(c.extractedUrl),C,c.targetSnapshot??void 0);o.next(A);try{c.resolve(this.errorHandler(C))}catch(N){c.reject(N)}}return va.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const o="popstate"===t.type?"popstate":"hashchange";"popstate"===o&&setTimeout(()=>{const c={replaceUrl:!0},p=t.state?.navigationId?t.state:null;if(p){const C={...p};delete C.navigationId,delete C.\u0275routerPageId,0!==Object.keys(C).length&&(c.state=C)}const v=this.parseUrl(t.url);this.scheduleNavigation(v,o,p,c)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(sh),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,o={}){const{relativeTo:c,queryParams:p,fragment:v,queryParamsHandling:C,preserveFragment:A}=o,N=c||this.routerState.root,B=A?this.currentUrlTree.fragment:v;let W=null;switch(C){case"merge":W={...this.currentUrlTree.queryParams,...p};break;case"preserve":W=this.currentUrlTree.queryParams;break;default:W=p||null}return null!==W&&(W=this.removeEmptyProps(W)),Xm(N,this.currentUrlTree,t,W,B??null)}navigateByUrl(t,o={skipLocationChange:!1}){const c=$o(t)?t:this.parseUrl(t),p=this.urlHandlingStrategy.merge(c,this.rawUrlTree);return this.scheduleNavigation(p,"imperative",null,o)}navigate(t,o={skipLocationChange:!1}){return function gy(i){for(let e=0;e<i.length;e++){if(null==i[e])throw new y.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,o),o)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let o;try{o=this.urlSerializer.parse(t)}catch(c){o=this.malformedUriErrorHandler(c,this.urlSerializer,t)}return o}isActive(t,o){let c;if(c=!0===o?{...py}:!1===o?{...__}:o,$o(t))return Ei(this.currentUrlTree,t,c);const p=this.parseUrl(t);return Ei(this.currentUrlTree,p,c)}removeEmptyProps(t){return Object.keys(t).reduce((o,c)=>{const p=t[c];return null!=p&&(o[c]=p),o},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new $s(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,o,c,p,v){if(this.disposed)return Promise.resolve(!1);let C,A,N;v?(C=v.resolve,A=v.reject,N=v.promise):N=new Promise((ae,fe)=>{C=ae,A=fe});const B=++this.navigationId;let W;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(c=this.location.getState()),W=c&&c.\u0275routerPageId?c.\u0275routerPageId:p.replaceUrl||p.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):W=0,this.setTransition({id:B,targetPageId:W,source:o,restoredState:c,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:p,resolve:C,reject:A,promise:N,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),N.catch(ae=>Promise.reject(ae))}setBrowserUrl(t,o){const c=this.urlSerializer.serialize(t),p={...o.extras.state,...this.generateNgRouterState(o.id,o.targetPageId)};this.location.isCurrentPathEqualTo(c)||o.extras.replaceUrl?this.location.replaceState(c,"",p):this.location.go(c,"",p)}restoreHistory(t,o=!1){if("computed"===this.canceledNavigationResolution){const c=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===c?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===c&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(c)}else"replace"===this.canceledNavigationResolution&&(o&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,o,c){const p=new Qh(t.id,this.serializeUrl(t.extractedUrl),o,c);this.triggerEvent(p),t.resolve(!1)}generateNgRouterState(t,o){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:o}:{navigationId:t}}}return i.\u0275fac=function(t){y.$Z()},i.\u0275prov=y.Yz7({token:i,factory:function(){return Hw()},providedIn:"root"}),i})();function id(i){return"imperative"!==i}let Zo=(()=>{class i{constructor(t,o,c,p,v){this.router=t,this.route=o,this.tabIndexAttribute=c,this.renderer=p,this.el=v,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new Fo.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,y.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,y.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,y.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const o=this.renderer,c=this.el.nativeElement;null!==t?o.setAttribute(c,"tabindex",t):o.removeAttribute(c,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return i.\u0275fac=function(t){return new(t||i)(y.Y36(Vr),y.Y36(qs),y.$8M("tabindex"),y.Y36(y.Qsj),y.Y36(y.SBq))},i.\u0275dir=y.lG2({type:i,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,o){1&t&&y.NdJ("click",function(){return o.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[y.TTD]}),i})(),Dp=(()=>{class i{constructor(t,o,c){this.router=t,this.route=o,this.locationStrategy=c,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new Fo.x,this.subscription=t.events.subscribe(p=>{p instanceof $s&&this.updateTargetUrlAndHref()})}set preserveFragment(t){this._preserveFragment=(0,y.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,y.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,y.D6c)(t)}get replaceUrl(){return this._replaceUrl}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,o,c,p,v){return!!(0!==t||o||c||p||v||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return i.\u0275fac=function(t){return new(t||i)(y.Y36(Vr),y.Y36(qs),y.Y36(Pe))},i.\u0275dir=y.lG2({type:i,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,o){1&t&&y.NdJ("click",function(p){return o.onClick(p.button,p.ctrlKey,p.shiftKey,p.altKey,p.metaKey)}),2&t&&y.uIk("target",o.target)("href",o.href,y.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[y.TTD]}),i})(),cl=(()=>{class i{constructor(t,o,c,p,v,C){this.router=t,this.element=o,this.renderer=c,this.cdr=p,this.link=v,this.linkWithHref=C,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new y.vpe,this.routerEventsSubscription=t.events.subscribe(A=>{A instanceof $s&&this.update()})}ngAfterContentInit(){Et(this.links.changes,this.linksWithHrefs.changes,Et(null)).pipe((0,ma.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(o=>!!o).map(o=>o.onChanges);this.linkInputChangesSubscription=(0,Un.D)(t).pipe((0,ma.J)()).subscribe(o=>{this.isActive!==this.isLinkActive(this.router)(o)&&this.update()})}set routerLinkActive(t){const o=Array.isArray(t)?t:t.split(" ");this.classes=o.filter(c=>!!c)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(o=>{t?this.renderer.addClass(this.element.nativeElement,o):this.renderer.removeClass(this.element.nativeElement,o)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(t))})}isLinkActive(t){const o=function my(i){return!!i.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return c=>!!c.urlTree&&t.isActive(c.urlTree,o)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return i.\u0275fac=function(t){return new(t||i)(y.Y36(Vr),y.Y36(y.SBq),y.Y36(y.Qsj),y.Y36(y.sBO),y.Y36(Zo,8),y.Y36(Dp,8))},i.\u0275dir=y.lG2({type:i,selectors:[["","routerLinkActive",""]],contentQueries:function(t,o,c){if(1&t&&(y.Suo(c,Zo,5),y.Suo(c,Dp,5)),2&t){let p;y.iGM(p=y.CRH())&&(o.links=p),y.iGM(p=y.CRH())&&(o.linksWithHrefs=p)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[y.TTD]}),i})();class cf{}let yy=(()=>{class i{constructor(t,o,c,p,v){this.router=t,this.injector=c,this.preloadingStrategy=p,this.loader=v}setUpPreloading(){this.subscription=this.router.events.pipe(P(t=>t instanceof $s),We(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,o){const c=[];for(const p of o){p.providers&&!p._injector&&(p._injector=(0,y.MMx)(p.providers,t,`Route: ${p.path}`));const v=p._injector??t,C=p._loadedInjector??v;p.loadChildren&&!p._loadedRoutes&&void 0===p.canLoad||p.loadComponent&&!p._loadedComponent?c.push(this.preloadConfig(v,p)):(p.children||p._loadedRoutes)&&c.push(this.processRoutes(C,p.children??p._loadedRoutes))}return(0,Un.D)(c).pipe((0,ma.J)())}preloadConfig(t,o){return this.preloadingStrategy.preload(o,()=>{let c;c=o.loadChildren&&void 0===o.canLoad?this.loader.loadChildren(t,o):Et(null);const p=c.pipe((0,k.z)(v=>null===v?Et(void 0):(o._loadedRoutes=v.routes,o._loadedInjector=v.injector,this.processRoutes(v.injector??t,v.routes))));if(o.loadComponent&&!o._loadedComponent){const v=this.loader.loadComponent(o);return(0,Un.D)([p,v]).pipe((0,ma.J)())}return p})}}return i.\u0275fac=function(t){return new(t||i)(y.LFG(Vr),y.LFG(y.Sil),y.LFG(y.lqb),y.LFG(cf),y.LFG(Cp))},i.\u0275prov=y.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const df=new y.OlP("");let hf=(()=>{class i{constructor(t,o,c={}){this.router=t,this.viewportScroller=o,this.options=c,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},c.scrollPositionRestoration=c.scrollPositionRestoration||"disabled",c.anchorScrolling=c.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof pi?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof $s&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Jn&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,o){this.router.triggerEvent(new Jn(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,o))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return i.\u0275fac=function(t){y.$Z()},i.\u0275prov=y.Yz7({token:i,factory:i.\u0275fac}),i})();function sd(i,e){return{\u0275kind:i,\u0275providers:e}}function vy(i){return[{provide:jg,multi:!0,useValue:i}]}function $g(){const i=(0,y.f3M)(y.zs3);return e=>{const t=i.get(y.z2F);if(e!==t.components[0])return;const o=i.get(Vr),c=i.get(Gg);1===i.get(_y)&&o.initialNavigation(),i.get(E_,null,y.XFs.Optional)?.setUpPreloading(),i.get(df,null,y.XFs.Optional)?.init(),o.resetRootComponentType(t.componentTypes[0]),c.next(),c.complete()}}const Gg=new y.OlP("",{factory:()=>new Fo.x}),_y=new y.OlP("",{providedIn:"root",factory:()=>1});const E_=new y.OlP("");function Gw(i){return sd(0,[{provide:E_,useExisting:yy},{provide:cf,useExisting:i}])}const C_=new y.OlP("ROUTER_FORROOT_GUARD"),D_=[ze,{provide:Yd,useClass:nl},{provide:Vr,useFactory:Hw},T,{provide:qs,useFactory:function Tp(i){return i.routerState.root},deps:[Vr]},Cp];function T_(){return new y.PXZ("Router",Vr)}let S_=(()=>{class i{constructor(t){}static forRoot(t,o){return{ngModule:i,providers:[D_,[],vy(t),{provide:C_,useFactory:by,deps:[[Vr,new y.FiY,new y.tp0]]},{provide:Ka,useValue:o||{}},o?.useHash?{provide:Pe,useClass:ht}:{provide:Pe,useClass:yt},{provide:df,useFactory:()=>{const i=(0,y.f3M)(Vr),e=(0,y.f3M)(Ml),t=(0,y.f3M)(Ka);return t.scrollOffset&&e.setOffset(t.scrollOffset),new hf(i,e,t)}},o?.preloadingStrategy?Gw(o.preloadingStrategy).\u0275providers:[],{provide:y.PXZ,multi:!0,useFactory:T_},o?.initialNavigation?In(o):[],[{provide:ad,useFactory:$g},{provide:y.tb,multi:!0,useExisting:ad}]]}}static forChild(t){return{ngModule:i,providers:[vy(t)]}}}return i.\u0275fac=function(t){return new(t||i)(y.LFG(C_,8))},i.\u0275mod=y.oAB({type:i}),i.\u0275inj=y.cJS({imports:[Q]}),i})();function by(i){return"guarded"}function In(i){return["disabled"===i.initialNavigation?sd(3,[{provide:y.ip1,multi:!0,useFactory:()=>{const e=(0,y.f3M)(Vr);return()=>{e.setUpLocationChangeListener()}}},{provide:_y,useValue:2}]).\u0275providers:[],"enabledBlocking"===i.initialNavigation?sd(2,[{provide:_y,useValue:0},{provide:y.ip1,multi:!0,deps:[y.zs3],useFactory:e=>{const t=e.get(te,Promise.resolve());let o=!1;return()=>t.then(()=>new Promise(p=>{const v=e.get(Vr),C=e.get(Gg);(function c(p){e.get(Vr).events.pipe(P(C=>C instanceof $s||C instanceof Qh||C instanceof xr),(0,Mt.U)(C=>C instanceof $s||C instanceof Qh&&(0===C.code||1===C.code)&&null),P(C=>null!==C),pr(1)).subscribe(()=>{p()})})(()=>{p(!0),o=!0}),v.afterPreactivation=()=>(p(!0),o||C.closed?Et(void 0):C),v.initialNavigation()}))}}]).\u0275providers:[]]}const ad=new y.OlP("");let qg=(()=>{class i{constructor(t,o){this._renderer=t,this._elementRef=o,this.onChange=c=>{},this.onTouched=()=>{}}setProperty(t,o){this._renderer.setProperty(this._elementRef.nativeElement,t,o)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return i.\u0275fac=function(t){return new(t||i)(y.Y36(y.Qsj),y.Y36(y.SBq))},i.\u0275dir=y.lG2({type:i}),i})(),Ko=(()=>{class i extends qg{}return i.\u0275fac=function(){let e;return function(o){return(e||(e=y.n5z(i)))(o||i)}}(),i.\u0275dir=y.lG2({type:i,features:[y.qOj]}),i})();const Cc=new y.OlP("NgValueAccessor"),Kw={provide:Cc,useExisting:(0,y.Gpc)(()=>ud),multi:!0},R_=new y.OlP("CompositionEventMode");let ud=(()=>{class i extends qg{constructor(t,o,c){super(t,o),this._compositionMode=c,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function _E(){const i=J()?J().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return i.\u0275fac=function(t){return new(t||i)(y.Y36(y.Qsj),y.Y36(y.SBq),y.Y36(R_,8))},i.\u0275dir=y.lG2({type:i,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,o){1&t&&y.NdJ("input",function(p){return o._handleInput(p.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(p){return o._compositionEnd(p.target.value)})},features:[y._Bn([Kw]),y.qOj]}),i})();function ld(i){return null==i||("string"==typeof i||Array.isArray(i))&&0===i.length}function zg(i){return null!=i&&"number"==typeof i.length}const uo=new y.OlP("NgValidators"),Dc=new y.OlP("NgAsyncValidators"),O_=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class fh{static min(e){return function N_(i){return e=>{if(ld(e.value)||ld(i))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<i?{min:{min:i,actual:e.value}}:null}}(e)}static max(e){return function Cy(i){return e=>{if(ld(e.value)||ld(i))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>i?{max:{max:i,actual:e.value}}:null}}(e)}static required(e){return function Dy(i){return ld(i.value)?{required:!0}:null}(e)}static requiredTrue(e){return function Ty(i){return!0===i.value?null:{required:!0}}(e)}static email(e){return function Sy(i){return ld(i.value)||O_.test(i.value)?null:{email:!0}}(e)}static minLength(e){return function Tc(i){return e=>ld(e.value)||!zg(e.value)?null:e.value.length<i?{minlength:{requiredLength:i,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function P_(i){return e=>zg(e.value)&&e.value.length>i?{maxlength:{requiredLength:i,actualLength:e.value.length}}:null}(e)}static pattern(e){return function Ay(i){if(!i)return ph;let e,t;return"string"==typeof i?(t="","^"!==i.charAt(0)&&(t+="^"),t+=i,"$"!==i.charAt(i.length-1)&&(t+="$"),e=new RegExp(t)):(t=i.toString(),e=i),o=>{if(ld(o.value))return null;const c=o.value;return e.test(c)?null:{pattern:{requiredPattern:t,actualValue:c}}}}(e)}static nullValidator(e){return null}static compose(e){return Yg(e)}static composeAsync(e){return Qg(e)}}function ph(i){return null}function k_(i){return null!=i}function Wg(i){return(0,y.QGY)(i)?(0,Un.D)(i):i}function xy(i){let e={};return i.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function Zg(i,e){return e.map(t=>t(i))}function My(i){return i.map(e=>function Kg(i){return!i.validate}(e)?e:t=>e.validate(t))}function Yg(i){if(!i)return null;const e=i.filter(k_);return 0==e.length?null:function(t){return xy(Zg(t,e))}}function Sp(i){return null!=i?Yg(My(i)):null}function Qg(i){if(!i)return null;const e=i.filter(k_);return 0==e.length?null:function(t){return function Zw(...i){const e=(0,so.jO)(i),{args:t,keys:o}=Va(i),c=new Pi.y(p=>{const{length:v}=t;if(!v)return void p.complete();const C=new Array(v);let A=v,N=v;for(let B=0;B<v;B++){let W=!1;(0,Vo.Xf)(t[B]).subscribe((0,Ar.x)(p,ae=>{W||(W=!0,N--),C[B]=ae},()=>A--,void 0,()=>{(!A||!W)&&(N||p.next(o?hs(o,C):C),p.complete())}))}});return e?c.pipe(lc(e)):c}(Zg(t,e).map(Wg)).pipe((0,Mt.U)(xy))}}function ll(i){return null!=i?Qg(My(i)):null}function Jg(i,e){return null===i?[e]:Array.isArray(i)?[...i,e]:[i,e]}function Ap(i){return i._rawValidators}function Yw(i){return i._rawAsyncValidators}function dd(i){return i?Array.isArray(i)?i:[i]:[]}function xp(i,e){return Array.isArray(i)?i.includes(e):i===e}function F_(i,e){const t=dd(e);return dd(i).forEach(c=>{xp(t,c)||t.push(c)}),t}function hd(i,e){return dd(e).filter(t=>!xp(i,t))}class Ry{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Sp(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=ll(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Yo extends Ry{get formDirective(){return null}get path(){return null}}class xu extends Ry{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Ya{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let gh=(()=>{class i extends Ya{constructor(t){super(t)}}return i.\u0275fac=function(t){return new(t||i)(y.Y36(xu,2))},i.\u0275dir=y.lG2({type:i,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,o){2&t&&y.ekj("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[y.qOj]}),i})(),Ca=(()=>{class i extends Ya{constructor(t){super(t)}}return i.\u0275fac=function(t){return new(t||i)(y.Y36(Yo,10))},i.\u0275dir=y.lG2({type:i,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,o){2&t&&y.ekj("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},features:[y.qOj]}),i})();const yi="VALID",Xg="INVALID",pd="PENDING",mh="DISABLED";function Qa(i){return(Ly(i)?i.validators:i)||null}function Sc(i){return Array.isArray(i)?Sp(i):i||null}function gd(i,e){return(Ly(e)?e.asyncValidators:i)||null}function em(i){return Array.isArray(i)?ll(i):i||null}function Ly(i){return null!=i&&!Array.isArray(i)&&"object"==typeof i}class H_{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=Sc(this._rawValidators),this._composedAsyncValidatorFn=em(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===yi}get invalid(){return this.status===Xg}get pending(){return this.status==pd}get disabled(){return this.status===mh}get enabled(){return this.status!==mh}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=Sc(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=em(e)}addValidators(e){this.setValidators(F_(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(F_(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(hd(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(hd(e,this._rawAsyncValidators))}hasValidator(e){return xp(this._rawValidators,e)}hasAsyncValidator(e){return xp(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=pd,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=mh,this.errors=null,this._forEachChild(o=>{o.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(o=>o(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=yi,this._forEachChild(o=>{o.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(o=>o(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===yi||this.status===pd)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?mh:yi}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=pd,this._hasOwnPendingAsyncValidator=!0;const t=Wg(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(o=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(o,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((o,c)=>o&&o._find(c),this)}getError(e,t){const o=t?this.get(t):this;return o&&o.errors?o.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new y.vpe,this.statusChanges=new y.vpe}_calculateStatus(){return this._allControlsDisabled()?mh:this.errors?Xg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(pd)?pd:this._anyControlsHaveStatus(Xg)?Xg:yi}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Ly(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class mf extends H_{constructor(e,t,o){super(Qa(t),gd(o,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,o={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:o.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,o={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:o.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function j_(i,e,t){i._forEachChild((o,c)=>{if(void 0===t[c])throw new y.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(o=>{(function Jw(i,e,t){const o=i.controls;if(!(e?Object.keys(o):o).length)throw new y.vHH(1e3,"");if(!o[t])throw new y.vHH(1001,"")})(this,!0,o),this.controls[o].setValue(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(o=>{const c=this.controls[o];c&&c.patchValue(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((o,c)=>{o.reset(e[c],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,o)=>(e[o]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,o)=>!!o._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const o=this.controls[t];o&&e(o,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,o]of Object.entries(this.controls))if(this.contains(t)&&e(o))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,o,c)=>((o.enabled||this.disabled)&&(t[c]=o.value),t))}_reduceChildren(e,t){let o=e;return this._forEachChild((c,p)=>{o=t(o,c,p)}),o}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}function Op(i,e){vh(i,e),e.valueAccessor.writeValue(i.value),i.disabled&&e.valueAccessor.setDisabledState?.(!0),function fl(i,e){e.valueAccessor.registerOnChange(t=>{i._pendingValue=t,i._pendingChange=!0,i._pendingDirty=!0,"change"===i.updateOn&&Uy(i,e)})}(i,e),function G_(i,e){const t=(o,c)=>{e.valueAccessor.writeValue(o),c&&e.viewToModelUpdate(o)};i.registerOnChange(t),e._registerOnDestroy(()=>{i._unregisterOnChange(t)})}(i,e),function md(i,e){e.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,"blur"===i.updateOn&&i._pendingChange&&Uy(i,e),"submit"!==i.updateOn&&i.markAsTouched()})}(i,e),function $_(i,e){if(e.valueAccessor.setDisabledState){const t=o=>{e.valueAccessor.setDisabledState(o)};i.registerOnDisabledChange(t),e._registerOnDestroy(()=>{i._unregisterOnDisabledChange(t)})}}(i,e)}function Np(i,e,t=!0){const o=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(o),e.valueAccessor.registerOnTouched(o)),vf(i,e),i&&(e._invokeOnDestroyCallbacks(),i._registerOnCollectionChange(()=>{}))}function yf(i,e){i.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function vh(i,e){const t=Ap(i);null!==e.validator?i.setValidators(Jg(t,e.validator)):"function"==typeof t&&i.setValidators([t]);const o=Yw(i);null!==e.asyncValidator?i.setAsyncValidators(Jg(o,e.asyncValidator)):"function"==typeof o&&i.setAsyncValidators([o]);const c=()=>i.updateValueAndValidity();yf(e._rawValidators,c),yf(e._rawAsyncValidators,c)}function vf(i,e){let t=!1;if(null!==i){if(null!==e.validator){const c=Ap(i);if(Array.isArray(c)&&c.length>0){const p=c.filter(v=>v!==e.validator);p.length!==c.length&&(t=!0,i.setValidators(p))}}if(null!==e.asyncValidator){const c=Yw(i);if(Array.isArray(c)&&c.length>0){const p=c.filter(v=>v!==e.asyncValidator);p.length!==c.length&&(t=!0,i.setAsyncValidators(p))}}}const o=()=>{};return yf(e._rawValidators,o),yf(e._rawAsyncValidators,o),t}function Uy(i,e){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}function Lp(i,e){const t=i.indexOf(e);t>-1&&i.splice(t,1)}function wf(i){return"object"==typeof i&&null!==i&&2===Object.keys(i).length&&"value"in i&&"disabled"in i}const ws=class extends H_{constructor(e=null,t,o){super(Qa(t),gd(o,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ly(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=wf(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(o=>o(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Lp(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Lp(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){wf(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let Up=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=y.lG2({type:i,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),i})(),qy=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=y.oAB({type:i}),i.\u0275inj=y.cJS({}),i})();const Bp=new y.OlP("NgModelWithFormControlWarning"),om={provide:Yo,useExisting:(0,y.Gpc)(()=>ml)};let ml=(()=>{class i extends Yo{constructor(t,o){super(),this.validators=t,this.asyncValidators=o,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new y.vpe,this._setValidators(t),this._setAsyncValidators(o)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(vf(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const o=this.form.get(t.path);return Op(o,t),o.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),o}getControl(t){return this.form.get(t.path)}removeControl(t){Np(t.control||null,t,!1),function xc(i,e){const t=i.indexOf(e);t>-1&&i.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,o){this.form.get(t.path).setValue(o)}onSubmit(t){return this.submitted=!0,function pl(i,e){i._syncPendingControls(),e.forEach(t=>{const o=t.control;"submit"===o.updateOn&&o._pendingChange&&(t.viewToModelUpdate(o._pendingValue),o._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const o=t.control,c=this.form.get(t.path);o!==c&&(Np(o||null,t),(i=>i instanceof ws)(c)&&(Op(c,t),t.control=c))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const o=this.form.get(t.path);(function Pp(i,e){vh(i,e)})(o,t),o.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const o=this.form.get(t.path);o&&function By(i,e){return vf(i,e)}(o,t)&&o.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){vh(this.form,this),this._oldForm&&vf(this._oldForm,this)}_checkFormPresent(){}}return i.\u0275fac=function(t){return new(t||i)(y.Y36(uo,10),y.Y36(Dc,10))},i.\u0275dir=y.lG2({type:i,selectors:[["","formGroup",""]],hostBindings:function(t,o){1&t&&y.NdJ("submit",function(p){return o.onSubmit(p)})("reset",function(){return o.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[y._Bn([om]),y.qOj,y.TTD]}),i})();const bs={provide:xu,useExisting:(0,y.Gpc)(()=>wd)};let wd=(()=>{class i extends xu{constructor(t,o,c,p,v){super(),this._ngModelWarningConfig=v,this._added=!1,this.update=new y.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(o),this._setAsyncValidators(c),this.valueAccessor=function gl(i,e){if(!e)return null;let t,o,c;return Array.isArray(e),e.forEach(p=>{p.constructor===ud?t=p:function tm(i){return Object.getPrototypeOf(i.constructor)===Ko}(p)?o=p:c=p}),c||o||t||null}(0,p)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function Ja(i,e){if(!i.hasOwnProperty("model"))return!1;const t=i.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function yh(i,e){return[...e.path,i]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return i._ngModelWarningSentOnce=!1,i.\u0275fac=function(t){return new(t||i)(y.Y36(Yo,13),y.Y36(uo,10),y.Y36(Dc,10),y.Y36(Cc,10),y.Y36(Bp,8))},i.\u0275dir=y.lG2({type:i,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[y._Bn([bs]),y.qOj,y.TTD]}),i})(),Qt=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=y.oAB({type:i}),i.\u0275inj=y.cJS({imports:[qy]}),i})(),On=(()=>{class i{static withConfig(t){return{ngModule:i,providers:[{provide:Bp,useValue:t.warnOnNgModelWithFormControl}]}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=y.oAB({type:i}),i.\u0275inj=y.cJS({imports:[Qt]}),i})();class Ky{}class Tf{}class Sf{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const o=t.indexOf(":");if(o>0){const c=t.slice(0,o),p=c.toLowerCase(),v=t.slice(o+1).trim();this.maybeSetNormalizedName(c,p),this.headers.has(p)?this.headers.get(p).push(v):this.headers.set(p,[v])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let o=e[t];const c=t.toLowerCase();"string"==typeof o&&(o=[o]),o.length>0&&(this.headers.set(c,o),this.maybeSetNormalizedName(t,c))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Sf?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Sf;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Sf?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let o=e.value;if("string"==typeof o&&(o=[o]),0===o.length)return;this.maybeSetNormalizedName(e.name,t);const c=("a"===e.op?this.headers.get(t):void 0)||[];c.push(...o),this.headers.set(t,c);break;case"d":const p=e.value;if(p){let v=this.headers.get(t);if(!v)return;v=v.filter(C=>-1===p.indexOf(C)),0===v.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,v)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class XD{encodeKey(e){return vl(e)}encodeValue(e){return vl(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const ob=/%(\d[a-f0-9])/gi,tT={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function vl(i){return encodeURIComponent(i).replace(ob,(e,t)=>tT[t]??e)}function Af(i){return`${i}`}class Ci{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new XD,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function eT(i,e){const t=new Map;return i.length>0&&i.replace(/^\?/,"").split("&").forEach(c=>{const p=c.indexOf("="),[v,C]=-1==p?[e.decodeKey(c),""]:[e.decodeKey(c.slice(0,p)),e.decodeValue(c.slice(p+1))],A=t.get(v)||[];A.push(C),t.set(v,A)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const o=e.fromObject[t],c=Array.isArray(o)?o.map(Af):[Af(o)];this.map.set(t,c)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(o=>{const c=e[o];Array.isArray(c)?c.forEach(p=>{t.push({param:o,value:p,op:"a"})}):t.push({param:o,value:c,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(o=>t+"="+this.encoder.encodeValue(o)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Ci({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(Af(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let o=this.map.get(e.param)||[];const c=o.indexOf(Af(e.value));-1!==c&&o.splice(c,1),o.length>0?this.map.set(e.param,o):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class r0{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function o0(i){return typeof ArrayBuffer<"u"&&i instanceof ArrayBuffer}function $p(i){return typeof Blob<"u"&&i instanceof Blob}function Gp(i){return typeof FormData<"u"&&i instanceof FormData}class Ed{constructor(e,t,o,c){let p;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function Rc(i){switch(i){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||c?(this.body=void 0!==o?o:null,p=c):p=o,p&&(this.reportProgress=!!p.reportProgress,this.withCredentials=!!p.withCredentials,p.responseType&&(this.responseType=p.responseType),p.headers&&(this.headers=p.headers),p.context&&(this.context=p.context),p.params&&(this.params=p.params)),this.headers||(this.headers=new Sf),this.context||(this.context=new r0),this.params){const v=this.params.toString();if(0===v.length)this.urlWithParams=t;else{const C=t.indexOf("?");this.urlWithParams=t+(-1===C?"?":C<t.length-1?"&":"")+v}}else this.params=new Ci,this.urlWithParams=t}serializeBody(){return null===this.body?null:o0(this.body)||$p(this.body)||Gp(this.body)||function um(i){return typeof URLSearchParams<"u"&&i instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Ci?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Gp(this.body)?null:$p(this.body)?this.body.type||null:o0(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Ci?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,o=e.url||this.url,c=e.responseType||this.responseType,p=void 0!==e.body?e.body:this.body,v=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,C=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let A=e.headers||this.headers,N=e.params||this.params;const B=e.context??this.context;return void 0!==e.setHeaders&&(A=Object.keys(e.setHeaders).reduce((W,ae)=>W.set(ae,e.setHeaders[ae]),A)),e.setParams&&(N=Object.keys(e.setParams).reduce((W,ae)=>W.set(ae,e.setParams[ae]),N)),new Ed(t,o,p,{params:N,headers:A,context:B,reportProgress:C,responseType:c,withCredentials:v})}}var si=(()=>((si=si||{})[si.Sent=0]="Sent",si[si.UploadProgress=1]="UploadProgress",si[si.ResponseHeader=2]="ResponseHeader",si[si.DownloadProgress=3]="DownloadProgress",si[si.Response=4]="Response",si[si.User=5]="User",si))();class xf{constructor(e,t=200,o="OK"){this.headers=e.headers||new Sf,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||o,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class Mf extends xf{constructor(e={}){super(e),this.type=si.ResponseHeader}clone(e={}){return new Mf({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class wh extends xf{constructor(e={}){super(e),this.type=si.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new wh({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class qp extends xf{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function s0(i,e){return{body:e,headers:i.headers,context:i.context,observe:i.observe,params:i.params,reportProgress:i.reportProgress,responseType:i.responseType,withCredentials:i.withCredentials}}let a0=(()=>{class i{constructor(t){this.handler=t}request(t,o,c={}){let p;if(t instanceof Ed)p=t;else{let A,N;A=c.headers instanceof Sf?c.headers:new Sf(c.headers),c.params&&(N=c.params instanceof Ci?c.params:new Ci({fromObject:c.params})),p=new Ed(t,o,void 0!==c.body?c.body:null,{headers:A,context:c.context,params:N,reportProgress:c.reportProgress,responseType:c.responseType||"json",withCredentials:c.withCredentials})}const v=Et(p).pipe(We(A=>this.handler.handle(A)));if(t instanceof Ed||"events"===c.observe)return v;const C=v.pipe(P(A=>A instanceof wh));switch(c.observe||"body"){case"body":switch(p.responseType){case"arraybuffer":return C.pipe((0,Mt.U)(A=>{if(null!==A.body&&!(A.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return A.body}));case"blob":return C.pipe((0,Mt.U)(A=>{if(null!==A.body&&!(A.body instanceof Blob))throw new Error("Response is not a Blob.");return A.body}));case"text":return C.pipe((0,Mt.U)(A=>{if(null!==A.body&&"string"!=typeof A.body)throw new Error("Response is not a string.");return A.body}));default:return C.pipe((0,Mt.U)(A=>A.body))}case"response":return C;default:throw new Error(`Unreachable: unhandled observe type ${c.observe}}`)}}delete(t,o={}){return this.request("DELETE",t,o)}get(t,o={}){return this.request("GET",t,o)}head(t,o={}){return this.request("HEAD",t,o)}jsonp(t,o){return this.request("JSONP",t,{params:(new Ci).append(o,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,o={}){return this.request("OPTIONS",t,o)}patch(t,o,c={}){return this.request("PATCH",t,s0(c,o))}post(t,o,c={}){return this.request("POST",t,s0(c,o))}put(t,o,c={}){return this.request("PUT",t,s0(c,o))}}return i.\u0275fac=function(t){return new(t||i)(y.LFG(Ky))},i.\u0275prov=y.Yz7({token:i,factory:i.\u0275fac}),i})();class sb{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const ab=new y.OlP("HTTP_INTERCEPTORS");let EE=(()=>{class i{intercept(t,o){return o.handle(t)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=y.Yz7({token:i,factory:i.\u0275fac}),i})();const ub=/^\)\]\}',?\n/;let CE=(()=>{class i{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Pi.y(o=>{const c=this.xhrFactory.build();if(c.open(t.method,t.urlWithParams),t.withCredentials&&(c.withCredentials=!0),t.headers.forEach((fe,ve)=>c.setRequestHeader(fe,ve.join(","))),t.headers.has("Accept")||c.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const fe=t.detectContentTypeHeader();null!==fe&&c.setRequestHeader("Content-Type",fe)}if(t.responseType){const fe=t.responseType.toLowerCase();c.responseType="json"!==fe?fe:"text"}const p=t.serializeBody();let v=null;const C=()=>{if(null!==v)return v;const fe=c.statusText||"OK",ve=new Sf(c.getAllResponseHeaders()),Ye=function cb(i){return"responseURL"in i&&i.responseURL?i.responseURL:/^X-Request-URL:/m.test(i.getAllResponseHeaders())?i.getResponseHeader("X-Request-URL"):null}(c)||t.url;return v=new Mf({headers:ve,status:c.status,statusText:fe,url:Ye}),v},A=()=>{let{headers:fe,status:ve,statusText:Ye,url:Xe}=C(),At=null;204!==ve&&(At=typeof c.response>"u"?c.responseText:c.response),0===ve&&(ve=At?200:0);let Wt=ve>=200&&ve<300;if("json"===t.responseType&&"string"==typeof At){const Zt=At;At=At.replace(ub,"");try{At=""!==At?JSON.parse(At):null}catch(Gt){At=Zt,Wt&&(Wt=!1,At={error:Gt,text:At})}}Wt?(o.next(new wh({body:At,headers:fe,status:ve,statusText:Ye,url:Xe||void 0})),o.complete()):o.error(new qp({error:At,headers:fe,status:ve,statusText:Ye,url:Xe||void 0}))},N=fe=>{const{url:ve}=C(),Ye=new qp({error:fe,status:c.status||0,statusText:c.statusText||"Unknown Error",url:ve||void 0});o.error(Ye)};let B=!1;const W=fe=>{B||(o.next(C()),B=!0);let ve={type:si.DownloadProgress,loaded:fe.loaded};fe.lengthComputable&&(ve.total=fe.total),"text"===t.responseType&&!!c.responseText&&(ve.partialText=c.responseText),o.next(ve)},ae=fe=>{let ve={type:si.UploadProgress,loaded:fe.loaded};fe.lengthComputable&&(ve.total=fe.total),o.next(ve)};return c.addEventListener("load",A),c.addEventListener("error",N),c.addEventListener("timeout",N),c.addEventListener("abort",N),t.reportProgress&&(c.addEventListener("progress",W),null!==p&&c.upload&&c.upload.addEventListener("progress",ae)),c.send(p),o.next({type:si.Sent}),()=>{c.removeEventListener("error",N),c.removeEventListener("abort",N),c.removeEventListener("load",A),c.removeEventListener("timeout",N),t.reportProgress&&(c.removeEventListener("progress",W),null!==p&&c.upload&&c.upload.removeEventListener("progress",ae)),c.readyState!==c.DONE&&c.abort()}})}}return i.\u0275fac=function(t){return new(t||i)(y.LFG(ro))},i.\u0275prov=y.Yz7({token:i,factory:i.\u0275fac}),i})();const cm=new y.OlP("XSRF_COOKIE_NAME"),lm=new y.OlP("XSRF_HEADER_NAME");class u0{}let aT=(()=>{class i{constructor(t,o,c){this.doc=t,this.platform=o,this.cookieName=c,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Fc(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return i.\u0275fac=function(t){return new(t||i)(y.LFG(Oe),y.LFG(y.Lbi),y.LFG(cm))},i.\u0275prov=y.Yz7({token:i,factory:i.\u0275fac}),i})(),Yy=(()=>{class i{constructor(t,o){this.tokenService=t,this.headerName=o}intercept(t,o){const c=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||c.startsWith("http://")||c.startsWith("https://"))return o.handle(t);const p=this.tokenService.getToken();return null!==p&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,p)})),o.handle(t)}}return i.\u0275fac=function(t){return new(t||i)(y.LFG(u0),y.LFG(lm))},i.\u0275prov=y.Yz7({token:i,factory:i.\u0275fac}),i})(),lb=(()=>{class i{constructor(t,o){this.backend=t,this.injector=o,this.chain=null}handle(t){if(null===this.chain){const o=this.injector.get(ab,[]);this.chain=o.reduceRight((c,p)=>new sb(c,p),this.backend)}return this.chain.handle(t)}}return i.\u0275fac=function(t){return new(t||i)(y.LFG(Tf),y.LFG(y.zs3))},i.\u0275prov=y.Yz7({token:i,factory:i.\u0275fac}),i})(),db=(()=>{class i{static disable(){return{ngModule:i,providers:[{provide:Yy,useClass:EE}]}}static withOptions(t={}){return{ngModule:i,providers:[t.cookieName?{provide:cm,useValue:t.cookieName}:[],t.headerName?{provide:lm,useValue:t.headerName}:[]]}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=y.oAB({type:i}),i.\u0275inj=y.cJS({providers:[Yy,{provide:ab,useExisting:Yy,multi:!0},{provide:u0,useClass:aT},{provide:cm,useValue:"XSRF-TOKEN"},{provide:lm,useValue:"X-XSRF-TOKEN"}]}),i})(),DE=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=y.oAB({type:i}),i.\u0275inj=y.cJS({providers:[a0,{provide:Ky,useClass:lb},CE,{provide:Tf,useExisting:CE}],imports:[db.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),i})(),Qy=(()=>{class i{constructor(t,o){this._http=t,this._router=o,this.favDiv=[],this.BaseURL="http://localhost:3000/",this.gettoken()&&this._router.navigate(["/home/files"])}gettoken(){return!!localStorage.getItem("accessToken")}signin(t){return this._http.post(this.BaseURL+"signin",t)}signup(t){return this._http.post(this.BaseURL+"signup",t)}signout(){localStorage.setItem("accessToken",""),localStorage.setItem("userID",""),localStorage.setItem("FolderId","")}}return i.\u0275fac=function(t){return new(t||i)(y.LFG(a0),y.LFG(Vr))},i.\u0275prov=y.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function dT(i,e){if(1&i&&(y.TgZ(0,"div",25),y._uU(1),y.qZA()),2&i){const t=y.oxw();y.xp6(1),y.Oqu(t.errMSG)}}let SE=(()=>{class i{constructor(t,o){this._auth=t,this._router=o,this.errMSG="",this.loginForm=new mf({email:new ws(null,[fh.required,fh.email]),password:new ws(null,[fh.required])})}ngOnInit(){}signIn(t){this._auth.signin(t.value).subscribe({next:o=>{"Success"==o.Message?(console.log(o),localStorage.setItem("accessToken",o.token),localStorage.setItem("userID",o._id),this._router.navigate(["/home/files"])):this.errMSG=o.errorMessage}})}}return i.\u0275fac=function(t){return new(t||i)(y.Y36(Qy),y.Y36(Vr))},i.\u0275cmp=y.Xpm({type:i,selectors:[["app-sign-in"]],decls:41,vars:2,consts:[[1,"login"],[1,"forgetPassowrd"],["routerLink","/signup",1,"pointer"],[1,"container-fluid"],[1,"row"],[1,"col-md-3","right"],[1,"p-2"],[1,"text-center","mt-5"],[1,"h4","text-center"],[1,"image","text-center","mt-5"],["src","../../assets/Img/sign-in.svg","alt","Welcome",1,"img-fluid"],[1,"col-md-9","left"],[1,"container"],[1,"content"],[1,"header"],[1,"button"],[1,"image"],["src","../../assets/Img/icons8-google-48.png","alt","",1,"img-fluid"],["type","button",1,"btn","btn-primary"],["action","/",3,"formGroup","ngSubmit"],["for","/",1,"mt-3"],["type","email","name","email","formControlName","email","title","email-input",1,"form-control"],["type","password","name","passowrd","formControlName","password","title","passowrd-input",1,"form-control"],["type","submit","title","/",1,"btn","mt-4","log-btn"],["class","err alert alert-danger mt-3 text-center p-1",4,"ngIf"],[1,"err","alert","alert-danger","mt-3","text-center","p-1"]],template:function(t,o){1&t&&(y.TgZ(0,"section",0)(1,"div",1)(2,"p"),y._uU(3,"Not a Member? "),y.TgZ(4,"span",2),y._uU(5,"SignUp"),y.qZA()()(),y.TgZ(6,"div",3)(7,"div",4)(8,"div",5)(9,"h5",6),y._uU(10,"MDrive"),y.qZA(),y.TgZ(11,"h2",7),y._uU(12,"Welcome To Our Drive"),y.qZA(),y.TgZ(13,"p",8),y._uU(14,"Education Zone"),y.qZA(),y.TgZ(15,"div",9),y._UZ(16,"img",10),y.qZA()(),y.TgZ(17,"div",11)(18,"div",12)(19,"div",4)(20,"div",13)(21,"div",14)(22,"h4"),y._uU(23,"Sign In To MDrive"),y.qZA(),y.TgZ(24,"div",15)(25,"div",16),y._UZ(26,"img",17),y.qZA(),y.TgZ(27,"button",18),y._uU(28," Sign Up With Google "),y.qZA()(),y.TgZ(29,"h5"),y._uU(30,"Or"),y.qZA(),y.TgZ(31,"form",19),y.NdJ("ngSubmit",function(){return o.signIn(o.loginForm)}),y.TgZ(32,"label",20),y._uU(33,"EmailAddress"),y.qZA(),y._UZ(34,"input",21),y.TgZ(35,"label",20),y._uU(36,"Password"),y.qZA(),y._UZ(37,"input",22),y.TgZ(38,"button",23),y._uU(39,"SIGN IN"),y.qZA()(),y.YNc(40,dT,2,1,"div",24),y.qZA()()()()()()()()),2&t&&(y.xp6(31),y.Q6J("formGroup",o.loginForm),y.xp6(9),y.Q6J("ngIf",o.errMSG))},dependencies:[Nr,Zo,Up,ud,gh,Ca,ml,wd],styles:['.right[_ngcontent-%COMP%]{font-family:IM Fell Double Pica SC,serif;background-color:#f2ced7;color:#7b521c;height:100vh}.pointer[_ngcontent-%COMP%]{cursor:pointer}.login[_ngcontent-%COMP%]{position:relative}.login[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30rem}.left[_ngcontent-%COMP%]{font-family:Roboto,sans-serif}.left[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{background-color:#fff;border-bottom-left-radius:.25rem;border-top-left-radius:.25rem}.left[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{display:flex;align-items:center;width:-moz-fit-content;width:fit-content;border-radius:.5rem}.left[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;height:100vh}.left[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{width:50%;display:flex;flex-direction:column;justify-content:center;text-align:start}.left[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{position:relative;text-align:center}.left[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]:after{content:"";position:absolute;display:block;top:50%;right:-15px;height:1px;width:50%;background-color:#222}.left[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]:before{content:"";position:absolute;left:-15px;top:50%;height:1px;width:50%;background-color:#222}.left[_ngcontent-%COMP%]   .log-btn[_ngcontent-%COMP%]{background-color:#ea4c89;width:100px;color:#fff}.forgetPassowrd[_ngcontent-%COMP%]{position:absolute;top:10px;right:20px}.forgetPassowrd[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#442bc7}@media (max-width: 768px){.button[_ngcontent-%COMP%]{margin:10px 0}button[_ngcontent-%COMP%]{font-size:15px;height:40px;width:164px}.left[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{width:100%!important}.left[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{height:50vh;width:100%}.right[_ngcontent-%COMP%]{height:50vh}.login[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:15rem}.login[_ngcontent-%COMP%]{display:flex;flex-flow:column}.right[_ngcontent-%COMP%]{order:2}.left[_ngcontent-%COMP%]{order:1}}']}),i})(),AE=(()=>{class i{constructor(t,o){this._authService=t,this._router=o}ngOnInit(){}logout(){this._authService.signout(),this._router.navigate(["signin"])}}return i.\u0275fac=function(t){return new(t||i)(y.Y36(Qy),y.Y36(Vr))},i.\u0275cmp=y.Xpm({type:i,selectors:[["app-home"]],decls:48,vars:0,consts:[[1,"navbar","navbar-expand-lg","navbar-light","bg-light"],[1,"container-fluid"],["href","#",1,"navbar-brand"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNav","aria-controls","navbarNav","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse"],[1,"navbar-nav"],[1,"nav-item"],["aria-current","page","routerLink","files","routerLinkActive","active",1,"nav-link","active"],["routerLink","notes","routerLinkActive","active",1,"nav-link"],["routerLink","star","routerLinkActive","active",1,"nav-link"],["routerLink","addfolder","routerLinkActive","active",1,"nav-link"],[1,"main"],[1,"row"],[1,"col-1"],[1,"sidebar","vh-100"],[1,"header"],[1,"logo"],[1,"fa-brands","fa-google-drive"],[1,"body"],["routerLink","files","routerLinkActive","active"],[1,"fa-regular","fa-folder"],["routerLink","notes","routerLinkActive","active"],[1,"fa-regular","fa-note-sticky"],["routerLink","star","routerLinkActive","active"],[1,"fa-regular","fa-star"],["routerLink","addfolder","routerLinkActive","active"],[1,"fa-solid","fa-folder-plus"],[1,"bottom"],[1,"logout",3,"click"],[1,"fa-solid","fa-right-from-bracket"],[1,"col-11"],[1,"details"],[1,"notification"],[1,"fa-regular","fa-bell"],[1,"profile"],[1,"fa-regular","fa-circle-user"]],template:function(t,o){1&t&&(y.TgZ(0,"nav",0)(1,"div",1)(2,"a",2),y._uU(3,"MDrive"),y.qZA(),y.TgZ(4,"button",3),y._UZ(5,"span",4),y.qZA(),y.TgZ(6,"div",5)(7,"ul",6)(8,"li",7)(9,"a",8),y._uU(10,"Files"),y.qZA()(),y.TgZ(11,"li",7)(12,"a",9),y._uU(13,"Notes"),y.qZA()(),y.TgZ(14,"li",7)(15,"a",10),y._uU(16,"Star"),y.qZA()(),y.TgZ(17,"li",7)(18,"a",11),y._uU(19,"Add Folder"),y.qZA()()()()()(),y.TgZ(20,"section",12)(21,"div",1)(22,"div",13)(23,"div",14)(24,"div",15)(25,"div",16)(26,"div",17),y._UZ(27,"i",18),y.qZA()(),y.TgZ(28,"div",19)(29,"ul")(30,"li",20),y._UZ(31,"i",21),y.qZA(),y.TgZ(32,"li",22),y._UZ(33,"i",23),y.qZA(),y.TgZ(34,"li",24),y._UZ(35,"i",25),y.qZA(),y.TgZ(36,"li",26),y._UZ(37,"i",27),y.qZA()()(),y.TgZ(38,"div",28)(39,"div",29),y.NdJ("click",function(){return o.logout()}),y._UZ(40,"i",30),y.qZA()()()(),y.TgZ(41,"div",31)(42,"div",32)(43,"div",33),y._UZ(44,"i",34),y.qZA(),y.TgZ(45,"div",35),y._UZ(46,"i",36),y.qZA()(),y._UZ(47,"router-outlet"),y.qZA()()()())},dependencies:[E,Zo,Dp,cl],styles:[".col-1[_ngcontent-%COMP%]{padding:0;min-height:100vh;box-shadow:#2123261a 20px 10px 10px -10px}.main[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]{position:relative;padding:10px 0}.main[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%], .main[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.main[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2rem}.main[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]{position:relative;top:50%;transform:translateY(-50%);display:flex;justify-content:center;align-items:center}.main[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0;width:100%}.main[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:30px 0;font-size:2rem;display:flex;align-items:center;justify-content:center;transition:all .3s;width:100%;padding:5px 0;cursor:pointer}.main[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{color:#686dd9}.main[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(2){margin:30px 0 0}.main[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child, .main[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{margin:0}.main[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]   .bottom[_ngcontent-%COMP%]   .logout[_ngcontent-%COMP%]{position:absolute;bottom:20px;left:50%;font-size:2rem;transform:translate(-50%);cursor:pointer}.main[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]   .bottom[_ngcontent-%COMP%]   .logout[_ngcontent-%COMP%]:hover{color:#686dd9}nav[_ngcontent-%COMP%]{display:none}.active[_ngcontent-%COMP%]{border-left:6px solid #686DD9;color:#686dd9!important}.col-11[_ngcontent-%COMP%]{min-height:100vh;background-color:#f2f1f8}.details[_ngcontent-%COMP%]{display:flex;justify-content:end}.details[_ngcontent-%COMP%]   .notification[_ngcontent-%COMP%]{background-color:#fff;width:30px;height:30px;border-radius:50%;display:flex;justify-content:center;align-items:center;margin:10px}.details[_ngcontent-%COMP%]   .profile[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:50%;display:flex;justify-content:center;align-items:center;margin:10px}.details[_ngcontent-%COMP%]   .notification[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .details[_ngcontent-%COMP%]   .profile[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem}@media (max-width: 992px){nav[_ngcontent-%COMP%]{display:block}.col-1[_ngcontent-%COMP%]{display:none}.col-11[_ngcontent-%COMP%]{flex:0 0 auto;width:100%}.active[_ngcontent-%COMP%]{border:none;color:#686dd9!important}}"]}),i})();var hb=ee(4986),Di=ee(5813);function fb(){return(0,hi.e)((i,e)=>{let t,o=!1;i.subscribe((0,Ar.x)(e,c=>{const p=t;t=c,o&&e.next([p,c]),o=!0}))})}function fT(i,e){return i===e}var Kt,Zs=ee(2011),gb=(ee(2476),ee(3942)),Ge=ee(5861),Oc=ee(9681),zp=ee(4859),bh=ee(1877),An=ee(2090),xE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Cd={},mb=mb||{},Sn=xE||self;function Jy(){}function c0(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function Ti(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var yb="closure_uid_"+(1e9*Math.random()>>>0),pT=0;function RE(i,e,t){return i.call.apply(i.bind,arguments)}function gT(i,e,t){if(!i)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(c,o),i.apply(e,c)}}return function(){return i.apply(e,arguments)}}function Is(i,e,t){return(Is=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?RE:gT).apply(null,arguments)}function Xy(i,e){var t=Array.prototype.slice.call(arguments,1);return function(){var o=t.slice();return o.push.apply(o,arguments),i.apply(this,o)}}function Ui(i,e){function t(){}t.prototype=e.prototype,i.X=e.prototype,i.prototype=new t,i.prototype.constructor=i,i.Vb=function(o,c,p){for(var v=Array(arguments.length-2),C=2;C<arguments.length;C++)v[C-2]=arguments[C];return e.prototype[c].apply(o,v)}}function Rf(){this.s=this.s,this.o=this.o}var OE={};Rf.prototype.s=!1,Rf.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var i=function ME(i){return Object.prototype.hasOwnProperty.call(i,yb)&&i[yb]||(i[yb]=++pT)}(this);delete OE[i]}},Rf.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const NE=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let t=0;t<i.length;t++)if(t in i&&i[t]===e)return t;return-1};function l0(i){const e=i.length;if(0<e){const t=Array(e);for(let o=0;o<e;o++)t[o]=i[o];return t}return[]}function yT(i,e){for(let t=1;t<arguments.length;t++){const o=arguments[t];if(c0(o)){const c=i.length||0,p=o.length||0;i.length=c+p;for(let v=0;v<p;v++)i[c+v]=o[v]}else i.push(o)}}function Es(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}Es.prototype.h=function(){this.defaultPrevented=!0};var vb=function(){if(!Sn.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{Sn.addEventListener("test",Jy,e),Sn.removeEventListener("test",Jy,e)}catch{}return i}();function Ru(i){return/^[\s\xa0]*$/.test(i)}var PE=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function _b(i,e){return i<e?-1:i>e?1:0}function Ou(){var i=Sn.navigator;return i&&(i=i.userAgent)?i:""}function co(i){return-1!=Ou().indexOf(i)}function Nu(i){return Nu[" "](i),i}Nu[" "]=Jy;var d0,i,FE=co("Opera"),dm=co("Trident")||co("MSIE"),LE=co("Edge"),wb=LE||dm,VE=co("Gecko")&&!(-1!=Ou().toLowerCase().indexOf("webkit")&&!co("Edge"))&&!(co("Trident")||co("MSIE"))&&!co("Edge"),bb=-1!=Ou().toLowerCase().indexOf("webkit")&&!co("Edge");function hm(){var i=Sn.document;return i?i.documentMode:void 0}e:{var h0="",Ib=(i=Ou(),VE?/rv:([^\);]+)(\)|;)/.exec(i):LE?/Edge\/([\d\.]+)/.exec(i):dm?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):bb?/WebKit\/(\S+)/.exec(i):FE?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(Ib&&(h0=Ib?Ib[1]:""),dm){var f0=hm();if(null!=f0&&f0>parseFloat(h0)){d0=String(f0);break e}}d0=h0}var UE={};var BE=Sn.document&&dm&&(hm()||parseInt(d0,10))||void 0;function Wp(i,e){if(Es.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var t=this.type=i.type,o=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(VE){e:{try{Nu(e.nodeName);var c=!0;break e}catch{}c=!1}c||(e=null)}}else"mouseover"==t?e=i.fromElement:"mouseout"==t&&(e=i.toElement);this.relatedTarget=e,o?(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:g0[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&Wp.X.h.call(this)}}Ui(Wp,Es);var g0={2:"touch",3:"pen",4:"mouse"};Wp.prototype.h=function(){Wp.X.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var Zp="closure_listenable_"+(1e6*Math.random()|0),jE=0;function HE(i,e,t,o,c){this.listener=i,this.proxy=null,this.src=e,this.type=t,this.capture=!!o,this.ha=c,this.key=++jE,this.ba=this.ea=!1}function ev(i){i.ba=!0,i.listener=null,i.proxy=null,i.src=null,i.ha=null}function m0(i,e,t){for(const o in i)e.call(t,i[o],o,i)}function Db(i){const e={};for(const t in i)e[t]=i[t];return e}const Tb="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Sb(i,e){let t,o;for(let c=1;c<arguments.length;c++){for(t in o=arguments[c],o)i[t]=o[t];for(let p=0;p<Tb.length;p++)t=Tb[p],Object.prototype.hasOwnProperty.call(o,t)&&(i[t]=o[t])}}function y0(i){this.src=i,this.g={},this.h=0}function Ab(i,e){var t=e.type;if(t in i.g){var p,o=i.g[t],c=NE(o,e);(p=0<=c)&&Array.prototype.splice.call(o,c,1),p&&(ev(e),0==i.g[t].length&&(delete i.g[t],i.h--))}}function xb(i,e,t,o){for(var c=0;c<i.length;++c){var p=i[c];if(!p.ba&&p.listener==e&&p.capture==!!t&&p.ha==o)return c}return-1}y0.prototype.add=function(i,e,t,o,c){var p=i.toString();(i=this.g[p])||(i=this.g[p]=[],this.h++);var v=xb(i,e,o,c);return-1<v?(e=i[v],t||(e.ea=!1)):((e=new HE(e,this.src,p,!!o,c)).ea=t,i.push(e)),e};var Mb="closure_lm_"+(1e6*Math.random()|0),Rb={};function $E(i,e,t,o,c){if(o&&o.once)return qE(i,e,t,o,c);if(Array.isArray(e)){for(var p=0;p<e.length;p++)$E(i,e[p],t,o,c);return null}return t=kb(t),i&&i[Zp]?i.N(e,t,Ti(o)?!!o.capture:!!o,c):GE(i,e,t,!1,o,c)}function GE(i,e,t,o,c,p){if(!e)throw Error("Invalid event type");var v=Ti(c)?!!c.capture:!!c,C=Nb(i);if(C||(i[Mb]=C=new y0(i)),(t=C.add(e,t,o,v,p)).proxy)return t;if(o=function vT(){const e=_T;return function i(t){return e.call(i.src,i.listener,t)}}(),t.proxy=o,o.src=i,o.listener=t,i.addEventListener)vb||(c=v),void 0===c&&(c=!1),i.addEventListener(e.toString(),o,c);else if(i.attachEvent)i.attachEvent(WE(e.toString()),o);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(o)}return t}function qE(i,e,t,o,c){if(Array.isArray(e)){for(var p=0;p<e.length;p++)qE(i,e[p],t,o,c);return null}return t=kb(t),i&&i[Zp]?i.O(e,t,Ti(o)?!!o.capture:!!o,c):GE(i,e,t,!0,o,c)}function zE(i,e,t,o,c){if(Array.isArray(e))for(var p=0;p<e.length;p++)zE(i,e[p],t,o,c);else o=Ti(o)?!!o.capture:!!o,t=kb(t),i&&i[Zp]?(i=i.i,(e=String(e).toString())in i.g&&-1<(t=xb(p=i.g[e],t,o,c))&&(ev(p[t]),Array.prototype.splice.call(p,t,1),0==p.length&&(delete i.g[e],i.h--))):i&&(i=Nb(i))&&(e=i.g[e.toString()],i=-1,e&&(i=xb(e,t,o,c)),(t=-1<i?e[i]:null)&&Ob(t))}function Ob(i){if("number"!=typeof i&&i&&!i.ba){var e=i.src;if(e&&e[Zp])Ab(e.i,i);else{var t=i.type,o=i.proxy;e.removeEventListener?e.removeEventListener(t,o,i.capture):e.detachEvent?e.detachEvent(WE(t),o):e.addListener&&e.removeListener&&e.removeListener(o),(t=Nb(e))?(Ab(t,i),0==t.h&&(t.src=null,e[Mb]=null)):ev(i)}}}function WE(i){return i in Rb?Rb[i]:Rb[i]="on"+i}function _T(i,e){if(i.ba)i=!0;else{e=new Wp(e,this);var t=i.listener,o=i.ha||i.src;i.ea&&Ob(i),i=t.call(o,e)}return i}function Nb(i){return(i=i[Mb])instanceof y0?i:null}var Pb="__closure_events_fn_"+(1e9*Math.random()>>>0);function kb(i){return"function"==typeof i?i:(i[Pb]||(i[Pb]=function(e){return i.handleEvent(e)}),i[Pb])}function Xo(){Rf.call(this),this.i=new y0(this),this.P=this,this.I=null}function Cs(i,e){var t,o=i.I;if(o)for(t=[];o;o=o.I)t.push(o);if(i=i.P,o=e.type||e,"string"==typeof e)e=new Es(e,i);else if(e instanceof Es)e.target=e.target||i;else{var c=e;Sb(e=new Es(o,i),c)}if(c=!0,t)for(var p=t.length-1;0<=p;p--){var v=e.g=t[p];c=tv(v,o,!0,e)&&c}if(c=tv(v=e.g=i,o,!0,e)&&c,c=tv(v,o,!1,e)&&c,t)for(p=0;p<t.length;p++)c=tv(v=e.g=t[p],o,!1,e)&&c}function tv(i,e,t,o){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var c=!0,p=0;p<e.length;++p){var v=e[p];if(v&&!v.ba&&v.capture==t){var C=v.listener,A=v.ha||v.src;v.ea&&Ab(i.i,v),c=!1!==C.call(A,o)&&c}}return c&&!o.defaultPrevented}Ui(Xo,Rf),Xo.prototype[Zp]=!0,Xo.prototype.removeEventListener=function(i,e,t,o){zE(this,i,e,t,o)},Xo.prototype.M=function(){if(Xo.X.M.call(this),this.i){var e,i=this.i;for(e in i.g){for(var t=i.g[e],o=0;o<t.length;o++)ev(t[o]);delete i.g[e],i.h--}}this.I=null},Xo.prototype.N=function(i,e,t,o){return this.i.add(String(i),e,!1,t,o)},Xo.prototype.O=function(i,e,t,o){return this.i.add(String(i),e,!0,t,o)};var v0=Sn.JSON.stringify;function ZE(){var i=Of;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var _0,Fb=new class{constructor(i,e){this.i=i,this.j=e,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new YE,i=>i.reset());class YE{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function QE(i){Sn.setTimeout(()=>{throw i},0)}function Lb(i,e){_0||function JE(){var i=Sn.Promise.resolve(void 0);_0=function(){i.then(wT)}}(),w0||(_0(),w0=!0),Of.add(i,e)}var w0=!1,Of=new class KE{constructor(){this.h=this.g=null}add(e,t){const o=Fb.get();o.set(e,t),this.h?this.h.next=o:this.g=o,this.h=o}};function wT(){for(var i;i=ZE();){try{i.h.call(i.g)}catch(t){QE(t)}var e=Fb;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}w0=!1}function b0(i,e){Xo.call(this),this.h=i||1,this.g=e||Sn,this.j=Is(this.kb,this),this.l=Date.now()}function Nf(i){i.ca=!1,i.R&&(i.g.clearTimeout(i.R),i.R=null)}function XE(i,e,t){if("function"==typeof i)t&&(i=Is(i,t));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=Is(i.handleEvent,i)}return 2147483647<Number(e)?-1:Sn.setTimeout(i,e||0)}function I0(i){i.g=XE(()=>{i.g=null,i.i&&(i.i=!1,I0(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}Ui(b0,Xo),(Kt=b0.prototype).ca=!1,Kt.R=null,Kt.kb=function(){if(this.ca){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-i):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Cs(this,"tick"),this.ca&&(Nf(this),this.start()))}},Kt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Kt.M=function(){b0.X.M.call(this),Nf(this),delete this.g};class zx extends Rf{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:I0(this)}M(){super.M(),this.g&&(Sn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function fm(i){Rf.call(this),this.h=i,this.g={}}Ui(fm,Rf);var Vb=[];function bT(i,e,t,o){Array.isArray(t)||(t&&(Vb[0]=t.toString()),t=Vb);for(var c=0;c<t.length;c++){var p=$E(e,t[c],o||i.handleEvent,!1,i.h||i);if(!p)break;i.g[p.key]=p}}function hn(i){m0(i.g,function(e,t){this.g.hasOwnProperty(t)&&Ob(e)},i),i.g={}}function E0(){this.g=!0}function _l(i,e,t,o){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function C0(i,e){if(!i.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(i=0;i<t.length;i++)if(Array.isArray(t[i])){var o=t[i];if(!(2>o.length)){var c=o[1];if(Array.isArray(c)&&!(1>c.length)){var p=c[0];if("noop"!=p&&"stop"!=p&&"close"!=p)for(var v=1;v<c.length;v++)c[v]=""}}}return v0(t)}catch{return e}}(i,t)+(o?" "+o:"")})}fm.prototype.M=function(){fm.X.M.call(this),hn(this)},fm.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},E0.prototype.Aa=function(){this.g=!1},E0.prototype.info=function(){};var Dd={},Si=null;function Ub(){return Si=Si||new Xo}function Bb(i){Es.call(this,Dd.Oa,i)}function pm(i){const e=Ub();Cs(e,new Bb(e,i))}function eC(i,e){Es.call(this,Dd.STAT_EVENT,i),this.stat=e}function Ks(i){const e=Ub();Cs(e,new eC(e,i))}function jb(i,e){Es.call(this,Dd.Pa,i),this.size=e}function gm(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return Sn.setTimeout(function(){i()},e)}Dd.Oa="serverreachability",Ui(Bb,Es),Dd.STAT_EVENT="statevent",Ui(eC,Es),Dd.Pa="timingevent",Ui(jb,Es);var nv={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,La:7,TIMEOUT:8,Cb:9},tC={qb:"complete",Mb:"success",Ma:"error",La:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Hb(){}function mm(){}Hb.prototype.h=null;var ym,rv={OPEN:"a",pb:"b",Ma:"c",Bb:"d"};function $b(){Es.call(this,"d")}function Gb(){Es.call(this,"c")}function iv(){}function vm(i,e,t,o){this.l=i,this.j=e,this.m=t,this.U=o||1,this.S=new fm(this),this.O=DT,this.T=new b0(i=wb?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new qb}function qb(){this.i=null,this.g="",this.h=!1}Ui($b,Es),Ui(Gb,Es),Ui(iv,Hb),iv.prototype.g=function(){return new XMLHttpRequest},iv.prototype.i=function(){return{}},ym=new iv;var DT=45e3,Kp={},Pf={};function zb(i,e,t){i.K=1,i.v=T0(Ih(e)),i.s=t,i.P=!0,rC(i,null)}function rC(i,e){i.F=Date.now(),_m(i),i.A=Ih(i.v);var t=i.A,o=i.U;Array.isArray(o)||(o=[String(o)]),fC(t.i,"t",o),i.C=0,t=i.l.H,i.h=new qb,i.g=DC(i.l,t?e:null,!i.s),0<i.N&&(i.L=new zx(Is(i.Ka,i,i.g),i.N)),bT(i.S,i.g,"readystatechange",i.hb),e=i.H?Db(i.H):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.da(i.A,i.u,i.s,e)):(i.u="GET",i.g.da(i.A,i.u,null,e)),pm(1),function IT(i,e,t,o,c,p){i.info(function(){if(i.g)if(p)for(var v="",C=p.split("&"),A=0;A<C.length;A++){var N=C[A].split("=");if(1<N.length){var B=N[0];N=N[1];var W=B.split("_");v=2<=W.length&&"type"==W[1]?v+(B+"=")+N+"&":v+(B+"=redacted&")}}else v=null;else v=p;return"XMLHTTP REQ ("+o+") [attempt "+c+"]: "+e+"\n"+t+"\n"+v})}(i.j,i.u,i.A,i.m,i.U,i.s)}function iC(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Da}function Wb(i,e,t){let c,o=!0;for(;!i.I&&i.C<t.length;){if(c=oC(i,t),c==Pf){4==e&&(i.o=4,Ks(14),o=!1),_l(i.j,i.m,null,"[Incomplete Response]");break}if(c==Kp){i.o=4,Ks(15),_l(i.j,i.m,t,"[Invalid Chunk]"),o=!1;break}_l(i.j,i.m,c,null),aC(i,c)}iC(i)&&c!=Pf&&c!=Kp&&(i.h.g="",i.C=0),4!=e||0!=t.length||i.h.h||(i.o=1,Ks(16),o=!1),i.i=i.i&&o,o?0<t.length&&!i.$&&(i.$=!0,(e=i.l).g==i&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),F0(e),e.K=!0,Ks(11))):(_l(i.j,i.m,t,"[Invalid Chunked Response]"),Yp(i),sv(i))}function oC(i,e){var t=i.C,o=e.indexOf("\n",t);return-1==o?Pf:(t=Number(e.substring(t,o)),isNaN(t)?Kp:(o+=1)+t>e.length?Pf:(e=e.substr(o,t),i.C=o+t,e))}function _m(i){i.V=Date.now()+i.O,sC(i,i.O)}function sC(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=gm(Is(i.fb,i),e)}function ov(i){i.B&&(Sn.clearTimeout(i.B),i.B=null)}function sv(i){0==i.l.G||i.I||EC(i.l,i)}function Yp(i){ov(i);var e=i.L;e&&"function"==typeof e.na&&e.na(),i.L=null,Nf(i.T),hn(i.S),i.g&&(e=i.g,i.g=null,e.abort(),e.na())}function aC(i,e){try{var t=i.l;if(0!=t.G&&(t.g==i||dv(t.h,i)))if(!i.J&&dv(t.h,i)&&3==t.G){try{var o=t.Fa.g.parse(e)}catch{o=null}if(Array.isArray(o)&&3==o.length){var c=o;if(0==c[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<i.F))break e;L0(t),bm(t)}k0(t),Ks(18)}}else t.Ba=c[1],0<t.Ba-t.T&&37500>c[2]&&t.L&&0==t.A&&!t.v&&(t.v=gm(Is(t.bb,t),6e3));if(1>=mC(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else Lf(t,11)}else if((i.J||t.g==i)&&L0(t),!Ru(e))for(c=t.Fa.g.parse(e),e=0;e<c.length;e++){let N=c[e];if(t.T=N[0],N=N[1],2==t.G)if("c"==N[0]){t.I=N[1],t.ka=N[2];const B=N[3];null!=B&&(t.ma=B,t.j.info("VER="+t.ma));const W=N[4];null!=W&&(t.Ca=W,t.j.info("SVER="+t.Ca));const ae=N[5];null!=ae&&"number"==typeof ae&&0<ae&&(t.J=o=1.5*ae,t.j.info("backChannelRequestTimeoutMs_="+o)),o=t;const fe=i.g;if(fe){const ve=fe.g?fe.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ve){var p=o.h;p.g||-1==ve.indexOf("spdy")&&-1==ve.indexOf("quic")&&-1==ve.indexOf("h2")||(p.j=p.l,p.g=new Set,p.h&&(Qb(p,p.h),p.h=null))}if(o.D){const Ye=fe.g?fe.g.getResponseHeader("X-HTTP-Session-Id"):null;Ye&&(o.za=Ye,vi(o.F,o.D,Ye))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-i.F,t.j.info("Handshake RTT: "+t.P+"ms"));var v=i;if((o=t).sa=uI(o,o.H?o.ka:null,o.V),v.J){Jb(o.h,v);var C=v,A=o.J;A&&C.setTimeout(A),C.B&&(ov(C),_m(C)),o.g=v}else aI(o);0<t.i.length&&Im(t)}else"stop"!=N[0]&&"close"!=N[0]||Lf(t,7);else 3==t.G&&("stop"==N[0]||"close"==N[0]?"stop"==N[0]?Lf(t,7):P0(t):"noop"!=N[0]&&t.l&&t.l.wa(N),t.A=0)}pm(4)}catch{}}function TT(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(c0(i)||"string"==typeof i)Array.prototype.forEach.call(i,e,void 0);else for(var t=function Zx(i){if(i.oa&&"function"==typeof i.oa)return i.oa();if(!i.W||"function"!=typeof i.W){if(typeof Map<"u"&&i instanceof Map)return Array.from(i.keys());if(!(typeof Set<"u"&&i instanceof Set)){if(c0(i)||"string"==typeof i){var e=[];i=i.length;for(var t=0;t<i;t++)e.push(t);return e}e=[],t=0;for(const o in i)e[t++]=o;return e}}}(i),o=function Wx(i){if(i.W&&"function"==typeof i.W)return i.W();if(typeof Map<"u"&&i instanceof Map||typeof Set<"u"&&i instanceof Set)return Array.from(i.values());if("string"==typeof i)return i.split("");if(c0(i)){for(var e=[],t=i.length,o=0;o<t;o++)e.push(i[o]);return e}for(o in e=[],t=0,i)e[t++]=i[o];return e}(i),c=o.length,p=0;p<c;p++)e.call(void 0,o[p],t&&t[p],i)}(Kt=vm.prototype).setTimeout=function(i){this.O=i},Kt.hb=function(i){i=i.target;const e=this.L;e&&3==Ch(i)?e.l():this.Ka(i)},Kt.Ka=function(i){try{if(i==this.g)e:{const B=Ch(this.g);var e=this.g.Ea();const W=this.g.aa();if(!(3>B)&&(3!=B||wb||this.g&&(this.h.h||this.g.fa()||iI(this.g)))){this.I||4!=B||7==e||pm(8==e||0>=W?3:2),ov(this);var t=this.g.aa();this.Y=t;t:if(iC(this)){var o=iI(this.g);i="";var c=o.length,p=4==Ch(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Yp(this),sv(this);var v="";break t}this.h.i=new Sn.TextDecoder}for(e=0;e<c;e++)this.h.h=!0,i+=this.h.i.decode(o[e],{stream:p&&e==c-1});o.splice(0,c),this.h.g+=i,this.C=0,v=this.h.g}else v=this.g.fa();if(this.i=200==t,function ET(i,e,t,o,c,p,v){i.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+c+"]: "+e+"\n"+t+"\n"+p+" "+v})}(this.j,this.u,this.A,this.m,this.U,B,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var C,A=this.g;if((C=A.g?A.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ru(C)){var N=C;break t}}N=null}if(!(t=N)){this.i=!1,this.o=3,Ks(12),Yp(this),sv(this);break e}_l(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,aC(this,t)}this.P?(Wb(this,B,v),wb&&this.i&&3==B&&(bT(this.S,this.T,"tick",this.gb),this.T.start())):(_l(this.j,this.m,v,null),aC(this,v)),4==B&&Yp(this),this.i&&!this.I&&(4==B?EC(this.l,this):(this.i=!1,_m(this)))}else 400==t&&0<v.indexOf("Unknown SID")?(this.o=3,Ks(12)):(this.o=0,Ks(13)),Yp(this),sv(this)}}}catch{}},Kt.gb=function(){if(this.g){var i=Ch(this.g),e=this.g.fa();this.C<e.length&&(ov(this),Wb(this,i,e),this.i&&4!=i&&_m(this))}},Kt.cancel=function(){this.I=!0,Yp(this)},Kt.fb=function(){this.B=null;const i=Date.now();0<=i-this.V?(function CT(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(pm(3),Ks(17)),Yp(this),this.o=2,sv(this)):sC(this,this.V-i)};var Zb=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Qp(i,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,i instanceof Qp){this.h=void 0!==e?e:i.h,av(this,i.j),this.s=i.s,this.g=i.g,kf(this,i.m),this.l=i.l,e=i.i;var t=new lv;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),uC(this,t),this.o=i.o}else i&&(t=String(i).match(Zb))?(this.h=!!e,av(this,t[1]||"",!0),this.s=uv(t[2]||""),this.g=uv(t[3]||"",!0),kf(this,t[4]),this.l=uv(t[5]||"",!0),uC(this,t[6]||"",!0),this.o=uv(t[7]||"")):(this.h=!!e,this.i=new lv(null,this.h))}function Ih(i){return new Qp(i)}function av(i,e,t){i.j=t?uv(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function kf(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function uC(i,e,t){e instanceof lv?(i.i=e,function xT(i,e){e&&!i.j&&(Eh(i),i.i=null,i.g.forEach(function(t,o){var c=o.toLowerCase();o!=c&&(hC(this,o),fC(this,c,t))},i)),i.j=e}(i.i,i.h)):(t||(e=cv(e,AT)),i.i=new lv(e,i.h))}function vi(i,e,t){i.i.set(e,t)}function T0(i){return vi(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function uv(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function cv(i,e,t){return"string"==typeof i?(i=encodeURI(i).replace(e,cC),t&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function cC(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}Qp.prototype.toString=function(){var i=[],e=this.j;e&&i.push(cv(e,lC,!0),":");var t=this.g;return(t||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(cv(e,lC,!0),"@"),i.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&i.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&i.push("/"),i.push(cv(t,"/"==t.charAt(0)?wm:ST,!0))),(t=this.i.toString())&&i.push("?",t),(t=this.o)&&i.push("#",cv(t,dC)),i.join("")};var lC=/[#\/\?@]/g,ST=/[#\?:]/g,wm=/[#\?]/g,AT=/[#\?@]/g,dC=/#/g;function lv(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function Eh(i){i.g||(i.g=new Map,i.h=0,i.i&&function D0(i,e){if(i){i=i.split("&");for(var t=0;t<i.length;t++){var o=i[t].indexOf("="),c=null;if(0<=o){var p=i[t].substring(0,o);c=i[t].substring(o+1)}else p=i[t];e(p,c?decodeURIComponent(c.replace(/\+/g," ")):"")}}}(i.i,function(e,t){i.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function hC(i,e){Eh(i),e=Ff(i,e),i.g.has(e)&&(i.i=null,i.h-=i.g.get(e).length,i.g.delete(e))}function Kb(i,e){return Eh(i),e=Ff(i,e),i.g.has(e)}function fC(i,e,t){hC(i,e),0<t.length&&(i.i=null,i.g.set(Ff(i,e),l0(t)),i.h+=t.length)}function Ff(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function Yb(i){this.l=i||MT,i=Sn.PerformanceNavigationTiming?0<(i=Sn.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(Sn.g&&Sn.g.Ga&&Sn.g.Ga()&&Sn.g.Ga().Zb),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Kt=lv.prototype).add=function(i,e){Eh(this),this.i=null,i=Ff(this,i);var t=this.g.get(i);return t||this.g.set(i,t=[]),t.push(e),this.h+=1,this},Kt.forEach=function(i,e){Eh(this),this.g.forEach(function(t,o){t.forEach(function(c){i.call(e,c,o,this)},this)},this)},Kt.oa=function(){Eh(this);const i=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let o=0;o<e.length;o++){const c=i[o];for(let p=0;p<c.length;p++)t.push(e[o])}return t},Kt.W=function(i){Eh(this);let e=[];if("string"==typeof i)Kb(this,i)&&(e=e.concat(this.g.get(Ff(this,i))));else{i=Array.from(this.g.values());for(let t=0;t<i.length;t++)e=e.concat(i[t])}return e},Kt.set=function(i,e){return Eh(this),this.i=null,Kb(this,i=Ff(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},Kt.get=function(i,e){return i&&0<(i=this.W(i)).length?String(i[0]):e},Kt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const i=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var o=e[t];const p=encodeURIComponent(String(o)),v=this.W(o);for(o=0;o<v.length;o++){var c=p;""!==v[o]&&(c+="="+encodeURIComponent(String(v[o]))),i.push(c)}}return this.i=i.join("&")};var MT=10;function gC(i){return!!i.h||!!i.g&&i.g.size>=i.j}function mC(i){return i.h?1:i.g?i.g.size:0}function dv(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function Qb(i,e){i.g?i.g.add(e):i.h=e}function Jb(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function yC(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const t of i.g.values())e=e.concat(t.D);return e}return l0(i.i)}function Xb(){}function RT(){this.g=new Xb}function OT(i,e,t){const o=t||"";try{TT(i,function(c,p){let v=c;Ti(c)&&(v=v0(c)),e.push(o+p+"="+encodeURIComponent(v))})}catch(c){throw e.push(o+"type="+encodeURIComponent("_badmap")),c}}function S0(i,e,t,o,c){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,c(o)}catch{}}function hv(i){this.l=i.$b||null,this.j=i.ib||!1}function A0(i,e){Xo.call(this),this.D=i,this.u=e,this.m=void 0,this.readyState=x0,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Yb.prototype.cancel=function(){if(this.i=yC(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},Xb.prototype.stringify=function(i){return Sn.JSON.stringify(i,void 0)},Xb.prototype.parse=function(i){return Sn.JSON.parse(i,void 0)},Ui(hv,Hb),hv.prototype.g=function(){return new A0(this.l,this.j)},hv.prototype.i=function(i){return function(){return i}}({}),Ui(A0,Xo);var x0=0;function eI(i){i.j.read().then(i.Sa.bind(i)).catch(i.ga.bind(i))}function fv(i){i.readyState=4,i.l=null,i.j=null,i.A=null,pv(i)}function pv(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(Kt=A0.prototype).open=function(i,e){if(this.readyState!=x0)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,pv(this)},Kt.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.D||Sn).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ga.bind(this))},Kt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,fv(this)),this.readyState=x0},Kt.Va=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,pv(this)),this.g&&(this.readyState=3,pv(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ta.bind(this),this.ga.bind(this));else if(typeof Sn.ReadableStream<"u"&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;eI(this)}else i.text().then(this.Ua.bind(this),this.ga.bind(this))},Kt.Sa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?fv(this):pv(this),3==this.readyState&&eI(this)}},Kt.Ua=function(i){this.g&&(this.response=this.responseText=i,fv(this))},Kt.Ta=function(i){this.g&&(this.response=i,fv(this))},Kt.ga=function(){this.g&&fv(this)},Kt.setRequestHeader=function(i,e){this.v.append(i,e)},Kt.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},Kt.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var t=e.next();!t.done;)i.push((t=t.value)[0]+": "+t[1]),t=e.next();return i.join("\r\n")},Object.defineProperty(A0.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var vC=Sn.JSON.parse;function lo(i){Xo.call(this),this.headers=new Map,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=_C,this.K=this.L=!1}Ui(lo,Xo);var _C="",PT=/^https?$/i,tI=["POST","PUT"];function rI(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,M0(i),R0(i)}function M0(i){i.D||(i.D=!0,Cs(i,"complete"),Cs(i,"error"))}function wC(i){if(i.h&&typeof mb<"u"&&(!i.C[1]||4!=Ch(i)||2!=i.aa()))if(i.v&&4==Ch(i))XE(i.Ha,0,i);else if(Cs(i,"readystatechange"),4==Ch(i)){i.h=!1;try{const C=i.aa();e:switch(C){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var o;if(o=0===C){var c=String(i.H).match(Zb)[1]||null;if(!c&&Sn.self&&Sn.self.location){var p=Sn.self.location.protocol;c=p.substr(0,p.length-1)}o=!PT.test(c?c.toLowerCase():"")}t=o}if(t)Cs(i,"complete"),Cs(i,"success");else{i.m=6;try{var v=2<Ch(i)?i.g.statusText:""}catch{v=""}i.j=v+" ["+i.aa()+"]",M0(i)}}finally{R0(i)}}}function R0(i,e){if(i.g){O0(i);const t=i.g,o=i.C[0]?Jy:null;i.g=null,i.C=null,e||Cs(i,"ready");try{t.onreadystatechange=o}catch{}}}function O0(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(Sn.clearTimeout(i.A),i.A=null)}function Ch(i){return i.g?i.g.readyState:0}function iI(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case _C:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch{return null}}function Jp(i){let e="";return m0(i,function(t,o){e+=o,e+=":",e+=t,e+="\r\n"}),e}function N0(i,e,t){e:{for(o in t){var o=!1;break e}o=!0}o||(t=Jp(t),"string"==typeof i?null!=t&&encodeURIComponent(String(t)):vi(i,e,t))}function gv(i,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[i]||e}function kT(i){this.Ca=0,this.i=[],this.j=new E0,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.$a=this.U=0,this.Ya=gv("failFast",!1,i),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Wa=gv("baseRetryDelayMs",5e3,i),this.ab=gv("retryDelaySeedMs",1e4,i),this.Za=gv("forwardChannelMaxRetries",2,i),this.ta=gv("forwardChannelRequestTimeoutMs",2e4,i),this.ra=i&&i.xmlHttpFactory||void 0,this.Da=i&&i.Yb||!1,this.J=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.I="",this.h=new Yb(i&&i.concurrentRequestLimit),this.Fa=new RT,this.O=i&&i.fastHandshake||!1,this.N=i&&i.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Xa=i&&i.Wb||!1,i&&i.Aa&&this.j.Aa(),i&&i.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&i&&i.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function P0(i){if(bC(i),3==i.G){var e=i.U++,t=Ih(i.F);vi(t,"SID",i.I),vi(t,"RID",e),vi(t,"TYPE","terminate"),Xp(i,t),(e=new vm(i,i.j,e,void 0)).K=2,e.v=T0(Ih(t)),t=!1,Sn.navigator&&Sn.navigator.sendBeacon&&(t=Sn.navigator.sendBeacon(e.v.toString(),"")),!t&&Sn.Image&&((new Image).src=e.v,t=!0),t||(e.g=DC(e.l,null),e.g.da(e.v)),e.F=Date.now(),_m(e)}LT(i)}function bm(i){i.g&&(F0(i),i.g.cancel(),i.g=null)}function bC(i){bm(i),i.u&&(Sn.clearTimeout(i.u),i.u=null),L0(i),i.h.cancel(),i.m&&("number"==typeof i.m&&Sn.clearTimeout(i.m),i.m=null)}function Im(i){gC(i.h)||i.m||(i.m=!0,Lb(i.Ja,i),i.C=0)}function oI(i,e){var t;t=e?e.m:i.U++;const o=Ih(i.F);vi(o,"SID",i.I),vi(o,"RID",t),vi(o,"AID",i.T),Xp(i,o),i.o&&i.s&&N0(o,i.o,i.s),t=new vm(i,i.j,t,i.C+1),null===i.o&&(t.H=i.s),e&&(i.i=e.D.concat(i.i)),e=sI(i,t,1e3),t.setTimeout(Math.round(.5*i.ta)+Math.round(.5*i.ta*Math.random())),Qb(i.h,t),zb(t,o,e)}function Xp(i,e){i.ia&&m0(i.ia,function(t,o){vi(e,o,t)}),i.l&&TT({},function(t,o){vi(e,o,t)})}function sI(i,e,t){t=Math.min(i.i.length,t);var o=i.l?Is(i.l.Qa,i.l,i):null;e:{var c=i.i;let p=-1;for(;;){const v=["count="+t];-1==p?0<t?(p=c[0].h,v.push("ofs="+p)):p=0:v.push("ofs="+p);let C=!0;for(let A=0;A<t;A++){let N=c[A].h;const B=c[A].g;if(N-=p,0>N)p=Math.max(0,c[A].h-100),C=!1;else try{OT(B,v,"req"+N+"_")}catch{o&&o(B)}}if(C){o=v.join("&");break e}}}return i=i.i.splice(0,t),e.D=i,o}function aI(i){i.g||i.u||(i.Z=1,Lb(i.Ia,i),i.A=0)}function k0(i){return!(i.g||i.u||3<=i.A||(i.Z++,i.u=gm(Is(i.Ia,i),CC(i,i.A)),i.A++,0))}function F0(i){null!=i.B&&(Sn.clearTimeout(i.B),i.B=null)}function IC(i){i.g=new vm(i,i.j,"rpc",i.Z),null===i.o&&(i.g.H=i.s),i.g.N=0;var e=Ih(i.sa);vi(e,"RID","rpc"),vi(e,"SID",i.I),vi(e,"CI",i.L?"0":"1"),vi(e,"AID",i.T),vi(e,"TYPE","xmlhttp"),Xp(i,e),i.o&&i.s&&N0(e,i.o,i.s),i.J&&i.g.setTimeout(i.J);var t=i.g;i=i.ka,t.K=1,t.v=T0(Ih(e)),t.s=null,t.P=!0,rC(t,i)}function L0(i){null!=i.v&&(Sn.clearTimeout(i.v),i.v=null)}function EC(i,e){var t=null;if(i.g==e){L0(i),F0(i),i.g=null;var o=2}else{if(!dv(i.h,e))return;t=e.D,Jb(i.h,e),o=1}if(0!=i.G)if(i.pa=e.Y,e.i)if(1==o){t=e.s?e.s.length:0,e=Date.now()-e.F;var c=i.C;Cs(o=Ub(),new jb(o,t,e,c)),Im(i)}else aI(i);else if(3==(c=e.o)||0==c&&0<i.pa||!(1==o&&function FT(i,e){return!(mC(i.h)>=i.h.j-(i.m?1:0)||(i.m?(i.i=e.D.concat(i.i),0):1==i.G||2==i.G||i.C>=(i.Ya?0:i.Za)||(i.m=gm(Is(i.Ja,i,e),CC(i,i.C)),i.C++,0)))}(i,e)||2==o&&k0(i)))switch(t&&0<t.length&&(e=i.h,e.i=e.i.concat(t)),c){case 1:Lf(i,5);break;case 4:Lf(i,10);break;case 3:Lf(i,6);break;default:Lf(i,2)}}function CC(i,e){let t=i.Wa+Math.floor(Math.random()*i.ab);return i.l||(t*=2),t*e}function Lf(i,e){if(i.j.info("Error code "+e),2==e){var t=null;i.l&&(t=null);var o=Is(i.jb,i);t||(t=new Qp("//www.google.com/images/cleardot.gif"),Sn.location&&"http"==Sn.location.protocol||av(t,"https"),T0(t)),function NT(i,e){const t=new E0;if(Sn.Image){const o=new Image;o.onload=Xy(S0,t,o,"TestLoadImage: loaded",!0,e),o.onerror=Xy(S0,t,o,"TestLoadImage: error",!1,e),o.onabort=Xy(S0,t,o,"TestLoadImage: abort",!1,e),o.ontimeout=Xy(S0,t,o,"TestLoadImage: timeout",!1,e),Sn.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=i}else e(!1)}(t.toString(),o)}else Ks(2);i.G=0,i.l&&i.l.va(e),LT(i),bC(i)}function LT(i){if(i.G=0,i.la=[],i.l){const e=yC(i.h);(0!=e.length||0!=i.i.length)&&(yT(i.la,e),yT(i.la,i.i),i.h.i.length=0,l0(i.i),i.i.length=0),i.l.ua()}}function uI(i,e,t){var o=t instanceof Qp?Ih(t):new Qp(t,void 0);if(""!=o.g)e&&(o.g=e+"."+o.g),kf(o,o.m);else{var c=Sn.location;o=c.protocol,e=e?e+"."+c.hostname:c.hostname,c=+c.port;var p=new Qp(null,void 0);o&&av(p,o),e&&(p.g=e),c&&kf(p,c),t&&(p.l=t),o=p}return e=i.za,(t=i.D)&&e&&vi(o,t,e),vi(o,"VER",i.ma),Xp(i,o),o}function DC(i,e,t){if(e&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new lo(t&&i.Da&&!i.ra?new hv({ib:!0}):i.ra)).L=i.H,e}function TC(){}function cI(){if(dm&&!(10<=Number(BE)))throw Error("Environmental error: no available transport.")}function Nc(i,e){Xo.call(this),this.g=new kT(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(i?i["X-WebChannel-Client-Profile"]=e.ya:i={"X-WebChannel-Client-Profile":e.ya}),this.g.S=i,(i=e&&e.Xb)&&!Ru(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ru(e)&&(this.g.D=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new Em(this)}function SC(i){$b.call(this);var e=i.__sm__;if(e){e:{for(const t in e){i=t;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function AC(){Gb.call(this),this.status=1}function Em(i){this.g=i}(Kt=lo.prototype).da=function(i,e,t,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);e=e?e.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ym.g(),this.C=function nC(i){return i.h||(i.h=i.i())}(this.u?this.u:ym),this.g.onreadystatechange=Is(this.Ha,this);try{this.F=!0,this.g.open(e,String(i),!0),this.F=!1}catch(p){return void rI(this,p)}if(i=t||"",t=new Map(this.headers),o)if(Object.getPrototypeOf(o)===Object.prototype)for(var c in o)t.set(c,o[c]);else{if("function"!=typeof o.keys||"function"!=typeof o.get)throw Error("Unknown input type for opt_headers: "+String(o));for(const p of o.keys())t.set(p,o.get(p))}o=Array.from(t.keys()).find(p=>"content-type"==p.toLowerCase()),c=Sn.FormData&&i instanceof Sn.FormData,!(0<=NE(tI,e))||o||c||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[p,v]of t)this.g.setRequestHeader(p,v);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{O0(this),0<this.B&&((this.K=function nI(i){return dm&&function p0(){return function kE(i){var e=UE;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=i(9)}(function(){let i=0;const e=PE(String(d0)).split("."),t=PE("9").split("."),o=Math.max(e.length,t.length);for(let v=0;0==i&&v<o;v++){var c=e[v]||"",p=t[v]||"";do{if(c=/(\d*)(\D*)(.*)/.exec(c)||["","","",""],p=/(\d*)(\D*)(.*)/.exec(p)||["","","",""],0==c[0].length&&0==p[0].length)break;i=_b(0==c[1].length?0:parseInt(c[1],10),0==p[1].length?0:parseInt(p[1],10))||_b(0==c[2].length,0==p[2].length)||_b(c[2],p[2]),c=c[3],p=p[3]}while(0==i)}return 0<=i})}()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Is(this.qa,this)):this.A=XE(this.qa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(p){rI(this,p)}},Kt.qa=function(){typeof mb<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Cs(this,"timeout"),this.abort(8))},Kt.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,Cs(this,"complete"),Cs(this,"abort"),R0(this))},Kt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),R0(this,!0)),lo.X.M.call(this)},Kt.Ha=function(){this.s||(this.F||this.v||this.l?wC(this):this.eb())},Kt.eb=function(){wC(this)},Kt.aa=function(){try{return 2<Ch(this)?this.g.status:-1}catch{return-1}},Kt.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},Kt.Ra=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),vC(e)}},Kt.Ea=function(){return this.m},Kt.Na=function(){return"string"==typeof this.j?this.j:String(this.j)},(Kt=kT.prototype).ma=8,Kt.G=1,Kt.Ja=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.U=Math.floor(1e5*Math.random()),i=this.U++;const c=new vm(this,this.j,i,void 0);let p=this.s;if(this.S&&(p?(p=Db(p),Sb(p,this.S)):p=this.S),null!==this.o||this.N||(c.H=p,p=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var o=this.i[t];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=sI(this,c,e),vi(t=Ih(this.F),"RID",i),vi(t,"CVER",22),this.D&&vi(t,"X-HTTP-Session-Id",this.D),Xp(this,t),p&&(this.N?e="headers="+encodeURIComponent(String(Jp(p)))+"&"+e:this.o&&N0(t,this.o,p)),Qb(this.h,c),this.Xa&&vi(t,"TYPE","init"),this.O?(vi(t,"$req",e),vi(t,"SID","null"),c.Z=!0,zb(c,t,null)):zb(c,t,e),this.G=2}}else 3==this.G&&(i?oI(this,i):0==this.i.length||gC(this.h)||oI(this))},Kt.Ia=function(){if(this.u=null,IC(this),this.$&&!(this.K||null==this.g||0>=this.P)){var i=2*this.P;this.j.info("BP detection timer enabled: "+i),this.B=gm(Is(this.cb,this),i)}},Kt.cb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Ks(10),bm(this),IC(this))},Kt.bb=function(){null!=this.v&&(this.v=null,bm(this),k0(this),Ks(19))},Kt.jb=function(i){i?(this.j.info("Successfully pinged google.com"),Ks(2)):(this.j.info("Failed to ping google.com"),Ks(1))},(Kt=TC.prototype).xa=function(){},Kt.wa=function(){},Kt.va=function(){},Kt.ua=function(){},Kt.Qa=function(){},cI.prototype.g=function(i,e){return new Nc(i,e)},Ui(Nc,Xo),Nc.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var i=this.g,e=this.l,t=this.h||void 0;Ks(0),i.V=e,i.ia=t||{},i.L=i.Y,i.F=uI(i,null,i.V),Im(i)},Nc.prototype.close=function(){P0(this.g)},Nc.prototype.u=function(i){var e=this.g;if("string"==typeof i){var t={};t.__data__=i,i=t}else this.v&&((t={}).__data__=v0(i),i=t);e.i.push(new class{constructor(i,e){this.h=i,this.g=e}}(e.$a++,i)),3==e.G&&Im(e)},Nc.prototype.M=function(){this.g.l=null,delete this.j,P0(this.g),delete this.g,Nc.X.M.call(this)},Ui(SC,$b),Ui(AC,Gb),Ui(Em,TC),Em.prototype.xa=function(){Cs(this.g,"a")},Em.prototype.wa=function(i){Cs(this.g,new SC(i))},Em.prototype.va=function(i){Cs(this.g,new AC(i))},Em.prototype.ua=function(){Cs(this.g,"b")},cI.prototype.createWebChannel=cI.prototype.g,Nc.prototype.send=Nc.prototype.u,Nc.prototype.open=Nc.prototype.m,Nc.prototype.close=Nc.prototype.close,nv.NO_ERROR=0,nv.TIMEOUT=8,nv.HTTP_ERROR=6,tC.COMPLETE="complete",mm.EventType=rv,rv.OPEN="a",rv.CLOSE="b",rv.ERROR="c",rv.MESSAGE="d",Xo.prototype.listen=Xo.prototype.N,lo.prototype.listenOnce=lo.prototype.O,lo.prototype.getLastError=lo.prototype.Na,lo.prototype.getLastErrorCode=lo.prototype.Ea,lo.prototype.getStatus=lo.prototype.aa,lo.prototype.getResponseJson=lo.prototype.Ra,lo.prototype.getResponseText=lo.prototype.fa,lo.prototype.send=lo.prototype.da;var VT=Cd.createWebChannelTransport=function(){return new cI},UT=Cd.getStatEventTarget=function(){return Ub()},lI=Cd.ErrorCode=nv,BT=Cd.EventType=tC,jT=Cd.Event=Dd,xC=Cd.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},HT=Cd.FetchXmlHttpFactory=hv,V0=Cd.WebChannel=mm,$T=Cd.XhrIo=lo;const Cm="@firebase/firestore";class Eo{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Eo.UNAUTHENTICATED=new Eo(null),Eo.GOOGLE_CREDENTIALS=new Eo("google-credentials-uid"),Eo.FIRST_PARTY=new Eo("first-party-uid"),Eo.MOCK_USER=new Eo("mock-user");let eg="9.10.0";const Dh=new bh.Yd("@firebase/firestore");function U0(){return Dh.logLevel}function ct(i,...e){if(Dh.logLevel<=bh.in.DEBUG){const t=e.map(dI);Dh.debug(`Firestore (${eg}): ${i}`,...t)}}function Xi(i,...e){if(Dh.logLevel<=bh.in.ERROR){const t=e.map(dI);Dh.error(`Firestore (${eg}): ${i}`,...t)}}function Dm(i,...e){if(Dh.logLevel<=bh.in.WARN){const t=e.map(dI);Dh.warn(`Firestore (${eg}): ${i}`,...t)}}function dI(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch{return i}}function Ht(i="Unexpected state"){const e=`FIRESTORE (${eg}) INTERNAL ASSERTION FAILED: `+i;throw Xi(e),new Error(e)}function En(i,e){i||Ht()}function Dt(i,e){return i}const Be={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class it extends An.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ho{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class wl{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class qT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Eo.UNAUTHENTICATED))}shutdown(){}}class hI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class mv{constructor(e){this.t=e,this.currentUser=Eo.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var o=this;let c=this.i;const p=N=>this.i!==c?(c=this.i,t(N)):Promise.resolve();let v=new ho;this.o=()=>{this.i++,this.currentUser=this.u(),v.resolve(),v=new ho,e.enqueueRetryable(()=>p(this.currentUser))};const C=()=>{const N=v;e.enqueueRetryable((0,Ge.Z)(function*(){yield N.promise,yield p(o.currentUser)}))},A=N=>{ct("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=N,this.auth.addAuthTokenListener(this.o),C()};this.t.onInit(N=>A(N)),setTimeout(()=>{if(!this.auth){const N=this.t.getImmediate({optional:!0});N?A(N):(ct("FirebaseAuthCredentialsProvider","Auth not yet detected"),v.resolve(),v=new ho)}},0),C()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(o=>this.i!==e?(ct("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(En("string"==typeof o.accessToken),new wl(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return En(null===e||"string"==typeof e),new Eo(e)}}class zT{constructor(e,t,o,c){this.h=e,this.l=t,this.m=o,this.g=c,this.type="FirstParty",this.user=Eo.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(En(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class WT{constructor(e,t,o,c){this.h=e,this.l=t,this.m=o,this.g=c}getToken(){return Promise.resolve(new zT(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Eo.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class RC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class B0{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const o=p=>{null!=p.error&&ct("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${p.error.message}`);const v=p.token!==this.A;return this.A=p.token,ct("FirebaseAppCheckTokenProvider",`Received ${v?"new":"existing"} token.`),v?t(p.token):Promise.resolve()};this.o=p=>{e.enqueueRetryable(()=>o(p))};const c=p=>{ct("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=p,this.appCheck.addTokenListener(this.o)};this.T.onInit(p=>c(p)),setTimeout(()=>{if(!this.appCheck){const p=this.T.getImmediate({optional:!0});p?c(p):ct("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(En("string"==typeof t.token),this.A=t.token,new RC(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function ZT(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let o=0;o<i;o++)t[o]=Math.floor(256*Math.random());return t}class OC{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let o="";for(;o.length<20;){const c=ZT(40);for(let p=0;p<c.length;++p)o.length<20&&c[p]<t&&(o+=e.charAt(c[p]%e.length))}return o}}function Dn(i,e){return i<e?-1:i>e?1:0}function tg(i,e,t){return i.length===e.length&&i.every((o,c)=>t(o,e[c]))}function j0(i){return i+"\0"}class ai{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new it(Be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new it(Be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new it(Be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new it(Be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ai.fromMillis(Date.now())}static fromDate(e){return ai.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),o=Math.floor(1e6*(e-1e3*t));return new ai(t,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Dn(this.nanoseconds,e.nanoseconds):Dn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class yn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new yn(e)}static min(){return new yn(new ai(0,0))}static max(){return new yn(new ai(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class yv{constructor(e,t,o){void 0===t?t=0:t>e.length&&Ht(),void 0===o?o=e.length-t:o>e.length-t&&Ht(),this.segments=e,this.offset=t,this.len=o}get length(){return this.len}isEqual(e){return 0===yv.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof yv?e.forEach(o=>{t.push(o)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,o=this.limit();t<o;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const o=Math.min(e.length,t.length);for(let c=0;c<o;c++){const p=e.get(c),v=t.get(c);if(p<v)return-1;if(p>v)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ir extends yv{construct(e,t,o){return new ir(e,t,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const o of e){if(o.indexOf("//")>=0)throw new it(Be.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);t.push(...o.split("/").filter(c=>c.length>0))}return new ir(t)}static emptyPath(){return new ir([])}}const pI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class _i extends yv{construct(e,t,o){return new _i(e,t,o)}static isValidIdentifier(e){return pI.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),_i.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new _i(["__name__"])}static fromServerFormat(e){const t=[];let o="",c=0;const p=()=>{if(0===o.length)throw new it(Be.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(o),o=""};let v=!1;for(;c<e.length;){const C=e[c];if("\\"===C){if(c+1===e.length)throw new it(Be.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const A=e[c+1];if("\\"!==A&&"."!==A&&"`"!==A)throw new it(Be.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=A,c+=2}else"`"===C?(v=!v,c++):"."!==C||v?(o+=C,c++):(p(),c++)}if(p(),v)throw new it(Be.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new _i(t)}static emptyPath(){return new _i([])}}class It{constructor(e){this.path=e}static fromPath(e){return new It(ir.fromString(e))}static fromName(e){return new It(ir.fromString(e).popFirst(5))}static empty(){return new It(ir.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ir.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ir.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new It(new ir(e.slice()))}}class Tm{constructor(e,t,o,c){this.indexId=e,this.collectionGroup=t,this.fields=o,this.indexState=c}}function vv(i){return i.fields.find(e=>2===e.kind)}function ng(i){return i.fields.filter(e=>2!==e.kind)}Tm.UNKNOWN_ID=-1;class H0{constructor(e,t){this.fieldPath=e,this.kind=t}}class Sm{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Sm(0,Pu.min())}}function $0(i,e){const t=i.toTimestamp().seconds,o=i.toTimestamp().nanoseconds+1,c=yn.fromTimestamp(1e9===o?new ai(t+1,0):new ai(t,o));return new Pu(c,It.empty(),e)}function gI(i){return new Pu(i.readTime,i.key,-1)}class Pu{constructor(e,t,o){this.readTime=e,this.documentKey=t,this.largestBatchId=o}static min(){return new Pu(yn.min(),It.empty(),-1)}static max(){return new Pu(yn.max(),It.empty(),-1)}}function G0(i,e){let t=i.readTime.compareTo(e.readTime);return 0!==t?t:(t=It.comparator(i.documentKey,e.documentKey),0!==t?t:Dn(i.largestBatchId,e.largestBatchId))}const mI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class NC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Th(i){return q0.apply(this,arguments)}function q0(){return q0=(0,Ge.Z)(function*(i){if(i.code!==Be.FAILED_PRECONDITION||i.message!==mI)throw i;ct("LocalStore","Unexpectedly lost primary lease")}),q0.apply(this,arguments)}class Fe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ht(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Fe((o,c)=>{this.nextCallback=p=>{this.wrapSuccess(e,p).next(o,c)},this.catchCallback=p=>{this.wrapFailure(t,p).next(o,c)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Fe?t:Fe.resolve(t)}catch(t){return Fe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Fe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Fe.reject(t)}static resolve(e){return new Fe((t,o)=>{t(e)})}static reject(e){return new Fe((t,o)=>{o(e)})}static waitFor(e){return new Fe((t,o)=>{let c=0,p=0,v=!1;e.forEach(C=>{++c,C.next(()=>{++p,v&&p===c&&t()},A=>o(A))}),v=!0,p===c&&t()})}static or(e){let t=Fe.resolve(!1);for(const o of e)t=t.next(c=>c?Fe.resolve(c):o());return t}static forEach(e,t){const o=[];return e.forEach((c,p)=>{o.push(t.call(this,c,p))}),this.waitFor(o)}static mapArray(e,t){return new Fe((o,c)=>{const p=e.length,v=new Array(p);let C=0;for(let A=0;A<p;A++){const N=A;t(e[N]).next(B=>{v[N]=B,++C,C===p&&o(v)},B=>c(B))}})}static doWhile(e,t){return new Fe((o,c)=>{const p=()=>{!0===e()?t().next(()=>{p()},c):o()};p()})}}class _v{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new ho,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Td(e,t.error)):this.P.resolve()},this.transaction.onerror=o=>{const c=z0(o.target.error);this.P.reject(new Td(e,c))}}static open(e,t,o,c){try{return new _v(t,e.transaction(c,o))}catch(p){throw new Td(t,p)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(ct("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new QT(t)}}class bl{constructor(e,t,o){this.name=e,this.version=t,this.S=o,12.2===bl.D((0,An.z$)())&&Xi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ct("SimpleDb","Removing database:",e),Am(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,An.hl)())return!1;if(bl.N())return!0;const e=(0,An.z$)(),t=bl.D(e),o=0<t&&t<10,c=bl.k(e),p=0<c&&c<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||o||p)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.M)}static O(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(o)}static k(e){const t=e.match(/Android ([\d.]+)/i),o=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(o)}F(e){var t=this;return(0,Ge.Z)(function*(){return t.db||(ct("SimpleDb","Opening database:",t.name),t.db=yield new Promise((o,c)=>{const p=indexedDB.open(t.name,t.version);p.onsuccess=v=>{o(v.target.result)},p.onblocked=()=>{c(new Td(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},p.onerror=v=>{const C=v.target.error;c("VersionError"===C.name?new it(Be.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===C.name?new it(Be.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+C):new Td(e,C))},p.onupgradeneeded=v=>{ct("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',v.oldVersion),t.S.$(v.target.result,p.transaction,v.oldVersion,t.version).next(()=>{ct("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=o=>t.B(o)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,o,c){var p=this;return(0,Ge.Z)(function*(){const v="readonly"===t;let C=0;for(;;){++C;try{p.db=yield p.F(e);const A=_v.open(p.db,e,v?"readonly":"readwrite",o),N=c(A).next(B=>(A.V(),B)).catch(B=>(A.abort(B),Fe.reject(B))).toPromise();return N.catch(()=>{}),yield A.v,N}catch(A){const N=A,B="FirebaseError"!==N.name&&C<3;if(ct("SimpleDb","Transaction failed with error:",N.message,"Retrying:",B),p.close(),!B)return Promise.reject(N)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Ta{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return Am(this.U.delete())}}class Td extends it{constructor(e,t){super(Be.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Vf(i){return"IndexedDbTransactionError"===i.name}class QT{constructor(e){this.store=e}put(e,t){let o;return void 0!==t?(ct("SimpleDb","PUT",this.store.name,e,t),o=this.store.put(t,e)):(ct("SimpleDb","PUT",this.store.name,"<auto-key>",e),o=this.store.put(e)),Am(o)}add(e){return ct("SimpleDb","ADD",this.store.name,e,e),Am(this.store.add(e))}get(e){return Am(this.store.get(e)).next(t=>(void 0===t&&(t=null),ct("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ct("SimpleDb","DELETE",this.store.name,e),Am(this.store.delete(e))}count(){return ct("SimpleDb","COUNT",this.store.name),Am(this.store.count())}W(e,t){const o=this.options(e,t);if(o.index||"function"!=typeof this.store.getAll){const c=this.cursor(o),p=[];return this.H(c,(v,C)=>{p.push(C)}).next(()=>p)}{const c=this.store.getAll(o.range);return new Fe((p,v)=>{c.onerror=C=>{v(C.target.error)},c.onsuccess=C=>{p(C.target.result)}})}}J(e,t){const o=this.store.getAll(e,null===t?void 0:t);return new Fe((c,p)=>{o.onerror=v=>{p(v.target.error)},o.onsuccess=v=>{c(v.target.result)}})}Y(e,t){ct("SimpleDb","DELETE ALL",this.store.name);const o=this.options(e,t);o.X=!1;const c=this.cursor(o);return this.H(c,(p,v,C)=>C.delete())}Z(e,t){let o;t?o=e:(o={},t=e);const c=this.cursor(o);return this.H(c,t)}tt(e){const t=this.cursor({});return new Fe((o,c)=>{t.onerror=p=>{const v=z0(p.target.error);c(v)},t.onsuccess=p=>{const v=p.target.result;v?e(v.primaryKey,v.value).next(C=>{C?v.continue():o()}):o()}})}H(e,t){const o=[];return new Fe((c,p)=>{e.onerror=v=>{p(v.target.error)},e.onsuccess=v=>{const C=v.target.result;if(!C)return void c();const A=new Ta(C),N=t(C.primaryKey,C.value,A);if(N instanceof Fe){const B=N.catch(W=>(A.done(),Fe.reject(W)));o.push(B)}A.isDone?c():null===A.G?C.continue():C.continue(A.G)}}).next(()=>Fe.waitFor(o))}options(e,t){let o;return void 0!==e&&("string"==typeof e?o=e:t=e),{index:o,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const o=this.store.index(e.index);return e.X?o.openKeyCursor(e.range,t):o.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Am(i){return new Fe((e,t)=>{i.onsuccess=o=>{e(o.target.result)},i.onerror=o=>{const c=z0(o.target.error);t(c)}})}let JT=!1;function z0(i){const e=bl.D((0,An.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const o=new it("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return JT||(JT=!0,setTimeout(()=>{throw o},0)),o}}return i}class PC{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;ct("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Ge.Z)(function*(){t.task=null;try{ct("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(o){Vf(o)?ct("IndexBackiller","Ignoring IndexedDB error during index backfill: ",o):yield Th(o)}yield t.nt(6e4)}))}}class wv{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,Ge.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",o=>t.it(o,e))})()}it(e,t){const o=new Set;let c=t,p=!0;return Fe.doWhile(()=>!0===p&&c>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(v=>{if(null!==v&&!o.has(v))return ct("IndexBackiller",`Processing collection: ${v}`),this.rt(e,v,c).next(C=>{c-=C,o.add(v)});p=!1})).next(()=>t-c)}rt(e,t,o){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(c=>this.localStore.localDocuments.getNextDocuments(e,t,c,o).next(p=>{const v=p.changes;return this.localStore.indexManager.updateIndexEntries(e,v).next(()=>this.ot(c,p)).next(C=>(ct("IndexBackiller",`Updating offset: ${C}`),this.localStore.indexManager.updateCollectionGroup(e,t,C))).next(()=>v.size)}))}ot(e,t){let o=e;return t.changes.forEach((c,p)=>{const v=gI(p);G0(v,o)>0&&(o=v)}),new Pu(o.readTime,o.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Xa{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=o=>this.ut(o),this.ct=o=>t.writeSequenceNumber(o))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function W0(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function rg(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function yI(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}Xa.at=-1;class Bi{constructor(e,t){this.comparator=e,this.root=t||Ds.EMPTY}insert(e,t){return new Bi(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ds.BLACK,null,null))}remove(e){return new Bi(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ds.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const o=this.comparator(e,t.key);if(0===o)return t.value;o<0?t=t.left:o>0&&(t=t.right)}return null}indexOf(e){let t=0,o=this.root;for(;!o.isEmpty();){const c=this.comparator(e,o.key);if(0===c)return t+o.left.size;c<0?o=o.left:(t+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,o)=>(e(t,o),!1))}toString(){const e=[];return this.inorderTraversal((t,o)=>(e.push(`${t}:${o}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Z0(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Z0(this.root,e,this.comparator,!1)}getReverseIterator(){return new Z0(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Z0(this.root,e,this.comparator,!0)}}class Z0{constructor(e,t,o,c){this.isReverse=c,this.nodeStack=[];let p=1;for(;!e.isEmpty();)if(p=t?o(e.key,t):1,t&&c&&(p*=-1),p<0)e=this.isReverse?e.left:e.right;else{if(0===p){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ds{constructor(e,t,o,c,p){this.key=e,this.value=t,this.color=o??Ds.RED,this.left=c??Ds.EMPTY,this.right=p??Ds.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,o,c,p){return new Ds(e??this.key,t??this.value,o??this.color,c??this.left,p??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,o){let c=this;const p=o(e,c.key);return c=p<0?c.copy(null,null,null,c.left.insert(e,t,o),null):0===p?c.copy(null,t,null,null,null):c.copy(null,null,null,null,c.right.insert(e,t,o)),c.fixUp()}removeMin(){if(this.left.isEmpty())return Ds.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let o,c=this;if(t(e,c.key)<0)c.left.isEmpty()||c.left.isRed()||c.left.left.isRed()||(c=c.moveRedLeft()),c=c.copy(null,null,null,c.left.remove(e,t),null);else{if(c.left.isRed()&&(c=c.rotateRight()),c.right.isEmpty()||c.right.isRed()||c.right.left.isRed()||(c=c.moveRedRight()),0===t(e,c.key)){if(c.right.isEmpty())return Ds.EMPTY;o=c.right.min(),c=c.copy(o.key,o.value,null,null,c.right.removeMin())}c=c.copy(null,null,null,null,c.right.remove(e,t))}return c.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ds.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ds.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ht();const e=this.left.check();if(e!==this.right.check())throw Ht();return e+(this.isRed()?0:1)}}Ds.EMPTY=null,Ds.RED=!0,Ds.BLACK=!1,Ds.EMPTY=new class{constructor(){this.size=0}get key(){throw Ht()}get value(){throw Ht()}get color(){throw Ht()}get left(){throw Ht()}get right(){throw Ht()}copy(i,e,t,o,c){return this}insert(i,e,t){return new Ds(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class gr{constructor(e){this.comparator=e,this.data=new Bi(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,o)=>(e(t),!1))}forEachInRange(e,t){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const c=o.getNext();if(this.comparator(c.key,e[1])>=0)return;t(c.key)}}forEachWhile(e,t){let o;for(o=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new vI(this.data.getIterator())}getIteratorFrom(e){return new vI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(o=>{t=t.add(o)}),t}isEqual(e){if(!(e instanceof gr)||this.size!==e.size)return!1;const t=this.data.getIterator(),o=e.data.getIterator();for(;t.hasNext();){const c=t.getNext().key,p=o.getNext().key;if(0!==this.comparator(c,p))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new gr(this.comparator);return t.data=e,t}}class vI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ig(i){return i.hasNext()?i.getNext():void 0}class Ys{constructor(e){this.fields=e,e.sort(_i.comparator)}static empty(){return new Ys([])}unionWith(e){let t=new gr(_i.comparator);for(const o of this.fields)t=t.add(o);for(const o of e)t=t.add(o);return new Ys(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return tg(this.fields,e.fields,(t,o)=>t.isEqual(o))}}class es{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new es(t)}static fromUint8Array(e){const t=function(o){let c="";for(let p=0;p<o.length;++p)c+=String.fromCharCode(o[p]);return c}(e);return new es(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let o=0;o<e.length;o++)t[o]=e.charCodeAt(o);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Dn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}es.EMPTY_BYTE_STRING=new es("");const kC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Uf(i){if(En(!!i),"string"==typeof i){let e=0;const t=kC.exec(i);if(En(!!t),t[1]){let c=t[1];c=(c+"000000000").substr(0,9),e=Number(c)}const o=new Date(i);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:Ai(i.seconds),nanos:Ai(i.nanos)}}function Ai(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function Pc(i){return"string"==typeof i?es.fromBase64String(i):es.fromUint8Array(i)}function wI(i){var e,t;return"server_timestamp"===(null===(t=((null===(e=i?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function bI(i){const e=i.mapValue.fields.__previous_value__;return wI(e)?bI(e):e}function og(i){const e=Uf(i.mapValue.fields.__local_write_time__.timestampValue);return new ai(e.seconds,e.nanos)}class Kx{constructor(e,t,o,c,p,v,C,A){this.databaseId=e,this.appId=t,this.persistenceKey=o,this.host=c,this.ssl=p,this.forceLongPolling=v,this.autoDetectLongPolling=C,this.useFetchStreams=A}}class Bf{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Bf("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Bf&&e.projectId===this.projectId&&e.database===this.database}}function K0(i){return null==i}function bv(i){return 0===i&&1/i==-1/0}function FC(i){return"number"==typeof i&&Number.isInteger(i)&&!bv(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const jf={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Iv={nullValue:"NULL_VALUE"};function Hf(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?wI(i)?4:XT(i)?9007199254740991:10:Ht()}function Sd(i,e){if(i===e)return!0;const t=Hf(i);if(t!==Hf(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return og(i).isEqual(og(e));case 3:return function(o,c){if("string"==typeof o.timestampValue&&"string"==typeof c.timestampValue&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const p=Uf(o.timestampValue),v=Uf(c.timestampValue);return p.seconds===v.seconds&&p.nanos===v.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return c=e,Pc(i.bytesValue).isEqual(Pc(c.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(o,c){return Ai(o.geoPointValue.latitude)===Ai(c.geoPointValue.latitude)&&Ai(o.geoPointValue.longitude)===Ai(c.geoPointValue.longitude)}(i,e);case 2:return function(o,c){if("integerValue"in o&&"integerValue"in c)return Ai(o.integerValue)===Ai(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const p=Ai(o.doubleValue),v=Ai(c.doubleValue);return p===v?bv(p)===bv(v):isNaN(p)&&isNaN(v)}return!1}(i,e);case 9:return tg(i.arrayValue.values||[],e.arrayValue.values||[],Sd);case 10:return function(o,c){const p=o.mapValue.fields||{},v=c.mapValue.fields||{};if(W0(p)!==W0(v))return!1;for(const C in p)if(p.hasOwnProperty(C)&&(void 0===v[C]||!Sd(p[C],v[C])))return!1;return!0}(i,e);default:return Ht()}var c}function xm(i,e){return void 0!==(i.values||[]).find(t=>Sd(t,e))}function Sh(i,e){if(i===e)return 0;const t=Hf(i),o=Hf(e);if(t!==o)return Dn(t,o);switch(t){case 0:case 9007199254740991:return 0;case 1:return Dn(i.booleanValue,e.booleanValue);case 2:return function(c,p){const v=Ai(c.integerValue||c.doubleValue),C=Ai(p.integerValue||p.doubleValue);return v<C?-1:v>C?1:v===C?0:isNaN(v)?isNaN(C)?0:-1:1}(i,e);case 3:return LC(i.timestampValue,e.timestampValue);case 4:return LC(og(i),og(e));case 5:return Dn(i.stringValue,e.stringValue);case 6:return function(c,p){const v=Pc(c),C=Pc(p);return v.compareTo(C)}(i.bytesValue,e.bytesValue);case 7:return function(c,p){const v=c.split("/"),C=p.split("/");for(let A=0;A<v.length&&A<C.length;A++){const N=Dn(v[A],C[A]);if(0!==N)return N}return Dn(v.length,C.length)}(i.referenceValue,e.referenceValue);case 8:return function(c,p){const v=Dn(Ai(c.latitude),Ai(p.latitude));return 0!==v?v:Dn(Ai(c.longitude),Ai(p.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(c,p){const v=c.values||[],C=p.values||[];for(let A=0;A<v.length&&A<C.length;++A){const N=Sh(v[A],C[A]);if(N)return N}return Dn(v.length,C.length)}(i.arrayValue,e.arrayValue);case 10:return function(c,p){if(c===jf.mapValue&&p===jf.mapValue)return 0;if(c===jf.mapValue)return 1;if(p===jf.mapValue)return-1;const v=c.fields||{},C=Object.keys(v),A=p.fields||{},N=Object.keys(A);C.sort(),N.sort();for(let B=0;B<C.length&&B<N.length;++B){const W=Dn(C[B],N[B]);if(0!==W)return W;const ae=Sh(v[C[B]],A[N[B]]);if(0!==ae)return ae}return Dn(C.length,N.length)}(i.mapValue,e.mapValue);default:throw Ht()}}function LC(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return Dn(i,e);const t=Uf(i),o=Uf(e),c=Dn(t.seconds,o.seconds);return 0!==c?c:Dn(t.nanos,o.nanos)}function Mm(i){return Y0(i)}function Y0(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(o){const c=Uf(o);return`time(${c.seconds},${c.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?Pc(i.bytesValue).toBase64():"referenceValue"in i?It.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(o){let c="[",p=!0;for(const v of o.values||[])p?p=!1:c+=",",c+=Y0(v);return c+"]"}(i.arrayValue):"mapValue"in i?function(o){const c=Object.keys(o.fields||{}).sort();let p="{",v=!0;for(const C of c)v?v=!1:p+=",",p+=`${C}:${Y0(o.fields[C])}`;return p+"}"}(i.mapValue):Ht();var e}function sg(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Q0(i){return!!i&&"integerValue"in i}function Rm(i){return!!i&&"arrayValue"in i}function II(i){return!!i&&"nullValue"in i}function EI(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function J0(i){return!!i&&"mapValue"in i}function Ev(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return rg(i.mapValue.fields,(t,o)=>e.mapValue.fields[t]=Ev(o)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ev(i.arrayValue.values[t]);return e}return Object.assign({},i)}function XT(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function VC(i){return"nullValue"in i?Iv:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?sg(Bf.empty(),It.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:Ht()}function Yx(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?sg(Bf.empty(),It.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?jf:Ht()}function eS(i,e){const t=Sh(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function tS(i,e){const t=Sh(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class Qs{constructor(e){this.value=e}static empty(){return new Qs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let o=0;o<e.length-1;++o)if(t=(t.mapValue.fields||{})[e.get(o)],!J0(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ev(t)}setAll(e){let t=_i.emptyPath(),o={},c=[];e.forEach((v,C)=>{if(!t.isImmediateParentOf(C)){const A=this.getFieldsMap(t);this.applyChanges(A,o,c),o={},c=[],t=C.popLast()}v?o[C.lastSegment()]=Ev(v):c.push(C.lastSegment())});const p=this.getFieldsMap(t);this.applyChanges(p,o,c)}delete(e){const t=this.field(e.popLast());J0(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Sd(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let o=0;o<e.length;++o){let c=t.mapValue.fields[e.get(o)];J0(c)&&c.mapValue.fields||(c={mapValue:{fields:{}}},t.mapValue.fields[e.get(o)]=c),t=c}return t.mapValue.fields}applyChanges(e,t,o){rg(t,(c,p)=>e[c]=p);for(const c of o)delete e[c]}clone(){return new Qs(Ev(this.value))}}function nS(i){const e=[];return rg(i.fields,(t,o)=>{const c=new _i([t]);if(J0(o)){const p=nS(o.mapValue).fields;if(0===p.length)e.push(c);else for(const v of p)e.push(c.child(v))}else e.push(c)}),new Ys(e)}class ui{constructor(e,t,o,c,p,v){this.key=e,this.documentType=t,this.version=o,this.readTime=c,this.data=p,this.documentState=v}static newInvalidDocument(e){return new ui(e,0,yn.min(),yn.min(),Qs.empty(),0)}static newFoundDocument(e,t,o){return new ui(e,1,t,yn.min(),o,0)}static newNoDocument(e,t){return new ui(e,2,t,yn.min(),Qs.empty(),0)}static newUnknownDocument(e,t){return new ui(e,3,t,yn.min(),Qs.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Qs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Qs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=yn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ui&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ui(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Qx{constructor(e,t=null,o=[],c=[],p=null,v=null,C=null){this.path=e,this.collectionGroup=t,this.orderBy=o,this.filters=c,this.limit=p,this.startAt=v,this.endAt=C,this.ht=null}}function rS(i,e=null,t=[],o=[],c=null,p=null,v=null){return new Qx(i,e,t,o,c,p,v)}function Ad(i){const e=Dt(i);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(o=>{return(c=o).field.canonicalString()+c.op.toString()+Mm(c.value);var c}).join(","),t+="|ob:",t+=e.orderBy.map(o=>{return(c=o).field.canonicalString()+c.dir;var c}).join(","),K0(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(o=>Mm(o)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(o=>Mm(o)).join(",")),e.ht=t}return e.ht}function Om(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let c=0;c<i.orderBy.length;c++)if(!eM(i.orderBy[c],e.orderBy[c]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let c=0;c<i.filters.length;c++)if((t=i.filters[c]).op!==(o=e.filters[c]).op||!t.field.isEqual(o.field)||!Sd(t.value,o.value))return!1;var t,o;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!jC(i.startAt,e.startAt)&&jC(i.endAt,e.endAt)}function ag(i){return It.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function Cv(i,e){return i.filters.filter(t=>t instanceof Co&&t.field.isEqual(e))}function CI(i,e,t){let o=Iv,c=!0;for(const p of Cv(i,e)){let v=Iv,C=!0;switch(p.op){case"<":case"<=":v=VC(p.value);break;case"==":case"in":case">=":v=p.value;break;case">":v=p.value,C=!1;break;case"!=":case"not-in":v=Iv}eS({value:o,inclusive:c},{value:v,inclusive:C})<0&&(o=v,c=C)}if(null!==t)for(let p=0;p<i.orderBy.length;++p)if(i.orderBy[p].field.isEqual(e)){const v=t.position[p];eS({value:o,inclusive:c},{value:v,inclusive:t.inclusive})<0&&(o=v,c=t.inclusive);break}return{value:o,inclusive:c}}function iS(i,e,t){let o=jf,c=!0;for(const p of Cv(i,e)){let v=jf,C=!0;switch(p.op){case">=":case">":v=Yx(p.value),C=!1;break;case"==":case"in":case"<=":v=p.value;break;case"<":v=p.value,C=!1;break;case"!=":case"not-in":v=jf}tS({value:o,inclusive:c},{value:v,inclusive:C})>0&&(o=v,c=C)}if(null!==t)for(let p=0;p<i.orderBy.length;++p)if(i.orderBy[p].field.isEqual(e)){const v=t.position[p];tS({value:o,inclusive:c},{value:v,inclusive:t.inclusive})>0&&(o=v,c=t.inclusive);break}return{value:o,inclusive:c}}class Co extends class{}{constructor(e,t,o){super(),this.field=e,this.op=t,this.value=o}static create(e,t,o){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,o):new UC(e,t,o):"array-contains"===t?new Xx(e,o):"in"===t?new aS(e,o):"not-in"===t?new uS(e,o):"array-contains-any"===t?new X0(e,o):new Co(e,t,o)}static lt(e,t,o){return"in"===t?new oS(e,o):new BC(e,o)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(Sh(t,this.value)):null!==t&&Hf(this.value)===Hf(t)&&this.ft(Sh(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ht()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class UC extends Co{constructor(e,t,o){super(e,t,o),this.key=It.fromName(o.referenceValue)}matches(e){const t=It.comparator(e.key,this.key);return this.ft(t)}}class oS extends Co{constructor(e,t){super(e,"in",t),this.keys=sS(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class BC extends Co{constructor(e,t){super(e,"not-in",t),this.keys=sS(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function sS(i,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(o=>It.fromName(o.referenceValue))}class Xx extends Co{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Rm(t)&&xm(t.arrayValue,this.value)}}class aS extends Co{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&xm(this.value.arrayValue,t)}}class uS extends Co{constructor(e,t){super(e,"not-in",t)}matches(e){if(xm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!xm(this.value.arrayValue,t)}}class X0 extends Co{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Rm(t)||!t.arrayValue.values)&&t.arrayValue.values.some(o=>xm(this.value.arrayValue,o))}}class $f{constructor(e,t){this.position=e,this.inclusive=t}}class Dv{constructor(e,t="asc"){this.field=e,this.dir=t}}function eM(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}function cS(i,e,t){let o=0;for(let c=0;c<i.position.length;c++){const p=e[c],v=i.position[c];if(o=p.field.isKeyField()?It.comparator(It.fromName(v.referenceValue),t.key):Sh(v,t.data.field(p.field)),"desc"===p.dir&&(o*=-1),0!==o)break}return o}function jC(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!Sd(i.position[t],e.position[t]))return!1;return!0}class Ah{constructor(e,t=null,o=[],c=[],p=null,v="F",C=null,A=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=o,this.filters=c,this.limit=p,this.limitType=v,this.startAt=C,this.endAt=A,this._t=null,this.wt=null}}function HC(i,e,t,o,c,p,v,C){return new Ah(i,e,t,o,c,p,v,C)}function Tv(i){return new Ah(i)}function $C(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}function ew(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function tw(i){for(const e of i.filters)if(e.dt())return e.field;return null}function GC(i){return null!==i.collectionGroup}function Js(i){const e=Dt(i);if(null===e._t){e._t=[];const t=tw(e),o=ew(e);if(null!==t&&null===o)t.isKeyField()||e._t.push(new Dv(t)),e._t.push(new Dv(_i.keyField(),"asc"));else{let c=!1;for(const p of e.explicitOrderBy)e._t.push(p),p.field.isKeyField()&&(c=!0);if(!c){const p=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new Dv(_i.keyField(),p))}}}return e._t}function eu(i){const e=Dt(i);if(!e.wt)if("F"===e.limitType)e.wt=rS(e.path,e.collectionGroup,Js(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const p of Js(e))t.push(new Dv(p.field,"desc"===p.dir?"asc":"desc"));const o=e.endAt?new $f(e.endAt.position,e.endAt.inclusive):null,c=e.startAt?new $f(e.startAt.position,e.startAt.inclusive):null;e.wt=rS(e.path,e.collectionGroup,t,e.filters,e.limit,o,c)}return e.wt}function Nm(i,e,t){return new Ah(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function Sv(i,e){return Om(eu(i),eu(e))&&i.limitType===e.limitType}function ku(i){return`${Ad(eu(i))}|lt:${i.limitType}`}function DI(i){return`Query(target=${function Jx(i){let e=i.path.canonicalString();return null!==i.collectionGroup&&(e+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(e+=`, filters: [${i.filters.map(t=>{return`${(o=t).field.canonicalString()} ${o.op} ${Mm(o.value)}`;var o}).join(", ")}]`),K0(i.limit)||(e+=", limit: "+i.limit),i.orderBy.length>0&&(e+=`, orderBy: [${i.orderBy.map(t=>{return`${(o=t).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),i.startAt&&(e+=", startAt: ",e+=i.startAt.inclusive?"b:":"a:",e+=i.startAt.position.map(t=>Mm(t)).join(",")),i.endAt&&(e+=", endAt: ",e+=i.endAt.inclusive?"a:":"b:",e+=i.endAt.position.map(t=>Mm(t)).join(",")),`Target(${e})`}(eu(i))}; limitType=${i.limitType})`}function Av(i,e){return e.isFoundDocument()&&function(t,o){const c=o.key.path;return null!==t.collectionGroup?o.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(c):It.isDocumentKey(t.path)?t.path.isEqual(c):t.path.isImmediateParentOf(c)}(i,e)&&function(t,o){for(const c of t.explicitOrderBy)if(!c.field.isKeyField()&&null===o.data.field(c.field))return!1;return!0}(i,e)&&function(t,o){for(const c of t.filters)if(!c.matches(o))return!1;return!0}(i,e)&&(o=e,!((t=i).startAt&&!function(c,p,v){const C=cS(c,p,v);return c.inclusive?C<=0:C<0}(t.startAt,Js(t),o)||t.endAt&&!function(c,p,v){const C=cS(c,p,v);return c.inclusive?C>=0:C>0}(t.endAt,Js(t),o)));var t,o}function qC(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function zC(i){return(e,t)=>{let o=!1;for(const c of Js(i)){const p=TI(c,e,t);if(0!==p)return p;o=o||c.field.isKeyField()}return 0}}function TI(i,e,t){const o=i.field.isKeyField()?It.comparator(e.key,t.key):function(c,p,v){const C=p.data.field(c),A=v.data.field(c);return null!==C&&null!==A?Sh(C,A):Ht()}(i.field,e,t);switch(i.dir){case"asc":return o;case"desc":return-1*o;default:return Ht()}}function SI(i,e){if(i.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bv(e)?"-0":e}}function AI(i){return{integerValue:""+i}}function WC(i,e){return FC(e)?AI(e):SI(i,e)}class xv{constructor(){this._=void 0}}function ZC(i,e,t){return i instanceof Pm?function(o,c){const p={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&(p.fields.__previous_value__=c),{mapValue:p}}(t,e):i instanceof xh?Mh(i,e):i instanceof Gf?nw(i,e):function(o,c){const p=xI(o,c),v=KC(p)+KC(o.yt);return Q0(p)&&Q0(o.yt)?AI(v):SI(o.It,v)}(i,e)}function lS(i,e,t){return i instanceof xh?Mh(i,e):i instanceof Gf?nw(i,e):t}function xI(i,e){return i instanceof tu?Q0(t=e)||(o=t)&&"doubleValue"in o?e:{integerValue:0}:null;var o,t}class Pm extends xv{}class xh extends xv{constructor(e){super(),this.elements=e}}function Mh(i,e){const t=dS(e);for(const o of i.elements)t.some(c=>Sd(c,o))||t.push(o);return{arrayValue:{values:t}}}class Gf extends xv{constructor(e){super(),this.elements=e}}function nw(i,e){let t=dS(e);for(const o of i.elements)t=t.filter(c=>!Sd(c,o));return{arrayValue:{values:t}}}class tu extends xv{constructor(e,t){super(),this.It=e,this.yt=t}}function KC(i){return Ai(i.integerValue||i.doubleValue)}function dS(i){return Rm(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class Mv{constructor(e,t){this.field=e,this.transform=t}}class fS{constructor(e,t){this.version=e,this.transformResults=t}}class wi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new wi}static exists(e){return new wi(void 0,e)}static updateTime(e){return new wi(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Rv(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class MI{}function RI(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new Rh(i.key,wi.none()):new ug(i.key,i.data,wi.none());{const t=i.data,o=Qs.empty();let c=new gr(_i.comparator);for(let p of e.fields)if(!c.has(p)){let v=t.field(p);null===v&&p.length>1&&(p=p.popLast(),v=t.field(p)),null===v?o.delete(p):o.set(p,v),c=c.add(p)}return new xd(i.key,o,new Ys(c.toArray()),wi.none())}}function pS(i,e,t){i instanceof ug?function(o,c,p){const v=o.value.clone(),C=NI(o.fieldTransforms,c,p.transformResults);v.setAll(C),c.convertToFoundDocument(p.version,v).setHasCommittedMutations()}(i,e,t):i instanceof xd?function(o,c,p){if(!Rv(o.precondition,c))return void c.convertToUnknownDocument(p.version);const v=NI(o.fieldTransforms,c,p.transformResults),C=c.data;C.setAll(OI(o)),C.setAll(v),c.convertToFoundDocument(p.version,C).setHasCommittedMutations()}(i,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function km(i,e,t,o){return i instanceof ug?function(c,p,v,C){if(!Rv(c.precondition,p))return v;const A=c.value.clone(),N=PI(c.fieldTransforms,C,p);return A.setAll(N),p.convertToFoundDocument(p.version,A).setHasLocalMutations(),null}(i,e,t,o):i instanceof xd?function(c,p,v,C){if(!Rv(c.precondition,p))return v;const A=PI(c.fieldTransforms,C,p),N=p.data;return N.setAll(OI(c)),N.setAll(A),p.convertToFoundDocument(p.version,N).setHasLocalMutations(),null===v?null:v.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(B=>B.field))}(i,e,t,o):(v=t,Rv(i.precondition,p=e)?(p.convertToNoDocument(p.version).setHasLocalMutations(),null):v);var p,v}function tM(i,e){let t=null;for(const o of i.fieldTransforms){const c=e.data.field(o.field),p=xI(o.transform,c||null);null!=p&&(null===t&&(t=Qs.empty()),t.set(o.field,p))}return t||null}function rw(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(o=e.fieldTransforms,!!(void 0===(t=i.fieldTransforms)&&void 0===o||t&&o&&tg(t,o,(c,p)=>function hS(i,e){return i.field.isEqual(e.field)&&(o=e.transform,(t=i.transform)instanceof xh&&o instanceof xh||t instanceof Gf&&o instanceof Gf?tg(t.elements,o.elements,Sd):t instanceof tu&&o instanceof tu?Sd(t.yt,o.yt):t instanceof Pm&&o instanceof Pm);var t,o}(c,p))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var t,o}class ug extends MI{constructor(e,t,o,c=[]){super(),this.key=e,this.value=t,this.precondition=o,this.fieldTransforms=c,this.type=0}getFieldMask(){return null}}class xd extends MI{constructor(e,t,o,c,p=[]){super(),this.key=e,this.data=t,this.fieldMask=o,this.precondition=c,this.fieldTransforms=p,this.type=1}getFieldMask(){return this.fieldMask}}function OI(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const o=i.data.field(t);e.set(t,o)}}),e}function NI(i,e,t){const o=new Map;En(i.length===t.length);for(let c=0;c<t.length;c++){const p=i[c],v=p.transform,C=e.data.field(p.field);o.set(p.field,lS(v,C,t[c]))}return o}function PI(i,e,t){const o=new Map;for(const c of i){const p=c.transform,v=t.data.field(c.field);o.set(c.field,ZC(p,v,e))}return o}class Rh extends MI{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Fm extends MI{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class YC{constructor(e){this.count=e}}var fo,Qn;function kI(i){switch(i){default:return Ht();case Be.CANCELLED:case Be.UNKNOWN:case Be.DEADLINE_EXCEEDED:case Be.RESOURCE_EXHAUSTED:case Be.INTERNAL:case Be.UNAVAILABLE:case Be.UNAUTHENTICATED:return!1;case Be.INVALID_ARGUMENT:case Be.NOT_FOUND:case Be.ALREADY_EXISTS:case Be.PERMISSION_DENIED:case Be.FAILED_PRECONDITION:case Be.ABORTED:case Be.OUT_OF_RANGE:case Be.UNIMPLEMENTED:case Be.DATA_LOSS:return!0}}function QC(i){if(void 0===i)return Xi("GRPC error has no .code"),Be.UNKNOWN;switch(i){case fo.OK:return Be.OK;case fo.CANCELLED:return Be.CANCELLED;case fo.UNKNOWN:return Be.UNKNOWN;case fo.DEADLINE_EXCEEDED:return Be.DEADLINE_EXCEEDED;case fo.RESOURCE_EXHAUSTED:return Be.RESOURCE_EXHAUSTED;case fo.INTERNAL:return Be.INTERNAL;case fo.UNAVAILABLE:return Be.UNAVAILABLE;case fo.UNAUTHENTICATED:return Be.UNAUTHENTICATED;case fo.INVALID_ARGUMENT:return Be.INVALID_ARGUMENT;case fo.NOT_FOUND:return Be.NOT_FOUND;case fo.ALREADY_EXISTS:return Be.ALREADY_EXISTS;case fo.PERMISSION_DENIED:return Be.PERMISSION_DENIED;case fo.FAILED_PRECONDITION:return Be.FAILED_PRECONDITION;case fo.ABORTED:return Be.ABORTED;case fo.OUT_OF_RANGE:return Be.OUT_OF_RANGE;case fo.UNIMPLEMENTED:return Be.UNIMPLEMENTED;case fo.DATA_LOSS:return Be.DATA_LOSS;default:return Ht()}}(Qn=fo||(fo={}))[Qn.OK=0]="OK",Qn[Qn.CANCELLED=1]="CANCELLED",Qn[Qn.UNKNOWN=2]="UNKNOWN",Qn[Qn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qn[Qn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qn[Qn.NOT_FOUND=5]="NOT_FOUND",Qn[Qn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qn[Qn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qn[Qn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qn[Qn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qn[Qn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qn[Qn.ABORTED=10]="ABORTED",Qn[Qn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qn[Qn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qn[Qn.INTERNAL=13]="INTERNAL",Qn[Qn.UNAVAILABLE=14]="UNAVAILABLE",Qn[Qn.DATA_LOSS=15]="DATA_LOSS";class qf{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0!==o)for(const[c,p]of o)if(this.equalsFn(c,e))return p}has(e){return void 0!==this.get(e)}set(e,t){const o=this.mapKeyFn(e),c=this.inner[o];if(void 0===c)return this.inner[o]=[[e,t]],void this.innerSize++;for(let p=0;p<c.length;p++)if(this.equalsFn(c[p][0],e))return void(c[p]=[e,t]);c.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0===o)return!1;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return 1===o.length?delete this.inner[t]:o.splice(c,1),this.innerSize--,!0;return!1}forEach(e){rg(this.inner,(t,o)=>{for(const[c,p]of o)e(c,p)})}isEmpty(){return yI(this.inner)}size(){return this.innerSize}}const nM=new Bi(It.comparator);function Fu(){return nM}const FI=new Bi(It.comparator);function Ov(...i){let e=FI;for(const t of i)e=e.insert(t.key,t);return e}function JC(i){let e=FI;return i.forEach((t,o)=>e=e.insert(t,o.overlayedDocument)),e}function Md(){return iw()}function gS(){return iw()}function iw(){return new qf(i=>i.toString(),(i,e)=>i.isEqual(e))}const rM=new Bi(It.comparator),iM=new gr(It.comparator);function Pn(...i){let e=iM;for(const t of i)e=e.add(t);return e}const mS=new gr(Dn);function cg(){return mS}class Nv{constructor(e,t,o,c,p){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=o,this.documentUpdates=c,this.resolvedLimboDocuments=p}static createSynthesizedRemoteEventForCurrentChange(e,t){const o=new Map;return o.set(e,Pv.createSynthesizedTargetChangeForCurrentChange(e,t)),new Nv(yn.min(),o,cg(),Fu(),Pn())}}class Pv{constructor(e,t,o,c,p){this.resumeToken=e,this.current=t,this.addedDocuments=o,this.modifiedDocuments=c,this.removedDocuments=p}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Pv(es.EMPTY_BYTE_STRING,t,Pn(),Pn(),Pn())}}class kv{constructor(e,t,o,c){this.Tt=e,this.removedTargetIds=t,this.key=o,this.Et=c}}class zf{constructor(e,t){this.targetId=e,this.At=t}}class LI{constructor(e,t,o=es.EMPTY_BYTE_STRING,c=null){this.state=e,this.targetIds=t,this.resumeToken=o,this.cause=c}}class ow{constructor(){this.Rt=0,this.bt=sw(),this.Pt=es.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Pn(),t=Pn(),o=Pn();return this.bt.forEach((c,p)=>{switch(p){case 0:e=e.add(c);break;case 2:t=t.add(c);break;case 1:o=o.add(c);break;default:Ht()}}),new Pv(this.Pt,this.vt,e,t,o)}Nt(){this.Vt=!1,this.bt=sw()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Mt(e){this.Vt=!0,this.bt=this.bt.remove(e)}Ot(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class VI{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=Fu(),this.qt=XC(),this.Kt=new gr(Dn)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const o=this.zt(t);switch(e.state){case 0:this.Ht(t)&&o.Ct(e.resumeToken);break;case 1:o.Ft(),o.St||o.Nt(),o.Ct(e.resumeToken);break;case 2:o.Ft(),o.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(o.$t(),o.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),o.Ct(e.resumeToken));break;default:Ht()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((o,c)=>{this.Ht(c)&&t(c)})}Yt(e){const t=e.targetId,o=e.At.count,c=this.Xt(t);if(c){const p=c.target;if(ag(p))if(0===o){const v=new It(p.path);this.jt(t,v,ui.newNoDocument(v,yn.min()))}else En(1===o);else this.Zt(t)!==o&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((p,v)=>{const C=this.Xt(v);if(C){if(p.current&&ag(C.target)){const A=new It(C.target.path);null!==this.Ut.get(A)||this.ee(v,A)||this.jt(v,A,ui.newNoDocument(A,e))}p.Dt&&(t.set(v,p.xt()),p.Nt())}});let o=Pn();this.qt.forEach((p,v)=>{let C=!0;v.forEachWhile(A=>{const N=this.Xt(A);return!N||2===N.purpose||(C=!1,!1)}),C&&(o=o.add(p))}),this.Ut.forEach((p,v)=>v.setReadTime(e));const c=new Nv(e,t,this.Kt,this.Ut,o);return this.Ut=Fu(),this.qt=XC(),this.Kt=new gr(Dn),c}Qt(e,t){if(!this.Ht(e))return;const o=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,o),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,o){if(!this.Ht(e))return;const c=this.zt(e);this.ee(e,t)?c.kt(t,1):c.Mt(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),o&&(this.Ut=this.Ut.insert(t,o))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.zt(e).Ot()}zt(e){let t=this.Lt.get(e);return t||(t=new ow,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new gr(Dn),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||ct("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new ow),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function XC(){return new Bi(It.comparator)}function sw(){return new Bi(It.comparator)}const UI={asc:"ASCENDING",desc:"DESCENDING"},aw={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class oM{constructor(e,t){this.databaseId=e,this.gt=t}}function uw(i,e){return i.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function yS(i,e){return i.gt?e.toBase64():e.toUint8Array()}function sM(i,e){return uw(i,e.toTimestamp())}function Do(i){return En(!!i),yn.fromTimestamp(function(e){const t=Uf(e);return new ai(t.seconds,t.nanos)}(i))}function BI(i,e){return(t=i,new ir(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function eD(i){const e=ir.fromString(i);return En(CS(e)),e}function Fv(i,e){return BI(i.databaseId,e.path)}function Rd(i,e){const t=eD(e);if(t.get(1)!==i.databaseId.projectId)throw new it(Be.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new it(Be.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new It(tD(t))}function cw(i,e){return BI(i.databaseId,e)}function jI(i){const e=eD(i);return 4===e.length?ir.emptyPath():tD(e)}function Lm(i){return new ir(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function tD(i){return En(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function nD(i,e,t){return{name:Fv(i,e),fields:t.value.mapValue.fields}}function HI(i,e,t){const o=Rd(i,e.name),c=Do(e.updateTime),p=new Qs({mapValue:{fields:e.fields}}),v=ui.newFoundDocument(o,c,p);return t&&v.setHasCommittedMutations(),t?v.setHasCommittedMutations():v}function Vm(i,e){let t;if(e instanceof ug)t={update:nD(i,e.key,e.value)};else if(e instanceof Rh)t={delete:Fv(i,e.key)};else if(e instanceof xd)t={update:nD(i,e.key,e.data),updateMask:ES(e.fieldMask)};else{if(!(e instanceof Fm))return Ht();t={verify:Fv(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(o=>function(c,p){const v=p.transform;if(v instanceof Pm)return{fieldPath:p.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(v instanceof xh)return{fieldPath:p.field.canonicalString(),appendMissingElements:{values:v.elements}};if(v instanceof Gf)return{fieldPath:p.field.canonicalString(),removeAllFromArray:{values:v.elements}};if(v instanceof tu)return{fieldPath:p.field.canonicalString(),increment:v.yt};throw Ht()}(0,o))),e.precondition.isNone||(t.currentDocument=void 0!==(c=e.precondition).updateTime?{updateTime:sM(i,c.updateTime)}:void 0!==c.exists?{exists:c.exists}:Ht()),t;var c}function Lv(i,e){const t=e.currentDocument?void 0!==(c=e.currentDocument).updateTime?wi.updateTime(Do(c.updateTime)):void 0!==c.exists?wi.exists(c.exists):wi.none():wi.none(),o=e.updateTransforms?e.updateTransforms.map(c=>function(p,v){let C=null;"setToServerValue"in v?(En("REQUEST_TIME"===v.setToServerValue),C=new Pm):"appendMissingElements"in v?C=new xh(v.appendMissingElements.values||[]):"removeAllFromArray"in v?C=new Gf(v.removeAllFromArray.values||[]):"increment"in v?C=new tu(p,v.increment):Ht();const A=_i.fromServerFormat(v.fieldPath);return new Mv(A,C)}(i,c)):[];var c;if(e.update){const c=Rd(i,e.update.name),p=new Qs({mapValue:{fields:e.update.fields}});if(e.updateMask){const v=new Ys((e.updateMask.fieldPaths||[]).map(N=>_i.fromServerFormat(N)));return new xd(c,p,v,t,o)}return new ug(c,p,t,o)}if(e.delete){const c=Rd(i,e.delete);return new Rh(c,t)}if(e.verify){const c=Rd(i,e.verify);return new Fm(c,t)}return Ht()}function rD(i,e){return{documents:[cw(i,e.path)]}}function _S(i,e){const t={structuredQuery:{}},o=e.path;null!==e.collectionGroup?(t.parent=cw(i,o),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=cw(i,o.popLast()),t.structuredQuery.from=[{collectionId:o.lastSegment()}]);const c=function(A){if(0===A.length)return;const N=A.map(B=>function(W){if("=="===W.op){if(EI(W.value))return{unaryFilter:{field:Vv(W.field),op:"IS_NAN"}};if(II(W.value))return{unaryFilter:{field:Vv(W.field),op:"IS_NULL"}}}else if("!="===W.op){if(EI(W.value))return{unaryFilter:{field:Vv(W.field),op:"IS_NOT_NAN"}};if(II(W.value))return{unaryFilter:{field:Vv(W.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vv(W.field),op:uM(W.op),value:W.value}}}(B));return 1===N.length?N[0]:{compositeFilter:{op:"AND",filters:N}}}(e.filters);c&&(t.structuredQuery.where=c);const p=function(A){if(0!==A.length)return A.map(N=>{return{field:Vv((B=N).field),direction:IS(B.dir)};var B})}(e.orderBy);p&&(t.structuredQuery.orderBy=p);const v=(N=e.limit,i.gt||K0(N)?N:{value:N});var N,C,A;return null!==v&&(t.structuredQuery.limit=v),e.startAt&&(t.structuredQuery.startAt={before:(C=e.startAt).inclusive,values:C.position}),e.endAt&&(t.structuredQuery.endAt={before:!(A=e.endAt).inclusive,values:A.position}),t}function wS(i){let e=jI(i.parent);const t=i.structuredQuery,o=t.from?t.from.length:0;let c=null;if(o>0){En(1===o);const B=t.from[0];B.allDescendants?c=B.collectionId:e=e.child(B.collectionId)}let p=[];t.where&&(p=iD(t.where));let v=[];t.orderBy&&(v=t.orderBy.map(B=>{return new Dv(Uv((W=B).field),function(ae){switch(ae){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(W.direction));var W}));let C=null;t.limit&&(C=function(B){let W;return W="object"==typeof B?B.value:B,K0(W)?null:W}(t.limit));let A=null;var B;t.startAt&&(A=new $f((B=t.startAt).values||[],!!B.before));let N=null;return t.endAt&&(N=function(B){return new $f(B.values||[],!B.before)}(t.endAt)),HC(e,c,v,p,C,"F",A,N)}function iD(i){return i?void 0!==i.unaryFilter?[lM(i)]:void 0!==i.fieldFilter?[cM(i)]:void 0!==i.compositeFilter?i.compositeFilter.filters.map(e=>iD(e)).reduce((e,t)=>e.concat(t)):Ht():[]}function IS(i){return UI[i]}function uM(i){return aw[i]}function Vv(i){return{fieldPath:i.canonicalString()}}function Uv(i){return _i.fromServerFormat(i.fieldPath)}function cM(i){return Co.create(Uv(i.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ht()}}(i.fieldFilter.op),i.fieldFilter.value)}function lM(i){switch(i.unaryFilter.op){case"IS_NAN":const e=Uv(i.unaryFilter.field);return Co.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Uv(i.unaryFilter.field);return Co.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Uv(i.unaryFilter.field);return Co.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Uv(i.unaryFilter.field);return Co.create(c,"!=",{nullValue:"NULL_VALUE"});default:return Ht()}}function ES(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function CS(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function nu(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=DS(e)),e=dM(i.get(t),e);return DS(e)}function dM(i,e){let t=e;const o=i.length;for(let c=0;c<o;c++){const p=i.charAt(c);switch(p){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=p}}return t}function DS(i){return i+"\x01\x01"}function Oh(i){const e=i.length;if(En(e>=2),2===e)return En("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),ir.emptyPath();const t=e-2,o=[];let c="";for(let p=0;p<e;){const v=i.indexOf("\x01",p);switch((v<0||v>t)&&Ht(),i.charAt(v+1)){case"\x01":const C=i.substring(p,v);let A;0===c.length?A=C:(c+=C,A=c,c=""),o.push(A);break;case"\x10":c+=i.substring(p,v),c+="\0";break;case"\x11":c+=i.substring(p,v+1);break;default:Ht()}p=v+2}return new ir(o)}const TS=["userId","batchId"];function u(i,e){return[i,nu(e)]}function d(i,e,t){return[i,nu(e),t]}const h={},g=["prefixPath","collectionGroup","readTime","documentId"],_=["prefixPath","collectionGroup","documentId"],I=["collectionGroup","readTime","prefixPath","documentId"],S=["canonicalId","targetId"],R=["targetId","path"],O=["path","targetId"],V=["collectionId","parent"],K=["indexId","uid"],ne=["uid","sequenceNumber"],pe=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Te=["indexId","uid","orderedDocumentKey"],Ze=["userId","collectionPath","documentId"],lt=["userId","collectionPath","largestBatchId"],Ct=["userId","collectionGroup","largestBatchId"],Lt=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],mn=[...Lt,"documentOverlays"],nt=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],tn=nt,Zn=[...tn,"indexConfiguration","indexState","indexEntries"];class Br extends NC{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function bi(i,e){const t=Dt(i);return bl.O(t.ie,e)}class Bv{constructor(e,t,o,c){this.batchId=e,this.localWriteTime=t,this.baseMutations=o,this.mutations=c}applyToRemoteDocument(e,t){const o=t.mutationResults;for(let c=0;c<this.mutations.length;c++){const p=this.mutations[c];p.key.isEqual(e.key)&&pS(p,e,o[c])}}applyToLocalView(e,t){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(t=km(o,e,t,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(t=km(o,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const o=gS();return this.mutations.forEach(c=>{const p=e.get(c.key),v=p.overlayedDocument;let C=this.applyToLocalView(v,p.mutatedFields);C=t.has(c.key)?null:C;const A=RI(v,C);null!==A&&o.set(c.key,A),v.isValidDocument()||v.convertToNoDocument(yn.min())}),o}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Pn())}isEqual(e){return this.batchId===e.batchId&&tg(this.mutations,e.mutations,(t,o)=>rw(t,o))&&tg(this.baseMutations,e.baseMutations,(t,o)=>rw(t,o))}}class jv{constructor(e,t,o,c){this.batch=e,this.commitVersion=t,this.mutationResults=o,this.docVersions=c}static from(e,t,o){En(e.mutations.length===o.length);let c=rM;const p=e.mutations;for(let v=0;v<p.length;v++)c=c.insert(p[v].key,o[v].version);return new jv(e,t,o,c)}}class Hv{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Od{constructor(e,t,o,c,p=yn.min(),v=yn.min(),C=es.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=o,this.sequenceNumber=c,this.snapshotVersion=p,this.lastLimboFreeSnapshotVersion=v,this.resumeToken=C}withSequenceNumber(e){return new Od(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Od(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Od(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class lw{constructor(e){this.re=e}}function dw(i,e){const t=e.key,o={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Um(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())o.document={name:Fv(c=i.re,(p=e).key),fields:p.data.value.mapValue.fields,updateTime:uw(c,p.version.toTimestamp())};else if(e.isNoDocument())o.noDocument={path:t.path.toArray(),readTime:Nh(e.version)};else{if(!e.isUnknownDocument())return Ht();o.unknownDocument={path:t.path.toArray(),version:Nh(e.version)}}var c,p;return o}function Um(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function Nh(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function $v(i){const e=new ai(i.seconds,i.nanoseconds);return yn.fromTimestamp(e)}function Gv(i,e){const t=(e.baseMutations||[]).map(p=>Lv(i.re,p));for(let p=0;p<e.mutations.length-1;++p){const v=e.mutations[p];p+1<e.mutations.length&&void 0!==e.mutations[p+1].transform&&(v.updateTransforms=e.mutations[p+1].transform.fieldTransforms,e.mutations.splice(p+1,1),++p)}const o=e.mutations.map(p=>Lv(i.re,p)),c=ai.fromMillis(e.localWriteTimeMs);return new Bv(e.batchId,c,t,o)}function qI(i){const e=$v(i.readTime),t=void 0!==i.lastLimboFreeSnapshotVersion?$v(i.lastLimboFreeSnapshotVersion):yn.min();let o;var c;return void 0!==i.query.documents?(En(1===(c=i.query).documents.length),o=eu(Tv(jI(c.documents[0])))):o=eu(wS(i.query)),new Od(o,i.targetId,0,i.lastListenSequenceNumber,e,t,es.fromBase64String(i.resumeToken))}function hM(i,e){const t=Nh(e.snapshotVersion),o=Nh(e.lastLimboFreeSnapshotVersion);let c;c=ag(e.target)?rD(i.re,e.target):_S(i.re,e.target);const p=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ad(e.target),readTime:t,resumeToken:p,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:o,query:c}}function SS(i){const e=wS({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?Nm(e,e.limit,"L"):e}function AS(i,e){return new Hv(e.largestBatchId,Lv(i.re,e.overlayMutation))}function fM(i,e){const t=e.path.lastSegment();return[i,nu(e.path.popLast()),t]}function pM(i,e,t,o){return{indexId:i,uid:e.uid||"",sequenceNumber:t,readTime:Nh(o.readTime),documentKey:nu(o.documentKey.path),largestBatchId:o.largestBatchId}}class xO{getBundleMetadata(e,t){return gM(e).get(t).next(o=>{if(o)return{id:(c=o).bundleId,createTime:$v(c.createTime),version:c.version};var c})}saveBundleMetadata(e,t){return gM(e).put({bundleId:(o=t).id,createTime:Nh(Do(o.createTime)),version:o.version});var o}getNamedQuery(e,t){return mM(e).get(t).next(o=>{if(o)return{name:(c=o).name,query:SS(c.bundledQuery),readTime:$v(c.readTime)};var c})}saveNamedQuery(e,t){return mM(e).put({name:(o=t).name,readTime:Nh(Do(o.readTime)),bundledQuery:o.bundledQuery});var o}}function gM(i){return bi(i,"bundles")}function mM(i){return bi(i,"namedQueries")}class oD{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new oD(e,t.uid||"")}getOverlay(e,t){return zI(e).get(fM(this.userId,t)).next(o=>o?AS(this.It,o):null)}getOverlays(e,t){const o=Md();return Fe.forEach(t,c=>this.getOverlay(e,c).next(p=>{null!==p&&o.set(c,p)})).next(()=>o)}saveOverlays(e,t,o){const c=[];return o.forEach((p,v)=>{const C=new Hv(t,v);c.push(this.ue(e,C))}),Fe.waitFor(c)}removeOverlaysForBatchId(e,t,o){const c=new Set;t.forEach(v=>c.add(nu(v.getCollectionPath())));const p=[];return c.forEach(v=>{const C=IDBKeyRange.bound([this.userId,v,o],[this.userId,v,o+1],!1,!0);p.push(zI(e).Y("collectionPathOverlayIndex",C))}),Fe.waitFor(p)}getOverlaysForCollection(e,t,o){const c=Md(),p=nu(t),v=IDBKeyRange.bound([this.userId,p,o],[this.userId,p,Number.POSITIVE_INFINITY],!0);return zI(e).W("collectionPathOverlayIndex",v).next(C=>{for(const A of C){const N=AS(this.It,A);c.set(N.getKey(),N)}return c})}getOverlaysForCollectionGroup(e,t,o,c){const p=Md();let v;const C=IDBKeyRange.bound([this.userId,t,o],[this.userId,t,Number.POSITIVE_INFINITY],!0);return zI(e).Z({index:"collectionGroupOverlayIndex",range:C},(A,N,B)=>{const W=AS(this.It,N);p.size()<c||W.largestBatchId===v?(p.set(W.getKey(),W),v=W.largestBatchId):B.done()}).next(()=>p)}ue(e,t){return zI(e).put(function(o,c,p){const[v,C,A]=fM(c,p.mutation.key);return{userId:c,collectionPath:C,documentId:A,collectionGroup:p.mutation.key.getCollectionGroup(),largestBatchId:p.largestBatchId,overlayMutation:Vm(o.re,p.mutation)}}(this.It,this.userId,t))}}function zI(i){return bi(i,"documentOverlays")}class qv{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(Ai(e.integerValue));else if("doubleValue"in e){const o=Ai(e.doubleValue);isNaN(o)?this.le(t,13):(this.le(t,15),bv(o)?t.fe(0):t.fe(o))}else if("timestampValue"in e){const o=e.timestampValue;this.le(t,20),"string"==typeof o?t.de(o):(t.de(`${o.seconds||""}`),t.fe(o.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(Pc(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const o=e.geoPointValue;this.le(t,45),t.fe(o.latitude||0),t.fe(o.longitude||0)}else"mapValue"in e?XT(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):Ht()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const o=e.fields||{};this.le(t,55);for(const c of Object.keys(o))this._e(c,t),this.ae(o[c],t)}pe(e,t){const o=e.values||[];this.le(t,50);for(const c of o)this.ae(c,t)}ge(e,t){this.le(t,37),It.fromName(e).path.forEach(o=>{this.le(t,60),this.Ie(o,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function MO(i){if(0===i)return 8;let e=0;return i>>4==0&&(e+=4,i<<=4),i>>6==0&&(e+=2,i<<=2),i>>7==0&&(e+=1),e}function yM(i){const e=64-function(t){let o=0;for(let c=0;c<8;++c){const p=MO(255&t[c]);if(o+=p,8!==p)break}return o}(i);return Math.ceil(e/8)}qv.Te=new qv;class RO{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this.Ae(o.value),o=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this.Pe(o.value),o=t.next();this.ve()}Ve(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this.Ae(o);else if(o<2048)this.Ae(960|o>>>6),this.Ae(128|63&o);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|o>>>12),this.Ae(128|63&o>>>6),this.Ae(128|63&o);else{const c=t.codePointAt(0);this.Ae(240|c>>>18),this.Ae(128|63&c>>>12),this.Ae(128|63&c>>>6),this.Ae(128|63&c)}}this.Re()}Se(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this.Pe(o);else if(o<2048)this.Pe(960|o>>>6),this.Pe(128|63&o);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|o>>>12),this.Pe(128|63&o>>>6),this.Pe(128|63&o);else{const c=t.codePointAt(0);this.Pe(240|c>>>18),this.Pe(128|63&c>>>12),this.Pe(128|63&c>>>6),this.Pe(128|63&c)}}this.ve()}De(e){const t=this.Ce(e),o=yM(t);this.xe(1+o),this.buffer[this.position++]=255&o;for(let c=t.length-o;c<t.length;++c)this.buffer[this.position++]=255&t[c]}Ne(e){const t=this.Ce(e),o=yM(t);this.xe(1+o),this.buffer[this.position++]=~(255&o);for(let c=t.length-o;c<t.length;++c)this.buffer[this.position++]=~(255&t[c])}ke(){this.Me(255),this.Me(255)}Oe(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(c){const p=new DataView(new ArrayBuffer(8));return p.setFloat64(0,c,!1),new Uint8Array(p.buffer)}(e),o=0!=(128&t[0]);t[0]^=o?255:128;for(let c=1;c<t.length;++c)t[c]^=o?255:0;return t}Ae(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Me(0),this.Me(1)}ve(){this.Fe(0),this.Fe(1)}Me(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let o=2*this.buffer.length;o<t&&(o=t);const c=new Uint8Array(o);c.set(this.buffer),this.buffer=c}}class OO{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class NO{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Oe()}}class WI{constructor(){this.Be=new RO,this.Le=new OO(this.Be),this.Ue=new NO(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class zv{constructor(e,t,o,c){this.indexId=e,this.documentKey=t,this.arrayValue=o,this.directionalValue=c}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,o=new Uint8Array(t);return o.set(this.directionalValue,0),t!==e?o.set([0],this.directionalValue.length):++o[o.length-1],new zv(this.indexId,this.documentKey,this.arrayValue,o)}}function Wv(i,e){let t=i.indexId-e.indexId;return 0!==t?t:(t=vM(i.arrayValue,e.arrayValue),0!==t?t:(t=vM(i.directionalValue,e.directionalValue),0!==t?t:It.comparator(i.documentKey,e.documentKey)))}function vM(i,e){for(let t=0;t<i.length&&t<e.length;++t){const o=i[t]-e[t];if(0!==o)return o}return i.length-e.length}class PO{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const o=t;o.dt()?this.je=o:this.Qe.push(o)}}We(e){const t=vv(e);if(void 0!==t&&!this.ze(t))return!1;const o=ng(e);let c=0,p=0;for(;c<o.length&&this.ze(o[c]);++c);if(c===o.length)return!0;if(void 0!==this.je){const v=o[c];if(!this.He(this.je,v)||!this.Je(this.Ge[p++],v))return!1;++c}for(;c<o.length;++c){const v=o[c];if(p>=this.Ge.length||!this.Je(this.Ge[p++],v))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class kO{constructor(){this.Ye=new xS}addToCollectionParentIndex(e,t){return this.Ye.add(t),Fe.resolve()}getCollectionParents(e,t){return Fe.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return Fe.resolve()}deleteFieldIndex(e,t){return Fe.resolve()}getDocumentsMatchingTarget(e,t){return Fe.resolve(null)}getIndexType(e,t){return Fe.resolve(0)}getFieldIndexes(e,t){return Fe.resolve([])}getNextCollectionGroupToUpdate(e){return Fe.resolve(null)}getMinOffset(e,t){return Fe.resolve(Pu.min())}getMinOffsetFromCollectionGroup(e,t){return Fe.resolve(Pu.min())}updateCollectionGroup(e,t,o){return Fe.resolve()}updateIndexEntries(e,t){return Fe.resolve()}}class xS{constructor(){this.index={}}add(e){const t=e.lastSegment(),o=e.popLast(),c=this.index[t]||new gr(ir.comparator),p=!c.has(o);return this.index[t]=c.add(o),p}has(e){const t=e.lastSegment(),o=e.popLast(),c=this.index[t];return c&&c.has(o)}getEntries(e){return(this.index[e]||new gr(ir.comparator)).toArray()}}const sD=new Uint8Array(0);class FO{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new xS,this.Ze=new qf(o=>Ad(o),(o,c)=>Om(o,c)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const o=t.lastSegment(),c=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const p={collectionId:o,parent:nu(c)};return _M(e).put(p)}return Fe.resolve()}getCollectionParents(e,t){const o=[],c=IDBKeyRange.bound([t,""],[j0(t),""],!1,!0);return _M(e).W(c).next(p=>{for(const v of p){if(v.collectionId!==t)break;o.push(Oh(v.parent))}return o})}addFieldIndex(e,t){const o=aD(e),c={indexId:(v=t).indexId,collectionGroup:v.collectionGroup,fields:v.fields.map(C=>[C.fieldPath.canonicalString(),C.kind])};var v;delete c.indexId;const p=o.add(c);if(t.indexState){const v=KI(e);return p.next(C=>{v.put(pM(C,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return p.next()}deleteFieldIndex(e,t){const o=aD(e),c=KI(e),p=ZI(e);return o.delete(t.indexId).next(()=>c.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>p.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const o=ZI(e);let c=!0;const p=new Map;return Fe.forEach(this.tn(t),v=>this.en(e,v).next(C=>{c&&(c=!!C),p.set(v,C)})).next(()=>{if(c){let v=Pn();const C=[];return Fe.forEach(p,(A,N)=>{var B;ct("IndexedDbIndexManager",`Using index ${B=A,`id=${B.indexId}|cg=${B.collectionGroup}|f=${B.fields.map(Zt=>`${Zt.fieldPath}:${Zt.kind}`).join(",")}`} to execute ${Ad(t)}`);const W=function(Zt,Gt){const vn=vv(Gt);if(void 0===vn)return null;for(const xn of Cv(Zt,vn.fieldPath))switch(xn.op){case"array-contains-any":return xn.value.arrayValue.values||[];case"array-contains":return[xn.value]}return null}(N,A),ae=function(Zt,Gt){const vn=new Map;for(const xn of ng(Gt))for(const eo of Cv(Zt,xn.fieldPath))switch(eo.op){case"==":case"in":vn.set(xn.fieldPath.canonicalString(),eo.value);break;case"not-in":case"!=":return vn.set(xn.fieldPath.canonicalString(),eo.value),Array.from(vn.values())}return null}(N,A),fe=function(Zt,Gt){const vn=[];let xn=!0;for(const eo of ng(Gt)){const Fh=0===eo.kind?CI(Zt,eo.fieldPath,Zt.startAt):iS(Zt,eo.fieldPath,Zt.startAt);vn.push(Fh.value),xn&&(xn=Fh.inclusive)}return new $f(vn,xn)}(N,A),ve=function(Zt,Gt){const vn=[];let xn=!0;for(const eo of ng(Gt)){const Fh=0===eo.kind?iS(Zt,eo.fieldPath,Zt.endAt):CI(Zt,eo.fieldPath,Zt.endAt);vn.push(Fh.value),xn&&(xn=Fh.inclusive)}return new $f(vn,xn)}(N,A),Ye=this.nn(A,N,fe),Xe=this.nn(A,N,ve),At=this.sn(A,N,ae),Wt=this.rn(A.indexId,W,Ye,fe.inclusive,Xe,ve.inclusive,At);return Fe.forEach(Wt,Zt=>o.J(Zt,t.limit).next(Gt=>{Gt.forEach(vn=>{const xn=It.fromSegments(vn.documentKey);v.has(xn)||(v=v.add(xn),C.push(xn))})}))}).next(()=>C)}return Fe.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,o,c,p,v,C){const A=(null!=t?t.length:1)*Math.max(o.length,p.length),N=A/(null!=t?t.length:1),B=[];for(let W=0;W<A;++W){const ae=t?this.on(t[W/N]):sD,fe=this.un(e,ae,o[W%N],c),ve=this.cn(e,ae,p[W%N],v),Ye=C.map(Xe=>this.un(e,ae,Xe,!0));B.push(...this.createRange(fe,ve,Ye))}return B}un(e,t,o,c){const p=new zv(e,It.empty(),t,o);return c?p:p.Ke()}cn(e,t,o,c){const p=new zv(e,It.empty(),t,o);return c?p.Ke():p}en(e,t){const o=new PO(t),c=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,c).next(p=>{let v=null;for(const C of p)o.We(C)&&(!v||C.fields.length>v.fields.length)&&(v=C);return v})}getIndexType(e,t){let o=2;return Fe.forEach(this.tn(t),c=>this.en(e,c).next(p=>{p?0!==o&&p.fields.length<function(v){let C=new gr(_i.comparator),A=!1;for(const N of v.filters){const B=N;B.field.isKeyField()||("array-contains"===B.op||"array-contains-any"===B.op?A=!0:C=C.add(B.field))}for(const N of v.orderBy)N.field.isKeyField()||(C=C.add(N.field));return C.size+(A?1:0)}(c)&&(o=1):o=0})).next(()=>o)}an(e,t){const o=new WI;for(const c of ng(e)){const p=t.data.field(c.fieldPath);if(null==p)return null;const v=o.qe(c.kind);qv.Te.ce(p,v)}return o.$e()}on(e){const t=new WI;return qv.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const o=new WI;return qv.Te.ce(sg(this.databaseId,t),o.qe(function(c){const p=ng(c);return 0===p.length?0:p[p.length-1].kind}(e))),o.$e()}sn(e,t,o){if(null===o)return[];let c=[];c.push(new WI);let p=0;for(const v of ng(e)){const C=o[p++];for(const A of c)if(this.ln(t,v.fieldPath)&&Rm(C))c=this.fn(c,v,C);else{const N=A.qe(v.kind);qv.Te.ce(C,N)}}return this.dn(c)}nn(e,t,o){return this.sn(e,t,o.position)}dn(e){const t=[];for(let o=0;o<e.length;++o)t[o]=e[o].$e();return t}fn(e,t,o){const c=[...e],p=[];for(const v of o.arrayValue.values||[])for(const C of c){const A=new WI;A.seed(C.$e()),qv.Te.ce(v,A.qe(t.kind)),p.push(A)}return p}ln(e,t){return!!e.filters.find(o=>o instanceof Co&&o.field.isEqual(t)&&("in"===o.op||"not-in"===o.op))}getFieldIndexes(e,t){const o=aD(e),c=KI(e);return(t?o.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):o.W()).next(p=>{const v=[];return Fe.forEach(p,C=>c.get([C.indexId,this.uid]).next(A=>{v.push(function(N,B){const W=B?new Sm(B.sequenceNumber,new Pu($v(B.readTime),new It(Oh(B.documentKey)),B.largestBatchId)):Sm.empty(),ae=N.fields.map(([fe,ve])=>new H0(_i.fromServerFormat(fe),ve));return new Tm(N.indexId,N.collectionGroup,ae,W)}(C,A))})).next(()=>v)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((o,c)=>{const p=o.indexState.sequenceNumber-c.indexState.sequenceNumber;return 0!==p?p:Dn(o.collectionGroup,c.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,o){const c=aD(e),p=KI(e);return this._n(e).next(v=>c.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(C=>Fe.forEach(C,A=>p.put(pM(A.indexId,this.user,v,o)))))}updateIndexEntries(e,t){const o=new Map;return Fe.forEach(t,(c,p)=>{const v=o.get(c.collectionGroup);return(v?Fe.resolve(v):this.getFieldIndexes(e,c.collectionGroup)).next(C=>(o.set(c.collectionGroup,C),Fe.forEach(C,A=>this.wn(e,c,A).next(N=>{const B=this.mn(p,A);return N.isEqual(B)?Fe.resolve():this.gn(e,p,A,N,B)}))))})}yn(e,t,o,c){return ZI(e).put({indexId:c.indexId,uid:this.uid,arrayValue:c.arrayValue,directionalValue:c.directionalValue,orderedDocumentKey:this.hn(o,t.key),documentKey:t.key.path.toArray()})}pn(e,t,o,c){return ZI(e).delete([c.indexId,this.uid,c.arrayValue,c.directionalValue,this.hn(o,t.key),t.key.path.toArray()])}wn(e,t,o){const c=ZI(e);let p=new gr(Wv);return c.Z({index:"documentKeyIndex",range:IDBKeyRange.only([o.indexId,this.uid,this.hn(o,t)])},(v,C)=>{p=p.add(new zv(o.indexId,t,C.arrayValue,C.directionalValue))}).next(()=>p)}mn(e,t){let o=new gr(Wv);const c=this.an(t,e);if(null==c)return o;const p=vv(t);if(null!=p){const v=e.data.field(p.fieldPath);if(Rm(v))for(const C of v.arrayValue.values||[])o=o.add(new zv(t.indexId,e.key,this.on(C),c))}else o=o.add(new zv(t.indexId,e.key,sD,c));return o}gn(e,t,o,c,p){ct("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const v=[];return function(C,A,N,B,W){const ae=C.getIterator(),fe=A.getIterator();let ve=ig(ae),Ye=ig(fe);for(;ve||Ye;){let Xe=!1,At=!1;if(ve&&Ye){const Wt=N(ve,Ye);Wt<0?At=!0:Wt>0&&(Xe=!0)}else null!=ve?At=!0:Xe=!0;Xe?(B(Ye),Ye=ig(fe)):At?(W(ve),ve=ig(ae)):(ve=ig(ae),Ye=ig(fe))}}(c,p,Wv,C=>{v.push(this.yn(e,t,o,C))},C=>{v.push(this.pn(e,t,o,C))}),Fe.waitFor(v)}_n(e){let t=1;return KI(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(o,c,p)=>{p.done(),t=c.sequenceNumber+1}).next(()=>t)}createRange(e,t,o){o=o.sort((v,C)=>Wv(v,C)).filter((v,C,A)=>!C||0!==Wv(v,A[C-1]));const c=[];c.push(e);for(const v of o){const C=Wv(v,e),A=Wv(v,t);if(0===C)c[0]=e.Ke();else if(C>0&&A<0)c.push(v),c.push(v.Ke());else if(A>0)break}c.push(t);const p=[];for(let v=0;v<c.length;v+=2)p.push(IDBKeyRange.bound([c[v].indexId,this.uid,c[v].arrayValue,c[v].directionalValue,sD,[]],[c[v+1].indexId,this.uid,c[v+1].arrayValue,c[v+1].directionalValue,sD,[]]));return p}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(wM)}getMinOffset(e,t){return Fe.mapArray(this.tn(t),o=>this.en(e,o).next(c=>c||Ht())).next(wM)}}function _M(i){return bi(i,"collectionParents")}function ZI(i){return bi(i,"indexEntries")}function aD(i){return bi(i,"indexConfiguration")}function KI(i){return bi(i,"indexState")}function wM(i){En(0!==i.length);let e=i[0].indexState.offset,t=e.largestBatchId;for(let o=1;o<i.length;o++){const c=i[o].indexState.offset;G0(c,e)<0&&(e=c),t<c.largestBatchId&&(t=c.largestBatchId)}return new Pu(e.readTime,e.documentKey,t)}const bM={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class kc{constructor(e,t,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=o}static withCacheSize(e){return new kc(e,kc.DEFAULT_COLLECTION_PERCENTILE,kc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function IM(i,e,t){const o=i.store("mutations"),c=i.store("documentMutations"),p=[],v=IDBKeyRange.only(t.batchId);let C=0;const A=o.Z({range:v},(B,W,ae)=>(C++,ae.delete()));p.push(A.next(()=>{En(1===C)}));const N=[];for(const B of t.mutations){const W=d(e,B.key.path,t.batchId);p.push(c.delete(W)),N.push(B.key)}return Fe.waitFor(p).next(()=>N)}function uD(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw Ht();e=i.noDocument}return JSON.stringify(e).length}kc.DEFAULT_COLLECTION_PERCENTILE=10,kc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,kc.DEFAULT=new kc(41943040,kc.DEFAULT_COLLECTION_PERCENTILE,kc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),kc.DISABLED=new kc(-1,0,0);class cD{constructor(e,t,o,c){this.userId=e,this.It=t,this.indexManager=o,this.referenceDelegate=c,this.In={}}static oe(e,t,o,c){En(""!==e.uid);const p=e.isAuthenticated()?e.uid:"";return new cD(p,t,o,c)}checkEmpty(e){let t=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Bm(e).Z({index:"userMutationsIndex",range:o},(c,p,v)=>{t=!1,v.done()}).next(()=>t)}addMutationBatch(e,t,o,c){const p=hw(e),v=Bm(e);return v.add({}).next(C=>{En("number"==typeof C);const A=new Bv(C,t,o,c),N=function(ae,fe,ve){const Ye=ve.baseMutations.map(At=>Vm(ae.re,At)),Xe=ve.mutations.map(At=>Vm(ae.re,At));return{userId:fe,batchId:ve.batchId,localWriteTimeMs:ve.localWriteTime.toMillis(),baseMutations:Ye,mutations:Xe}}(this.It,this.userId,A),B=[];let W=new gr((ae,fe)=>Dn(ae.canonicalString(),fe.canonicalString()));for(const ae of c){const fe=d(this.userId,ae.key.path,C);W=W.add(ae.key.path.popLast()),B.push(v.put(N)),B.push(p.put(fe,h))}return W.forEach(ae=>{B.push(this.indexManager.addToCollectionParentIndex(e,ae))}),e.addOnCommittedListener(()=>{this.In[C]=A.keys()}),Fe.waitFor(B).next(()=>A)})}lookupMutationBatch(e,t){return Bm(e).get(t).next(o=>o?(En(o.userId===this.userId),Gv(this.It,o)):null)}Tn(e,t){return this.In[t]?Fe.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(o=>{if(o){const c=o.keys();return this.In[t]=c,c}return null})}getNextMutationBatchAfterBatchId(e,t){const o=t+1,c=IDBKeyRange.lowerBound([this.userId,o]);let p=null;return Bm(e).Z({index:"userMutationsIndex",range:c},(v,C,A)=>{C.userId===this.userId&&(En(C.batchId>=o),p=Gv(this.It,C)),A.done()}).next(()=>p)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return Bm(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(c,p,v)=>{o=p.batchId,v.done()}).next(()=>o)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Bm(e).W("userMutationsIndex",t).next(o=>o.map(c=>Gv(this.It,c)))}getAllMutationBatchesAffectingDocumentKey(e,t){const o=u(this.userId,t.path),c=IDBKeyRange.lowerBound(o),p=[];return hw(e).Z({range:c},(v,C,A)=>{const[N,B,W]=v,ae=Oh(B);if(N===this.userId&&t.path.isEqual(ae))return Bm(e).get(W).next(fe=>{if(!fe)throw Ht();En(fe.userId===this.userId),p.push(Gv(this.It,fe))});A.done()}).next(()=>p)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new gr(Dn);const c=[];return t.forEach(p=>{const v=u(this.userId,p.path),C=IDBKeyRange.lowerBound(v),A=hw(e).Z({range:C},(N,B,W)=>{const[ae,fe,ve]=N,Ye=Oh(fe);ae===this.userId&&p.path.isEqual(Ye)?o=o.add(ve):W.done()});c.push(A)}),Fe.waitFor(c).next(()=>this.En(e,o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,c=o.length+1,p=u(this.userId,o),v=IDBKeyRange.lowerBound(p);let C=new gr(Dn);return hw(e).Z({range:v},(A,N,B)=>{const[W,ae,fe]=A,ve=Oh(ae);W===this.userId&&o.isPrefixOf(ve)?ve.length===c&&(C=C.add(fe)):B.done()}).next(()=>this.En(e,C))}En(e,t){const o=[],c=[];return t.forEach(p=>{c.push(Bm(e).get(p).next(v=>{if(null===v)throw Ht();En(v.userId===this.userId),o.push(Gv(this.It,v))}))}),Fe.waitFor(c).next(()=>o)}removeMutationBatch(e,t){return IM(e.ie,this.userId,t).next(o=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),Fe.forEach(o,c=>this.referenceDelegate.markPotentiallyOrphaned(e,c))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Fe.resolve();const o=IDBKeyRange.lowerBound([this.userId]),c=[];return hw(e).Z({range:o},(p,v,C)=>{if(p[0]===this.userId){const A=Oh(p[1]);c.push(A)}else C.done()}).next(()=>{En(0===c.length)})})}containsKey(e,t){return EM(e,this.userId,t)}Rn(e){return CM(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function EM(i,e,t){const o=u(e,t.path),c=o[1],p=IDBKeyRange.lowerBound(o);let v=!1;return hw(i).Z({range:p,X:!0},(C,A,N)=>{const[B,W,ae]=C;B===e&&W===c&&(v=!0),N.done()}).next(()=>v)}function Bm(i){return bi(i,"mutations")}function hw(i){return bi(i,"documentMutations")}function CM(i){return bi(i,"mutationQueues")}class Zv{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Zv(0)}static vn(){return new Zv(-1)}}class LO{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const o=new Zv(t.highestTargetId);return t.highestTargetId=o.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>yn.fromTimestamp(new ai(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,o){return this.Vn(e).next(c=>(c.highestListenSequenceNumber=t,o&&(c.lastRemoteSnapshotVersion=o.toTimestamp()),t>c.highestListenSequenceNumber&&(c.highestListenSequenceNumber=t),this.Sn(e,c)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(o=>(o.targetCount+=1,this.Cn(t,o),this.Sn(e,o))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>fw(e).delete(t.targetId)).next(()=>this.Vn(e)).next(o=>(En(o.targetCount>0),o.targetCount-=1,this.Sn(e,o)))}removeTargets(e,t,o){let c=0;const p=[];return fw(e).Z((v,C)=>{const A=qI(C);A.sequenceNumber<=t&&null===o.get(A.targetId)&&(c++,p.push(this.removeTargetData(e,A)))}).next(()=>Fe.waitFor(p)).next(()=>c)}forEachTarget(e,t){return fw(e).Z((o,c)=>{const p=qI(c);t(p)})}Vn(e){return DM(e).get("targetGlobalKey").next(t=>(En(null!==t),t))}Sn(e,t){return DM(e).put("targetGlobalKey",t)}Dn(e,t){return fw(e).put(hM(this.It,t))}Cn(e,t){let o=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,o=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,o=!0),o}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const o=Ad(t),c=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let p=null;return fw(e).Z({range:c,index:"queryTargetsIndex"},(v,C,A)=>{const N=qI(C);Om(t,N.target)&&(p=N,A.done())}).next(()=>p)}addMatchingKeys(e,t,o){const c=[],p=jm(e);return t.forEach(v=>{const C=nu(v.path);c.push(p.put({targetId:o,path:C})),c.push(this.referenceDelegate.addReference(e,o,v))}),Fe.waitFor(c)}removeMatchingKeys(e,t,o){const c=jm(e);return Fe.forEach(t,p=>{const v=nu(p.path);return Fe.waitFor([c.delete([o,v]),this.referenceDelegate.removeReference(e,o,p)])})}removeMatchingKeysForTargetId(e,t){const o=jm(e),c=IDBKeyRange.bound([t],[t+1],!1,!0);return o.delete(c)}getMatchingKeysForTargetId(e,t){const o=IDBKeyRange.bound([t],[t+1],!1,!0),c=jm(e);let p=Pn();return c.Z({range:o,X:!0},(v,C,A)=>{const N=Oh(v[1]),B=new It(N);p=p.add(B)}).next(()=>p)}containsKey(e,t){const o=nu(t.path),c=IDBKeyRange.bound([o],[j0(o)],!1,!0);let p=0;return jm(e).Z({index:"documentTargetsIndex",X:!0,range:c},([v,C],A,N)=>{0!==v&&(p++,N.done())}).next(()=>p>0)}se(e,t){return fw(e).get(t).next(o=>o?qI(o):null)}}function fw(i){return bi(i,"targets")}function DM(i){return bi(i,"targetGlobal")}function jm(i){return bi(i,"targetDocuments")}function TM([i,e],[t,o]){const c=Dn(i,t);return 0===c?Dn(e,o):c}class VO{constructor(e){this.xn=e,this.buffer=new gr(TM),this.Nn=0}kn(){return++this.Nn}Mn(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const o=this.buffer.last();TM(t,o)<0&&(this.buffer=this.buffer.delete(o).add(t))}}get maxValue(){return this.buffer.last()[0]}}class UO{constructor(e,t,o){this.garbageCollector=e,this.asyncQueue=t,this.localStore=o,this.On=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.On&&(this.On.cancel(),this.On=null)}get started(){return null!==this.On}Fn(e){var t=this;ct("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Ge.Z)(function*(){t.On=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(o){Vf(o)?ct("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield Th(o)}yield t.Fn(3e5)}))}}class BO{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(o=>Math.floor(t/100*o))}nthSequenceNumber(e,t){if(0===t)return Fe.resolve(Xa.at);const o=new VO(t);return this.$n.forEachTarget(e,c=>o.Mn(c.sequenceNumber)).next(()=>this.$n.Ln(e,c=>o.Mn(c))).next(()=>o.maxValue)}removeTargets(e,t,o){return this.$n.removeTargets(e,t,o)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ct("LruGarbageCollector","Garbage collection skipped; disabled"),Fe.resolve(bM)):this.getCacheSize(e).next(o=>o<this.params.cacheSizeCollectionThreshold?(ct("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),bM):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let o,c,p,v,C,A,N;const B=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(W=>(W>this.params.maximumSequenceNumbersToCollect?(ct("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${W}`),c=this.params.maximumSequenceNumbersToCollect):c=W,v=Date.now(),this.nthSequenceNumber(e,c))).next(W=>(o=W,C=Date.now(),this.removeTargets(e,o,t))).next(W=>(p=W,A=Date.now(),this.removeOrphanedDocuments(e,o))).next(W=>(N=Date.now(),U0()<=bh.in.DEBUG&&ct("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${v-B}ms\n\tDetermined least recently used ${c} in `+(C-v)+`ms\n\tRemoved ${p} targets in `+(A-C)+`ms\n\tRemoved ${W} documents in `+(N-A)+`ms\nTotal Duration: ${N-B}ms`),Fe.resolve({didRun:!0,sequenceNumbersCollected:c,targetsRemoved:p,documentsRemoved:W})))}}class jO{constructor(e,t){this.db=e,this.garbageCollector=new BO(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(o=>t.next(c=>o+c))}qn(e){let t=0;return this.Ln(e,o=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(o,c)=>t(c))}addReference(e,t,o){return lD(e,o)}removeReference(e,t,o){return lD(e,o)}removeTargets(e,t,o){return this.db.getTargetCache().removeTargets(e,t,o)}markPotentiallyOrphaned(e,t){return lD(e,t)}Gn(e,t){return function(o,c){let p=!1;return CM(o).tt(v=>EM(o,v,c).next(C=>(C&&(p=!0),Fe.resolve(!C)))).next(()=>p)}(e,t)}removeOrphanedDocuments(e,t){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),c=[];let p=0;return this.Kn(e,(v,C)=>{if(C<=t){const A=this.Gn(e,v).next(N=>{if(!N)return p++,o.getEntry(e,v).next(()=>(o.removeEntry(v,yn.min()),jm(e).delete([0,nu(v.path)])))});c.push(A)}}).next(()=>Fe.waitFor(c)).next(()=>o.apply(e)).next(()=>p)}removeTarget(e,t){const o=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,o)}updateLimboDocument(e,t){return lD(e,t)}Kn(e,t){const o=jm(e);let c,p=Xa.at;return o.Z({index:"documentTargetsIndex"},([v,C],{path:A,sequenceNumber:N})=>{0===v?(p!==Xa.at&&t(new It(Oh(c)),p),p=N,c=A):p=Xa.at}).next(()=>{p!==Xa.at&&t(new It(Oh(c)),p)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function lD(i,e){return jm(i).put((o=i.currentSequenceNumber,{targetId:0,path:nu(e.path),sequenceNumber:o}));var o}class SM{constructor(){this.changes=new qf(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ui.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const o=this.changes.get(t);return void 0!==o?Fe.resolve(o):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class HO{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,o){return Kv(e).put(o)}removeEntry(e,t,o){return Kv(e).delete(function(c,p){const v=c.path.toArray();return[v.slice(0,v.length-2),v[v.length-2],Um(p),v[v.length-1]]}(t,o))}updateMetadata(e,t){return this.getMetadata(e).next(o=>(o.byteSize+=t,this.Qn(e,o)))}getEntry(e,t){let o=ui.newInvalidDocument(t);return Kv(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(YI(t))},(c,p)=>{o=this.jn(t,p)}).next(()=>o)}Wn(e,t){let o={size:0,document:ui.newInvalidDocument(t)};return Kv(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(YI(t))},(c,p)=>{o={document:this.jn(t,p),size:uD(p)}}).next(()=>o)}getEntries(e,t){let o=Fu();return this.zn(e,t,(c,p)=>{const v=this.jn(c,p);o=o.insert(c,v)}).next(()=>o)}Hn(e,t){let o=Fu(),c=new Bi(It.comparator);return this.zn(e,t,(p,v)=>{const C=this.jn(p,v);o=o.insert(p,C),c=c.insert(p,uD(v))}).next(()=>({documents:o,Jn:c}))}zn(e,t,o){if(t.isEmpty())return Fe.resolve();let c=new gr(RM);t.forEach(A=>c=c.add(A));const p=IDBKeyRange.bound(YI(c.first()),YI(c.last())),v=c.getIterator();let C=v.getNext();return Kv(e).Z({index:"documentKeyIndex",range:p},(A,N,B)=>{const W=It.fromSegments([...N.prefixPath,N.collectionGroup,N.documentId]);for(;C&&RM(C,W)<0;)o(C,null),C=v.getNext();C&&C.isEqual(W)&&(o(C,N),C=v.hasNext()?v.getNext():null),C?B.j(YI(C)):B.done()}).next(()=>{for(;C;)o(C,null),C=v.hasNext()?v.getNext():null})}getAllFromCollection(e,t,o){const c=[t.popLast().toArray(),t.lastSegment(),Um(o.readTime),o.documentKey.path.isEmpty()?"":o.documentKey.path.lastSegment()],p=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Kv(e).W(IDBKeyRange.bound(c,p,!0)).next(v=>{let C=Fu();for(const A of v){const N=this.jn(It.fromSegments(A.prefixPath.concat(A.collectionGroup,A.documentId)),A);C=C.insert(N.key,N)}return C})}getAllFromCollectionGroup(e,t,o,c){let p=Fu();const v=MM(t,o),C=MM(t,Pu.max());return Kv(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(v,C,!0)},(A,N,B)=>{const W=this.jn(It.fromSegments(N.prefixPath.concat(N.collectionGroup,N.documentId)),N);p=p.insert(W.key,W),p.size===c&&B.done()}).next(()=>p)}newChangeBuffer(e){return new $O(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return xM(e).get("remoteDocumentGlobalKey").next(t=>(En(!!t),t))}Qn(e,t){return xM(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const o=function GI(i,e){let t;if(e.document)t=HI(i.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const o=It.fromSegments(e.noDocument.path),c=$v(e.noDocument.readTime);t=ui.newNoDocument(o,c),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ht();{const o=It.fromSegments(e.unknownDocument.path),c=$v(e.unknownDocument.version);t=ui.newUnknownDocument(o,c)}}return e.readTime&&t.setReadTime(function(o){const c=new ai(o[0],o[1]);return yn.fromTimestamp(c)}(e.readTime)),t}(this.It,t);if(!o.isNoDocument()||!o.version.isEqual(yn.min()))return o}return ui.newInvalidDocument(e)}}function AM(i){return new HO(i)}class $O extends SM{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new qf(o=>o.toString(),(o,c)=>o.isEqual(c))}applyChanges(e){const t=[];let o=0,c=new gr((p,v)=>Dn(p.canonicalString(),v.canonicalString()));return this.changes.forEach((p,v)=>{const C=this.Xn.get(p);if(t.push(this.Yn.removeEntry(e,p,C.readTime)),v.isValidDocument()){const A=dw(this.Yn.It,v);c=c.add(p.path.popLast()),o+=uD(A)-C.size,t.push(this.Yn.addEntry(e,p,A))}else if(o-=C.size,this.trackRemovals){const A=dw(this.Yn.It,v.convertToNoDocument(yn.min()));t.push(this.Yn.addEntry(e,p,A))}}),c.forEach(p=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,p))}),t.push(this.Yn.updateMetadata(e,o)),Fe.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(o=>(this.Xn.set(t,{size:o.size,readTime:o.document.readTime}),o.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:o,Jn:c})=>(c.forEach((p,v)=>{this.Xn.set(p,{size:v,readTime:o.get(p).readTime})}),o))}}function xM(i){return bi(i,"remoteDocumentGlobal")}function Kv(i){return bi(i,"remoteDocumentsV14")}function YI(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function MM(i,e){const t=e.documentKey.path.toArray();return[i,Um(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function RM(i,e){const t=i.path.toArray(),o=e.path.toArray();let c=0;for(let p=0;p<t.length-2&&p<o.length-2;++p)if(c=Dn(t[p],o[p]),c)return c;return c=Dn(t.length,o.length),c||(c=Dn(t[t.length-2],o[o.length-2]),c||Dn(t[t.length-1],o[o.length-1]))}class GO{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class OM{constructor(e,t,o,c){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=o,this.indexManager=c}getDocument(e,t){let o=null;return this.documentOverlayCache.getOverlay(e,t).next(c=>(o=c,this.getBaseDocument(e,t,o))).next(c=>(null!==o&&km(o.mutation,c,Ys.empty(),ai.now()),c))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(o=>this.getLocalViewOfDocuments(e,o,Pn()).next(()=>o))}getLocalViewOfDocuments(e,t,o=Pn()){const c=Md();return this.populateOverlays(e,c,t).next(()=>this.computeViews(e,t,c,o).next(p=>{let v=Ov();return p.forEach((C,A)=>{v=v.insert(C,A.overlayedDocument)}),v}))}getOverlayedDocuments(e,t){const o=Md();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,Pn()))}populateOverlays(e,t,o){const c=[];return o.forEach(p=>{t.has(p)||c.push(p)}),this.documentOverlayCache.getOverlays(e,c).next(p=>{p.forEach((v,C)=>{t.set(v,C)})})}computeViews(e,t,o,c){let p=Fu();const v=iw(),C=iw();return t.forEach((A,N)=>{const B=o.get(N.key);c.has(N.key)&&(void 0===B||B.mutation instanceof xd)?p=p.insert(N.key,N):void 0!==B&&(v.set(N.key,B.mutation.getFieldMask()),km(B.mutation,N,B.mutation.getFieldMask(),ai.now()))}),this.recalculateAndSaveOverlays(e,p).next(A=>(A.forEach((N,B)=>v.set(N,B)),t.forEach((N,B)=>{var W;return C.set(N,new GO(B,null!==(W=v.get(N))&&void 0!==W?W:null))}),C))}recalculateAndSaveOverlays(e,t){const o=iw();let c=new Bi((v,C)=>v-C),p=Pn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(v=>{for(const C of v)C.keys().forEach(A=>{const N=t.get(A);if(null===N)return;let B=o.get(A)||Ys.empty();B=C.applyToLocalView(N,B),o.set(A,B);const W=(c.get(C.batchId)||Pn()).add(A);c=c.insert(C.batchId,W)})}).next(()=>{const v=[],C=c.getReverseIterator();for(;C.hasNext();){const A=C.getNext(),N=A.key,B=A.value,W=gS();B.forEach(ae=>{if(!p.has(ae)){const fe=RI(t.get(ae),o.get(ae));null!==fe&&W.set(ae,fe),p=p.add(ae)}}),v.push(this.documentOverlayCache.saveOverlays(e,N,W))}return Fe.waitFor(v)}).next(()=>o)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(o=>this.recalculateAndSaveOverlays(e,o))}getDocumentsMatchingQuery(e,t,o){return It.isDocumentKey((c=t).path)&&null===c.collectionGroup&&0===c.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):GC(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,o):this.getDocumentsMatchingCollectionQuery(e,t,o);var c}getNextDocuments(e,t,o,c){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,o,c).next(p=>{const v=c-p.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,o.largestBatchId,c-p.size):Fe.resolve(Md());let C=-1,A=p;return v.next(N=>Fe.forEach(N,(B,W)=>(C<W.largestBatchId&&(C=W.largestBatchId),p.get(B)?Fe.resolve():this.getBaseDocument(e,B,W).next(ae=>{A=A.insert(B,ae)}))).next(()=>this.populateOverlays(e,N,p)).next(()=>this.computeViews(e,A,N,Pn())).next(B=>({batchId:C,changes:JC(B)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new It(t)).next(o=>{let c=Ov();return o.isFoundDocument()&&(c=c.insert(o.key,o)),c})}getDocumentsMatchingCollectionGroupQuery(e,t,o){const c=t.collectionGroup;let p=Ov();return this.indexManager.getCollectionParents(e,c).next(v=>Fe.forEach(v,C=>{const A=(N=t,B=C.child(c),new Ah(B,null,N.explicitOrderBy.slice(),N.filters.slice(),N.limit,N.limitType,N.startAt,N.endAt));var N,B;return this.getDocumentsMatchingCollectionQuery(e,A,o).next(N=>{N.forEach((B,W)=>{p=p.insert(B,W)})})}).next(()=>p))}getDocumentsMatchingCollectionQuery(e,t,o){let c;return this.remoteDocumentCache.getAllFromCollection(e,t.path,o).next(p=>(c=p,this.documentOverlayCache.getOverlaysForCollection(e,t.path,o.largestBatchId))).next(p=>{p.forEach((C,A)=>{const N=A.getKey();null===c.get(N)&&(c=c.insert(N,ui.newInvalidDocument(N)))});let v=Ov();return c.forEach((C,A)=>{const N=p.get(C);void 0!==N&&km(N.mutation,A,Ys.empty(),ai.now()),Av(t,A)&&(v=v.insert(C,A))}),v})}getBaseDocument(e,t,o){return null===o||1===o.mutation.type?this.remoteDocumentCache.getEntry(e,t):Fe.resolve(ui.newInvalidDocument(t))}}class qO{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return Fe.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var o;return this.Zn.set(t.id,{id:(o=t).id,version:o.version,createTime:Do(o.createTime)}),Fe.resolve()}getNamedQuery(e,t){return Fe.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(o=t).name,query:SS(o.bundledQuery),readTime:Do(o.readTime)}),Fe.resolve();var o}}class zO{constructor(){this.overlays=new Bi(It.comparator),this.es=new Map}getOverlay(e,t){return Fe.resolve(this.overlays.get(t))}getOverlays(e,t){const o=Md();return Fe.forEach(t,c=>this.getOverlay(e,c).next(p=>{null!==p&&o.set(c,p)})).next(()=>o)}saveOverlays(e,t,o){return o.forEach((c,p)=>{this.ue(e,t,p)}),Fe.resolve()}removeOverlaysForBatchId(e,t,o){const c=this.es.get(o);return void 0!==c&&(c.forEach(p=>this.overlays=this.overlays.remove(p)),this.es.delete(o)),Fe.resolve()}getOverlaysForCollection(e,t,o){const c=Md(),p=t.length+1,v=new It(t.child("")),C=this.overlays.getIteratorFrom(v);for(;C.hasNext();){const A=C.getNext().value,N=A.getKey();if(!t.isPrefixOf(N.path))break;N.path.length===p&&A.largestBatchId>o&&c.set(A.getKey(),A)}return Fe.resolve(c)}getOverlaysForCollectionGroup(e,t,o,c){let p=new Bi((N,B)=>N-B);const v=this.overlays.getIterator();for(;v.hasNext();){const N=v.getNext().value;if(N.getKey().getCollectionGroup()===t&&N.largestBatchId>o){let B=p.get(N.largestBatchId);null===B&&(B=Md(),p=p.insert(N.largestBatchId,B)),B.set(N.getKey(),N)}}const C=Md(),A=p.getIterator();for(;A.hasNext()&&(A.getNext().value.forEach((N,B)=>C.set(N,B)),!(C.size()>=c)););return Fe.resolve(C)}ue(e,t,o){const c=this.overlays.get(o.key);if(null!==c){const v=this.es.get(c.largestBatchId).delete(o.key);this.es.set(c.largestBatchId,v)}this.overlays=this.overlays.insert(o.key,new Hv(t,o));let p=this.es.get(t);void 0===p&&(p=Pn(),this.es.set(t,p)),this.es.set(t,p.add(o.key))}}class MS{constructor(){this.ns=new gr(Xs.ss),this.rs=new gr(Xs.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const o=new Xs(e,t);this.ns=this.ns.add(o),this.rs=this.rs.add(o)}us(e,t){e.forEach(o=>this.addReference(o,t))}removeReference(e,t){this.cs(new Xs(e,t))}hs(e,t){e.forEach(o=>this.removeReference(o,t))}ls(e){const t=new It(new ir([])),o=new Xs(t,e),c=new Xs(t,e+1),p=[];return this.rs.forEachInRange([o,c],v=>{this.cs(v),p.push(v.key)}),p}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new It(new ir([])),o=new Xs(t,e),c=new Xs(t,e+1);let p=Pn();return this.rs.forEachInRange([o,c],v=>{p=p.add(v.key)}),p}containsKey(e){const t=new Xs(e,0),o=this.ns.firstAfterOrEqual(t);return null!==o&&e.isEqual(o.key)}}class Xs{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return It.comparator(e.key,t.key)||Dn(e._s,t._s)}static os(e,t){return Dn(e._s,t._s)||It.comparator(e.key,t.key)}}class WO{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new gr(Xs.ss)}checkEmpty(e){return Fe.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,o,c){const p=this.ws;this.ws++;const v=new Bv(p,t,o,c);this.mutationQueue.push(v);for(const C of c)this.gs=this.gs.add(new Xs(C.key,p)),this.indexManager.addToCollectionParentIndex(e,C.key.path.popLast());return Fe.resolve(v)}lookupMutationBatch(e,t){return Fe.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const c=this.ps(t+1),p=c<0?0:c;return Fe.resolve(this.mutationQueue.length>p?this.mutationQueue[p]:null)}getHighestUnacknowledgedBatchId(){return Fe.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return Fe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const o=new Xs(t,0),c=new Xs(t,Number.POSITIVE_INFINITY),p=[];return this.gs.forEachInRange([o,c],v=>{const C=this.ys(v._s);p.push(C)}),Fe.resolve(p)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new gr(Dn);return t.forEach(c=>{const p=new Xs(c,0),v=new Xs(c,Number.POSITIVE_INFINITY);this.gs.forEachInRange([p,v],C=>{o=o.add(C._s)})}),Fe.resolve(this.Is(o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,c=o.length+1;let p=o;It.isDocumentKey(p)||(p=p.child(""));const v=new Xs(new It(p),0);let C=new gr(Dn);return this.gs.forEachWhile(A=>{const N=A.key.path;return!!o.isPrefixOf(N)&&(N.length===c&&(C=C.add(A._s)),!0)},v),Fe.resolve(this.Is(C))}Is(e){const t=[];return e.forEach(o=>{const c=this.ys(o);null!==c&&t.push(c)}),t}removeMutationBatch(e,t){En(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let o=this.gs;return Fe.forEach(t.mutations,c=>{const p=new Xs(c.key,t.batchId);return o=o.delete(p),this.referenceDelegate.markPotentiallyOrphaned(e,c.key)}).next(()=>{this.gs=o})}An(e){}containsKey(e,t){const o=new Xs(t,0),c=this.gs.firstAfterOrEqual(o);return Fe.resolve(t.isEqual(c&&c.key))}performConsistencyCheck(e){return Fe.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class ZO{constructor(e){this.Es=e,this.docs=new Bi(It.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const o=t.key,c=this.docs.get(o),p=c?c.size:0,v=this.Es(t);return this.docs=this.docs.insert(o,{document:t.mutableCopy(),size:v}),this.size+=v-p,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const o=this.docs.get(t);return Fe.resolve(o?o.document.mutableCopy():ui.newInvalidDocument(t))}getEntries(e,t){let o=Fu();return t.forEach(c=>{const p=this.docs.get(c);o=o.insert(c,p?p.document.mutableCopy():ui.newInvalidDocument(c))}),Fe.resolve(o)}getAllFromCollection(e,t,o){let c=Fu();const p=new It(t.child("")),v=this.docs.getIteratorFrom(p);for(;v.hasNext();){const{key:C,value:{document:A}}=v.getNext();if(!t.isPrefixOf(C.path))break;C.path.length>t.length+1||G0(gI(A),o)<=0||(c=c.insert(A.key,A.mutableCopy()))}return Fe.resolve(c)}getAllFromCollectionGroup(e,t,o,c){Ht()}As(e,t){return Fe.forEach(this.docs,o=>t(o))}newChangeBuffer(e){return new KO(this)}getSize(e){return Fe.resolve(this.size)}}class KO extends SM{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((o,c)=>{c.isValidDocument()?t.push(this.Yn.addEntry(e,c)):this.Yn.removeEntry(o)}),Fe.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class YO{constructor(e){this.persistence=e,this.Rs=new qf(t=>Ad(t),Om),this.lastRemoteSnapshotVersion=yn.min(),this.highestTargetId=0,this.bs=0,this.Ps=new MS,this.targetCount=0,this.vs=Zv.Pn()}forEachTarget(e,t){return this.Rs.forEach((o,c)=>t(c)),Fe.resolve()}getLastRemoteSnapshotVersion(e){return Fe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Fe.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),Fe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,o){return o&&(this.lastRemoteSnapshotVersion=o),t>this.bs&&(this.bs=t),Fe.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new Zv(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,Fe.resolve()}updateTargetData(e,t){return this.Dn(t),Fe.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,Fe.resolve()}removeTargets(e,t,o){let c=0;const p=[];return this.Rs.forEach((v,C)=>{C.sequenceNumber<=t&&null===o.get(C.targetId)&&(this.Rs.delete(v),p.push(this.removeMatchingKeysForTargetId(e,C.targetId)),c++)}),Fe.waitFor(p).next(()=>c)}getTargetCount(e){return Fe.resolve(this.targetCount)}getTargetData(e,t){const o=this.Rs.get(t)||null;return Fe.resolve(o)}addMatchingKeys(e,t,o){return this.Ps.us(t,o),Fe.resolve()}removeMatchingKeys(e,t,o){this.Ps.hs(t,o);const c=this.persistence.referenceDelegate,p=[];return c&&t.forEach(v=>{p.push(c.markPotentiallyOrphaned(e,v))}),Fe.waitFor(p)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),Fe.resolve()}getMatchingKeysForTargetId(e,t){const o=this.Ps.ds(t);return Fe.resolve(o)}containsKey(e,t){return Fe.resolve(this.Ps.containsKey(t))}}class NM{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Xa(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new YO(this),this.indexManager=new kO,this.remoteDocumentCache=new ZO(o=>this.referenceDelegate.xs(o)),this.It=new lw(t),this.Ns=new qO(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new zO,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let o=this.Vs[e.toKey()];return o||(o=new WO(t,this.referenceDelegate),this.Vs[e.toKey()]=o),o}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,o){ct("MemoryPersistence","Starting transaction:",e);const c=new QO(this.Ss.next());return this.referenceDelegate.ks(),o(c).next(p=>this.referenceDelegate.Ms(c).next(()=>p)).toPromise().then(p=>(c.raiseOnCommittedEvent(),p))}Os(e,t){return Fe.or(Object.values(this.Vs).map(o=>()=>o.containsKey(e,t)))}}class QO extends NC{constructor(e){super(),this.currentSequenceNumber=e}}class dD{constructor(e){this.persistence=e,this.Fs=new MS,this.$s=null}static Bs(e){return new dD(e)}get Ls(){if(this.$s)return this.$s;throw Ht()}addReference(e,t,o){return this.Fs.addReference(o,t),this.Ls.delete(o.toString()),Fe.resolve()}removeReference(e,t,o){return this.Fs.removeReference(o,t),this.Ls.add(o.toString()),Fe.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),Fe.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(c=>this.Ls.add(c.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,t.targetId).next(c=>{c.forEach(p=>this.Ls.add(p.toString()))}).next(()=>o.removeTargetData(e,t))}ks(){this.$s=new Set}Ms(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Fe.forEach(this.Ls,o=>{const c=It.fromPath(o);return this.Us(e,c).next(p=>{p||t.removeEntry(c,yn.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(o=>{o?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return Fe.or([()=>Fe.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Os(e,t)])}}class JO{constructor(e){this.It=e}$(e,t,o,c){const p=new _v("createOrUpgrade",t);var C;o<1&&c>=1&&(e.createObjectStore("owner"),(C=e).createObjectStore("mutationQueues",{keyPath:"userId"}),C.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",TS,{unique:!0}),C.createObjectStore("documentMutations"),PM(e),function(C){C.createObjectStore("remoteDocuments")}(e));let v=Fe.resolve();return o<3&&c>=3&&(0!==o&&(function(C){C.deleteObjectStore("targetDocuments"),C.deleteObjectStore("targets"),C.deleteObjectStore("targetGlobal")}(e),PM(e)),v=v.next(()=>function(C){const A=C.store("targetGlobal"),N={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:yn.min().toTimestamp(),targetCount:0};return A.put("targetGlobalKey",N)}(p))),o<4&&c>=4&&(0!==o&&(v=v.next(()=>function(C,A){return A.store("mutations").W().next(N=>{C.deleteObjectStore("mutations"),C.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",TS,{unique:!0});const B=A.store("mutations"),W=N.map(ae=>B.put(ae));return Fe.waitFor(W)})}(e,p))),v=v.next(()=>{!function(C){C.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),o<5&&c>=5&&(v=v.next(()=>this.qs(p))),o<6&&c>=6&&(v=v.next(()=>(function(C){C.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(p)))),o<7&&c>=7&&(v=v.next(()=>this.Gs(p))),o<8&&c>=8&&(v=v.next(()=>this.Qs(e,p))),o<9&&c>=9&&(v=v.next(()=>{!function(C){C.objectStoreNames.contains("remoteDocumentChanges")&&C.deleteObjectStore("remoteDocumentChanges")}(e)})),o<10&&c>=10&&(v=v.next(()=>this.js(p))),o<11&&c>=11&&(v=v.next(()=>{(function(C){C.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(C){C.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),o<12&&c>=12&&(v=v.next(()=>{!function(C){const A=C.createObjectStore("documentOverlays",{keyPath:Ze});A.createIndex("collectionPathOverlayIndex",lt,{unique:!1}),A.createIndex("collectionGroupOverlayIndex",Ct,{unique:!1})}(e)})),o<13&&c>=13&&(v=v.next(()=>function(C){const A=C.createObjectStore("remoteDocumentsV14",{keyPath:g});A.createIndex("documentKeyIndex",_),A.createIndex("collectionGroupIndex",I)}(e)).next(()=>this.Ws(e,p)).next(()=>e.deleteObjectStore("remoteDocuments"))),o<14&&c>=14&&(v=v.next(()=>this.zs(e,p))),o<15&&c>=15&&(v=v.next(()=>function(C){C.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),C.createObjectStore("indexState",{keyPath:K}).createIndex("sequenceNumberIndex",ne,{unique:!1}),C.createObjectStore("indexEntries",{keyPath:pe}).createIndex("documentKeyIndex",Te,{unique:!1})}(e))),v}Ks(e){let t=0;return e.store("remoteDocuments").Z((o,c)=>{t+=uD(c)}).next(()=>{const o={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",o)})}qs(e){const t=e.store("mutationQueues"),o=e.store("mutations");return t.W().next(c=>Fe.forEach(c,p=>{const v=IDBKeyRange.bound([p.userId,-1],[p.userId,p.lastAcknowledgedBatchId]);return o.W("userMutationsIndex",v).next(C=>Fe.forEach(C,A=>{En(A.userId===p.userId);const N=Gv(this.It,A);return IM(e,p.userId,N).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),o=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(c=>{const p=[];return o.Z((v,C)=>{const A=new ir(v),N=[0,nu(A)];p.push(t.get(N).next(B=>B?Fe.resolve():t.put({targetId:0,path:nu(A),sequenceNumber:c.highestListenSequenceNumber})))}).next(()=>Fe.waitFor(p))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:V});const o=t.store("collectionParents"),c=new xS,p=v=>{if(c.add(v)){const C=v.lastSegment(),A=v.popLast();return o.put({collectionId:C,parent:nu(A)})}};return t.store("remoteDocuments").Z({X:!0},(v,C)=>{const A=new ir(v);return p(A.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([v,C,A],N)=>{const B=Oh(C);return p(B.popLast())}))}js(e){const t=e.store("targets");return t.Z((o,c)=>{const p=qI(c),v=hM(this.It,p);return t.put(v)})}Ws(e,t){const o=t.store("remoteDocuments"),c=[];return o.Z((p,v)=>{const C=t.store("remoteDocumentsV14"),A=(N=v,N.document?new It(ir.fromString(N.document.name).popFirst(5)):N.noDocument?It.fromSegments(N.noDocument.path):N.unknownDocument?It.fromSegments(N.unknownDocument.path):Ht()).path.toArray();var N;const B={prefixPath:A.slice(0,A.length-2),collectionGroup:A[A.length-2],documentId:A[A.length-1],readTime:v.readTime||[0,0],unknownDocument:v.unknownDocument,noDocument:v.noDocument,document:v.document,hasCommittedMutations:!!v.hasCommittedMutations};c.push(C.put(B))}).next(()=>Fe.waitFor(c))}zs(e,t){const o=t.store("mutations"),c=AM(this.It),p=new NM(dD.Bs,this.It.re);return o.W().next(v=>{const C=new Map;return v.forEach(A=>{var N;let B=null!==(N=C.get(A.userId))&&void 0!==N?N:Pn();Gv(this.It,A).keys().forEach(W=>B=B.add(W)),C.set(A.userId,B)}),Fe.forEach(C,(A,N)=>{const B=new Eo(N),W=oD.oe(this.It,B),ae=p.getIndexManager(B),fe=cD.oe(B,this.It,ae,p.referenceDelegate);return new OM(c,fe,W,ae).recalculateAndSaveOverlaysForDocumentKeys(new Br(t,Xa.at),A).next()})})}}function PM(i){i.createObjectStore("targetDocuments",{keyPath:R}).createIndex("documentTargetsIndex",O,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",S,{unique:!0}),i.createObjectStore("targetGlobal")}const RS="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class OS{constructor(e,t,o,c,p,v,C,A,N,B,W=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=o,this.Hs=p,this.window=v,this.document=C,this.Js=N,this.Ys=B,this.Xs=W,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=ae=>Promise.resolve(),!OS.C())throw new it(Be.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new jO(this,c),this.ii=t+"main",this.It=new lw(A),this.ri=new bl(this.ii,this.Xs,new JO(this.It)),this.Cs=new LO(this.referenceDelegate,this.It),this.remoteDocumentCache=AM(this.It),this.Ns=new xO,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===B&&Xi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new it(Be.FAILED_PRECONDITION,RS);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Xa(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var o=(0,Ge.Z)(function*(c){if(t.started)return e(c)});return function(c){return o.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,Ge.Z)(function*(o){null===o.newVersion&&(yield e())});return function(o){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,Ge.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>hD(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Vf(e))return ct("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ct("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return QI(e).get("owner").next(t=>Fe.resolve(this.mi(t)))}gi(e){return hD(e).delete(this.clientId)}yi(){var e=this;return(0,Ge.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const c=bi(o,"clientMetadata");return c.W().next(p=>{const v=e.Ii(p,18e5),C=p.filter(A=>-1===v.indexOf(A));return Fe.forEach(C,A=>c.delete(A.clientId)).next(()=>C)})}).catch(()=>[]);if(e.oi)for(const o of t)e.oi.removeItem(e.Ti(o.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?Fe.resolve(!0):QI(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new it(Be.FAILED_PRECONDITION,RS);return!1}}return!(!this.networkEnabled||!this.inForeground)||hD(e).W().next(o=>void 0===this.Ii(o,5e3).find(c=>{if(this.clientId!==c.clientId){const v=!this.inForeground&&c.inForeground,C=this.networkEnabled===c.networkEnabled;if(!this.networkEnabled&&c.networkEnabled||v&&C)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&ct("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ge.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const o=new Br(t,Xa.at);return e._i(o).next(()=>e.gi(o))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(o=>this.pi(o.updateTimeMs,t)&&!this.Ei(o.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>hD(e).W().next(t=>this.Ii(t,18e5).map(o=>o.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return cD.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new FO(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return oD.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,o){ct("IndexedDbPersistence","Starting transaction:",e);const c="readonly"===t?"readonly":"readwrite",p=15===(v=this.Xs)?Zn:14===v?tn:13===v?nt:12===v?mn:11===v?Lt:void Ht();var v;let C;return this.ri.runTransaction(e,c,p,A=>(C=new Br(A,this.Ss?this.Ss.next():Xa.at),"readwrite-primary"===t?this.fi(C).next(N=>!!N||this.di(C)).next(N=>{if(!N)throw Xi(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new it(Be.FAILED_PRECONDITION,mI);return o(C)}).next(N=>this.wi(C).next(()=>N)):this.Vi(C).next(()=>o(C)))).then(A=>(C.raiseOnCommittedEvent(),A))}Vi(e){return QI(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new it(Be.FAILED_PRECONDITION,RS)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return QI(e).put("owner",t)}static C(){return bl.C()}_i(e){const t=QI(e);return t.get("owner").next(o=>this.mi(o)?(ct("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Fe.resolve())}pi(e,t){const o=Date.now();return!(e<o-t||e>o&&(Xi(`Detected an update time that is in the future: ${e} > ${o}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,An.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const o=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return ct("IndexedDbPersistence",`Client '${e}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return Xi("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){Xi("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function QI(i){return bi(i,"owner")}function hD(i){return bi(i,"clientMetadata")}function NS(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}class PS{constructor(e,t,o,c){this.targetId=e,this.fromCache=t,this.Si=o,this.Di=c}static Ci(e,t){let o=Pn(),c=Pn();for(const p of t.docChanges)switch(p.type){case 0:o=o.add(p.doc.key);break;case 1:c=c.add(p.doc.key)}return new PS(e,t.fromCache,o,c)}}class kM{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,o,c){return this.ki(e,t).next(p=>p||this.Mi(e,t,c,o)).next(p=>p||this.Oi(e,t))}ki(e,t){if($C(t))return Fe.resolve(null);let o=eu(t);return this.indexManager.getIndexType(e,o).next(c=>0===c?null:(null!==t.limit&&1===c&&(t=Nm(t,null,"F"),o=eu(t)),this.indexManager.getDocumentsMatchingTarget(e,o).next(p=>{const v=Pn(...p);return this.Ni.getDocuments(e,v).next(C=>this.indexManager.getMinOffset(e,o).next(A=>{const N=this.Fi(t,C);return this.$i(t,N,v,A.readTime)?this.ki(e,Nm(t,null,"F")):this.Bi(e,N,t,A)}))})))}Mi(e,t,o,c){return $C(t)||c.isEqual(yn.min())?this.Oi(e,t):this.Ni.getDocuments(e,o).next(p=>{const v=this.Fi(t,p);return this.$i(t,v,o,c)?this.Oi(e,t):(U0()<=bh.in.DEBUG&&ct("QueryEngine","Re-using previous result from %s to execute query: %s",c.toString(),DI(t)),this.Bi(e,v,t,$0(c,-1)))})}Fi(e,t){let o=new gr(zC(e));return t.forEach((c,p)=>{Av(e,p)&&(o=o.add(p))}),o}$i(e,t,o,c){if(null===e.limit)return!1;if(o.size!==t.size)return!0;const p="F"===e.limitType?t.last():t.first();return!!p&&(p.hasPendingWrites||p.version.compareTo(c)>0)}Oi(e,t){return U0()<=bh.in.DEBUG&&ct("QueryEngine","Using full collection scan to execute query:",DI(t)),this.Ni.getDocumentsMatchingQuery(e,t,Pu.min())}Bi(e,t,o,c){return this.Ni.getDocumentsMatchingQuery(e,o,c).next(p=>(t.forEach(v=>{p=p.insert(v.key,v)}),p))}}class XO{constructor(e,t,o,c){this.persistence=e,this.Li=t,this.It=c,this.Ui=new Bi(Dn),this.qi=new qf(p=>Ad(p),Om),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(o)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new OM(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function FM(i,e,t,o){return new XO(i,e,t,o)}function LM(i,e){return kS.apply(this,arguments)}function kS(){return kS=(0,Ge.Z)(function*(i,e){const t=Dt(i);return yield t.persistence.runTransaction("Handle user change","readonly",o=>{let c;return t.mutationQueue.getAllMutationBatches(o).next(p=>(c=p,t.Qi(e),t.mutationQueue.getAllMutationBatches(o))).next(p=>{const v=[],C=[];let A=Pn();for(const N of c){v.push(N.batchId);for(const B of N.mutations)A=A.add(B.key)}for(const N of p){C.push(N.batchId);for(const B of N.mutations)A=A.add(B.key)}return t.localDocuments.getDocuments(o,A).next(N=>({ji:N,removedBatchIds:v,addedBatchIds:C}))})})}),kS.apply(this,arguments)}function eN(i,e){const t=Dt(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const c=e.batch.keys(),p=t.Gi.newChangeBuffer({trackRemovals:!0});return function(v,C,A,N){const B=A.batch,W=B.keys();let ae=Fe.resolve();return W.forEach(fe=>{ae=ae.next(()=>N.getEntry(C,fe)).next(ve=>{const Ye=A.docVersions.get(fe);En(null!==Ye),ve.version.compareTo(Ye)<0&&(B.applyToRemoteDocument(ve,A),ve.isValidDocument()&&(ve.setReadTime(A.commitVersion),N.addEntry(ve)))})}),ae.next(()=>v.mutationQueue.removeMutationBatch(C,B))}(t,o,e,p).next(()=>p.apply(o)).next(()=>t.mutationQueue.performConsistencyCheck(o)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(o,c,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,function(v){let C=Pn();for(let A=0;A<v.mutationResults.length;++A)v.mutationResults[A].transformResults.length>0&&(C=C.add(v.batch.mutations[A].key));return C}(e))).next(()=>t.localDocuments.getDocuments(o,c))})}function VM(i){const e=Dt(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function tN(i,e){const t=Dt(i),o=e.snapshotVersion;let c=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",p=>{const v=t.Gi.newChangeBuffer({trackRemovals:!0});c=t.Ui;const C=[];e.targetChanges.forEach((B,W)=>{const ae=c.get(W);if(!ae)return;C.push(t.Cs.removeMatchingKeys(p,B.removedDocuments,W).next(()=>t.Cs.addMatchingKeys(p,B.addedDocuments,W)));let fe=ae.withSequenceNumber(p.currentSequenceNumber);var ve,Ye,Xe;e.targetMismatches.has(W)?fe=fe.withResumeToken(es.EMPTY_BYTE_STRING,yn.min()).withLastLimboFreeSnapshotVersion(yn.min()):B.resumeToken.approximateByteSize()>0&&(fe=fe.withResumeToken(B.resumeToken,o)),c=c.insert(W,fe),Ye=fe,Xe=B,(0===(ve=ae).resumeToken.approximateByteSize()||Ye.snapshotVersion.toMicroseconds()-ve.snapshotVersion.toMicroseconds()>=3e8||Xe.addedDocuments.size+Xe.modifiedDocuments.size+Xe.removedDocuments.size>0)&&C.push(t.Cs.updateTargetData(p,fe))});let A=Fu(),N=Pn();if(e.documentUpdates.forEach(B=>{e.resolvedLimboDocuments.has(B)&&C.push(t.persistence.referenceDelegate.updateLimboDocument(p,B))}),C.push(UM(p,v,e.documentUpdates).next(B=>{A=B.Wi,N=B.zi})),!o.isEqual(yn.min())){const B=t.Cs.getLastRemoteSnapshotVersion(p).next(W=>t.Cs.setTargetsMetadata(p,p.currentSequenceNumber,o));C.push(B)}return Fe.waitFor(C).next(()=>v.apply(p)).next(()=>t.localDocuments.getLocalViewOfDocuments(p,A,N)).next(()=>A)}).then(p=>(t.Ui=c,p))}function UM(i,e,t){let o=Pn(),c=Pn();return t.forEach(p=>o=o.add(p)),e.getEntries(i,o).next(p=>{let v=Fu();return t.forEach((C,A)=>{const N=p.get(C);A.isFoundDocument()!==N.isFoundDocument()&&(c=c.add(C)),A.isNoDocument()&&A.version.isEqual(yn.min())?(e.removeEntry(C,A.readTime),v=v.insert(C,A)):!N.isValidDocument()||A.version.compareTo(N.version)>0||0===A.version.compareTo(N.version)&&N.hasPendingWrites?(e.addEntry(A),v=v.insert(C,A)):ct("LocalStore","Ignoring outdated watch update for ",C,". Current version:",N.version," Watch version:",A.version)}),{Wi:v,zi:c}})}function nN(i,e){const t=Dt(i);return t.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(o,e)))}function pw(i,e){const t=Dt(i);return t.persistence.runTransaction("Allocate target","readwrite",o=>{let c;return t.Cs.getTargetData(o,e).next(p=>p?(c=p,Fe.resolve(c)):t.Cs.allocateTargetId(o).next(v=>(c=new Od(e,v,0,o.currentSequenceNumber),t.Cs.addTargetData(o,c).next(()=>c))))}).then(o=>{const c=t.Ui.get(o.targetId);return(null===c||o.snapshotVersion.compareTo(c.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(o.targetId,o),t.qi.set(e,o.targetId)),o})}function gw(i,e,t){return FS.apply(this,arguments)}function FS(){return FS=(0,Ge.Z)(function*(i,e,t){const o=Dt(i),c=o.Ui.get(e),p=t?"readwrite":"readwrite-primary";try{t||(yield o.persistence.runTransaction("Release target",p,v=>o.persistence.referenceDelegate.removeTarget(v,c)))}catch(v){if(!Vf(v))throw v;ct("LocalStore",`Failed to update sequence numbers for target ${e}: ${v}`)}o.Ui=o.Ui.remove(e),o.qi.delete(c.target)}),FS.apply(this,arguments)}function fD(i,e,t){const o=Dt(i);let c=yn.min(),p=Pn();return o.persistence.runTransaction("Execute query","readonly",v=>function(C,A,N){const B=Dt(C),W=B.qi.get(N);return void 0!==W?Fe.resolve(B.Ui.get(W)):B.Cs.getTargetData(A,N)}(o,v,eu(e)).next(C=>{if(C)return c=C.lastLimboFreeSnapshotVersion,o.Cs.getMatchingKeysForTargetId(v,C.targetId).next(A=>{p=A})}).next(()=>o.Li.getDocumentsMatchingQuery(v,e,t?c:yn.min(),t?p:Pn())).next(C=>(HM(o,qC(e),C),{documents:C,Hi:p})))}function BM(i,e){const t=Dt(i),o=Dt(t.Cs),c=t.Ui.get(e);return c?Promise.resolve(c.target):t.persistence.runTransaction("Get target data","readonly",p=>o.se(p,e).next(v=>v?v.target:null))}function jM(i,e){const t=Dt(i),o=t.Ki.get(e)||yn.min();return t.persistence.runTransaction("Get new document changes","readonly",c=>t.Gi.getAllFromCollectionGroup(c,e,$0(o,-1),Number.MAX_SAFE_INTEGER)).then(c=>(HM(t,e,c),c))}function HM(i,e,t){let o=yn.min();t.forEach((c,p)=>{p.readTime.compareTo(o)>0&&(o=p.readTime)}),i.Ki.set(e,o)}function LS(){return LS=(0,Ge.Z)(function*(i,e,t,o){const c=Dt(i);let p=Pn(),v=Fu();for(const N of t){const B=e.Ji(N.metadata.name);N.document&&(p=p.add(B));const W=e.Yi(N);W.setReadTime(e.Xi(N.metadata.readTime)),v=v.insert(B,W)}const C=c.Gi.newChangeBuffer({trackRemovals:!0}),A=yield pw(c,(N=o,eu(Tv(ir.fromString(`__bundle__/docs/${N}`)))));var N;return c.persistence.runTransaction("Apply bundle documents","readwrite",N=>UM(N,C,v).next(B=>(C.apply(N),B)).next(B=>c.Cs.removeMatchingKeysForTargetId(N,A.targetId).next(()=>c.Cs.addMatchingKeys(N,p,A.targetId)).next(()=>c.localDocuments.getLocalViewOfDocuments(N,B.Wi,B.zi)).next(()=>B.Wi)))}),LS.apply(this,arguments)}function iN(i,e){return VS.apply(this,arguments)}function VS(){return VS=(0,Ge.Z)(function*(i,e,t=Pn()){const o=yield pw(i,eu(SS(e.bundledQuery))),c=Dt(i);return c.persistence.runTransaction("Save named query","readwrite",p=>{const v=Do(e.readTime);if(o.snapshotVersion.compareTo(v)>=0)return c.Ns.saveNamedQuery(p,e);const C=o.withResumeToken(es.EMPTY_BYTE_STRING,v);return c.Ui=c.Ui.insert(C.targetId,C),c.Cs.updateTargetData(p,C).next(()=>c.Cs.removeMatchingKeysForTargetId(p,o.targetId)).next(()=>c.Cs.addMatchingKeys(p,t,o.targetId)).next(()=>c.Ns.saveNamedQuery(p,e))})}),VS.apply(this,arguments)}function $M(i,e){return`firestore_clients_${i}_${e}`}function GM(i,e,t){let o=`firestore_mutations_${i}_${t}`;return e.isAuthenticated()&&(o+=`_${e.uid}`),o}function US(i,e){return`firestore_targets_${i}_${e}`}class pD{constructor(e,t,o,c){this.user=e,this.batchId=t,this.state=o,this.error=c}static Zi(e,t,o){const c=JSON.parse(o);let p,v="object"==typeof c&&-1!==["pending","acknowledged","rejected"].indexOf(c.state)&&(void 0===c.error||"object"==typeof c.error);return v&&c.error&&(v="string"==typeof c.error.message&&"string"==typeof c.error.code,v&&(p=new it(c.error.code,c.error.message))),v?new pD(e,t,c.state,p):(Xi("SharedClientState",`Failed to parse mutation state for ID '${t}': ${o}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class JI{constructor(e,t,o){this.targetId=e,this.state=t,this.error=o}static Zi(e,t){const o=JSON.parse(t);let c,p="object"==typeof o&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return p&&o.error&&(p="string"==typeof o.error.message&&"string"==typeof o.error.code,p&&(c=new it(o.error.code,o.error.message))),p?new JI(e,o.state,c):(Xi("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class gD{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const o=JSON.parse(t);let c="object"==typeof o&&o.activeTargetIds instanceof Array,p=cg();for(let v=0;c&&v<o.activeTargetIds.length;++v)c=FC(o.activeTargetIds[v]),p=p.add(o.activeTargetIds[v]);return c?new gD(e,p):(Xi("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class BS{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new BS(t.clientId,t.onlineState):(Xi("SharedClientState",`Failed to parse online state: ${e}`),null)}}class jS{constructor(){this.activeTargetIds=cg()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class HS{constructor(e,t,o,c,p){this.window=e,this.Hs=t,this.persistenceKey=o,this.sr=c,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Bi(Dn),this.started=!1,this.cr=[];const v=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=p,this.ar=$M(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new jS),this.lr=new RegExp(`^firestore_clients_${v}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${v}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${v}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(C){return`firestore_bundle_loaded_v2_${C}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ge.Z)(function*(){const t=yield e.syncEngine.vi();for(const c of t){if(c===e.sr)continue;const p=e.getItem($M(e.persistenceKey,c));if(p){const v=gD.Zi(c,p);v&&(e.ur=e.ur.insert(v.clientId,v))}}e.gr();const o=e.storage.getItem(e.wr);if(o){const c=e.yr(o);c&&e.pr(c)}for(const c of e.cr)e.rr(c);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((o,c)=>{c.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,o){this.Tr(e,t,o),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const o=this.storage.getItem(US(this.persistenceKey,e));if(o){const c=JI.Zi(e,o);c&&(t=c.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(US(this.persistenceKey,e))}updateQueryState(e,t,o){this.Rr(e,t,o)}handleUserChange(e,t,o){t.forEach(c=>{this.Er(c)}),this.currentUser=e,o.forEach(c=>{this.addPendingMutation(c)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ct("SharedClientState","READ",e,t),t}setItem(e,t){ct("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ct("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const o=e;if(o.storageArea===this.storage){if(ct("SharedClientState","EVENT",o.key,o.newValue),o.key===this.ar)return void Xi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,Ge.Z)(function*(){if(t.started){if(null!==o.key)if(t.lr.test(o.key)){if(null==o.newValue){const c=t.vr(o.key);return t.Vr(c,null)}{const c=t.Sr(o.key,o.newValue);if(c)return t.Vr(c.clientId,c)}}else if(t.dr.test(o.key)){if(null!==o.newValue){const c=t.Dr(o.key,o.newValue);if(c)return t.Cr(c)}}else if(t._r.test(o.key)){if(null!==o.newValue){const c=t.Nr(o.key,o.newValue);if(c)return t.kr(c)}}else if(o.key===t.wr){if(null!==o.newValue){const c=t.yr(o.newValue);if(c)return t.pr(c)}}else if(o.key===t.hr){const c=function(p){let v=Xa.at;if(null!=p)try{const C=JSON.parse(p);En("number"==typeof C),v=C}catch(C){Xi("SharedClientState","Failed to read sequence number from WebStorage",C)}return v}(o.newValue);c!==Xa.at&&t.sequenceNumberHandler(c)}else if(o.key===t.mr){const c=t.Mr(o.newValue);yield Promise.all(c.map(p=>t.syncEngine.Or(p)))}}else t.cr.push(o)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,o){const c=new pD(this.currentUser,e,t,o),p=GM(this.persistenceKey,this.currentUser,e);this.setItem(p,c.tr())}Er(e){const t=GM(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,o){const c=US(this.persistenceKey,e),p=new JI(e,t,o);this.setItem(c,p.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const o=this.vr(e);return gD.Zi(o,t)}Dr(e,t){const o=this.dr.exec(e),c=Number(o[1]);return pD.Zi(new Eo(void 0!==o[2]?o[2]:null),c,t)}Nr(e,t){const o=this._r.exec(e),c=Number(o[1]);return JI.Zi(c,t)}yr(e){return BS.Zi(e)}Mr(e){return JSON.parse(e)}Cr(e){var t=this;return(0,Ge.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);ct("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const o=t?this.ur.insert(e,t):this.ur.remove(e),c=this.Ir(this.ur),p=this.Ir(o),v=[],C=[];return p.forEach(A=>{c.has(A)||v.push(A)}),c.forEach(A=>{p.has(A)||C.push(A)}),this.syncEngine.Br(v,C).then(()=>{this.ur=o})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=cg();return e.forEach((o,c)=>{t=t.unionWith(c.activeTargetIds)}),t}}class qM{constructor(){this.Lr=new jS,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,o){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,o){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new jS,Promise.resolve()}handleUserChange(e,t,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class oN{qr(e){}shutdown(){}}class zM{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){ct("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){ct("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const sN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class aN{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class uN extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,o,c,p){const v=this.ao(e,t);ct("RestConnection","Sending: ",v,o);const C={};return this.ho(C,c,p),this.lo(e,v,C,o).then(A=>(ct("RestConnection","Received: ",A),A),A=>{throw Dm("RestConnection",`${e} failed with error: `,A,"url: ",v,"request:",o),A})}fo(e,t,o,c,p,v){return this.co(e,t,o,c,p)}ho(e,t,o){e["X-Goog-Api-Client"]="gl-js/ fire/"+eg,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((c,p)=>e[p]=c),o&&o.headers.forEach((c,p)=>e[p]=c)}ao(e,t){return`${this.oo}/v1/${t}:${sN[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}lo(e,t,o,c){return new Promise((p,v)=>{const C=new $T;C.listenOnce(BT.COMPLETE,()=>{try{switch(C.getLastErrorCode()){case lI.NO_ERROR:const N=C.getResponseJson();ct("Connection","XHR received:",JSON.stringify(N)),p(N);break;case lI.TIMEOUT:ct("Connection",'RPC "'+e+'" timed out'),v(new it(Be.DEADLINE_EXCEEDED,"Request time out"));break;case lI.HTTP_ERROR:const B=C.getStatus();if(ct("Connection",'RPC "'+e+'" failed with status:',B,"response text:",C.getResponseText()),B>0){const W=C.getResponseJson().error;if(W&&W.status&&W.message){const ae=function(fe){const ve=fe.toLowerCase().replace(/_/g,"-");return Object.values(Be).indexOf(ve)>=0?ve:Be.UNKNOWN}(W.status);v(new it(ae,W.message))}else v(new it(Be.UNKNOWN,"Server responded with status "+C.getStatus()))}else v(new it(Be.UNAVAILABLE,"Connection failed."));break;default:Ht()}}finally{ct("Connection",'RPC "'+e+'" completed.')}});const A=JSON.stringify(c);C.send(t,"POST",A,o,15)})}_o(e,t,o){const c=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],p=VT(),v=UT(),C={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(C.xmlHttpFactory=new HT({})),this.ho(C.initMessageHeaders,t,o),C.encodeInitMessageHeaders=!0;const A=c.join("");ct("Connection","Creating WebChannel: "+A,C);const N=p.createWebChannel(A,C);let B=!1,W=!1;const ae=new aN({Hr:ve=>{W?ct("Connection","Not sending because WebChannel is closed:",ve):(B||(ct("Connection","Opening WebChannel transport."),N.open(),B=!0),ct("Connection","WebChannel sending:",ve),N.send(ve))},Jr:()=>N.close()}),fe=(ve,Ye,Xe)=>{ve.listen(Ye,At=>{try{Xe(At)}catch(Wt){setTimeout(()=>{throw Wt},0)}})};return fe(N,V0.EventType.OPEN,()=>{W||ct("Connection","WebChannel transport opened.")}),fe(N,V0.EventType.CLOSE,()=>{W||(W=!0,ct("Connection","WebChannel transport closed"),ae.io())}),fe(N,V0.EventType.ERROR,ve=>{W||(W=!0,Dm("Connection","WebChannel transport errored:",ve),ae.io(new it(Be.UNAVAILABLE,"The operation could not be completed")))}),fe(N,V0.EventType.MESSAGE,ve=>{var Ye;if(!W){const Xe=ve.data[0];En(!!Xe);const At=Xe,Wt=At.error||(null===(Ye=At[0])||void 0===Ye?void 0:Ye.error);if(Wt){ct("Connection","WebChannel received error:",Wt);const Zt=Wt.status;let Gt=function(xn){const eo=fo[xn];if(void 0!==eo)return QC(eo)}(Zt),vn=Wt.message;void 0===Gt&&(Gt=Be.INTERNAL,vn="Unknown error status: "+Zt+" with message "+Wt.message),W=!0,ae.io(new it(Gt,vn)),N.close()}else ct("Connection","WebChannel received:",Xe),ae.ro(Xe)}}),fe(v,jT.STAT_EVENT,ve=>{ve.stat===xC.PROXY?ct("Connection","Detected buffering proxy"):ve.stat===xC.NOPROXY&&ct("Connection","Detected no buffering proxy")}),setTimeout(()=>{ae.so()},0),ae}}function WM(){return typeof window<"u"?window:null}function mD(){return typeof document<"u"?document:null}function XI(i){return new oM(i,!0)}class $S{constructor(e,t,o=1e3,c=1.5,p=6e4){this.Hs=e,this.timerId=t,this.wo=o,this.mo=c,this.yo=p,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}reset(){this.po=0}Eo(){this.po=this.yo}Ao(e){this.cancel();const t=Math.floor(this.po+this.Ro()),o=Math.max(0,Date.now()-this.To),c=Math.max(0,t-o);c>0&&ct("ExponentialBackoff",`Backing off for ${c} ms (base delay: ${this.po} ms, delay with jitter: ${t} ms, last attempt: ${o} ms ago)`),this.Io=this.Hs.enqueueAfterDelay(this.timerId,c,()=>(this.To=Date.now(),e())),this.po*=this.mo,this.po<this.wo&&(this.po=this.wo),this.po>this.yo&&(this.po=this.yo)}bo(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}cancel(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}Ro(){return(Math.random()-.5)*this.po}}class ZM{constructor(e,t,o,c,p,v,C,A){this.Hs=e,this.Po=o,this.vo=c,this.Vo=p,this.authCredentialsProvider=v,this.appCheckCredentialsProvider=C,this.listener=A,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new $S(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Mo()}stop(){var e=this;return(0,Ge.Z)(function*(){e.No()&&(yield e.close(0))})()}Oo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.Po,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,Ge.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var o=this;return(0,Ge.Z)(function*(){o.Lo(),o.Uo(),o.xo.cancel(),o.So++,4!==e?o.xo.reset():t&&t.code===Be.RESOURCE_EXHAUSTED?(Xi(t.toString()),Xi("Using maximum backoff delay to prevent overloading the backend."),o.xo.Eo()):t&&t.code===Be.UNAUTHENTICATED&&3!==o.state&&(o.authCredentialsProvider.invalidateToken(),o.appCheckCredentialsProvider.invalidateToken()),null!==o.stream&&(o.qo(),o.stream.close(),o.stream=null),o.state=e,yield o.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,c])=>{this.So===t&&this.Go(o,c)},o=>{e(()=>{const c=new it(Be.UNKNOWN,"Fetching auth token failed: "+o.message);return this.Qo(c)})})}Go(e,t){const o=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{o(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(c=>{o(()=>this.Qo(c))}),this.stream.onMessage(c=>{o(()=>this.onMessage(c))})}Mo(){var e=this;this.state=5,this.xo.Ao((0,Ge.Z)(function*(){e.state=0,e.start()}))}Qo(e){return ct("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(ct("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class cN extends ZM{constructor(e,t,o,c,p,v){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,o,c,v),this.It=p}jo(e,t){return this.Vo._o("Listen",e,t)}onMessage(e){this.xo.reset();const t=function aM(i,e){let t;if("targetChange"in e){const o="NO_CHANGE"===(A=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===A?1:"REMOVE"===A?2:"CURRENT"===A?3:"RESET"===A?4:Ht(),c=e.targetChange.targetIds||[],p=function(A,N){return A.gt?(En(void 0===N||"string"==typeof N),es.fromBase64String(N||"")):(En(void 0===N||N instanceof Uint8Array),es.fromUint8Array(N||new Uint8Array))}(i,e.targetChange.resumeToken),v=e.targetChange.cause,C=v&&function(A){const N=void 0===A.code?Be.UNKNOWN:QC(A.code);return new it(N,A.message||"")}(v);t=new LI(o,c,p,C||null)}else if("documentChange"in e){const o=e.documentChange,c=Rd(i,o.document.name),p=Do(o.document.updateTime),v=new Qs({mapValue:{fields:o.document.fields}}),C=ui.newFoundDocument(c,p,v);t=new kv(o.targetIds||[],o.removedTargetIds||[],C.key,C)}else if("documentDelete"in e){const o=e.documentDelete,c=Rd(i,o.document),p=o.readTime?Do(o.readTime):yn.min(),v=ui.newNoDocument(c,p);t=new kv([],o.removedTargetIds||[],v.key,v)}else if("documentRemove"in e){const o=e.documentRemove,c=Rd(i,o.document);t=new kv([],o.removedTargetIds||[],c,null)}else{if(!("filter"in e))return Ht();{const o=e.filter,p=new YC(o.count||0);t=new zf(o.targetId,p)}}var A;return t}(this.It,e),o=function(c){if(!("targetChange"in c))return yn.min();const p=c.targetChange;return p.targetIds&&p.targetIds.length?yn.min():p.readTime?Do(p.readTime):yn.min()}(e);return this.listener.Wo(t,o)}zo(e){const t={};t.database=Lm(this.It),t.addTarget=function(c,p){let v;const C=p.target;return v=ag(C)?{documents:rD(c,C)}:{query:_S(c,C)},v.targetId=p.targetId,p.resumeToken.approximateByteSize()>0?v.resumeToken=yS(c,p.resumeToken):p.snapshotVersion.compareTo(yn.min())>0&&(v.readTime=uw(c,p.snapshotVersion.toTimestamp())),v}(this.It,e);const o=function bS(i,e){const t=function(o,c){switch(c){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Ht()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);o&&(t.labels=o),this.Bo(t)}Ho(e){const t={};t.database=Lm(this.It),t.removeTarget=e,this.Bo(t)}}class lN extends ZM{constructor(e,t,o,c,p,v){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,o,c,v),this.It=p,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.Vo._o("Write",e,t)}onMessage(e){if(En(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function vS(i,e){return i&&i.length>0?(En(void 0!==e),i.map(t=>function(o,c){let p=Do(o.updateTime?o.updateTime:c);return p.isEqual(yn.min())&&(p=Do(c)),new fS(p,o.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),o=Do(e.commitTime);return this.listener.Zo(o,t)}return En(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=Lm(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(o=>Vm(this.It,o))};this.Bo(t)}}class dN extends class{}{constructor(e,t,o,c){super(),this.authCredentials=e,this.appCheckCredentials=t,this.Vo=o,this.It=c,this.nu=!1}su(){if(this.nu)throw new it(Be.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,o){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,p])=>this.Vo.co(e,t,o,c,p)).catch(c=>{throw"FirebaseError"===c.name?(c.code===Be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new it(Be.UNKNOWN,c.toString())})}fo(e,t,o,c){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([p,v])=>this.Vo.fo(e,t,o,p,v,c)).catch(p=>{throw"FirebaseError"===p.name?(p.code===Be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),p):new it(Be.UNKNOWN,p.toString())})}terminate(){this.nu=!0}}class hN{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(Xi(t),this.ou=!1):ct("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class fN{constructor(e,t,o,c,p){var v=this;this.localStore=e,this.datastore=t,this.asyncQueue=o,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=p,this.mu.qr(C=>{o.enqueueAndForget((0,Ge.Z)(function*(){var A;Hm(v)&&(ct("RemoteStore","Restarting streams for network reachability change."),yield(A=(0,Ge.Z)(function*(N){const B=Dt(N);B._u.add(4),yield mw(B),B.gu.set("Unknown"),B._u.delete(4),yield eE(B)}),function(N){return A.apply(this,arguments)})(v))}))}),this.gu=new hN(o,c)}}function eE(i){return GS.apply(this,arguments)}function GS(){return GS=(0,Ge.Z)(function*(i){if(Hm(i))for(const e of i.wu)yield e(!0)}),GS.apply(this,arguments)}function mw(i){return qS.apply(this,arguments)}function qS(){return qS=(0,Ge.Z)(function*(i){for(const e of i.wu)yield e(!1)}),qS.apply(this,arguments)}function yD(i,e){const t=Dt(i);t.du.has(e.targetId)||(t.du.set(e.targetId,e),ZS(t)?WS(t):vw(t).ko()&&zS(t,e))}function tE(i,e){const t=Dt(i),o=vw(t);t.du.delete(e),o.ko()&&KM(t,e),0===t.du.size&&(o.ko()?o.Fo():Hm(t)&&t.gu.set("Unknown"))}function zS(i,e){i.yu.Ot(e.targetId),vw(i).zo(e)}function KM(i,e){i.yu.Ot(e),vw(i).Ho(e)}function WS(i){i.yu=new VI({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),se:e=>i.du.get(e)||null}),vw(i).start(),i.gu.uu()}function ZS(i){return Hm(i)&&!vw(i).No()&&i.du.size>0}function Hm(i){return 0===Dt(i)._u.size}function YM(i){i.yu=void 0}function pN(i){return KS.apply(this,arguments)}function KS(){return KS=(0,Ge.Z)(function*(i){i.du.forEach((e,t)=>{zS(i,e)})}),KS.apply(this,arguments)}function gN(i,e){return YS.apply(this,arguments)}function YS(){return YS=(0,Ge.Z)(function*(i,e){YM(i),ZS(i)?(i.gu.hu(e),WS(i)):i.gu.set("Unknown")}),YS.apply(this,arguments)}function mN(i,e,t){return QS.apply(this,arguments)}function QS(){return QS=(0,Ge.Z)(function*(i,e,t){if(i.gu.set("Online"),e instanceof LI&&2===e.state&&e.cause)try{yield(o=(0,Ge.Z)(function*(c,p){const v=p.cause;for(const C of p.targetIds)c.du.has(C)&&(yield c.remoteSyncer.rejectListen(C,v),c.du.delete(C),c.yu.removeTarget(C))}),function(c,p){return o.apply(this,arguments)})(i,e)}catch(o){ct("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),o),yield vD(i,o)}else if(e instanceof kv?i.yu.Gt(e):e instanceof zf?i.yu.Yt(e):i.yu.Wt(e),!t.isEqual(yn.min()))try{const o=yield VM(i.localStore);t.compareTo(o)>=0&&(yield function(c,p){const v=c.yu.te(p);return v.targetChanges.forEach((C,A)=>{if(C.resumeToken.approximateByteSize()>0){const N=c.du.get(A);N&&c.du.set(A,N.withResumeToken(C.resumeToken,p))}}),v.targetMismatches.forEach(C=>{const A=c.du.get(C);if(!A)return;c.du.set(C,A.withResumeToken(es.EMPTY_BYTE_STRING,A.snapshotVersion)),KM(c,C);const N=new Od(A.target,C,1,A.sequenceNumber);zS(c,N)}),c.remoteSyncer.applyRemoteEvent(v)}(i,t))}catch(o){ct("RemoteStore","Failed to raise snapshot:",o),yield vD(i,o)}var o}),QS.apply(this,arguments)}function vD(i,e,t){return JS.apply(this,arguments)}function JS(){return JS=(0,Ge.Z)(function*(i,e,t){if(!Vf(e))throw e;i._u.add(1),yield mw(i),i.gu.set("Offline"),t||(t=()=>VM(i.localStore)),i.asyncQueue.enqueueRetryable((0,Ge.Z)(function*(){ct("RemoteStore","Retrying IndexedDB access"),yield t(),i._u.delete(1),yield eE(i)}))}),JS.apply(this,arguments)}function QM(i,e){return e().catch(t=>vD(i,t,e))}function yw(i){return XS.apply(this,arguments)}function XS(){return XS=(0,Ge.Z)(function*(i){const e=Dt(i),t=$m(e);let o=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;yN(e);)try{const c=yield nN(e.localStore,o);if(null===c){0===e.fu.length&&t.Fo();break}o=c.batchId,vN(e,c)}catch(c){yield vD(e,c)}JM(e)&&XM(e)}),XS.apply(this,arguments)}function yN(i){return Hm(i)&&i.fu.length<10}function vN(i,e){i.fu.push(e);const t=$m(i);t.ko()&&t.Yo&&t.Xo(e.mutations)}function JM(i){return Hm(i)&&!$m(i).No()&&i.fu.length>0}function XM(i){$m(i).start()}function _N(i){return eA.apply(this,arguments)}function eA(){return eA=(0,Ge.Z)(function*(i){$m(i).eu()}),eA.apply(this,arguments)}function wN(i){return tA.apply(this,arguments)}function tA(){return tA=(0,Ge.Z)(function*(i){const e=$m(i);for(const t of i.fu)e.Xo(t.mutations)}),tA.apply(this,arguments)}function bN(i,e,t){return nA.apply(this,arguments)}function nA(){return nA=(0,Ge.Z)(function*(i,e,t){const o=i.fu.shift(),c=jv.from(o,e,t);yield QM(i,()=>i.remoteSyncer.applySuccessfulWrite(c)),yield yw(i)}),nA.apply(this,arguments)}function IN(i,e){return rA.apply(this,arguments)}function rA(){return rA=(0,Ge.Z)(function*(i,e){var t;e&&$m(i).Yo&&(yield(t=(0,Ge.Z)(function*(o,c){if(kI(p=c.code)&&p!==Be.ABORTED){const v=o.fu.shift();$m(o).Oo(),yield QM(o,()=>o.remoteSyncer.rejectFailedWrite(v.batchId,c)),yield yw(o)}var p}),function(o,c){return t.apply(this,arguments)})(i,e)),JM(i)&&XM(i)}),rA.apply(this,arguments)}function e1(i,e){return iA.apply(this,arguments)}function iA(){return iA=(0,Ge.Z)(function*(i,e){const t=Dt(i);t.asyncQueue.verifyOperationInProgress(),ct("RemoteStore","RemoteStore received new credentials");const o=Hm(t);t._u.add(3),yield mw(t),o&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield eE(t)}),iA.apply(this,arguments)}function oA(i,e){return sA.apply(this,arguments)}function sA(){return sA=(0,Ge.Z)(function*(i,e){const t=Dt(i);e?(t._u.delete(2),yield eE(t)):e||(t._u.add(2),yield mw(t),t.gu.set("Unknown"))}),sA.apply(this,arguments)}function vw(i){return i.pu||(i.pu=function(e,t,o){const c=Dt(e);return c.su(),new cN(t,c.Vo,c.authCredentials,c.appCheckCredentials,c.It,o)}(i.datastore,i.asyncQueue,{Yr:pN.bind(null,i),Zr:gN.bind(null,i),Wo:mN.bind(null,i)}),i.wu.push(function(){var e=(0,Ge.Z)(function*(t){t?(i.pu.Oo(),ZS(i)?WS(i):i.gu.set("Unknown")):(yield i.pu.stop(),YM(i))});return function(t){return e.apply(this,arguments)}}())),i.pu}function $m(i){return i.Iu||(i.Iu=function(e,t,o){const c=Dt(e);return c.su(),new lN(t,c.Vo,c.authCredentials,c.appCheckCredentials,c.It,o)}(i.datastore,i.asyncQueue,{Yr:_N.bind(null,i),Zr:IN.bind(null,i),tu:wN.bind(null,i),Zo:bN.bind(null,i)}),i.wu.push(function(){var e=(0,Ge.Z)(function*(t){t?(i.Iu.Oo(),yield yw(i)):(yield i.Iu.stop(),i.fu.length>0&&(ct("RemoteStore",`Stopping write stream with ${i.fu.length} pending writes`),i.fu=[]))});return function(t){return e.apply(this,arguments)}}())),i.Iu}class aA{constructor(e,t,o,c,p){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=o,this.op=c,this.removalCallback=p,this.deferred=new ho,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(v=>{})}static createAndSchedule(e,t,o,c,p){const v=Date.now()+o,C=new aA(e,t,v,c,p);return C.start(o),C}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new it(Be.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _w(i,e){if(Xi("AsyncQueue",`${e}: ${i}`),Vf(i))return new it(Be.UNAVAILABLE,`${e}: ${i}`);throw i}class ww{constructor(e){this.comparator=e?(t,o)=>e(t,o)||It.comparator(t.key,o.key):(t,o)=>It.comparator(t.key,o.key),this.keyedMap=Ov(),this.sortedSet=new Bi(this.comparator)}static emptySet(e){return new ww(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,o)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ww)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;t.hasNext();){const c=t.getNext().key,p=o.getNext().key;if(!c.isEqual(p))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const o=new ww;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=t,o}}class t1{constructor(){this.Tu=new Bi(It.comparator)}track(e){const t=e.doc.key,o=this.Tu.get(t);o?0!==e.type&&3===o.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==o.type?this.Tu=this.Tu.insert(t,{type:o.type,doc:e.doc}):2===e.type&&2===o.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===o.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===o.type?this.Tu=this.Tu.remove(t):1===e.type&&2===o.type?this.Tu=this.Tu.insert(t,{type:1,doc:o.doc}):0===e.type&&1===o.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):Ht():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,o)=>{e.push(o)}),e}}class bw{constructor(e,t,o,c,p,v,C,A){this.query=e,this.docs=t,this.oldDocs=o,this.docChanges=c,this.mutatedKeys=p,this.fromCache=v,this.syncStateChanged=C,this.excludesMetadataChanges=A}static fromInitialDocuments(e,t,o,c){const p=[];return t.forEach(v=>{p.push({type:0,doc:v})}),new bw(e,t,ww.emptySet(t),p,o,c,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Sv(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,o=e.docChanges;if(t.length!==o.length)return!1;for(let c=0;c<t.length;c++)if(t[c].type!==o[c].type||!t[c].doc.isEqual(o[c].doc))return!1;return!0}}class EN{constructor(){this.Au=void 0,this.listeners=[]}}class CN{constructor(){this.queries=new qf(e=>ku(e),Sv),this.onlineState="Unknown",this.Ru=new Set}}function uA(i,e){return cA.apply(this,arguments)}function cA(){return cA=(0,Ge.Z)(function*(i,e){const t=Dt(i),o=e.query;let c=!1,p=t.queries.get(o);if(p||(c=!0,p=new EN),c)try{p.Au=yield t.onListen(o)}catch(v){const C=_w(v,`Initialization of query '${DI(e.query)}' failed`);return void e.onError(C)}t.queries.set(o,p),p.listeners.push(e),e.bu(t.onlineState),p.Au&&e.Pu(p.Au)&&hA(t)}),cA.apply(this,arguments)}function lA(i,e){return dA.apply(this,arguments)}function dA(){return dA=(0,Ge.Z)(function*(i,e){const t=Dt(i),o=e.query;let c=!1;const p=t.queries.get(o);if(p){const v=p.listeners.indexOf(e);v>=0&&(p.listeners.splice(v,1),c=0===p.listeners.length)}if(c)return t.queries.delete(o),t.onUnlisten(o)}),dA.apply(this,arguments)}function DN(i,e){const t=Dt(i);let o=!1;for(const c of e){const v=t.queries.get(c.query);if(v){for(const C of v.listeners)C.Pu(c)&&(o=!0);v.Au=c}}o&&hA(t)}function TN(i,e,t){const o=Dt(i),c=o.queries.get(e);if(c)for(const p of c.listeners)p.onError(t);o.queries.delete(e)}function hA(i){i.Ru.forEach(e=>{e.next()})}class fA{constructor(e,t,o){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=o||{}}Pu(e){if(!this.options.includeMetadataChanges){const o=[];for(const c of e.docChanges)3!==c.type&&o.push(c);e=new bw(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||!(this.options.Nu&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=bw.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Vu=!0,this.vu.next(e)}}class SN{constructor(e,t){this.payload=e,this.byteLength=t}ku(){return"metadata"in this.payload}}class n1{constructor(e){this.It=e}Ji(e){return Rd(this.It,e)}Yi(e){return e.metadata.exists?HI(this.It,e.document,!1):ui.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Do(e)}}class AN{constructor(e,t,o){this.Mu=e,this.localStore=t,this.It=o,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=r1(e)}Ou(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const o=ir.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(o.get(o.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Fu(e){const t=new Map,o=new n1(this.It);for(const c of e)if(c.metadata.queries){const p=o.Ji(c.metadata.name);for(const v of c.metadata.queries){const C=(t.get(v)||Pn()).add(p);t.set(v,C)}}return t}complete(){var e=this;return(0,Ge.Z)(function*(){const t=yield function rN(i,e,t,o){return LS.apply(this,arguments)}(e.localStore,new n1(e.It),e.documents,e.Mu.id),o=e.Fu(e.documents);for(const c of e.queries)yield iN(e.localStore,c,o.get(c.name));return e.progress.taskState="Success",{progress:e.progress,$u:e.collectionGroups,Bu:t}})()}}function r1(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class i1{constructor(e){this.key=e}}class o1{constructor(e){this.key=e}}class s1{constructor(e,t){this.query=e,this.Lu=t,this.Uu=null,this.current=!1,this.qu=Pn(),this.mutatedKeys=Pn(),this.Ku=zC(e),this.Gu=new ww(this.Ku)}get Qu(){return this.Lu}ju(e,t){const o=t?t.Wu:new t1,c=t?t.Gu:this.Gu;let p=t?t.mutatedKeys:this.mutatedKeys,v=c,C=!1;const A="F"===this.query.limitType&&c.size===this.query.limit?c.last():null,N="L"===this.query.limitType&&c.size===this.query.limit?c.first():null;if(e.inorderTraversal((B,W)=>{const ae=c.get(B),fe=Av(this.query,W)?W:null,ve=!!ae&&this.mutatedKeys.has(ae.key),Ye=!!fe&&(fe.hasLocalMutations||this.mutatedKeys.has(fe.key)&&fe.hasCommittedMutations);let Xe=!1;ae&&fe?ae.data.isEqual(fe.data)?ve!==Ye&&(o.track({type:3,doc:fe}),Xe=!0):this.zu(ae,fe)||(o.track({type:2,doc:fe}),Xe=!0,(A&&this.Ku(fe,A)>0||N&&this.Ku(fe,N)<0)&&(C=!0)):!ae&&fe?(o.track({type:0,doc:fe}),Xe=!0):ae&&!fe&&(o.track({type:1,doc:ae}),Xe=!0,(A||N)&&(C=!0)),Xe&&(fe?(v=v.add(fe),p=Ye?p.add(B):p.delete(B)):(v=v.delete(B),p=p.delete(B)))}),null!==this.query.limit)for(;v.size>this.query.limit;){const B="F"===this.query.limitType?v.last():v.first();v=v.delete(B.key),p=p.delete(B.key),o.track({type:1,doc:B})}return{Gu:v,Wu:o,$i:C,mutatedKeys:p}}zu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,o){const c=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;const p=e.Wu.Eu();p.sort((N,B)=>function(W,ae){const fe=ve=>{switch(ve){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ht()}};return fe(W)-fe(ae)}(N.type,B.type)||this.Ku(N.doc,B.doc)),this.Hu(o);const v=t?this.Ju():[],C=0===this.qu.size&&this.current?1:0,A=C!==this.Uu;return this.Uu=C,0!==p.length||A?{snapshot:new bw(this.query,e.Gu,c,p,e.mutatedKeys,0===C,A,!1),Yu:v}:{Yu:v}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Gu:this.Gu,Wu:new t1,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Yu:[]}}Xu(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}Hu(e){e&&(e.addedDocuments.forEach(t=>this.Lu=this.Lu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Lu=this.Lu.delete(t)),this.current=e.current)}Ju(){if(!this.current)return[];const e=this.qu;this.qu=Pn(),this.Gu.forEach(o=>{this.Xu(o.key)&&(this.qu=this.qu.add(o.key))});const t=[];return e.forEach(o=>{this.qu.has(o)||t.push(new o1(o))}),this.qu.forEach(o=>{e.has(o)||t.push(new i1(o))}),t}Zu(e){this.Lu=e.Hi,this.qu=Pn();const t=this.ju(e.documents);return this.applyChanges(t,!0)}tc(){return bw.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.Uu)}}class xN{constructor(e,t,o){this.query=e,this.targetId=t,this.view=o}}class MN{constructor(e){this.key=e,this.ec=!1}}class RN{constructor(e,t,o,c,p,v){this.localStore=e,this.remoteStore=t,this.eventManager=o,this.sharedClientState=c,this.currentUser=p,this.maxConcurrentLimboResolutions=v,this.nc={},this.sc=new qf(C=>ku(C),Sv),this.ic=new Map,this.rc=new Set,this.oc=new Bi(It.comparator),this.uc=new Map,this.cc=new MS,this.ac={},this.hc=new Map,this.lc=Zv.vn(),this.onlineState="Unknown",this.fc=void 0}get isPrimaryClient(){return!0===this.fc}}function ON(i,e){return pA.apply(this,arguments)}function pA(){return pA=(0,Ge.Z)(function*(i,e){const t=LA(i);let o,c;const p=t.sc.get(e);if(p)o=p.targetId,t.sharedClientState.addLocalQueryTarget(o),c=p.view.tc();else{const v=yield pw(t.localStore,eu(e));t.isPrimaryClient&&yD(t.remoteStore,v);const C=t.sharedClientState.addLocalQueryTarget(v.targetId);o=v.targetId,c=yield gA(t,e,o,"current"===C)}return c}),pA.apply(this,arguments)}function gA(i,e,t,o){return mA.apply(this,arguments)}function mA(){return mA=(0,Ge.Z)(function*(i,e,t,o){i.dc=(B,W,ae)=>{return(fe=(0,Ge.Z)(function*(ve,Ye,Xe,At){let Wt=Ye.view.ju(Xe);Wt.$i&&(Wt=yield fD(ve.localStore,Ye.query,!1).then(({documents:vn})=>Ye.view.ju(vn,Wt)));const Zt=At&&At.targetChanges.get(Ye.targetId),Gt=Ye.view.applyChanges(Wt,ve.isPrimaryClient,Zt);return TA(ve,Ye.targetId,Gt.Yu),Gt.snapshot}),function(ve,Ye,Xe,At){return fe.apply(this,arguments)})(i,B,W,ae);var fe};const c=yield fD(i.localStore,e,!0),p=new s1(e,c.Hi),v=p.ju(c.documents),C=Pv.createSynthesizedTargetChangeForCurrentChange(t,o&&"Offline"!==i.onlineState),A=p.applyChanges(v,i.isPrimaryClient,C);TA(i,t,A.Yu);const N=new xN(e,t,p);return i.sc.set(e,N),i.ic.has(t)?i.ic.get(t).push(e):i.ic.set(t,[e]),A.snapshot}),mA.apply(this,arguments)}function NN(i,e){return yA.apply(this,arguments)}function yA(){return yA=(0,Ge.Z)(function*(i,e){const t=Dt(i),o=t.sc.get(e),c=t.ic.get(o.targetId);if(c.length>1)return t.ic.set(o.targetId,c.filter(p=>!Sv(p,e))),void t.sc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(o.targetId),t.sharedClientState.isActiveQueryTarget(o.targetId)||(yield gw(t.localStore,o.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(o.targetId),tE(t.remoteStore,o.targetId),Iw(t,o.targetId)}).catch(Th))):(Iw(t,o.targetId),yield gw(t.localStore,o.targetId,!0))}),yA.apply(this,arguments)}function vA(){return vA=(0,Ge.Z)(function*(i,e,t){const o=VA(i);try{const c=yield function(p,v){const C=Dt(p),A=ai.now(),N=v.reduce((ae,fe)=>ae.add(fe.key),Pn());let B,W;return C.persistence.runTransaction("Locally write mutations","readwrite",ae=>{let fe=Fu(),ve=Pn();return C.Gi.getEntries(ae,N).next(Ye=>{fe=Ye,fe.forEach((Xe,At)=>{At.isValidDocument()||(ve=ve.add(Xe))})}).next(()=>C.localDocuments.getOverlayedDocuments(ae,fe)).next(Ye=>{B=Ye;const Xe=[];for(const At of v){const Wt=tM(At,B.get(At.key).overlayedDocument);null!=Wt&&Xe.push(new xd(At.key,Wt,nS(Wt.value.mapValue),wi.exists(!0)))}return C.mutationQueue.addMutationBatch(ae,A,Xe,v)}).next(Ye=>{W=Ye;const Xe=Ye.applyToLocalDocumentSet(B,ve);return C.documentOverlayCache.saveOverlays(ae,Ye.batchId,Xe)})}).then(()=>({batchId:W.batchId,changes:JC(B)}))}(o.localStore,e);o.sharedClientState.addPendingMutation(c.batchId),function(p,v,C){let A=p.ac[p.currentUser.toKey()];A||(A=new Bi(Dn)),A=A.insert(v,C),p.ac[p.currentUser.toKey()]=A}(o,c.batchId,t),yield lg(o,c.changes),yield yw(o.remoteStore)}catch(c){const p=_w(c,"Failed to persist write");t.reject(p)}}),vA.apply(this,arguments)}function a1(i,e){return _A.apply(this,arguments)}function _A(){return _A=(0,Ge.Z)(function*(i,e){const t=Dt(i);try{const o=yield tN(t.localStore,e);e.targetChanges.forEach((c,p)=>{const v=t.uc.get(p);v&&(En(c.addedDocuments.size+c.modifiedDocuments.size+c.removedDocuments.size<=1),c.addedDocuments.size>0?v.ec=!0:c.modifiedDocuments.size>0?En(v.ec):c.removedDocuments.size>0&&(En(v.ec),v.ec=!1))}),yield lg(t,o,e)}catch(o){yield Th(o)}}),_A.apply(this,arguments)}function u1(i,e,t){const o=Dt(i);if(o.isPrimaryClient&&0===t||!o.isPrimaryClient&&1===t){const c=[];o.sc.forEach((p,v)=>{const C=v.view.bu(e);C.snapshot&&c.push(C.snapshot)}),function(p,v){const C=Dt(p);C.onlineState=v;let A=!1;C.queries.forEach((N,B)=>{for(const W of B.listeners)W.bu(v)&&(A=!0)}),A&&hA(C)}(o.eventManager,e),c.length&&o.nc.Wo(c),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}function kN(i,e,t){return wA.apply(this,arguments)}function wA(){return wA=(0,Ge.Z)(function*(i,e,t){const o=Dt(i);o.sharedClientState.updateQueryState(e,"rejected",t);const c=o.uc.get(e),p=c&&c.key;if(p){let v=new Bi(It.comparator);v=v.insert(p,ui.newNoDocument(p,yn.min()));const C=Pn().add(p),A=new Nv(yn.min(),new Map,new gr(Dn),v,C);yield a1(o,A),o.oc=o.oc.remove(p),o.uc.delete(e),SA(o)}else yield gw(o.localStore,e,!1).then(()=>Iw(o,e,t)).catch(Th)}),wA.apply(this,arguments)}function FN(i,e){return bA.apply(this,arguments)}function bA(){return bA=(0,Ge.Z)(function*(i,e){const t=Dt(i),o=e.batch.batchId;try{const c=yield eN(t.localStore,e);DA(t,o,null),CA(t,o),t.sharedClientState.updateMutationState(o,"acknowledged"),yield lg(t,c)}catch(c){yield Th(c)}}),bA.apply(this,arguments)}function LN(i,e,t){return IA.apply(this,arguments)}function IA(){return IA=(0,Ge.Z)(function*(i,e,t){const o=Dt(i);try{const c=yield function(p,v){const C=Dt(p);return C.persistence.runTransaction("Reject batch","readwrite-primary",A=>{let N;return C.mutationQueue.lookupMutationBatch(A,v).next(B=>(En(null!==B),N=B.keys(),C.mutationQueue.removeMutationBatch(A,B))).next(()=>C.mutationQueue.performConsistencyCheck(A)).next(()=>C.documentOverlayCache.removeOverlaysForBatchId(A,N,v)).next(()=>C.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(A,N)).next(()=>C.localDocuments.getDocuments(A,N))})}(o.localStore,e);DA(o,e,t),CA(o,e),o.sharedClientState.updateMutationState(e,"rejected",t),yield lg(o,c)}catch(c){yield Th(c)}}),IA.apply(this,arguments)}function EA(){return EA=(0,Ge.Z)(function*(i,e){const t=Dt(i);Hm(t.remoteStore)||ct("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const o=yield function(p){const v=Dt(p);return v.persistence.runTransaction("Get highest unacknowledged batch id","readonly",C=>v.mutationQueue.getHighestUnacknowledgedBatchId(C))}(t.localStore);if(-1===o)return void e.resolve();const c=t.hc.get(o)||[];c.push(e),t.hc.set(o,c)}catch(o){const c=_w(o,"Initialization of waitForPendingWrites() operation failed");e.reject(c)}}),EA.apply(this,arguments)}function CA(i,e){(i.hc.get(e)||[]).forEach(t=>{t.resolve()}),i.hc.delete(e)}function DA(i,e,t){const o=Dt(i);let c=o.ac[o.currentUser.toKey()];if(c){const p=c.get(e);p&&(t?p.reject(t):p.resolve(),c=c.remove(e)),o.ac[o.currentUser.toKey()]=c}}function Iw(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const o of i.ic.get(e))i.sc.delete(o),t&&i.nc._c(o,t);i.ic.delete(e),i.isPrimaryClient&&i.cc.ls(e).forEach(o=>{i.cc.containsKey(o)||c1(i,o)})}function c1(i,e){i.rc.delete(e.path.canonicalString());const t=i.oc.get(e);null!==t&&(tE(i.remoteStore,t),i.oc=i.oc.remove(e),i.uc.delete(t),SA(i))}function TA(i,e,t){for(const o of t)o instanceof i1?(i.cc.addReference(o.key,e),UN(i,o)):o instanceof o1?(ct("SyncEngine","Document no longer in limbo: "+o.key),i.cc.removeReference(o.key,e),i.cc.containsKey(o.key)||c1(i,o.key)):Ht()}function UN(i,e){const t=e.key,o=t.path.canonicalString();i.oc.get(t)||i.rc.has(o)||(ct("SyncEngine","New document in limbo: "+t),i.rc.add(o),SA(i))}function SA(i){for(;i.rc.size>0&&i.oc.size<i.maxConcurrentLimboResolutions;){const e=i.rc.values().next().value;i.rc.delete(e);const t=new It(ir.fromString(e)),o=i.lc.next();i.uc.set(o,new MN(t)),i.oc=i.oc.insert(t,o),yD(i.remoteStore,new Od(eu(Tv(t.path)),o,2,Xa.at))}}function lg(i,e,t){return AA.apply(this,arguments)}function AA(){return AA=(0,Ge.Z)(function*(i,e,t){const o=Dt(i),c=[],p=[],v=[];var C;o.sc.isEmpty()||(o.sc.forEach((C,A)=>{v.push(o.dc(A,e,t).then(N=>{if(N){o.isPrimaryClient&&o.sharedClientState.updateQueryState(A.targetId,N.fromCache?"not-current":"current"),c.push(N);const B=PS.Ci(A.targetId,N);p.push(B)}}))}),yield Promise.all(v),o.nc.Wo(c),yield(C=(0,Ge.Z)(function*(A,N){const B=Dt(A);try{yield B.persistence.runTransaction("notifyLocalViewChanges","readwrite",W=>Fe.forEach(N,ae=>Fe.forEach(ae.Si,fe=>B.persistence.referenceDelegate.addReference(W,ae.targetId,fe)).next(()=>Fe.forEach(ae.Di,fe=>B.persistence.referenceDelegate.removeReference(W,ae.targetId,fe)))))}catch(W){if(!Vf(W))throw W;ct("LocalStore","Failed to update sequence numbers: "+W)}for(const W of N){const ae=W.targetId;if(!W.fromCache){const fe=B.Ui.get(ae),Ye=fe.withLastLimboFreeSnapshotVersion(fe.snapshotVersion);B.Ui=B.Ui.insert(ae,Ye)}}}),function(A,N){return C.apply(this,arguments)})(o.localStore,p))}),AA.apply(this,arguments)}function BN(i,e){return xA.apply(this,arguments)}function xA(){return xA=(0,Ge.Z)(function*(i,e){const t=Dt(i);if(!t.currentUser.isEqual(e)){ct("SyncEngine","User change. New user:",e.toKey());const o=yield LM(t.localStore,e);t.currentUser=e,(c=t).hc.forEach(v=>{v.forEach(C=>{C.reject(new it(Be.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),c.hc.clear(),t.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),yield lg(t,o.ji)}var c}),xA.apply(this,arguments)}function jN(i,e){const t=Dt(i),o=t.uc.get(e);if(o&&o.ec)return Pn().add(o.key);{let c=Pn();const p=t.ic.get(e);if(!p)return c;for(const v of p){const C=t.sc.get(v);c=c.unionWith(C.view.Qu)}return c}}function HN(i,e){return MA.apply(this,arguments)}function MA(){return MA=(0,Ge.Z)(function*(i,e){const t=Dt(i),o=yield fD(t.localStore,e.query,!0),c=e.view.Zu(o);return t.isPrimaryClient&&TA(t,e.targetId,c.Yu),c}),MA.apply(this,arguments)}function $N(i,e){return RA.apply(this,arguments)}function RA(){return RA=(0,Ge.Z)(function*(i,e){const t=Dt(i);return jM(t.localStore,e).then(o=>lg(t,o))}),RA.apply(this,arguments)}function GN(i,e,t,o){return OA.apply(this,arguments)}function OA(){return OA=(0,Ge.Z)(function*(i,e,t,o){const c=Dt(i),p=yield function(v,C){const A=Dt(v),N=Dt(A.mutationQueue);return A.persistence.runTransaction("Lookup mutation documents","readonly",B=>N.Tn(B,C).next(W=>W?A.localDocuments.getDocuments(B,W):Fe.resolve(null)))}(c.localStore,e);var C;null!==p?("pending"===t?yield yw(c.remoteStore):"acknowledged"===t||"rejected"===t?(DA(c,e,o||null),CA(c,e),C=e,Dt(Dt(c.localStore).mutationQueue).An(C)):Ht(),yield lg(c,p)):ct("SyncEngine","Cannot apply mutation batch with id: "+e)}),OA.apply(this,arguments)}function NA(){return NA=(0,Ge.Z)(function*(i,e){const t=Dt(i);if(LA(t),VA(t),!0===e&&!0!==t.fc){const o=t.sharedClientState.getAllActiveQueryTargets(),c=yield l1(t,o.toArray());t.fc=!0,yield oA(t.remoteStore,!0);for(const p of c)yD(t.remoteStore,p)}else if(!1===e&&!1!==t.fc){const o=[];let c=Promise.resolve();t.ic.forEach((p,v)=>{t.sharedClientState.isLocalQueryTarget(v)?o.push(v):c=c.then(()=>(Iw(t,v),gw(t.localStore,v,!0))),tE(t.remoteStore,v)}),yield c,yield l1(t,o),function(p){const v=Dt(p);v.uc.forEach((C,A)=>{tE(v.remoteStore,A)}),v.cc.fs(),v.uc=new Map,v.oc=new Bi(It.comparator)}(t),t.fc=!1,yield oA(t.remoteStore,!1)}}),NA.apply(this,arguments)}function l1(i,e,t){return PA.apply(this,arguments)}function PA(){return PA=(0,Ge.Z)(function*(i,e,t){const o=Dt(i),c=[],p=[];for(const v of e){let C;const A=o.ic.get(v);if(A&&0!==A.length){C=yield pw(o.localStore,eu(A[0]));for(const N of A){const B=o.sc.get(N),W=yield HN(o,B);W.snapshot&&p.push(W.snapshot)}}else{const N=yield BM(o.localStore,v);C=yield pw(o.localStore,N),yield gA(o,d1(N),v,!1)}c.push(C)}return o.nc.Wo(p),c}),PA.apply(this,arguments)}function d1(i){return HC(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function zN(i){const e=Dt(i);return Dt(Dt(e.localStore).persistence).vi()}function WN(i,e,t,o){return kA.apply(this,arguments)}function kA(){return kA=(0,Ge.Z)(function*(i,e,t,o){const c=Dt(i);if(c.fc)return void ct("SyncEngine","Ignoring unexpected query state notification.");const p=c.ic.get(e);if(p&&p.length>0)switch(t){case"current":case"not-current":{const v=yield jM(c.localStore,qC(p[0])),C=Nv.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield lg(c,v,C);break}case"rejected":yield gw(c.localStore,e,!0),Iw(c,e,o);break;default:Ht()}}),kA.apply(this,arguments)}function ZN(i,e,t){return FA.apply(this,arguments)}function FA(){return FA=(0,Ge.Z)(function*(i,e,t){const o=LA(i);if(o.fc){for(const c of e){if(o.ic.has(c)){ct("SyncEngine","Adding an already active target "+c);continue}const p=yield BM(o.localStore,c),v=yield pw(o.localStore,p);yield gA(o,d1(p),v.targetId,!1),yD(o.remoteStore,v)}for(const c of t)o.ic.has(c)&&(yield gw(o.localStore,c,!1).then(()=>{tE(o.remoteStore,c),Iw(o,c)}).catch(Th))}}),FA.apply(this,arguments)}function LA(i){const e=Dt(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=a1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=jN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=kN.bind(null,e),e.nc.Wo=DN.bind(null,e.eventManager),e.nc._c=TN.bind(null,e.eventManager),e}function VA(i){const e=Dt(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=FN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=LN.bind(null,e),e}class h1{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ge.Z)(function*(){t.It=XI(e.databaseInfo.databaseId),t.sharedClientState=t.mc(e),t.persistence=t.gc(e),yield t.persistence.start(),t.localStore=t.yc(e),t.gcScheduler=t.Ic(e,t.localStore),t.indexBackfillerScheduler=t.Tc(e,t.localStore)})()}Ic(e,t){return null}Tc(e,t){return null}yc(e){return FM(this.persistence,new kM,e.initialUser,this.It)}gc(e){return new NM(dD.Bs,this.It)}mc(e){return new qM}terminate(){var e=this;return(0,Ge.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class f1 extends h1{constructor(e,t,o){super(),this.Ec=e,this.cacheSizeBytes=t,this.forceOwnership=o,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,o=this;return(0,Ge.Z)(function*(){yield t().call(o,e),yield o.Ec.initialize(o,e),yield VA(o.Ec.syncEngine),yield yw(o.Ec.remoteStore),yield o.persistence.li(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(),o.indexBackfillerScheduler&&!o.indexBackfillerScheduler.started&&o.indexBackfillerScheduler.start(),Promise.resolve()))})()}yc(e){return FM(this.persistence,new kM,e.initialUser,this.It)}Ic(e,t){return new UO(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Tc(e,t){const o=new wv(t,this.persistence);return new PC(e.asyncQueue,o)}gc(e){const t=NS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?kc.withCacheSize(this.cacheSizeBytes):kc.DEFAULT;return new OS(this.synchronizeTabs,t,e.clientId,o,e.asyncQueue,WM(),mD(),this.It,this.sharedClientState,!!this.forceOwnership)}mc(e){return new qM}}class YN extends f1{constructor(e,t){super(e,t,!1),this.Ec=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,o=this;return(0,Ge.Z)(function*(){yield t().call(o,e);const c=o.Ec.syncEngine;o.sharedClientState instanceof HS&&(o.sharedClientState.syncEngine={Fr:GN.bind(null,c),$r:WN.bind(null,c),Br:ZN.bind(null,c),vi:zN.bind(null,c),Or:$N.bind(null,c)},yield o.sharedClientState.start()),yield o.persistence.li(function(){var p=(0,Ge.Z)(function*(v){yield function qN(i,e){return NA.apply(this,arguments)}(o.Ec.syncEngine,v),o.gcScheduler&&(v&&!o.gcScheduler.started?o.gcScheduler.start():v||o.gcScheduler.stop()),o.indexBackfillerScheduler&&(v&&!o.indexBackfillerScheduler.started?o.indexBackfillerScheduler.start():v||o.indexBackfillerScheduler.stop())});return function(v){return p.apply(this,arguments)}}())})()}mc(e){const t=WM();if(!HS.C(t))throw new it(Be.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const o=NS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new HS(t,e.asyncQueue,o,e.clientId,e.initialUser)}}class UA{initialize(e,t){var o=this;return(0,Ge.Z)(function*(){o.localStore||(o.localStore=e.localStore,o.sharedClientState=e.sharedClientState,o.datastore=o.createDatastore(t),o.remoteStore=o.createRemoteStore(t),o.eventManager=o.createEventManager(t),o.syncEngine=o.createSyncEngine(t,!e.synchronizeTabs),o.sharedClientState.onlineStateHandler=c=>u1(o.syncEngine,c,1),o.remoteStore.remoteSyncer.handleCredentialChange=BN.bind(null,o.syncEngine),yield oA(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(e){return new CN}createDatastore(e){const t=XI(e.databaseInfo.databaseId),o=new uN(e.databaseInfo);return new dN(e.authCredentials,e.appCheckCredentials,o,t)}createRemoteStore(e){return t=this.localStore,o=this.datastore,c=e.asyncQueue,p=C=>u1(this.syncEngine,C,0),v=zM.C()?new zM:new oN,new fN(t,o,c,p,v);var t,o,c,p,v}createSyncEngine(e,t){return function(o,c,p,v,C,A,N){const B=new RN(o,c,p,v,C,A);return N&&(B.fc=!0),B}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ge.Z)(function*(t){const o=Dt(t);ct("RemoteStore","RemoteStore shutting down."),o._u.add(5),yield mw(o),o.mu.shutdown(),o.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function p1(i,e=10240){let t=0;return{read:()=>(0,Ge.Z)(function*(){if(t<i.byteLength){const o={value:i.slice(t,t+e),done:!1};return t+=e,o}return{done:!0}})(),cancel:()=>(0,Ge.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class _D{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ac(this.observer.next,e)}error(e){this.observer.error?this.Ac(this.observer.error,e):Xi("Uncaught Error in snapshot listener:",e)}Rc(){this.muted=!0}Ac(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class QN{constructor(e,t){this.bc=e,this.It=t,this.metadata=new ho,this.buffer=new Uint8Array,this.Pc=new TextDecoder("utf-8"),this.vc().then(o=>{o&&o.ku()?this.metadata.resolve(o.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(o?.payload)}`))},o=>this.metadata.reject(o))}close(){return this.bc.cancel()}getMetadata(){var e=this;return(0,Ge.Z)(function*(){return e.metadata.promise})()}wc(){var e=this;return(0,Ge.Z)(function*(){return yield e.getMetadata(),e.vc()})()}vc(){var e=this;return(0,Ge.Z)(function*(){const t=yield e.Vc();if(null===t)return null;const o=e.Pc.decode(t),c=Number(o);isNaN(c)&&e.Sc(`length string (${o}) is not valid number`);const p=yield e.Dc(c);return new SN(JSON.parse(p),t.length+c)})()}Cc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Vc(){var e=this;return(0,Ge.Z)(function*(){for(;e.Cc()<0&&!(yield e.xc()););if(0===e.buffer.length)return null;const t=e.Cc();t<0&&e.Sc("Reached the end of bundle when a length string is expected.");const o=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),o})()}Dc(e){var t=this;return(0,Ge.Z)(function*(){for(;t.buffer.length<e;)(yield t.xc())&&t.Sc("Reached the end of bundle when more is expected.");const o=t.Pc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),o})()}Sc(e){throw this.bc.cancel(),new Error(`Invalid bundle format: ${e}`)}xc(){var e=this;return(0,Ge.Z)(function*(){const t=yield e.bc.read();if(!t.done){const o=new Uint8Array(e.buffer.length+t.value.length);o.set(e.buffer),o.set(t.value,e.buffer.length),e.buffer=o}return t.done})()}}class JN{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ge.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new it(Be.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const o=yield(c=(0,Ge.Z)(function*(p,v){const C=Dt(p),A=Lm(C.It)+"/documents",N={documents:v.map(fe=>Fv(C.It,fe))},B=yield C.fo("BatchGetDocuments",A,N,v.length),W=new Map;B.forEach(fe=>{const ve=function $I(i,e){return"found"in e?function(t,o){En(!!o.found);const c=Rd(t,o.found.name),p=Do(o.found.updateTime),v=new Qs({mapValue:{fields:o.found.fields}});return ui.newFoundDocument(c,p,v)}(i,e):"missing"in e?function(t,o){En(!!o.missing),En(!!o.readTime);const c=Rd(t,o.missing),p=Do(o.readTime);return ui.newNoDocument(c,p)}(i,e):Ht()}(C.It,fe);W.set(ve.key.toString(),ve)});const ae=[];return v.forEach(fe=>{const ve=W.get(fe.toString());En(!!ve),ae.push(ve)}),ae}),function(p,v){return c.apply(this,arguments)})(t.datastore,e);var c;return o.forEach(c=>t.recordVersion(c)),o})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(o){this.lastWriteError=o}this.writtenDocs.add(e.toString())}delete(e){this.write(new Rh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ge.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var o;e.mutations.forEach(o=>{t.delete(o.key.toString())}),t.forEach((o,c)=>{const p=It.fromPath(c);e.mutations.push(new Fm(p,e.precondition(p)))}),yield(o=(0,Ge.Z)(function*(c,p){const v=Dt(c),C=Lm(v.It)+"/documents",A={writes:p.map(N=>Vm(v.It,N))};yield v.co("Commit",C,A)}),function(c,p){return o.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ht();t=yn.min()}const o=this.readVersions.get(e.key.toString());if(o){if(!t.isEqual(o))throw new it(Be.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(yn.min())?wi.exists(!1):wi.updateTime(t):wi.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(yn.min()))throw new it(Be.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return wi.updateTime(t)}return wi.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class XN{constructor(e,t,o,c,p){this.asyncQueue=e,this.datastore=t,this.options=o,this.updateFunction=c,this.deferred=p,this.Nc=o.maxAttempts,this.xo=new $S(this.asyncQueue,"transaction_retry")}run(){this.Nc-=1,this.kc()}kc(){var e=this;this.xo.Ao((0,Ge.Z)(function*(){const t=new JN(e.datastore),o=e.Mc(t);o&&o.then(c=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(c)}).catch(p=>{e.Oc(p)}))}).catch(c=>{e.Oc(c)})}))}Mc(e){try{const t=this.updateFunction(e);return!K0(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Oc(e){this.Nc>0&&this.Fc(e)?(this.Nc-=1,this.asyncQueue.enqueueAndForget(()=>(this.kc(),Promise.resolve()))):this.deferred.reject(e)}Fc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!kI(t)}return!1}}class eP{constructor(e,t,o,c){var p=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=o,this.databaseInfo=c,this.user=Eo.UNAUTHENTICATED,this.clientId=OC.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,function(){var v=(0,Ge.Z)(function*(C){ct("FirestoreClient","Received user=",C.uid),yield p.authCredentialListener(C),p.user=C});return function(C){return v.apply(this,arguments)}}()),this.appCheckCredentials.start(o,v=>(ct("FirestoreClient","Received new app check token=",v),this.appCheckCredentialListener(v,this.user)))}getConfiguration(){var e=this;return(0,Ge.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new it(Be.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new ho;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ge.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(o){const c=_w(o,"Failed to shutdown persistence");t.reject(c)}})),t.promise}}function g1(i,e){return BA.apply(this,arguments)}function BA(){return BA=(0,Ge.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),ct("FirestoreClient","Initializing OfflineComponentProvider");const t=yield i.getConfiguration();yield e.initialize(t);let o=t.initialUser;i.setCredentialChangeListener(function(){var c=(0,Ge.Z)(function*(p){o.isEqual(p)||(yield LM(e.localStore,p),o=p)});return function(p){return c.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=e}),BA.apply(this,arguments)}function m1(i,e){return jA.apply(this,arguments)}function jA(){return jA=(0,Ge.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const t=yield HA(i);ct("FirestoreClient","Initializing OnlineComponentProvider");const o=yield i.getConfiguration();yield e.initialize(t,o),i.setCredentialChangeListener(c=>e1(e.remoteStore,c)),i.setAppCheckTokenChangeListener((c,p)=>e1(e.remoteStore,p)),i.onlineComponents=e}),jA.apply(this,arguments)}function HA(i){return $A.apply(this,arguments)}function $A(){return $A=(0,Ge.Z)(function*(i){return i.offlineComponents||(ct("FirestoreClient","Using default OfflineComponentProvider"),yield g1(i,new h1)),i.offlineComponents}),$A.apply(this,arguments)}function wD(i){return GA.apply(this,arguments)}function GA(){return GA=(0,Ge.Z)(function*(i){return i.onlineComponents||(ct("FirestoreClient","Using default OnlineComponentProvider"),yield m1(i,new UA)),i.onlineComponents}),GA.apply(this,arguments)}function y1(i){return HA(i).then(e=>e.persistence)}function bD(i){return HA(i).then(e=>e.localStore)}function v1(i){return wD(i).then(e=>e.remoteStore)}function qA(i){return wD(i).then(e=>e.syncEngine)}function Ew(i){return zA.apply(this,arguments)}function zA(){return zA=(0,Ge.Z)(function*(i){const e=yield wD(i),t=e.eventManager;return t.onListen=ON.bind(null,e.syncEngine),t.onUnlisten=NN.bind(null,e.syncEngine),t}),zA.apply(this,arguments)}function _1(i,e,t={}){const o=new ho;return i.asyncQueue.enqueueAndForget((0,Ge.Z)(function*(){return function(c,p,v,C,A){const N=new _D({next:W=>{p.enqueueAndForget(()=>lA(c,B));const ae=W.docs.has(v);!ae&&W.fromCache?A.reject(new it(Be.UNAVAILABLE,"Failed to get document because the client is offline.")):ae&&W.fromCache&&C&&"server"===C.source?A.reject(new it(Be.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):A.resolve(W)},error:W=>A.reject(W)}),B=new fA(Tv(v.path),N,{includeMetadataChanges:!0,Nu:!0});return uA(c,B)}(yield Ew(i),i.asyncQueue,e,t,o)})),o.promise}function w1(i,e,t={}){const o=new ho;return i.asyncQueue.enqueueAndForget((0,Ge.Z)(function*(){return function(c,p,v,C,A){const N=new _D({next:W=>{p.enqueueAndForget(()=>lA(c,B)),W.fromCache&&"server"===C.source?A.reject(new it(Be.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):A.resolve(W)},error:W=>A.reject(W)}),B=new fA(v,N,{includeMetadataChanges:!0,Nu:!0});return uA(c,B)}(yield Ew(i),i.asyncQueue,e,t,o)})),o.promise}const b1=new Map;function WA(i,e,t){if(!t)throw new it(Be.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function I1(i,e,t,o){if(!0===e&&!0===o)throw new it(Be.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function E1(i){if(!It.isDocumentKey(i))throw new it(Be.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function C1(i){if(It.isDocumentKey(i))throw new it(Be.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function ID(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(t=i).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof i?"a function":Ht()}function or(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new it(Be.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ID(i);throw new it(Be.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function D1(i,e){if(e<=0)throw new it(Be.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}class T1{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new it(Be.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new it(Be.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,I1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class nE{constructor(e,t,o,c){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=o,this._app=c,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new T1({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new it(Be.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new it(Be.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new T1(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new qT;switch(t.type){case"gapi":return new WT(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new it(Be.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=b1.get(e);t&&(ct("ComponentProvider","Removing Datastore"),b1.delete(e),t.terminate())}(this),Promise.resolve()}}class xi{constructor(e,t,o){this.converter=t,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Wf(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xi(this.firestore,e,this._key)}}class ru{constructor(e,t,o){this.converter=t,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new ru(this.firestore,e,this._query)}}class Wf extends ru{constructor(e,t,o){super(e,t,Tv(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xi(this.firestore,null,new It(e))}withConverter(e){return new Wf(this.firestore,e,this._path)}}function S1(i,e,...t){if(i=(0,An.m9)(i),WA("collection","path",e),i instanceof nE){const o=ir.fromString(e,...t);return C1(o),new Wf(i,null,o)}{if(!(i instanceof xi||i instanceof Wf))throw new it(Be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(ir.fromString(e,...t));return C1(o),new Wf(i.firestore,null,o)}}function ED(i,e,...t){if(i=(0,An.m9)(i),1===arguments.length&&(e=OC.R()),WA("doc","path",e),i instanceof nE){const o=ir.fromString(e,...t);return E1(o),new xi(i,null,new It(o))}{if(!(i instanceof xi||i instanceof Wf))throw new it(Be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(ir.fromString(e,...t));return E1(o),new xi(i.firestore,i instanceof Wf?i.converter:null,new It(o))}}function A1(i,e){return i=(0,An.m9)(i),e=(0,An.m9)(e),(i instanceof xi||i instanceof Wf)&&(e instanceof xi||e instanceof Wf)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function x1(i,e){return i=(0,An.m9)(i),e=(0,An.m9)(e),i instanceof ru&&e instanceof ru&&i.firestore===e.firestore&&Sv(i._query,e._query)&&i.converter===e.converter}class dP{constructor(){this.$c=Promise.resolve(),this.Bc=[],this.Lc=!1,this.Uc=[],this.qc=null,this.Kc=!1,this.Gc=!1,this.Qc=[],this.xo=new $S(this,"async_queue_retry"),this.jc=()=>{const t=mD();t&&ct("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.bo()};const e=mD();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.jc)}get isShuttingDown(){return this.Lc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Wc(),this.zc(e)}enterRestrictedMode(e){if(!this.Lc){this.Lc=!0,this.Gc=e||!1;const t=mD();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.jc)}}enqueue(e){if(this.Wc(),this.Lc)return new Promise(()=>{});const t=new ho;return this.zc(()=>this.Lc&&this.Gc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Bc.push(e),this.Hc()))}Hc(){var e=this;return(0,Ge.Z)(function*(){if(0!==e.Bc.length){try{yield e.Bc[0](),e.Bc.shift(),e.xo.reset()}catch(t){if(!Vf(t))throw t;ct("AsyncQueue","Operation failed with retryable error: "+t)}e.Bc.length>0&&e.xo.Ao(()=>e.Hc())}})()}zc(e){const t=this.$c.then(()=>(this.Kc=!0,e().catch(o=>{throw this.qc=o,this.Kc=!1,Xi("INTERNAL UNHANDLED ERROR: ",function(p){let v=p.message||"";return p.stack&&(v=p.stack.includes(p.message)?p.stack:p.message+"\n"+p.stack),v}(o)),o}).then(o=>(this.Kc=!1,o))));return this.$c=t,t}enqueueAfterDelay(e,t,o){this.Wc(),this.Qc.indexOf(e)>-1&&(t=0);const c=aA.createAndSchedule(this,e,t,o,p=>this.Jc(p));return this.Uc.push(c),c}Wc(){this.qc&&Ht()}verifyOperationInProgress(){}Yc(){var e=this;return(0,Ge.Z)(function*(){let t;do{t=e.$c,yield t}while(t!==e.$c)})()}Xc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}Zc(e){return this.Yc().then(()=>{this.Uc.sort((t,o)=>t.targetTimeMs-o.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Yc()})}ta(e){this.Qc.push(e)}Jc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function ZA(i){return function(e,t){if("object"!=typeof e||null===e)return!1;const o=e;for(const c of["next","error","complete"])if(c in o&&"function"==typeof o[c])return!0;return!1}(i)}class hP{constructor(){this._progressObserver={},this._taskCompletionResolver=new ho,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,o){this._progressObserver={next:e,error:t,complete:o}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class ji extends nE{constructor(e,t,o,c){super(e,t,o,c),this.type="firestore",this._queue=new dP,this._persistenceKey=c?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||M1(this),this._firestoreClient.terminate()}}function ts(i){return i._firestoreClient||M1(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function M1(i){var e;const t=i._freezeSettings(),o=(p=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new Kx(i._databaseId,p,i._persistenceKey,(C=t).host,C.ssl,C.experimentalForceLongPolling,C.experimentalAutoDetectLongPolling,C.useFetchStreams));var p,C;i._firestoreClient=new eP(i._authCredentials,i._appCheckCredentials,i._queue,o)}function R1(i,e,t){const o=new ho;return i.asyncQueue.enqueue((0,Ge.Z)(function*(){try{yield g1(i,t),yield m1(i,e),o.resolve()}catch(c){const p=c;if(!("FirebaseError"===(v=p).name?v.code===Be.FAILED_PRECONDITION||v.code===Be.UNIMPLEMENTED:!(typeof DOMException<"u"&&v instanceof DOMException)||22===v.code||20===v.code||11===v.code))throw p;Dm("Error enabling offline persistence. Falling back to persistence disabled: "+p),o.reject(p)}var v})).then(()=>o.promise)}function O1(i){if(i._initialized||i._terminated)throw new it(Be.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class dg{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new it(Be.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _i(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Zf{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Zf(es.fromBase64String(e))}catch(t){throw new it(Be.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Zf(es.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Yv{constructor(e){this._methodName=e}}class CD{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new it(Be.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new it(Be.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Dn(this._lat,e._lat)||Dn(this._long,e._long)}}const IP=/^__.*__$/;class EP{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return null!==this.fieldMask?new xd(e,this.data,this.fieldMask,t,this.fieldTransforms):new ug(e,this.data,t,this.fieldTransforms)}}class N1{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return new xd(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function P1(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ht()}}class DD{constructor(e,t,o,c,p,v){this.settings=e,this.databaseId=t,this.It=o,this.ignoreUndefinedProperties=c,void 0===p&&this.ea(),this.fieldTransforms=p||[],this.fieldMask=v||[]}get path(){return this.settings.path}get na(){return this.settings.na}sa(e){return new DD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ia(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),c=this.sa({path:o,ra:!1});return c.oa(e),c}ua(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),c=this.sa({path:o,ra:!1});return c.ea(),c}ca(e){return this.sa({path:void 0,ra:!0})}aa(e){return AD(e,this.settings.methodName,this.settings.ha||!1,this.path,this.settings.la)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ea(){if(this.path)for(let e=0;e<this.path.length;e++)this.oa(this.path.get(e))}oa(e){if(0===e.length)throw this.aa("Document fields must not be empty");if(P1(this.na)&&IP.test(e))throw this.aa('Document fields cannot begin and end with "__"')}}class CP{constructor(e,t,o){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=o||XI(e)}fa(e,t,o,c=!1){return new DD({na:e,methodName:t,la:o,path:_i.emptyPath(),ra:!1,ha:c},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function Qv(i){const e=i._freezeSettings(),t=XI(i._databaseId);return new CP(i._databaseId,!!e.ignoreUndefinedProperties,t)}function TD(i,e,t,o,c,p={}){const v=i.fa(p.merge||p.mergeFields?2:0,e,t,c);JA("Data must be an object, but it was:",v,o);const C=L1(o,v);let A,N;if(p.merge)A=new Ys(v.fieldMask),N=v.fieldTransforms;else if(p.mergeFields){const B=[];for(const W of p.mergeFields){const ae=XA(e,W,t);if(!v.contains(ae))throw new it(Be.INVALID_ARGUMENT,`Field '${ae}' is specified in your field mask but missing from your input data.`);U1(B,ae)||B.push(ae)}A=new Ys(B),N=v.fieldTransforms.filter(W=>A.covers(W.field))}else A=null,N=v.fieldTransforms;return new EP(new Qs(C),A,N)}class rE extends Yv{_toFieldTransform(e){if(2!==e.na)throw e.aa(1===e.na?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof rE}}function k1(i,e,t){return new DD({na:3,la:e.settings.la,methodName:i._methodName,ra:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class KA extends Yv{_toFieldTransform(e){return new Mv(e.path,new Pm)}isEqual(e){return e instanceof KA}}class DP extends Yv{constructor(e,t){super(e),this.da=t}_toFieldTransform(e){const t=k1(this,e,!0),o=this.da.map(p=>Jv(p,t)),c=new xh(o);return new Mv(e.path,c)}isEqual(e){return this===e}}class TP extends Yv{constructor(e,t){super(e),this.da=t}_toFieldTransform(e){const t=k1(this,e,!0),o=this.da.map(p=>Jv(p,t)),c=new Gf(o);return new Mv(e.path,c)}isEqual(e){return this===e}}class SP extends Yv{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=new tu(e.It,WC(e.It,this._a));return new Mv(e.path,t)}isEqual(e){return this===e}}function YA(i,e,t,o){const c=i.fa(1,e,t);JA("Data must be an object, but it was:",c,o);const p=[],v=Qs.empty();rg(o,(A,N)=>{const B=SD(e,A,t);N=(0,An.m9)(N);const W=c.ua(B);if(N instanceof rE)p.push(B);else{const ae=Jv(N,W);null!=ae&&(p.push(B),v.set(B,ae))}});const C=new Ys(p);return new N1(v,C,c.fieldTransforms)}function QA(i,e,t,o,c,p){const v=i.fa(1,e,t),C=[XA(e,o,t)],A=[c];if(p.length%2!=0)throw new it(Be.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let ae=0;ae<p.length;ae+=2)C.push(XA(e,p[ae])),A.push(p[ae+1]);const N=[],B=Qs.empty();for(let ae=C.length-1;ae>=0;--ae)if(!U1(N,C[ae])){const fe=C[ae];let ve=A[ae];ve=(0,An.m9)(ve);const Ye=v.ua(fe);if(ve instanceof rE)N.push(fe);else{const Xe=Jv(ve,Ye);null!=Xe&&(N.push(fe),B.set(fe,Xe))}}const W=new Ys(N);return new N1(B,W,v.fieldTransforms)}function F1(i,e,t,o=!1){return Jv(t,i.fa(o?4:3,e))}function Jv(i,e){if(V1(i=(0,An.m9)(i)))return JA("Unsupported field value:",e,i),L1(i,e);if(i instanceof Yv)return function(t,o){if(!P1(o.na))throw o.aa(`${t._methodName}() can only be used with update() and set()`);if(!o.path)throw o.aa(`${t._methodName}() is not currently supported inside arrays`);const c=t._toFieldTransform(o);c&&o.fieldTransforms.push(c)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.ra&&4!==e.na)throw e.aa("Nested arrays are not supported");return function(t,o){const c=[];let p=0;for(const v of t){let C=Jv(v,o.ca(p));null==C&&(C={nullValue:"NULL_VALUE"}),c.push(C),p++}return{arrayValue:{values:c}}}(i,e)}return function(t,o){if(null===(t=(0,An.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return WC(o.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const c=ai.fromDate(t);return{timestampValue:uw(o.It,c)}}if(t instanceof ai){const c=new ai(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:uw(o.It,c)}}if(t instanceof CD)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Zf)return{bytesValue:yS(o.It,t._byteString)};if(t instanceof xi){const c=o.databaseId,p=t.firestore._databaseId;if(!p.isEqual(c))throw o.aa(`Document reference is for database ${p.projectId}/${p.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:BI(t.firestore._databaseId||o.databaseId,t._key.path)}}throw o.aa(`Unsupported field value: ${ID(t)}`)}(i,e)}function L1(i,e){const t={};return yI(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):rg(i,(o,c)=>{const p=Jv(c,e.ia(o));null!=p&&(t[o]=p)}),{mapValue:{fields:t}}}function V1(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof ai||i instanceof CD||i instanceof Zf||i instanceof xi||i instanceof Yv)}function JA(i,e,t){if(!V1(t)||"object"!=typeof(o=t)||null===o||Object.getPrototypeOf(o)!==Object.prototype&&null!==Object.getPrototypeOf(o)){const o=ID(t);throw e.aa("an object"===o?i+" a custom object":i+" "+o)}var o}function XA(i,e,t){if((e=(0,An.m9)(e))instanceof dg)return e._internalPath;if("string"==typeof e)return SD(i,e);throw AD("Field path arguments must be of type string or ",i,!1,void 0,t)}const AP=new RegExp("[~\\*/\\[\\]]");function SD(i,e,t){if(e.search(AP)>=0)throw AD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new dg(...e.split("."))._internalPath}catch{throw AD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function AD(i,e,t,o,c){const p=o&&!o.isEmpty(),v=void 0!==c;let C=`Function ${e}() called with invalid data`;t&&(C+=" (via `toFirestore()`)"),C+=". ";let A="";return(p||v)&&(A+=" (found",p&&(A+=` in field ${o}`),v&&(A+=` in document ${c}`),A+=")"),new it(Be.INVALID_ARGUMENT,C+i+A)}function U1(i,e){return i.some(t=>t.isEqual(e))}class iE{constructor(e,t,o,c,p){this._firestore=e,this._userDataWriter=t,this._key=o,this._document=c,this._converter=p}get id(){return this._key.path.lastSegment()}get ref(){return new xi(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new xP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(xD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class xP extends iE{data(){return super.data()}}function xD(i,e){return"string"==typeof e?SD(i,e):e instanceof dg?e._internalPath:e._delegate._internalPath}class Xv{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class hg extends iE{constructor(e,t,o,c,p,v){super(e,t,o,c,v),this._firestore=e,this._firestoreImpl=e,this.metadata=p}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new oE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const o=this._document.data.field(xD("DocumentSnapshot.get",e));if(null!==o)return this._userDataWriter.convertValue(o,t.serverTimestamps)}}}class oE extends hg{data(e={}){return super.data(e)}}class Gm{constructor(e,t,o,c){this._firestore=e,this._userDataWriter=t,this._snapshot=c,this.metadata=new Xv(c.hasPendingWrites,c.fromCache),this.query=o}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(o=>{e.call(t,new oE(this._firestore,this._userDataWriter,o.key,o,new Xv(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new it(Be.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,c){if(o._snapshot.oldDocs.isEmpty()){let p=0;return o._snapshot.docChanges.map(v=>({type:"added",doc:new oE(o._firestore,o._userDataWriter,v.doc.key,v.doc,new Xv(o._snapshot.mutatedKeys.has(v.doc.key),o._snapshot.fromCache),o.query.converter),oldIndex:-1,newIndex:p++}))}{let p=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(v=>c||3!==v.type).map(v=>{const C=new oE(o._firestore,o._userDataWriter,v.doc.key,v.doc,new Xv(o._snapshot.mutatedKeys.has(v.doc.key),o._snapshot.fromCache),o.query.converter);let A=-1,N=-1;return 0!==v.type&&(A=p.indexOf(v.doc.key),p=p.delete(v.doc.key)),1!==v.type&&(p=p.add(v.doc),N=p.indexOf(v.doc.key)),{type:MP(v.type),doc:C,oldIndex:A,newIndex:N}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function MP(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ht()}}function B1(i,e){return i instanceof hg&&e instanceof hg?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof Gm&&e instanceof Gm&&i._firestore===e._firestore&&x1(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}function j1(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new it(Be.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class sE{}function qm(i,...e){for(const t of e)i=t._apply(i);return i}class RP extends sE{constructor(e,t,o){super(),this.wa=e,this.ma=t,this.ga=o,this.type="where"}_apply(e){const t=Qv(e.firestore),o=function(c,p,v,C,A,N,B){let W;if(A.isKeyField()){if("array-contains"===N||"array-contains-any"===N)throw new it(Be.INVALID_ARGUMENT,`Invalid Query. You can't perform '${N}' queries on documentId().`);if("in"===N||"not-in"===N){W1(B,N);const fe=[];for(const ve of B)fe.push(z1(C,c,ve));W={arrayValue:{values:fe}}}else W=z1(C,c,B)}else"in"!==N&&"not-in"!==N&&"array-contains-any"!==N||W1(B,N),W=F1(v,"where",B,"in"===N||"not-in"===N);const ae=Co.create(A,N,W);return function(fe,ve){if(ve.dt()){const Xe=tw(fe);if(null!==Xe&&!Xe.isEqual(ve.field))throw new it(Be.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Xe.toString()}' and '${ve.field.toString()}'`);const At=ew(fe);null!==At&&Z1(0,ve.field,At)}const Ye=function(Xe,At){for(const Wt of Xe.filters)if(At.indexOf(Wt.op)>=0)return Wt.op;return null}(fe,function(Xe){switch(Xe){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(ve.op));if(null!==Ye)throw new it(Be.INVALID_ARGUMENT,Ye===ve.op?`Invalid query. You cannot use more than one '${ve.op.toString()}' filter.`:`Invalid query. You cannot use '${ve.op.toString()}' filters with '${Ye.toString()}' filters.`)}(c,ae),ae}(e._query,0,t,e.firestore._databaseId,this.wa,this.ma,this.ga);return new ru(e.firestore,e.converter,function(c,p){const v=c.filters.concat([p]);return new Ah(c.path,c.collectionGroup,c.explicitOrderBy.slice(),v,c.limit,c.limitType,c.startAt,c.endAt)}(e._query,o))}}class NP extends sE{constructor(e,t){super(),this.wa=e,this.ya=t,this.type="orderBy"}_apply(e){const t=function(o,c,p){if(null!==o.startAt)throw new it(Be.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==o.endAt)throw new it(Be.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const v=new Dv(c,p);return function(C,A){if(null===ew(C)){const N=tw(C);null!==N&&Z1(0,N,A.field)}}(o,v),v}(e._query,this.wa,this.ya);return new ru(e.firestore,e.converter,function(o,c){const p=o.explicitOrderBy.concat([c]);return new Ah(o.path,o.collectionGroup,p,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,t))}}class H1 extends sE{constructor(e,t,o){super(),this.type=e,this.pa=t,this.Ia=o}_apply(e){return new ru(e.firestore,e.converter,Nm(e._query,this.pa,this.Ia))}}class $1 extends sE{constructor(e,t,o){super(),this.type=e,this.Ta=t,this.Ea=o}_apply(e){const t=q1(e,this.type,this.Ta,this.Ea);return new ru(e.firestore,e.converter,(c=t,new Ah((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,c,o.endAt)));var o,c}}class G1 extends sE{constructor(e,t,o){super(),this.type=e,this.Ta=t,this.Ea=o}_apply(e){const t=q1(e,this.type,this.Ta,this.Ea);return new ru(e.firestore,e.converter,(c=t,new Ah((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,o.startAt,c)));var o,c}}function q1(i,e,t,o){if(t[0]=(0,An.m9)(t[0]),t[0]instanceof iE)return function(c,p,v,C,A){if(!C)throw new it(Be.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${v}().`);const N=[];for(const B of Js(c))if(B.field.isKeyField())N.push(sg(p,C.key));else{const W=C.data.field(B.field);if(wI(W))throw new it(Be.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+B.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===W){const ae=B.field.canonicalString();throw new it(Be.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${ae}' (used as the orderBy) does not exist.`)}N.push(W)}return new $f(N,A)}(i._query,i.firestore._databaseId,e,t[0]._document,o);{const c=Qv(i.firestore);return function(p,v,C,A,N,B){const W=p.explicitOrderBy;if(N.length>W.length)throw new it(Be.INVALID_ARGUMENT,`Too many arguments provided to ${A}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const ae=[];for(let fe=0;fe<N.length;fe++){const ve=N[fe];if(W[fe].field.isKeyField()){if("string"!=typeof ve)throw new it(Be.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${A}(), but got a ${typeof ve}`);if(!GC(p)&&-1!==ve.indexOf("/"))throw new it(Be.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${A}() must be a plain document ID, but '${ve}' contains a slash.`);const Ye=p.path.child(ir.fromString(ve));if(!It.isDocumentKey(Ye))throw new it(Be.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${A}() must result in a valid document path, but '${Ye}' is not because it contains an odd number of segments.`);const Xe=new It(Ye);ae.push(sg(v,Xe))}else{const Ye=F1(C,A,ve);ae.push(Ye)}}return new $f(ae,B)}(i._query,i.firestore._databaseId,c,e,t,o)}}function z1(i,e,t){if("string"==typeof(t=(0,An.m9)(t))){if(""===t)throw new it(Be.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!GC(e)&&-1!==t.indexOf("/"))throw new it(Be.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const o=e.path.child(ir.fromString(t));if(!It.isDocumentKey(o))throw new it(Be.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return sg(i,new It(o))}if(t instanceof xi)return sg(i,t._key);throw new it(Be.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ID(t)}.`)}function W1(i,e){if(!Array.isArray(i)||0===i.length)throw new it(Be.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(i.length>10)throw new it(Be.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function Z1(i,e,t){if(!t.isEqual(e))throw new it(Be.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const jP={maxAttempts:5};class ex{convertValue(e,t="none"){switch(Hf(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ai(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Pc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Ht()}}convertObject(e,t){const o={};return rg(e.fields,(c,p)=>{o[c]=this.convertValue(p,t)}),o}convertGeoPoint(e){return new CD(Ai(e.latitude),Ai(e.longitude))}convertArray(e,t){return(e.values||[]).map(o=>this.convertValue(o,t))}convertServerTimestamp(e,t){switch(t){case"previous":const o=bI(e);return null==o?null:this.convertValue(o,t);case"estimate":return this.convertTimestamp(og(e));default:return null}}convertTimestamp(e){const t=Uf(e);return new ai(t.seconds,t.nanos)}convertDocumentKey(e,t){const o=ir.fromString(e);En(CS(o));const c=new Bf(o.get(1),o.get(3)),p=new It(o.popFirst(5));return c.isEqual(t)||Xi(`Document ${p} contains a document reference within a different database (${c.projectId}/${c.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),p}}function MD(i,e,t){let o;return o=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,o}class HP extends ex{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zf(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new xi(this.firestore,null,t)}}class K1{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Qv(e)}set(e,t,o){this._verifyNotCommitted();const c=zm(e,this._firestore),p=MD(c.converter,t,o),v=TD(this._dataReader,"WriteBatch.set",c._key,p,null!==c.converter,o);return this._mutations.push(v.toMutation(c._key,wi.none())),this}update(e,t,o,...c){this._verifyNotCommitted();const p=zm(e,this._firestore);let v;return v="string"==typeof(t=(0,An.m9)(t))||t instanceof dg?QA(this._dataReader,"WriteBatch.update",p._key,t,o,c):YA(this._dataReader,"WriteBatch.update",p._key,t),this._mutations.push(v.toMutation(p._key,wi.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=zm(e,this._firestore);return this._mutations=this._mutations.concat(new Rh(t._key,wi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new it(Be.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function zm(i,e){if((i=(0,An.m9)(i)).firestore!==e)throw new it(Be.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class e_ extends ex{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zf(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new xi(this.firestore,null,t)}}function Y1(i,e,t){i=or(i,xi);const o=or(i.firestore,ji),c=MD(i.converter,e,t);return Cw(o,[TD(Qv(o),"setDoc",i._key,c,null!==i.converter,t).toMutation(i._key,wi.none())])}function Q1(i,e,t,...o){i=or(i,xi);const c=or(i.firestore,ji),p=Qv(c);let v;return v="string"==typeof(e=(0,An.m9)(e))||e instanceof dg?QA(p,"updateDoc",i._key,e,t,o):YA(p,"updateDoc",i._key,e),Cw(c,[v.toMutation(i._key,wi.exists(!0))])}function J1(i,...e){var t,o,c;i=(0,An.m9)(i);let p={includeMetadataChanges:!1},v=0;"object"!=typeof e[v]||ZA(e[v])||(p=e[v],v++);const C={includeMetadataChanges:p.includeMetadataChanges};if(ZA(e[v])){const W=e[v];e[v]=null===(t=W.next)||void 0===t?void 0:t.bind(W),e[v+1]=null===(o=W.error)||void 0===o?void 0:o.bind(W),e[v+2]=null===(c=W.complete)||void 0===c?void 0:c.bind(W)}let A,N,B;if(i instanceof xi)N=or(i.firestore,ji),B=Tv(i._key.path),A={next:W=>{e[v]&&e[v](tx(N,i,W))},error:e[v+1],complete:e[v+2]};else{const W=or(i,ru);N=or(W.firestore,ji),B=W._query;const ae=new e_(N);A={next:fe=>{e[v]&&e[v](new Gm(N,ae,W,fe))},error:e[v+1],complete:e[v+2]},j1(i._query)}return function(W,ae,fe,ve){const Ye=new _D(ve),Xe=new fA(ae,Ye,fe);return W.asyncQueue.enqueueAndForget((0,Ge.Z)(function*(){return uA(yield Ew(W),Xe)})),()=>{Ye.Rc(),W.asyncQueue.enqueueAndForget((0,Ge.Z)(function*(){return lA(yield Ew(W),Xe)}))}}(ts(N),B,C,A)}function Cw(i,e){return function(t,o){const c=new ho;return t.asyncQueue.enqueueAndForget((0,Ge.Z)(function*(){return function PN(i,e,t){return vA.apply(this,arguments)}(yield qA(t),o,c)})),c.promise}(ts(i),e)}function tx(i,e,t){const o=t.docs.get(e._key),c=new e_(i);return new hg(i,c,e._key,o,new Xv(t.hasPendingWrites,t.fromCache),e.converter)}class JP extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Qv(e)}get(e){const t=zm(e,this._firestore),o=new HP(this._firestore);return this._transaction.lookup([t._key]).then(c=>{if(!c||1!==c.length)return Ht();const p=c[0];if(p.isFoundDocument())return new iE(this._firestore,o,p.key,p,t.converter);if(p.isNoDocument())return new iE(this._firestore,o,t._key,null,t.converter);throw Ht()})}set(e,t,o){const c=zm(e,this._firestore),p=MD(c.converter,t,o),v=TD(this._dataReader,"Transaction.set",c._key,p,null!==c.converter,o);return this._transaction.set(c._key,v),this}update(e,t,o,...c){const p=zm(e,this._firestore);let v;return v="string"==typeof(t=(0,An.m9)(t))||t instanceof dg?QA(this._dataReader,"Transaction.update",p._key,t,o,c):YA(this._dataReader,"Transaction.update",p._key,t),this._transaction.update(p._key,v),this}delete(e){const t=zm(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=zm(e,this._firestore),o=new e_(this._firestore);return super.get(e).then(c=>new hg(this._firestore,o,t._key,c._document,new Xv(!1,!1),t.converter))}}function nx(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new it("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function eR(){if(typeof Uint8Array>"u")throw new it("unimplemented","Uint8Arrays are not available in this environment.")}function tR(){if(!function _I(){return typeof atob<"u"}())throw new it("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(i,e=!0){eg=Oc.SDK_VERSION,(0,Oc._registerComponent)(new zp.wA("firestore",(t,{instanceIdentifier:o,options:c})=>{const p=t.getProvider("app").getImmediate(),v=new ji(new mv(t.getProvider("auth-internal")),new B0(t.getProvider("app-check-internal")),function(C,A){if(!Object.prototype.hasOwnProperty.apply(C.options,["projectId"]))throw new it(Be.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Bf(C.options.projectId,A)}(p,o),p);return c=Object.assign({useFetchStreams:e},c),v._setSettings(c),v},"PUBLIC").setMultipleInstances(!0)),(0,Oc.registerVersion)(Cm,"3.5.0",i),(0,Oc.registerVersion)(Cm,"3.5.0","esm2017")}();class aE{constructor(e){this._delegate=e}static fromBase64String(e){return tR(),new aE(Zf.fromBase64String(e))}static fromUint8Array(e){return eR(),new aE(Zf.fromUint8Array(e))}toBase64(){return tR(),this._delegate.toBase64()}toUint8Array(){return eR(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function rx(i){return function ak(i,e){if("object"!=typeof i||null===i)return!1;const t=i;for(const o of e)if(o in t&&"function"==typeof t[o])return!0;return!1}(i,["next","error","complete"])}class uk{enableIndexedDbPersistence(e,t){return function pP(i,e){O1(i=or(i,ji));const t=ts(i),o=i._freezeSettings(),c=new UA;return R1(t,c,new f1(c,o.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function gP(i){O1(i=or(i,ji));const e=ts(i),t=i._freezeSettings(),o=new UA;return R1(e,o,new YN(o,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function mP(i){if(i._initialized&&!i._terminated)throw new it(Be.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ho;return i._queue.enqueueAndForgetEvenWhileRestricted((0,Ge.Z)(function*(){try{yield(t=(0,Ge.Z)(function*(o){if(!bl.C())return Promise.resolve();const c=o+"main";yield bl.delete(c)}),function(o){return t.apply(this,arguments)})(NS(i._databaseId,i._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class nR{constructor(e,t,o){this._delegate=t,this._persistenceProvider=o,this.INTERNAL={delete:()=>this.terminate()},e instanceof Bf||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Dm("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,o={}){!function cP(i,e,t,o={}){var c;const p=(i=or(i,nE))._getSettings();if("firestore.googleapis.com"!==p.host&&p.host!==e&&Dm("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},p),{host:`${e}:${t}`,ssl:!1})),o.mockUserToken){let v,C;if("string"==typeof o.mockUserToken)v=o.mockUserToken,C=Eo.MOCK_USER;else{v=(0,An.Sg)(o.mockUserToken,null===(c=i._app)||void 0===c?void 0:c.options.projectId);const A=o.mockUserToken.sub||o.mockUserToken.user_id;if(!A)throw new it(Be.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");C=new Eo(A)}i._authCredentials=new hI(new wl(v,C))}}(this._delegate,e,t,o)}enableNetwork(){return function vP(i){return function tP(i){return i.asyncQueue.enqueue((0,Ge.Z)(function*(){const e=yield y1(i),t=yield v1(i);return e.setNetworkEnabled(!0),function(o){const c=Dt(o);return c._u.delete(0),eE(c)}(t)}))}(ts(i=or(i,ji)))}(this._delegate)}disableNetwork(){return function _P(i){return function nP(i){return i.asyncQueue.enqueue((0,Ge.Z)(function*(){const e=yield y1(i),t=yield v1(i);return e.setNetworkEnabled(!1),(o=(0,Ge.Z)(function*(c){const p=Dt(c);p._u.add(0),yield mw(p),p.gu.set("Offline")}),function(c){return o.apply(this,arguments)})(t);var o}))}(ts(i=or(i,ji)))}(this._delegate)}enablePersistence(e){let t=!1,o=!1;return e&&(t=!!e.synchronizeTabs,o=!!e.experimentalForceOwningTab,I1("synchronizeTabs",t,"experimentalForceOwningTab",o)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,o)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function yP(i){return function(e){const t=new ho;return e.asyncQueue.enqueueAndForget((0,Ge.Z)(function*(){return function VN(i,e){return EA.apply(this,arguments)}(yield qA(e),t)})),t.promise}(ts(i=or(i,ji)))}(this._delegate)}onSnapshotsInSync(e){return function QP(i,e){return function oP(i,e){const t=new _D(e);return i.asyncQueue.enqueueAndForget((0,Ge.Z)(function*(){return o=yield Ew(i),c=t,Dt(o).Ru.add(c),void c.next();var o,c})),()=>{t.Rc(),i.asyncQueue.enqueueAndForget((0,Ge.Z)(function*(){return o=yield Ew(i),c=t,void Dt(o).Ru.delete(c);var o,c}))}}(ts(i=or(i,ji)),ZA(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new it("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Dw(this,S1(this._delegate,e))}catch(t){throw Lu(t,"collection()","Firestore.collection()")}}doc(e){try{return new Nd(this,ED(this._delegate,e))}catch(t){throw Lu(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Vu(this,function lP(i,e){if(i=or(i,nE),WA("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new it(Be.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ru(i,null,(t=e,new Ah(ir.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Lu(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function XP(i,e,t){i=or(i,ji);const o=Object.assign(Object.assign({},jP),t);return function(c){if(c.maxAttempts<1)throw new it(Be.INVALID_ARGUMENT,"Max attempts must be at least 1")}(o),function sP(i,e,t){const o=new ho;return i.asyncQueue.enqueueAndForget((0,Ge.Z)(function*(){const c=yield(p=i,wD(p).then(v=>v.datastore));var p;new XN(i.asyncQueue,c,t,e,o).run()})),o.promise}(ts(i),c=>e(new JP(i,c)),o)}(this._delegate,t=>e(new rR(this,t)))}batch(){return ts(this._delegate),new iR(new K1(this._delegate,e=>Cw(this._delegate,e)))}loadBundle(e){return function wP(i,e){const t=ts(i=or(i,ji)),o=new hP;return function aP(i,e,t,o){const c=function(p,v){let C;return C="string"==typeof p?(new TextEncoder).encode(p):p,A=function(A,N){if(A instanceof Uint8Array)return p1(A,N);if(A instanceof ArrayBuffer)return p1(new Uint8Array(A),N);if(A instanceof ReadableStream)return A.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(C),new QN(A,v);var A}(t,XI(e));i.asyncQueue.enqueueAndForget((0,Ge.Z)(function*(){!function KN(i,e,t){const o=Dt(i);var c;(c=(0,Ge.Z)(function*(p,v,C){try{const A=yield v.getMetadata();if(yield function(ae,fe){const ve=Dt(ae),Ye=Do(fe.createTime);return ve.persistence.runTransaction("hasNewerBundle","readonly",Xe=>ve.Ns.getBundleMetadata(Xe,fe.id)).then(Xe=>!!Xe&&Xe.createTime.compareTo(Ye)>=0)}(p.localStore,A))return yield v.close(),C._completeWith({taskState:"Success",documentsLoaded:(ae=A).totalDocuments,bytesLoaded:ae.totalBytes,totalDocuments:ae.totalDocuments,totalBytes:ae.totalBytes}),Promise.resolve(new Set);C._updateProgress(r1(A));const N=new AN(A,p.localStore,v.It);let B=yield v.wc();for(;B;){const ae=yield N.Ou(B);ae&&C._updateProgress(ae),B=yield v.wc()}const W=yield N.complete();return yield lg(p,W.Bu,void 0),yield function(ae,fe){const ve=Dt(ae);return ve.persistence.runTransaction("Save bundle","readwrite",Ye=>ve.Ns.saveBundleMetadata(Ye,fe))}(p.localStore,A),C._completeWith(W.progress),Promise.resolve(W.$u)}catch(A){return Dm("SyncEngine",`Loading bundle failed with ${A}`),C._failWith(A),Promise.resolve(new Set)}var ae}),function(p,v,C){return c.apply(this,arguments)})(o,e,t).then(c=>{o.sharedClientState.notifyBundleLoaded(c)})}(yield qA(i),c,o)}))}(t,i._databaseId,e,o),o}(this._delegate,e)}namedQuery(e){return function bP(i,e){return function uP(i,e){return i.asyncQueue.enqueue((0,Ge.Z)(function*(){return function(t,o){const c=Dt(t);return c.persistence.runTransaction("Get named query","readonly",p=>c.Ns.getNamedQuery(p,o))}(yield bD(i),e)}))}(ts(i=or(i,ji)),e).then(t=>t?new ru(i,null,t.query):null)}(this._delegate,e).then(t=>t?new Vu(this,t):null)}}class RD extends ex{constructor(e){super(),this.firestore=e}convertBytes(e){return new aE(new Zf(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Nd.forKey(t,this.firestore,null)}}class rR{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new RD(e)}get(e){const t=n_(e);return this._delegate.get(t).then(o=>new uE(this._firestore,new hg(this._firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,t.converter)))}set(e,t,o){const c=n_(e);return o?(nx("Transaction.set",o),this._delegate.set(c,t,o)):this._delegate.set(c,t),this}update(e,t,o,...c){const p=n_(e);return 2===arguments.length?this._delegate.update(p,t):this._delegate.update(p,t,o,...c),this}delete(e){const t=n_(e);return this._delegate.delete(t),this}}class iR{constructor(e){this._delegate=e}set(e,t,o){const c=n_(e);return o?(nx("WriteBatch.set",o),this._delegate.set(c,t,o)):this._delegate.set(c,t),this}update(e,t,o,...c){const p=n_(e);return 2===arguments.length?this._delegate.update(p,t):this._delegate.update(p,t,o,...c),this}delete(e){const t=n_(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class t_{constructor(e,t,o){this._firestore=e,this._userDataWriter=t,this._delegate=o}fromFirestore(e,t){const o=new oE(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new cE(this._firestore,o),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const o=t_.INSTANCES;let c=o.get(e);c||(c=new WeakMap,o.set(e,c));let p=c.get(t);return p||(p=new t_(e,new RD(e),t),c.set(t,p)),p}}t_.INSTANCES=new WeakMap;class Nd{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new RD(e)}static forPath(e,t,o){if(e.length%2!=0)throw new it("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Nd(t,new xi(t._delegate,o,new It(e)))}static forKey(e,t,o){return new Nd(t,new xi(t._delegate,o,e))}get id(){return this._delegate.id}get parent(){return new Dw(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Dw(this.firestore,S1(this._delegate,e))}catch(t){throw Lu(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,An.m9)(e))instanceof xi&&A1(this._delegate,e)}set(e,t){t=nx("DocumentReference.set",t);try{return t?Y1(this._delegate,e,t):Y1(this._delegate,e)}catch(o){throw Lu(o,"setDoc()","DocumentReference.set()")}}update(e,t,...o){try{return 1===arguments.length?Q1(this._delegate,e):Q1(this._delegate,e,t,...o)}catch(c){throw Lu(c,"updateDoc()","DocumentReference.update()")}}delete(){return function KP(i){return Cw(or(i.firestore,ji),[new Rh(i._key,wi.none())])}(this._delegate)}onSnapshot(...e){const t=oR(e),o=sR(e,c=>new uE(this.firestore,new hg(this.firestore._delegate,this._userDataWriter,c._key,c._document,c.metadata,this._delegate.converter)));return J1(this._delegate,t,o)}get(e){let t;return t="cache"===e?.source?function GP(i){i=or(i,xi);const e=or(i.firestore,ji),t=ts(e),o=new e_(e);return function rP(i,e){const t=new ho;return i.asyncQueue.enqueueAndForget((0,Ge.Z)(function*(){return(o=(0,Ge.Z)(function*(c,p,v){try{const C=yield function(A,N){const B=Dt(A);return B.persistence.runTransaction("read document","readonly",W=>B.localDocuments.getDocument(W,N))}(c,p);C.isFoundDocument()?v.resolve(C):C.isNoDocument()?v.resolve(null):v.reject(new it(Be.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(C){const A=_w(C,`Failed to get document '${p} from cache`);v.reject(A)}}),function(c,p,v){return o.apply(this,arguments)})(yield bD(i),e,t);var o})),t.promise}(t,i._key).then(c=>new hg(e,o,i._key,c,new Xv(null!==c&&c.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===e?.source?function qP(i){i=or(i,xi);const e=or(i.firestore,ji);return _1(ts(e),i._key,{source:"server"}).then(t=>tx(e,i,t))}(this._delegate):function $P(i){i=or(i,xi);const e=or(i.firestore,ji);return _1(ts(e),i._key).then(t=>tx(e,i,t))}(this._delegate),t.then(o=>new uE(this.firestore,new hg(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)))}withConverter(e){return new Nd(this.firestore,this._delegate.withConverter(e?t_.getInstance(this.firestore,e):null))}}function Lu(i,e,t){return i.message=i.message.replace(e,t),i}function oR(i){for(const e of i)if("object"==typeof e&&!rx(e))return e;return{}}function sR(i,e){var t,o;let c;return c=rx(i[0])?i[0]:rx(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:p=>{c.next&&c.next(e(p))},error:null===(t=c.error)||void 0===t?void 0:t.bind(c),complete:null===(o=c.complete)||void 0===o?void 0:o.bind(c)}}class uE{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Nd(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return B1(this._delegate,e._delegate)}}class cE extends uE{data(e){const t=this._delegate.data(e);return function GT(i,e){i||Ht()}(void 0!==t),t}}class Vu{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new RD(e)}where(e,t,o){try{return new Vu(this.firestore,qm(this._delegate,function OP(i,e,t){const o=e,c=xD("where",i);return new RP(c,o,t)}(e,t,o)))}catch(c){throw Lu(c,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Vu(this.firestore,qm(this._delegate,function PP(i,e="asc"){const t=e,o=xD("orderBy",i);return new NP(o,t)}(e,t)))}catch(o){throw Lu(o,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Vu(this.firestore,qm(this._delegate,function kP(i){return D1("limit",i),new H1("limit",i,"F")}(e)))}catch(t){throw Lu(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Vu(this.firestore,qm(this._delegate,function FP(i){return D1("limitToLast",i),new H1("limitToLast",i,"L")}(e)))}catch(t){throw Lu(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Vu(this.firestore,qm(this._delegate,function LP(...i){return new $1("startAt",i,!0)}(...e)))}catch(t){throw Lu(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Vu(this.firestore,qm(this._delegate,function VP(...i){return new $1("startAfter",i,!1)}(...e)))}catch(t){throw Lu(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Vu(this.firestore,qm(this._delegate,function UP(...i){return new G1("endBefore",i,!1)}(...e)))}catch(t){throw Lu(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Vu(this.firestore,qm(this._delegate,function BP(...i){return new G1("endAt",i,!0)}(...e)))}catch(t){throw Lu(t,"endAt()","Query.endAt()")}}isEqual(e){return x1(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function WP(i){i=or(i,ru);const e=or(i.firestore,ji),t=ts(e),o=new e_(e);return function iP(i,e){const t=new ho;return i.asyncQueue.enqueueAndForget((0,Ge.Z)(function*(){return(o=(0,Ge.Z)(function*(c,p,v){try{const C=yield fD(c,p,!0),A=new s1(p,C.Hi),N=A.ju(C.documents),B=A.applyChanges(N,!1);v.resolve(B.snapshot)}catch(C){const A=_w(C,`Failed to execute query '${p} against cache`);v.reject(A)}}),function(c,p,v){return o.apply(this,arguments)})(yield bD(i),e,t);var o})),t.promise}(t,i._query).then(c=>new Gm(e,o,i,c))}(this._delegate):"server"===e?.source?function ZP(i){i=or(i,ru);const e=or(i.firestore,ji),t=ts(e),o=new e_(e);return w1(t,i._query,{source:"server"}).then(c=>new Gm(e,o,i,c))}(this._delegate):function zP(i){i=or(i,ru);const e=or(i.firestore,ji),t=ts(e),o=new e_(e);return j1(i._query),w1(t,i._query).then(c=>new Gm(e,o,i,c))}(this._delegate),t.then(o=>new ix(this.firestore,new Gm(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)))}onSnapshot(...e){const t=oR(e),o=sR(e,c=>new ix(this.firestore,new Gm(this.firestore._delegate,this._userDataWriter,this._delegate,c._snapshot)));return J1(this._delegate,t,o)}withConverter(e){return new Vu(this.firestore,this._delegate.withConverter(e?t_.getInstance(this.firestore,e):null))}}class lk{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new cE(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class ix{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Vu(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new cE(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new lk(this._firestore,t))}forEach(e,t){this._delegate.forEach(o=>{e.call(t,new cE(this._firestore,o))})}isEqual(e){return B1(this._delegate,e._delegate)}}class Dw extends Vu{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Nd(this.firestore,e):null}doc(e){try{return new Nd(this.firestore,void 0===e?ED(this._delegate):ED(this._delegate,e))}catch(t){throw Lu(t,"doc()","CollectionReference.doc()")}}add(e){return function YP(i,e){const t=or(i.firestore,ji),o=ED(i),c=MD(i.converter,e);return Cw(t,[TD(Qv(i.firestore),"addDoc",o._key,c,null!==i.converter,{}).toMutation(o._key,wi.exists(!1))]).then(()=>o)}(this._delegate,e).then(t=>new Nd(this.firestore,t))}isEqual(e){return A1(this._delegate,e._delegate)}withConverter(e){return new Dw(this.firestore,this._delegate.withConverter(e?t_.getInstance(this.firestore,e):null))}}function n_(i){return or(i,xi)}class ox{constructor(...e){this._delegate=new dg(...e)}static documentId(){return new ox(_i.keyField().canonicalString())}isEqual(e){return(e=(0,An.m9)(e))instanceof dg&&this._delegate._internalPath.isEqual(e._internalPath)}}class r_{constructor(e){this._delegate=e}static serverTimestamp(){const e=function tk(){return new KA("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new r_(e)}static delete(){const e=function ek(){return new rE("deleteField")}();return e._methodName="FieldValue.delete",new r_(e)}static arrayUnion(...e){const t=function nk(...i){return new DP("arrayUnion",i)}(...e);return t._methodName="FieldValue.arrayUnion",new r_(t)}static arrayRemove(...e){const t=function rk(...i){return new TP("arrayRemove",i)}(...e);return t._methodName="FieldValue.arrayRemove",new r_(t)}static increment(e){const t=function ik(i){return new SP("increment",i)}(e);return t._methodName="FieldValue.increment",new r_(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const dk={Firestore:nR,GeoPoint:CD,Timestamp:ai,Blob:aE,Transaction:rR,WriteBatch:iR,DocumentReference:Nd,DocumentSnapshot:uE,Query:Vu,QueryDocumentSnapshot:cE,QuerySnapshot:ix,CollectionReference:Dw,FieldPath:ox,FieldValue:r_,setLogLevel:function ck(i){!function MC(i){Dh.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function fk(i){(function hk(i,e){i.INTERNAL.registerComponent(new zp.wA("firestore-compat",t=>{const o=t.getProvider("app-compat").getImmediate(),c=t.getProvider("firestore").getImmediate();return e(o,c)},"PUBLIC").setServiceProps(Object.assign({},dk)))})(i,(e,t)=>new nR(e,t,new uk)),i.registerVersion("@firebase/firestore-compat","0.1.25")}(gb.Z);var pk=ee(6451),OD=ee(5363),gk=ee(6063);class mk extends Fo.x{constructor(e=1/0,t=1/0,o=gk.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=o,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:o,_infiniteTimeWindow:c,_timestampProvider:p,_windowTime:v}=this;t||(o.push(e),!c&&o.push(p.now()+v)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:o,_buffer:c}=this,p=c.slice();for(let v=0;v<p.length&&!e.closed;v+=o?1:2)e.next(p[v]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:o,_infiniteTimeWindow:c}=this,p=(c?1:2)*e;if(e<1/0&&p<o.length&&o.splice(0,o.length-p),!c){const v=t.now();let C=0;for(let A=1;A<o.length&&o[A]<=v;A+=2)C=A;C&&o.splice(0,C+1)}}}var yk=ee(3099);function aR(i,e,t){let o,c=!1;return i&&"object"==typeof i?({bufferSize:o=1/0,windowTime:e=1/0,refCount:c=!1,scheduler:t}=i):o=i??1/0,(0,yk.B)({connector:()=>new mk(o,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:c})}function uR(i,e){return(0,Vs.m)(e)?Lr(()=>i,e):Lr(()=>i)}var sx=ee(9468);ee(5867);const lR=new Map,Ik={activated:!1,tokenObservers:[]},Ek={initialized:!1,enabled:!1};function ea(i){return lR.get(i)||Ik}function Ph(i,e){lR.set(i,e)}function PD(){return Ek}class Ak{constructor(e,t,o,c,p){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=o,this.lowerBound=c,this.upperBound=p,this.pending=null,this.nextErrorWaitInterval=c,c>p)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ge.Z)(function*(){t.stop();try{t.pending=new An.BH,yield function xk(i){return new Promise(e=>{setTimeout(e,i)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new An.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(o){t.retryPolicy(o)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Uu=new An.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function hR(i){if(!ea(i).activated)throw Uu.create("use-before-activation",{appName:i.name})}function lx(i,e){return dx.apply(this,arguments)}function dx(){return dx=(0,Ge.Z)(function*({url:i,body:e},t){var o,c;const p={"Content-Type":"application/json"},v=t.getImmediate({optional:!0});if(v){const fe=yield v.getHeartbeatsHeader();fe&&(p["X-Firebase-Client"]=fe)}const C={method:"POST",body:JSON.stringify(e),headers:p};let A,N;try{A=yield fetch(i,C)}catch(fe){throw Uu.create("fetch-network-error",{originalErrorMessage:null===(o=fe)||void 0===o?void 0:o.message})}if(200!==A.status)throw Uu.create("fetch-status-error",{httpStatus:A.status});try{N=yield A.json()}catch(fe){throw Uu.create("fetch-parse-error",{originalErrorMessage:null===(c=fe)||void 0===c?void 0:c.message})}const B=N.ttl.match(/^([\d.]+)(s)$/);if(!B||!B[2]||isNaN(Number(B[1])))throw Uu.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${N.ttl}`});const W=1e3*Number(B[1]),ae=Date.now();return{token:N.token,expireTimeMillis:ae+W,issuedAtTimeMillis:ae}}),dx.apply(this,arguments)}function Nk(i,e){const{projectId:t,appId:o,apiKey:c}=i.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${o}:exchangeDebugToken?key=${c}`,body:{debug_token:e}}}const lE="firebase-app-check-store";let LD=null;function pR(){return LD||(LD=new Promise((i,e)=>{var t;try{const o=indexedDB.open("firebase-app-check-database",1);o.onsuccess=c=>{i(c.target.result)},o.onerror=c=>{var p;e(Uu.create("storage-open",{originalErrorMessage:null===(p=c.target.error)||void 0===p?void 0:p.message}))},o.onupgradeneeded=c=>{0===c.oldVersion&&c.target.result.createObjectStore(lE,{keyPath:"compositeKey"})}}catch(o){e(Uu.create("storage-open",{originalErrorMessage:null===(t=o)||void 0===t?void 0:t.message}))}}),LD)}function hx(){return hx=(0,Ge.Z)(function*(i,e){const o=(yield pR()).transaction(lE,"readwrite"),p=o.objectStore(lE).put({compositeKey:i,value:e});return new Promise((v,C)=>{p.onsuccess=A=>{v()},o.onerror=A=>{var N;C(Uu.create("storage-set",{originalErrorMessage:null===(N=A.target.error)||void 0===N?void 0:N.message}))}})}),hx.apply(this,arguments)}const dE=new bh.Yd("@firebase/app-check");function vR(i,e){return(0,An.hl)()?function Lk(i,e){return function gR(i,e){return hx.apply(this,arguments)}(function yR(i){return`${i.options.appId}-${i.name}`}(i),e)}(i,e).catch(t=>{dE.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function _R(){return PD().enabled}function wR(){return mx.apply(this,arguments)}function mx(){return mx=(0,Ge.Z)(function*(){const i=PD();if(i.enabled&&i.token)return i.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),mx.apply(this,arguments)}const $k={error:"UNKNOWN_ERROR"};function Gk(i){return An.US.encodeString(JSON.stringify(i),!1)}function VD(i){return yx.apply(this,arguments)}function yx(){return yx=(0,Ge.Z)(function*(i,e=!1){const t=i.app;hR(t);const o=ea(t);let p,c=o.token;if(!c){const A=yield o.cachedTokenPromise;A&&UD(A)&&(c=A)}if(!e&&c&&UD(c))return{token:c.token};let C,v=!1;if(_R()){o.exchangeTokenPromise||(o.exchangeTokenPromise=lx(Nk(t,yield wR()),i.heartbeatServiceProvider).then(N=>(o.exchangeTokenPromise=void 0,N)),v=!0);const A=yield o.exchangeTokenPromise;return yield vR(t,A),Ph(t,Object.assign(Object.assign({},o),{token:A})),{token:A.token}}try{o.exchangeTokenPromise||(o.exchangeTokenPromise=o.provider.getToken().then(A=>(o.exchangeTokenPromise=void 0,A)),v=!0),c=yield o.exchangeTokenPromise}catch(A){"appCheck/throttled"===A.code?dE.warn(A.message):dE.error(A),p=A}return c?(C={token:c.token},Ph(t,Object.assign(Object.assign({},o),{token:c})),yield vR(t,c)):C=zk(p),v&&IR(t,C),C}),yx.apply(this,arguments)}function _x(i,e){const t=ea(i),o=t.tokenObservers.filter(c=>c.next!==e);0===o.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Ph(i,Object.assign(Object.assign({},t),{tokenObservers:o}))}function bR(i){const{app:e}=i,t=ea(e);let o=t.tokenRefresher;o||(o=function qk(i){const{app:e}=i;return new Ak((0,Ge.Z)(function*(){let o;if(o=ea(e).token?yield VD(i,!0):yield VD(i),o.error)throw o.error}),()=>!0,()=>{const t=ea(e);if(t.token){let o=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return o=Math.min(o,t.token.expireTimeMillis-3e5),Math.max(0,o-Date.now())}return 0},3e4,96e4)}(i),Ph(e,Object.assign(Object.assign({},t),{tokenRefresher:o}))),!o.isRunning()&&t.isTokenAutoRefreshEnabled&&o.start()}function IR(i,e){const t=ea(i).tokenObservers;for(const o of t)try{"EXTERNAL"===o.type&&null!=e.error?o.error(e.error):o.next(e)}catch{}}function UD(i){return i.expireTimeMillis-Date.now()>0}function zk(i){return{token:Gk($k),error:i}}class Wk{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=ea(this.app);for(const t of e)_x(this.app,t.next);return Promise.resolve()}}const MR="app-check-internal";!function aF(){(0,Oc._registerComponent)(new zp.wA("app-check",i=>function Zk(i,e){return new Wk(i,e)}(i.getProvider("app").getImmediate(),i.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((i,e,t)=>{i.getProvider(MR).initialize()})),(0,Oc._registerComponent)(new zp.wA(MR,i=>function Kk(i){return{getToken:e=>VD(i,e),addTokenListener:e=>function vx(i,e,t,o){const{app:c}=i,p=ea(c),v={next:t,error:o,type:e};if(Ph(c,Object.assign(Object.assign({},p),{tokenObservers:[...p.tokenObservers,v]})),p.token&&UD(p.token)){const C=p.token;Promise.resolve().then(()=>{t({token:C.token}),bR(i)}).catch(()=>{})}p.cachedTokenPromise.then(()=>bR(i))}(i,"INTERNAL",e),removeTokenListener:e=>_x(i.app,e)}}(i.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Oc.registerVersion)("@firebase/app-check","0.5.12")}();class jD{constructor(){return(0,Di.vb)("app-check")}}typeof window<"u"&&window;var hF=ee(127);const OR=new y.OlP("angularfire2.auth.use-emulator"),NR=new y.OlP("angularfire2.auth.settings"),PR=new y.OlP("angularfire2.auth.tenant-id"),kR=new y.OlP("angularfire2.auth.langugage-code"),FR=new y.OlP("angularfire2.auth.use-device-language"),LR=new y.OlP("angularfire.auth.persistence"),VR=(i,e,t,o,c,p,v,C)=>(0,Zs.cc)(`${i.name}.auth`,"AngularFireAuth",i.name,()=>{const A=e.runOutsideAngular(()=>i.auth());if(t&&A.useEmulator(...t),o&&(A.tenantId=o),A.languageCode=c,p&&A.useDeviceLanguage(),v)for(const[N,B]of Object.entries(v))A.settings[N]=B;return C&&A.setPersistence(C),A},[t,o,c,p,v,C]);let UR=(()=>{class i{constructor(t,o,c,p,v,C,A,N,B,W,ae,fe){const ve=new Fo.x,Ye=Et(void 0).pipe((0,OD.Q)(v.outsideAngular),Lr(()=>p.runOutsideAngular(()=>Promise.resolve().then(ee.bind(ee,2476)))),(0,Mt.U)(()=>(0,Zs.on)(t,p,o)),(0,Mt.U)(Xe=>VR(Xe,p,C,N,B,W,A,ae)),aR({bufferSize:1,refCount:!1}));if($r(c))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Et(null);else{Ye.pipe(Ae()).subscribe();const At=Ye.pipe(Lr(Gt=>Gt.getRedirectResult().then(vn=>vn,()=>null)),Di.iC,aR({bufferSize:1,refCount:!1})),Wt=Ye.pipe(Lr(Gt=>new Pi.y(vn=>({unsubscribe:p.runOutsideAngular(()=>Gt.onAuthStateChanged(xn=>vn.next(xn),xn=>vn.error(xn),()=>vn.complete()))})))),Zt=Ye.pipe(Lr(Gt=>new Pi.y(vn=>({unsubscribe:p.runOutsideAngular(()=>Gt.onIdTokenChanged(xn=>vn.next(xn),xn=>vn.error(xn),()=>vn.complete()))}))));this.authState=At.pipe(uR(Wt),(0,sx.R)(v.outsideAngular),(0,OD.Q)(v.insideAngular)),this.user=At.pipe(uR(Zt),(0,sx.R)(v.outsideAngular),(0,OD.Q)(v.insideAngular)),this.idToken=this.user.pipe(Lr(Gt=>Gt?(0,Un.D)(Gt.getIdToken()):Et(null))),this.idTokenResult=this.user.pipe(Lr(Gt=>Gt?(0,Un.D)(Gt.getIdTokenResult()):Et(null))),this.credential=(0,pk.T)(At,ve,this.authState.pipe(P(Gt=>!Gt))).pipe((0,Mt.U)(Gt=>Gt?.user?Gt:null),(0,sx.R)(v.outsideAngular),(0,OD.Q)(v.insideAngular))}return(0,Zs.pX)(this,Ye,p,{spy:{apply:(Xe,At,Wt)=>{(Xe.startsWith("signIn")||Xe.startsWith("createUser"))&&Wt.then(Zt=>ve.next(Zt))}}})}}return i.\u0275fac=function(t){return new(t||i)(y.LFG(Zs.Dh),y.LFG(Zs.xv,8),y.LFG(y.Lbi),y.LFG(y.R0b),y.LFG(Di.HU),y.LFG(OR,8),y.LFG(NR,8),y.LFG(PR,8),y.LFG(kR,8),y.LFG(FR,8),y.LFG(LR,8),y.LFG(jD,8))},i.\u0275prov=y.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})();function BR(i,e){return function pF(i,e=hb.z){return new Pi.y(t=>{let o;return null!=e?e.schedule(()=>{o=i.onSnapshot({includeMetadataChanges:!0},t)}):o=i.onSnapshot({includeMetadataChanges:!0},t),()=>{o?.()}})}(i,e)}function Cx(i,e){return BR(i,e).pipe((0,Mt.U)(t=>({payload:t,type:"query"})))}function HD(i,e){return Cx(i,e).pipe(el(void 0),fb(),(0,Mt.U)(([t,o])=>{const c=o.payload.docChanges(),p=c.map(v=>({type:v.type,payload:v}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(o.payload.metadata)&&o.payload.docs.forEach((v,C)=>{const A=c.find(B=>B.doc.ref.isEqual(v.ref)),N=t?.payload.docs.find(B=>B.ref.isEqual(v.ref));A&&JSON.stringify(A.doc.metadata)===JSON.stringify(v.metadata)||!A&&N&&JSON.stringify(N.metadata)===JSON.stringify(v.metadata)||p.push({type:"modified",payload:{oldIndex:C,newIndex:C,type:"modified",doc:v}})}),p}))}function jR(i,e,t){return HD(i,t).pipe(Bt((o,c)=>function mF(i,e,t){return e.forEach(o=>{t.indexOf(o.type)>-1&&(i=function yF(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return Dx(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=i.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Dx(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Dx(i,e.oldIndex,1)}return i}(i,o))}),i}(o,c.map(p=>p.payload),e),[]),function hT(i,e=Ua.y){return i=i??fT,(0,hi.e)((t,o)=>{let c,p=!0;t.subscribe((0,Ar.x)(o,v=>{const C=e(v);(p||!i(c,C))&&(p=!1,c=C,o.next(v))}))})}(),(0,Mt.U)(o=>o.map(c=>({type:c.type,payload:c}))))}function Dx(i,e,t,...o){const c=i.slice();return c.splice(e,t,...o),c}function HR(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class $R{constructor(e,t,o){this.ref=e,this.query=t,this.afs=o}stateChanges(e){let t=HD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Mt.U)(o=>o.filter(c=>e.indexOf(c.type)>-1)))),t.pipe(el(void 0),fb(),P(([o,c])=>c.length>0||!o),(0,Mt.U)(([o,c])=>c),Di.iC)}auditTrail(e){return this.stateChanges(e).pipe(Bt((t,o)=>[...t,...o],[]))}snapshotChanges(e){const t=HR(e);return jR(this.query,t,this.afs.schedulers.outsideAngular).pipe(Di.iC)}valueChanges(e={}){return Cx(this.query,this.afs.schedulers.outsideAngular).pipe((0,Mt.U)(t=>t.payload.docs.map(o=>e.idField?Object.assign(Object.assign({},o.data()),{[e.idField]:o.id}):o.data())),Di.iC)}get(e){return(0,Un.D)(this.query.get(e)).pipe(Di.iC)}add(e){return this.ref.add(e)}doc(e){return new GR(this.ref.doc(e),this.afs)}}class GR{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const o=this.ref.collection(e),{ref:c,query:p}=qR(o,t);return new $R(c,p,this.afs)}snapshotChanges(){return function gF(i,e){return BR(i,e).pipe(el(void 0),fb(),(0,Mt.U)(([t,o])=>o.exists?t?.exists?{payload:o,type:"modified"}:{payload:o,type:"added"}:{payload:o,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Di.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Mt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Un.D)(this.ref.get(e)).pipe(Di.iC)}}class vF{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?HD(this.query,this.afs.schedulers.outsideAngular).pipe((0,Mt.U)(t=>t.filter(o=>e.indexOf(o.type)>-1)),P(t=>t.length>0),Di.iC):HD(this.query,this.afs.schedulers.outsideAngular).pipe(Di.iC)}auditTrail(e){return this.stateChanges(e).pipe(Bt((t,o)=>[...t,...o],[]))}snapshotChanges(e){const t=HR(e);return jR(this.query,t,this.afs.schedulers.outsideAngular).pipe(Di.iC)}valueChanges(e={}){return Cx(this.query,this.afs.schedulers.outsideAngular).pipe((0,Mt.U)(o=>o.payload.docs.map(c=>e.idField?Object.assign({[e.idField]:c.id},c.data()):c.data())),Di.iC)}get(e){return(0,Un.D)(this.query.get(e)).pipe(Di.iC)}}const _F=new y.OlP("angularfire2.enableFirestorePersistence"),wF=new y.OlP("angularfire2.firestore.persistenceSettings"),bF=new y.OlP("angularfire2.firestore.settings"),IF=new y.OlP("angularfire2.firestore.use-emulator");function qR(i,e=(t=>t)){return{query:e(i),ref:i}}let EF=(()=>{class i{constructor(t,o,c,p,v,C,A,N,B,W,ae,fe,ve,Ye,Xe,At,Wt){this.schedulers=A;const Zt=(0,Zs.on)(t,C,o),Gt=B;W&&VR(Zt,C,ae,ve,Ye,Xe,fe,At),[this.firestore,this.persistenceEnabled$]=(0,Zs.cc)(`${Zt.name}.firestore`,"AngularFirestore",Zt.name,()=>{const vn=C.runOutsideAngular(()=>Zt.firestore());if(p&&vn.settings(p),Gt&&vn.useEmulator(...Gt),c&&!$r(v)){const xn=()=>{try{return(0,Un.D)(vn.enablePersistence(N||void 0).then(()=>!0,()=>!1))}catch(eo){return typeof console<"u"&&console.warn(eo),Et(!1)}};return[vn,C.runOutsideAngular(xn)]}return[vn,Et(!1)]},[p,Gt,c])}collection(t,o){let c;c="string"==typeof t?this.firestore.collection(t):t;const{ref:p,query:v}=qR(c,o),C=this.schedulers.ngZone.run(()=>p);return new $R(C,v,this)}collectionGroup(t,o){const c=o||(v=>v),p=this.firestore.collectionGroup(t);return new vF(c(p),this)}doc(t){let o;o="string"==typeof t?this.firestore.doc(t):t;const c=this.schedulers.ngZone.run(()=>o);return new GR(c,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(t){return new(t||i)(y.LFG(Zs.Dh),y.LFG(Zs.xv,8),y.LFG(_F,8),y.LFG(bF,8),y.LFG(y.Lbi),y.LFG(y.R0b),y.LFG(Di.HU),y.LFG(wF,8),y.LFG(IF,8),y.LFG(UR,8),y.LFG(OR,8),y.LFG(NR,8),y.LFG(PR,8),y.LFG(kR,8),y.LFG(FR,8),y.LFG(LR,8),y.LFG(jD,8))},i.\u0275prov=y.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),Tx=(()=>{class i{constructor(t,o){this._http=t,this.fbs=o,this.BaseURL="http://localhost:3000/"}StoreFiles(t){return this._http.post(this.BaseURL+"addfile",t)}folderFiles(t,o){return this._http.post(this.BaseURL+`addfile/${o}`,t)}getStoredFiles(t){return this._http.post(this.BaseURL+"getfiles",{token:t})}getfav(t){return this._http.post(this.BaseURL+"getfav",{token:t})}getfolderFiles(t){return this._http.get(this.BaseURL+`folderFiles/${t}`)}delFile(t){return this._http.delete(this.BaseURL+"delFile",{body:{id:t}})}addFolder(t){return this._http.post(this.BaseURL+"addFolder",t)}Folders(){return this._http.get(this.BaseURL+"Folders")}delFolder(t){return this._http.delete(this.BaseURL+"delFolder",{body:{id:t}})}fav(t){return this._http.post(this.BaseURL+"fav",t)}}return i.\u0275fac=function(t){return new(t||i)(y.LFG(a0),y.LFG(EF))},i.\u0275prov=y.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const zR="firebasestorage.googleapis.com",WR="storageBucket";class po extends An.ZR{constructor(e,t){super(Sx(e),`Firebase Storage: ${t} (${Sx(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,po.prototype)}_codeEquals(e){return Sx(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function Sx(i){return"storage/"+i}function Ax(){return new po("unknown","An unknown error occurred, please check the error payload for server response.")}function ZR(){return new po("canceled","User canceled the upload/download.")}function KR(){return new po("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Tw(i){return new po("invalid-argument",i)}function YR(){return new po("app-deleted","The Firebase app was deleted.")}function QR(i){return new po("invalid-root-operation","The operation '"+i+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function hE(i,e){return new po("invalid-format","String does not match format '"+i+"': "+e)}function fE(i){throw new po("internal-error","Internal error: "+i)}class iu{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let o;try{o=iu.makeFromUrl(e,t)}catch{return new iu(e,"")}if(""===o.path)return o;throw function PF(i){return new po("invalid-default-bucket","Invalid default bucket '"+i+"'.")}(e)}static makeFromUrl(e,t){let o=null;const c="([A-Za-z0-9.\\-_]+)",C=new RegExp("^gs://"+c+"(/(.*))?$","i");function N(Gt){Gt.path_=decodeURIComponent(Gt.path)}const W=t.replace(/[.]/g,"\\."),Zt=[{regex:C,indices:{bucket:1,path:3},postModify:function p(Gt){"/"===Gt.path.charAt(Gt.path.length-1)&&(Gt.path_=Gt.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${W}/v[A-Za-z0-9_]+/b/${c}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:N},{regex:new RegExp(`^https?://${t===zR?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${c}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:N}];for(let Gt=0;Gt<Zt.length;Gt++){const vn=Zt[Gt],xn=vn.regex.exec(e);if(xn){let Fh=xn[vn.indices.path];Fh||(Fh=""),o=new iu(xn[vn.indices.bucket],Fh),vn.postModify(o);break}}if(null==o)throw function NF(i){return new po("invalid-url","Invalid URL '"+i+"'.")}(e);return o}}class VF{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function $D(i){return"string"==typeof i||i instanceof String}function JR(i){return xx()&&i instanceof Blob}function xx(){return typeof Blob<"u"}function Mx(i,e,t,o){if(o<e)throw Tw(`Invalid value for '${i}'. Expected ${e} or greater.`);if(o>t)throw Tw(`Invalid value for '${i}'. Expected ${t} or less.`)}function fg(i,e,t){let o=e;return null==t&&(o=`https://${e}`),`${t}://${o}/v0${i}`}function XR(i){const e=encodeURIComponent;let t="?";for(const o in i)i.hasOwnProperty(o)&&(t=t+(e(o)+"=")+e(i[o])+"&");return t=t.slice(0,-1),t}var Wm=(()=>(function(i){i[i.NO_ERROR=0]="NO_ERROR",i[i.NETWORK_ERROR=1]="NETWORK_ERROR",i[i.ABORT=2]="ABORT"}(Wm||(Wm={})),Wm))();class GF{constructor(e,t,o,c,p,v,C,A,N,B,W){this.url_=e,this.method_=t,this.headers_=o,this.body_=c,this.successCodes_=p,this.additionalRetryCodes_=v,this.callback_=C,this.errorCallback_=A,this.timeout_=N,this.progressCallback_=B,this.connectionFactory_=W,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((ae,fe)=>{this.resolve_=ae,this.reject_=fe,this.start_()})}start_(){const t=(o,c)=>{const p=this.resolve_,v=this.reject_,C=c.connection;if(c.wasSuccessCode)try{const A=this.callback_(C,C.getResponse());!function jF(i){return void 0!==i}(A)?p():p(A)}catch(A){v(A)}else if(null!==C){const A=Ax();A.serverResponse=C.getErrorText(),v(this.errorCallback_?this.errorCallback_(C,A):A)}else v(c.canceled?this.appDelete_?YR():ZR():function OF(){return new po("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new GD(!1,null,!0)):this.backoffId_=function UF(i,e,t){let o=1,c=null,p=null,v=!1,C=0;function A(){return 2===C}let N=!1;function B(...Xe){N||(N=!0,e.apply(null,Xe))}function W(Xe){c=setTimeout(()=>{c=null,i(fe,A())},Xe)}function ae(){p&&clearTimeout(p)}function fe(Xe,...At){if(N)return void ae();if(Xe)return ae(),void B.call(null,Xe,...At);if(A()||v)return ae(),void B.call(null,Xe,...At);let Zt;o<64&&(o*=2),1===C?(C=2,Zt=0):Zt=1e3*(o+Math.random()),W(Zt)}let ve=!1;function Ye(Xe){ve||(ve=!0,ae(),!N&&(null!==c?(Xe||(C=2),clearTimeout(c),W(0)):Xe||(C=1)))}return W(0),p=setTimeout(()=>{v=!0,Ye(!0)},t),Ye}((o,c)=>{if(c)return void o(!1,new GD(!1,null,!0));const p=this.connectionFactory_();this.pendingConnection_=p;const v=C=>{null!==this.progressCallback_&&this.progressCallback_(C.loaded,C.lengthComputable?C.total:-1)};null!==this.progressCallback_&&p.addUploadProgressListener(v),p.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&p.removeUploadProgressListener(v),this.pendingConnection_=null;const C=p.getErrorCode()===Wm.NO_ERROR,A=p.getStatus();if(!C||this.isRetryStatusCode_(A)){const B=p.getErrorCode()===Wm.ABORT;return void o(!1,new GD(!1,null,B))}const N=-1!==this.successCodes_.indexOf(A);o(!0,new GD(N,p))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function BF(i){i(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,c=-1!==[408,429].indexOf(e),p=-1!==this.additionalRetryCodes_.indexOf(e);return t||c||p}}class GD{constructor(e,t,o){this.wasSuccessCode=e,this.connection=t,this.canceled=!!o}}function QF(...i){const e=function YF(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let o=0;o<i.length;o++)t.append(i[o]);return t.getBlob()}if(xx())return new Blob(i);throw new po("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Il={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Rx{constructor(e,t){this.data=e,this.contentType=t||null}}function Ox(i,e){switch(i){case Il.RAW:return new Rx(eO(e));case Il.BASE64:case Il.BASE64URL:return new Rx(tO(i,e));case Il.DATA_URL:return new Rx(function tL(i){const e=new nO(i);return e.base64?tO(Il.BASE64,e.rest):function eL(i){let e;try{e=decodeURIComponent(i)}catch{throw hE(Il.DATA_URL,"Malformed data URL.")}return eO(e)}(e.rest)}(e),function nL(i){return new nO(i).contentType}(e))}throw Ax()}function eO(i){const e=[];for(let t=0;t<i.length;t++){let o=i.charCodeAt(t);o<=127?e.push(o):o<=2047?e.push(192|o>>6,128|63&o):55296==(64512&o)?t<i.length-1&&56320==(64512&i.charCodeAt(t+1))?(o=65536|(1023&o)<<10|1023&i.charCodeAt(++t),e.push(240|o>>18,128|o>>12&63,128|o>>6&63,128|63&o)):e.push(239,191,189):56320==(64512&o)?e.push(239,191,189):e.push(224|o>>12,128|o>>6&63,128|63&o)}return new Uint8Array(e)}function tO(i,e){switch(i){case Il.BASE64:{const c=-1!==e.indexOf("-"),p=-1!==e.indexOf("_");if(c||p)throw hE(i,"Invalid character '"+(c?"-":"_")+"' found: is it base64url encoded?");break}case Il.BASE64URL:{const c=-1!==e.indexOf("+"),p=-1!==e.indexOf("/");if(c||p)throw hE(i,"Invalid character '"+(c?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function XF(i){return atob(i)}(e)}catch{throw hE(i,"Invalid character found")}const o=new Uint8Array(t.length);for(let c=0;c<t.length;c++)o[c]=t.charCodeAt(c);return o}class nO{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw hE(Il.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const o=t[1]||null;null!=o&&(this.base64=function rL(i,e){return i.length>=e.length&&i.substring(i.length-e.length)===e}(o,";base64"),this.contentType=this.base64?o.substring(0,o.length-7):o),this.rest=e.substring(e.indexOf(",")+1)}}class Kf{constructor(e,t){let o=0,c="";JR(e)?(this.data_=e,o=e.size,c=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),o=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),o=e.length),this.size_=o,this.type_=c}size(){return this.size_}type(){return this.type_}slice(e,t){if(JR(this.data_)){const c=function JF(i,e,t){return i.webkitSlice?i.webkitSlice(e,t):i.mozSlice?i.mozSlice(e,t):i.slice?i.slice(e,t):null}(this.data_,e,t);return null===c?null:new Kf(c)}{const o=new Uint8Array(this.data_.buffer,e,t-e);return new Kf(o,!0)}}static getBlob(...e){if(xx()){const t=e.map(o=>o instanceof Kf?o.data_:o);return new Kf(QF.apply(null,t))}{const t=e.map(v=>$D(v)?Ox(Il.RAW,v).data:v.data_);let o=0;t.forEach(v=>{o+=v.byteLength});const c=new Uint8Array(o);let p=0;return t.forEach(v=>{for(let C=0;C<v.length;C++)c[p++]=v[C]}),new Kf(c,!0)}}uploadData(){return this.data_}}function Nx(i){let e;try{e=JSON.parse(i)}catch{return null}return function $F(i){return"object"==typeof i&&!Array.isArray(i)}(e)?e:null}function rO(i){const e=i.lastIndexOf("/",i.length-2);return-1===e?i:i.slice(e+1)}function sL(i,e){return e}class Bu{constructor(e,t,o,c){this.server=e,this.local=t||e,this.writable=!!o,this.xform=c||sL}}let qD=null;function pE(){if(qD)return qD;const i=[];i.push(new Bu("bucket")),i.push(new Bu("generation")),i.push(new Bu("metageneration")),i.push(new Bu("name","fullPath",!0));const t=new Bu("name");t.xform=function e(p,v){return function aL(i){return!$D(i)||i.length<2?i:rO(i)}(v)},i.push(t);const c=new Bu("size");return c.xform=function o(p,v){return void 0!==v?Number(v):v},i.push(c),i.push(new Bu("timeCreated")),i.push(new Bu("updated")),i.push(new Bu("md5Hash",null,!0)),i.push(new Bu("cacheControl",null,!0)),i.push(new Bu("contentDisposition",null,!0)),i.push(new Bu("contentEncoding",null,!0)),i.push(new Bu("contentLanguage",null,!0)),i.push(new Bu("contentType",null,!0)),i.push(new Bu("metadata","customMetadata",!0)),qD=i,qD}function iO(i,e,t){const o=Nx(e);return null===o?null:function cL(i,e,t){const o={type:"file"},c=t.length;for(let p=0;p<c;p++){const v=t[p];o[v.local]=v.xform(o,e[v.server])}return function uL(i,e){Object.defineProperty(i,"ref",{get:function t(){const p=new iu(i.bucket,i.fullPath);return e._makeStorageReference(p)}})}(o,i),o}(i,o,t)}function Px(i,e){const t={},o=e.length;for(let c=0;c<o;c++){const p=e[c];p.writable&&(t[p.server]=i[p.local])}return JSON.stringify(t)}const oO="prefixes";class Yf{constructor(e,t,o,c){this.url=e,this.method=t,this.handler=o,this.timeout=c,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Qf(i){if(!i)throw Ax()}function zD(i,e){return function t(o,c){const p=iO(i,c,e);return Qf(null!==p),p}}function Sw(i){return function e(t,o){let c;return c=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function MF(){return new po("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function xF(){return new po("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function AF(i){return new po("quota-exceeded","Quota for bucket '"+i+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(i.bucket):403===t.getStatus()?function RF(i){return new po("unauthorized","User does not have permission to access '"+i+"'.")}(i.path):o,c.serverResponse=o.serverResponse,c}}function gE(i){const e=Sw(i);return function t(o,c){let p=e(o,c);return 404===o.getStatus()&&(p=function SF(i){return new po("object-not-found","Object '"+i+"' does not exist.")}(i.path)),p.serverResponse=c.serverResponse,p}}function aO(i,e,t){const c=fg(e.fullServerUrl(),i.host,i._protocol),v=i.maxOperationRetryTime,C=new Yf(c,"GET",zD(i,t),v);return C.errorHandler=gE(e),C}function gL(i,e,t,o,c){const p={};p.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(p.delimiter=t),o&&(p.pageToken=o),c&&(p.maxResults=c);const C=fg(e.bucketOnlyServerUrl(),i.host,i._protocol),N=i.maxOperationRetryTime,B=new Yf(C,"GET",function fL(i,e){return function t(o,c){const p=function hL(i,e,t){const o=Nx(t);return null===o?null:function dL(i,e,t){const o={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[oO])for(const c of t[oO]){const p=c.replace(/\/$/,""),v=i._makeStorageReference(new iu(e,p));o.prefixes.push(v)}if(t.items)for(const c of t.items){const p=i._makeStorageReference(new iu(e,c.name));o.items.push(p)}return o}(i,e,o)}(i,e,c);return Qf(null!==p),p}}(i,e.bucket),N);return B.urlParams=p,B.errorHandler=Sw(e),B}function cO(i,e,t){const o=Object.assign({},t);return o.fullPath=i.path,o.size=e.size(),o.contentType||(o.contentType=function _L(i,e){return i&&i.contentType||e&&e.type()||"application/octet-stream"}(null,e)),o}class WD{constructor(e,t,o,c){this.current=e,this.total=t,this.finalized=!!o,this.metadata=c||null}}function kx(i,e){let t=null;try{t=i.getResponseHeader("X-Goog-Upload-Status")}catch{Qf(!1)}return Qf(!!t&&-1!==(e||["active"]).indexOf(t)),t}const EL={STATE_CHANGED:"state_changed"},ju={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Fx(i){switch(i){case"running":case"pausing":case"canceling":return ju.RUNNING;case"paused":return ju.PAUSED;case"success":return ju.SUCCESS;case"canceled":return ju.CANCELED;default:return ju.ERROR}}class CL{constructor(e,t,o){if(function HF(i){return"function"==typeof i}(e)||null!=t||null!=o)this.next=e,this.error=t??void 0,this.complete=o??void 0;else{const p=e;this.next=p.next,this.error=p.error,this.complete=p.complete}}}function Aw(i){return(...e)=>{Promise.resolve().then(()=>i(...e))}}class TL extends class DL{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Wm.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Wm.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Wm.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,o,c){if(this.sent_)throw fE("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==c)for(const p in c)c.hasOwnProperty(p)&&this.xhr_.setRequestHeader(p,c[p].toString());return void 0!==o?this.xhr_.send(o):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw fE("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw fE("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw fE("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw fE("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function kh(){return new TL}class fO{constructor(e,t,o=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=o,this._mappings=pE(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=c=>{this._request=void 0,this._chunkMultiplier=1,c._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=c,this._transition("error"))},this._metadataErrorHandler=c=>{this._request=void 0,c._codeEquals("canceled")?this.completeTransitions_():(this._error=c,this._transition("error"))},this._promise=new Promise((c,p)=>{this._resolve=c,this._reject=p,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,o])=>{switch(this._state){case"running":e(t,o);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const o=function wL(i,e,t,o,c){const p=e.bucketOnlyServerUrl(),v=cO(e,o,c),C={name:v.fullPath},A=fg(p,i.host,i._protocol),B={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${o.size()}`,"X-Goog-Upload-Header-Content-Type":v.contentType,"Content-Type":"application/json; charset=utf-8"},W=Px(v,t),ve=new Yf(A,"POST",function fe(Ye){let Xe;kx(Ye);try{Xe=Ye.getResponseHeader("X-Goog-Upload-URL")}catch{Qf(!1)}return Qf($D(Xe)),Xe},i.maxUploadRetryTime);return ve.urlParams=C,ve.headers=B,ve.body=W,ve.errorHandler=Sw(e),ve}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),c=this._ref.storage._makeRequest(o,kh,e,t);this._request=c,c.getPromise().then(p=>{this._request=void 0,this._uploadUrl=p,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,o)=>{const c=function bL(i,e,t,o){const A=new Yf(t,"POST",function p(N){const B=kx(N,["active","final"]);let W=null;try{W=N.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Qf(!1)}W||Qf(!1);const ae=Number(W);return Qf(!isNaN(ae)),new WD(ae,o.size(),"final"===B)},i.maxUploadRetryTime);return A.headers={"X-Goog-Upload-Command":"query"},A.errorHandler=Sw(e),A}(this._ref.storage,this._ref._location,e,this._blob),p=this._ref.storage._makeRequest(c,kh,t,o);this._request=p,p.getPromise().then(v=>{this._request=void 0,this._updateProgress(v.current),this._needToFetchStatus=!1,v.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new WD(this._transferred,this._blob.size()),o=this._uploadUrl;this._resolveToken((c,p)=>{let v;try{v=function IL(i,e,t,o,c,p,v,C){const A=new WD(0,0);if(v?(A.current=v.current,A.total=v.total):(A.current=0,A.total=o.size()),o.size()!==A.total)throw function FF(){return new po("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const N=A.total-A.current;let B=N;c>0&&(B=Math.min(B,c));const W=A.current,ve={"X-Goog-Upload-Command":B===N?"upload, finalize":"upload","X-Goog-Upload-Offset":`${A.current}`},Ye=o.slice(W,W+B);if(null===Ye)throw KR();const Zt=new Yf(t,"POST",function Xe(Gt,vn){const xn=kx(Gt,["active","final"]),eo=A.current+B,Fh=o.size();let Bx;return Bx="final"===xn?zD(e,p)(Gt,vn):null,new WD(eo,Fh,"final"===xn,Bx)},e.maxUploadRetryTime);return Zt.headers=ve,Zt.body=Ye.uploadData(),Zt.progressCallback=C||null,Zt.errorHandler=Sw(i),Zt}(this._ref._location,this._ref.storage,o,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(A){return this._error=A,void this._transition("error")}const C=this._ref.storage._makeRequest(v,kh,c,p);this._request=C,C.getPromise().then(A=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(A.current),A.finalized?(this._metadata=A.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const o=aO(this._ref.storage,this._ref._location,this._mappings),c=this._ref.storage._makeRequest(o,kh,e,t);this._request=c,c.getPromise().then(p=>{this._request=void 0,this._metadata=p,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const o=function lO(i,e,t,o,c){const p=e.bucketOnlyServerUrl(),v={"X-Goog-Upload-Protocol":"multipart"},A=function C(){let Zt="";for(let Gt=0;Gt<2;Gt++)Zt+=Math.random().toString().slice(2);return Zt}();v["Content-Type"]="multipart/related; boundary="+A;const N=cO(e,o,c),B=Px(N,t),fe=Kf.getBlob("--"+A+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+B+"\r\n--"+A+"\r\nContent-Type: "+N.contentType+"\r\n\r\n",o,"\r\n--"+A+"--");if(null===fe)throw KR();const ve={name:N.fullPath},Ye=fg(p,i.host,i._protocol),At=i.maxUploadRetryTime,Wt=new Yf(Ye,"POST",zD(i,t),At);return Wt.urlParams=ve,Wt.headers=v,Wt.body=fe.uploadData(),Wt.errorHandler=Sw(e),Wt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),c=this._ref.storage._makeRequest(o,kh,e,t);this._request=c,c.getPromise().then(p=>{this._request=void 0,this._metadata=p,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=ZR(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=Fx(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,o,c){const p=new CL(t||void 0,o||void 0,c||void 0);return this._addObserver(p),()=>{this._removeObserver(p)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(Fx(this._state)){case ju.SUCCESS:Aw(this._resolve.bind(null,this.snapshot))();break;case ju.CANCELED:case ju.ERROR:Aw(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Fx(this._state)){case ju.RUNNING:case ju.PAUSED:e.next&&Aw(e.next.bind(e,this.snapshot))();break;case ju.SUCCESS:e.complete&&Aw(e.complete.bind(e))();break;default:e.error&&Aw(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class i_{constructor(e,t){this._service=e,this._location=t instanceof iu?t:iu.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new i_(e,t)}get root(){const e=new iu(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return rO(this._location.path)}get storage(){return this._service}get parent(){const e=function iL(i){if(0===i.length)return null;const e=i.lastIndexOf("/");return-1===e?"":i.slice(0,e)}(this._location.path);if(null===e)return null;const t=new iu(this._location.bucket,e);return new i_(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw QR(e)}}function gO(i,e,t){return Lx.apply(this,arguments)}function Lx(){return Lx=(0,Ge.Z)(function*(i,e,t){const c=yield mO(i,{pageToken:t});e.prefixes.push(...c.prefixes),e.items.push(...c.items),null!=c.nextPageToken&&(yield gO(i,e,c.nextPageToken))}),Lx.apply(this,arguments)}function mO(i,e){null!=e&&"number"==typeof e.maxResults&&Mx("options.maxResults",1,1e3,e.maxResults);const t=e||{},o=gL(i.storage,i._location,"/",t.pageToken,t.maxResults);return i.storage.makeRequestWithTokens(o,kh)}function VL(i){i._throwIfRoot("getDownloadURL");const e=function mL(i,e,t){const c=fg(e.fullServerUrl(),i.host,i._protocol),v=i.maxOperationRetryTime,C=new Yf(c,"GET",function pL(i,e){return function t(o,c){const p=iO(i,c,e);return Qf(null!==p),function lL(i,e,t,o){const c=Nx(e);if(null===c||!$D(c.downloadTokens))return null;const p=c.downloadTokens;if(0===p.length)return null;const v=encodeURIComponent;return p.split(",").map(N=>{const W=i.fullPath;return fg("/b/"+v(i.bucket)+"/o/"+v(W),t,o)+XR({alt:"media",token:N})})[0]}(p,c,i.host,i._protocol)}}(i,t),v);return C.errorHandler=gE(e),C}(i.storage,i._location,pE());return i.storage.makeRequestWithTokens(e,kh).then(t=>{if(null===t)throw function LF(){return new po("no-download-url","The given file does not have any download URLs.")}();return t})}function yO(i,e){const t=function oL(i,e){const t=e.split("/").filter(o=>o.length>0).join("/");return 0===i.length?t:i+"/"+t}(i._location.path,e),o=new iu(i._location.bucket,t);return new i_(i.storage,o)}function vO(i,e){if(i instanceof Vx){const t=i;if(null==t._bucket)throw function kF(){return new po("no-default-bucket","No default bucket found. Did you set the '"+WR+"' property when initializing the app?")}();const o=new i_(t,t._bucket);return null!=e?vO(o,e):o}return void 0!==e?yO(i,e):i}function HL(i,e){if(e&&function BL(i){return/^[A-Za-z]+:\/\//.test(i)}(e)){if(i instanceof Vx)return function jL(i,e){return new i_(i,e)}(i,e);throw Tw("To use ref(service, url), the first argument must be a Storage instance.")}return vO(i,e)}function _O(i,e){const t=e?.[WR];return null==t?null:iu.makeFromBucketSpec(t,i)}class Vx{constructor(e,t,o,c,p){this.app=e,this._authProvider=t,this._appCheckProvider=o,this._url=c,this._firebaseVersion=p,this._bucket=null,this._host=zR,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=c?iu.makeFromBucketSpec(c,this._host):_O(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?iu.makeFromBucketSpec(this._url,e):_O(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Mx("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Mx("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,Ge.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const o=yield t.getToken();if(null!==o)return o.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,Ge.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new i_(this,e)}_makeRequest(e,t,o,c){if(this._deleted)return new VF(YR());{const p=function KF(i,e,t,o,c,p){const v=XR(i.urlParams),C=i.url+v,A=Object.assign({},i.headers);return function WF(i,e){e&&(i["X-Firebase-GMPID"]=e)}(A,e),function qF(i,e){null!==e&&e.length>0&&(i.Authorization="Firebase "+e)}(A,t),function zF(i,e){i["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(A,p),function ZF(i,e){null!==e&&(i["X-Firebase-AppCheck"]=e)}(A,o),new GF(C,i.method,A,i.body,i.successCodes,i.additionalRetryCodes,i.handler,i.errorHandler,i.timeout,i.progressCallback,c)}(e,this._appId,o,c,t,this._firebaseVersion);return this._requests.add(p),p.getPromise().then(()=>this._requests.delete(p),()=>this._requests.delete(p)),p}}makeRequestWithTokens(e,t){var o=this;return(0,Ge.Z)(function*(){const[c,p]=yield Promise.all([o._getAuthToken(),o._getAppCheckToken()]);return o._makeRequest(e,t,c,p).getPromise()})()}}const wO="@firebase/storage";function EO(i,e){return HL(i=(0,An.m9)(i),e)}function XL(i,{instanceIdentifier:e}){const t=i.getProvider("app").getImmediate(),o=i.getProvider("auth-internal"),c=i.getProvider("app-check-internal");return new Vx(t,o,c,e,Oc.SDK_VERSION)}!function e2(){(0,Oc._registerComponent)(new zp.wA("storage",XL,"PUBLIC").setMultipleInstances(!0)),(0,Oc.registerVersion)(wO,"0.9.9",""),(0,Oc.registerVersion)(wO,"0.9.9","esm2017")}();class ZD{constructor(e,t,o){this._delegate=e,this.task=t,this.ref=o}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class CO{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new ZD(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(o=>{if(e)return e(new ZD(o,this,this._ref))},t)}on(e,t,o,c){let p;return t&&(p="function"==typeof t?v=>t(new ZD(v,this,this._ref)):{next:t.next?v=>t.next(new ZD(v,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,p,o||void 0,c||void 0)}}class DO{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new pg(e,this._service))}get items(){return this._delegate.items.map(e=>new pg(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class pg{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function QL(i,e){return yO(i,e)}(this._delegate,e);return new pg(t,this.storage)}get root(){return new pg(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new pg(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new CO(function GL(i,e,t){return function NL(i,e,t){return i._throwIfRoot("uploadBytesResumable"),new fO(i,new Kf(e),t)}(i=(0,An.m9)(i),e,t)}(this._delegate,e,t),this)}putString(e,t=Il.RAW,o){this._throwIfRoot("putString");const c=Ox(t,e),p=Object.assign({},o);return null==p.contentType&&null!=c.contentType&&(p.contentType=c.contentType),new CO(new fO(this._delegate,new Kf(c.data,!0),p),this)}listAll(){return function ZL(i){return function kL(i){const e={prefixes:[],items:[]};return gO(i,e).then(()=>e)}(i=(0,An.m9)(i))}(this._delegate).then(e=>new DO(e,this.storage))}list(e){return function WL(i,e){return mO(i=(0,An.m9)(i),e)}(this._delegate,e||void 0).then(t=>new DO(t,this.storage))}getMetadata(){return function qL(i){return function FL(i){i._throwIfRoot("getMetadata");const e=aO(i.storage,i._location,pE());return i.storage.makeRequestWithTokens(e,kh)}(i=(0,An.m9)(i))}(this._delegate)}updateMetadata(e){return function zL(i,e){return function LL(i,e){i._throwIfRoot("updateMetadata");const t=function yL(i,e,t,o){const p=fg(e.fullServerUrl(),i.host,i._protocol),C=Px(t,o),N=i.maxOperationRetryTime,B=new Yf(p,"PATCH",zD(i,o),N);return B.headers={"Content-Type":"application/json; charset=utf-8"},B.body=C,B.errorHandler=gE(e),B}(i.storage,i._location,e,pE());return i.storage.makeRequestWithTokens(t,kh)}(i=(0,An.m9)(i),e)}(this._delegate,e)}getDownloadURL(){return function KL(i){return VL(i=(0,An.m9)(i))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function YL(i){return function UL(i){i._throwIfRoot("deleteObject");const e=function vL(i,e){const o=fg(e.fullServerUrl(),i.host,i._protocol),C=new Yf(o,"DELETE",function v(A,N){},i.maxOperationRetryTime);return C.successCodes=[200,204],C.errorHandler=gE(e),C}(i.storage,i._location);return i.storage.makeRequestWithTokens(e,kh)}(i=(0,An.m9)(i))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw QR(e)}}class TO{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(SO(e))throw Tw("ref() expected a child path but got a URL, use refFromURL instead.");return new pg(EO(this._delegate,e),this)}refFromURL(e){if(!SO(e))throw Tw("refFromURL() expected a full URL but got a child path, use ref() instead.");try{iu.makeFromUrl(e,this._delegate.host)}catch{throw Tw("refFromUrl() expected a valid full URL but got an invalid one.")}return new pg(EO(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,o={}){!function JL(i,e,t,o={}){!function $L(i,e,t,o={}){i.host=`${e}:${t}`,i._protocol="http";const{mockUserToken:c}=o;c&&(i._overrideAuthToken="string"==typeof c?c:(0,An.Sg)(c,i.app.options.projectId))}(i,e,t,o)}(this._delegate,e,t,o)}}function SO(i){return/^[A-Za-z]+:\/\//.test(i)}function i2(i,{instanceIdentifier:e}){const t=i.getProvider("app-compat").getImmediate(),o=i.getProvider("storage").getImmediate({identifier:e});return new TO(t,o)}function AO(i){const e=function s2(i){return new Pi.y(e=>{const t=v=>e.next(v);t(i.snapshot);const p=i.on("state_changed",t);return i.then(v=>{t(v),e.complete()},v=>{t(i.snapshot),(v=>{e.error(v)})(v)}),function(){p()}}).pipe(function CF(i,e=hb.z){return(0,hi.e)((t,o)=>{let c=null,p=null,v=null;const C=()=>{if(c){c.unsubscribe(),c=null;const N=p;p=null,o.next(N)}};function A(){const N=v+i,B=e.now();if(B<N)return c=this.schedule(void 0,N-B),void o.add(c);C()}t.subscribe((0,Ar.x)(o,N=>{p=N,v=e.now(),c||(c=e.schedule(A,i),o.add(c))},()=>{C(),o.complete()},void 0,()=>{p=c=null}))})}(0))}(i);return{task:i,then:i.then.bind(i),catch:i.catch.bind(i),pause:i.pause.bind(i),cancel:i.cancel.bind(i),resume:i.resume.bind(i),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,Mt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function KD(i){return{getDownloadURL:()=>Et(void 0).pipe(Di.fc,Lr(()=>i.getDownloadURL()),Di.iC),getMetadata:()=>Et(void 0).pipe(Di.fc,Lr(()=>i.getMetadata()),Di.iC),delete:()=>(0,Un.D)(i.delete()),child:e=>KD(i.child(e)),updateMetadata:e=>(0,Un.D)(i.updateMetadata(e)),put:(e,t)=>AO(i.put(e,t)),putString:(e,t,o)=>AO(i.putString(e,t,o)),list:e=>(0,Un.D)(i.list(e)),listAll:()=>(0,Un.D)(i.listAll())}}!function o2(i){const e={TaskState:ju,TaskEvent:EL,StringFormat:Il,Storage:TO,Reference:pg};i.INTERNAL.registerComponent(new zp.wA("storage-compat",i2,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),i.registerVersion("@firebase/storage-compat","0.1.17")}(gb.Z);const a2=new y.OlP("angularfire2.storageBucket"),u2=new y.OlP("angularfire2.storage.maxUploadRetryTime"),c2=new y.OlP("angularfire2.storage.maxOperationRetryTime"),l2=new y.OlP("angularfire2.storage.use-emulator");let Ux=(()=>{class i{constructor(t,o,c,p,v,C,A,N,B,W){const ae=(0,Zs.on)(t,v,o);this.storage=(0,Zs.cc)(`${ae.name}.storage.${c}`,"AngularFireStorage",ae.name,()=>{const fe=v.runOutsideAngular(()=>ae.storage(c||void 0)),ve=B;return ve&&fe.useEmulator(...ve),A&&fe.setMaxUploadRetryTime(A),N&&fe.setMaxOperationRetryTime(N),fe},[A,N])}ref(t){return KD(this.storage.ref(t))}refFromURL(t){return KD(this.storage.refFromURL(t))}upload(t,o,c){return KD(this.storage.ref(t)).put(o,c)}}return i.\u0275fac=function(t){return new(t||i)(y.LFG(Zs.Dh),y.LFG(Zs.xv,8),y.LFG(a2,8),y.LFG(y.Lbi),y.LFG(y.R0b),y.LFG(Di.HU),y.LFG(u2,8),y.LFG(c2,8),y.LFG(l2,8),y.LFG(jD,8))},i.\u0275prov=y.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),d2=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=y.oAB({type:i}),i.\u0275inj=y.cJS({}),i})(),h2=(()=>{class i{constructor(){hF.Z.registerVersion("angularfire",Di.q4.full,"gcs-compat")}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=y.oAB({type:i}),i.\u0275inj=y.cJS({providers:[Ux],imports:[d2]}),i})();function f2(i,e){if(1&i){const t=y.EpF();y.TgZ(0,"div",44)(1,"div",45)(2,"div",46),y.NdJ("click",function(){const p=y.CHM(t).$implicit,v=y.oxw();return y.KtG(v.folderID(p._id))}),y._UZ(3,"img",47),y.qZA(),y.TgZ(4,"div",48)(5,"h4",49),y._uU(6),y.qZA(),y.TgZ(7,"div",50)(8,"span",51),y._UZ(9,"i",52),y.qZA(),y.TgZ(10,"ul",53)(11,"li",54),y.NdJ("click",function(){const p=y.CHM(t).$implicit,v=y.oxw();return y.KtG(v.delFolder(p._id))}),y._UZ(12,"i",55),y.qZA(),y.TgZ(13,"li"),y._UZ(14,"hr",10),y.qZA(),y.TgZ(15,"li",54),y.NdJ("click",function(){const p=y.CHM(t).$implicit,v=y.oxw();return y.KtG(v.fav(p))}),y.TgZ(16,"label",56),y._uU(17,"addFavorites"),y.qZA()()()(),y.TgZ(18,"p",57),y._uU(19),y.qZA()()()()}if(2&i){const t=e.$implicit;y.xp6(2),y.MGl("routerLink","/home/folder/",t._id,""),y.xp6(4),y.hij(" ",t.title," "),y.xp6(13),y.Oqu(t.depart)}}function p2(i,e){1&i&&y._UZ(0,"i",70)}function g2(i,e){1&i&&y._UZ(0,"i",71)}function m2(i,e){1&i&&y._UZ(0,"i",72)}function y2(i,e){1&i&&y._UZ(0,"i",73)}function v2(i,e){1&i&&y._UZ(0,"i",74)}function _2(i,e){1&i&&y._UZ(0,"i",71)}function w2(i,e){1&i&&y._UZ(0,"i",71)}function b2(i,e){1&i&&y._UZ(0,"i",75)}function I2(i,e){1&i&&y._UZ(0,"i",73)}function E2(i,e){1&i&&y._UZ(0,"i",76)}function C2(i,e){1&i&&y._UZ(0,"i",77)}function D2(i,e){1&i&&y._UZ(0,"i",71)}function T2(i,e){1&i&&y._UZ(0,"i",78)}function S2(i,e){1&i&&y._UZ(0,"i",77)}function A2(i,e){if(1&i){const t=y.EpF();y.TgZ(0,"div",58),y.NdJ("click",function(){const p=y.CHM(t).$implicit,v=y.oxw();return y.KtG(v.fileDetails(p))}),y.TgZ(1,"div",59),y.YNc(2,p2,1,0,"i",60),y.YNc(3,g2,1,0,"i",61),y.YNc(4,m2,1,0,"i",62),y.YNc(5,y2,1,0,"i",63),y.YNc(6,v2,1,0,"i",64),y.YNc(7,_2,1,0,"i",61),y.YNc(8,w2,1,0,"i",61),y.YNc(9,b2,1,0,"i",65),y.YNc(10,I2,1,0,"i",63),y.YNc(11,E2,1,0,"i",66),y.YNc(12,C2,1,0,"i",67),y.YNc(13,D2,1,0,"i",61),y.YNc(14,T2,1,0,"i",68),y.YNc(15,S2,1,0,"i",67),y.TgZ(16,"p",69),y._uU(17),y.qZA()()()}if(2&i){const t=e.$implicit;y.xp6(2),y.Q6J("ngIf","text/plain"==t.type),y.xp6(1),y.Q6J("ngIf","image/png"==t.type),y.xp6(1),y.Q6J("ngIf","application/pdf"==t.type),y.xp6(1),y.Q6J("ngIf","video/mp4"==t.type),y.xp6(1),y.Q6J("ngIf","application/msword"==t.type),y.xp6(1),y.Q6J("ngIf","image/gif"==t.type),y.xp6(1),y.Q6J("ngIf","image/jpeg"==t.type),y.xp6(1),y.Q6J("ngIf","audio/mpeg"==t.type),y.xp6(1),y.Q6J("ngIf","video/mpeg"==t.type),y.xp6(1),y.Q6J("ngIf","application/vnd.openxmlformats-officedocument.presentationml.presentation"==t.type),y.xp6(1),y.Q6J("ngIf","application/vnd.rar"==t.type),y.xp6(1),y.Q6J("ngIf","image/svg+xml"==t.type),y.xp6(1),y.Q6J("ngIf","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"==t.type),y.xp6(1),y.Q6J("ngIf","application/zip"==t.type),y.xp6(2),y.Oqu(t.name)}}function x2(i,e){1&i&&y._UZ(0,"i",79)}let M2=(()=>{class i{constructor(t,o){this._Ss=t,this._afstorage=o,this.filePath="",this.files=[],this.fileType="",this.token=localStorage.getItem("accessToken"),this.isLoading=!1,this.folders=[],this.fName="",this.fSize="",this.fType="",this.fId="",this.fUrl="",this.addFolderForm=new mf({title:new ws(null,[fh.required]),depart:new ws(null)})}ngOnInit(){this.getFolders(),this.showFiles(this.token)}folderID(t){localStorage.setItem("FolderId",t)}AddFolder(t){this._Ss.addFolder({title:t.value.title,depart:t.value.depart}).subscribe({next:c=>{this.getFolders(),$("#addFolder").modal("hide"),this.addFolderForm.reset()}})}getFolders(){this._Ss.Folders().subscribe({next:t=>{console.log(t),this.folders=t.data}})}delFolder(t){console.log(t),this._Ss.delFolder(t).subscribe({next:o=>{console.log(o),this.getFolders()}})}fileDetails(t){console.log(t),this.fName=t.name,this.fSize=t.size<1e6?(t.size/1024).toFixed(2):t.size>1e6?(t.size/1024/1024).toFixed(2):t.size.toFixed(2),this.fType=t.type,this.fId=t._id,this.fUrl=t.URL,$(".details").css({"-webkit-transform":"translateX(0)",opacity:"1"})}close(){$(".details").css({"-webkit-transform":"translateX(150%)",opacity:"0"})}dowenloadFile(){window.location.replace(this.fUrl)}upload(t){console.log(t.target.files[0].type),this.filePath=t.target.files[0],this.fileType=t.target.files[0].type}uploadImage(){let t;this.isLoading=!0,$("#uploadFile").val("");const o=this.filePath;console.log(o.type);const c=localStorage.getItem("userID");this._afstorage.storage.ref(`files/${o.name}`).put(o).then(p=>{this._afstorage.storage.ref("files").child(o.name).getDownloadURL().then(v=>{this.fileData=p,t={name:o.name,size:this.fileData._delegate.bytesTransferred,URL:v,type:this.fileType,userId:c},this.storefileData(t)}),this.isLoading=!1,$("#addFile").modal("hide")})}storefileData(t){this._Ss.StoreFiles(t).subscribe({next:o=>{console.log(o),this.showFiles(this.token)}})}showFiles(t){this._Ss.getStoredFiles(t).subscribe({next:o=>{console.log(o),this.files=o.data}})}deleteFile(){console.log(this.fId),this._Ss.delFile(this.fId).subscribe({next:t=>{console.log(t),this.showFiles(this.token)}})}fav(t){let o=localStorage.getItem("userID");this._Ss.fav({title:t.title,depart:t.depart,_id:t._id,userId:o}).subscribe({next:p=>{console.log(p)}})}}return i.\u0275fac=function(t){return new(t||i)(y.Y36(Tx),y.Y36(Ux))},i.\u0275cmp=y.Xpm({type:i,selectors:[["app-files"]],decls:92,vars:9,consts:[[1,"container-fluid"],[1,"row"],[1,"box"],[1,"mb-5"],[1,"dropdown"],[1,"icon","mb-4"],["id","dropdownMenuLink","data-bs-toggle","dropdown",1,"add"],[1,"fa-solid","fa-plus"],["aria-labelledby","dropdownMenuLink",1,"dropdown-menu"],["data-bs-toggle","modal","data-bs-target","#addFolder",1,"dropdown-item"],[1,"dropdown-divider"],["data-bs-toggle","modal","data-bs-target","#addFile",1,"dropdown-item"],["class","col-xl-2 col-lg-3 col-sm-6 col-md-4 mb-5",4,"ngFor","ngForOf"],[1,"files"],["class","box col-xl-2 col-lg-3 col-sm-4 col-md-4 mb-3 col-6",3,"click",4,"ngFor","ngForOf"],["id","",1,"details"],[1,"fa-solid","fa-xmark","fa-xl","mt-3",3,"click"],[1,"image"],[1,"fa-regular","fa-file"],[1,"fileType"],[1,"mt-5"],[1,"space-bet"],[1,"crud","space-bet","mt-5"],["type","button",1,"btn","main-bg","rounded-pill","px-3",3,"click"],["type","button",1,"btn","btn-outline-secondary","rounded-pill","px-3",3,"click"],["id","addFolder","tabindex","-1","aria-labelledby","addFolderLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","addFolderLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],["action","/",3,"formGroup","ngSubmit"],[1,"modal-body"],["type","text","formControlName","title","placeholder","Title",1,"form-control","mb-3"],["type","text","formControlName","depart","placeholder","Department: example -> CS Depart",1,"form-control","mb-3"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","submit",1,"btn","btn-primary"],["id","addFile","tabindex","-1","aria-labelledby","addFileLabel","aria-hidden","true",1,"modal","fade"],["id","addFileLabel",1,"modal-title"],["for","file"],["type","file","id","uploadFile","accept",".bmp, .doc, .pdf ,image/* ,audio/* ,video/* ,.xls,.xlsx,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel,.rar,.zip",3,"change"],["type","button",1,"btn","btn-success",3,"click"],["class","fas fa-spinner fa-spin",4,"ngIf"],[1,"col-xl-2","col-lg-3","col-sm-6","col-md-4","mb-5"],[1,"content"],[1,"image",3,"routerLink","click"],["src","../../assets/Img/bg.jpg","alt","",1,"img-fluid"],[1,"title"],[1,"pt-2"],[1,"crud"],["id","dropdownMenuLink2","data-bs-toggle","dropdown",1,"px-3","dots"],[1,"fa-solid","fa-ellipsis-vertical"],["aria-labelledby","dropdownMenuLink2",1,"dropdown-menu"],[1,"text-center",3,"click"],[1,"fa-solid","fa-trash","text-danger","px-3"],["for","/"],[1,"py-2"],[1,"box","col-xl-2","col-lg-3","col-sm-4","col-md-4","mb-3","col-6",3,"click"],[1,"content","my-2","text-center","p-3"],["class","far fa-file-alt mb-3",4,"ngIf"],["class","far fa-file-image mb-3",4,"ngIf"],["class","far fa-file-pdf mb-3",4,"ngIf"],["class","far fa-file-video mb-3",4,"ngIf"],["class","far fa-file-word mb-3",4,"ngIf"],["class","far fa-file-audio mb-3",4,"ngIf"],["class","far fa-file-powerpoint mb-3",4,"ngIf"],["class","far fa-file-archive mb-3",4,"ngIf"],["class","far fa-file-excel mb-3",4,"ngIf"],[1,"w-auto"],[1,"far","fa-file-alt","mb-3"],[1,"far","fa-file-image","mb-3"],[1,"far","fa-file-pdf","mb-3"],[1,"far","fa-file-video","mb-3"],[1,"far","fa-file-word","mb-3"],[1,"far","fa-file-audio","mb-3"],[1,"far","fa-file-powerpoint","mb-3"],[1,"far","fa-file-archive","mb-3"],[1,"far","fa-file-excel","mb-3"],[1,"fas","fa-spinner","fa-spin"]],template:function(t,o){1&t&&(y.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),y._uU(4,"MDrive"),y.qZA(),y.TgZ(5,"p",3),y._uU(6),y.qZA(),y.TgZ(7,"div",4)(8,"div",5)(9,"span",6),y._UZ(10,"i",7),y.qZA(),y.TgZ(11,"ul",8)(12,"li")(13,"a",9),y._uU(14,"Add Folder"),y.qZA()(),y.TgZ(15,"li"),y._UZ(16,"hr",10),y.qZA(),y.TgZ(17,"li")(18,"a",11),y._uU(19,"Upload File"),y.qZA()()()()()(),y.TgZ(20,"header")(21,"h2"),y._uU(22,"Folders"),y.qZA()(),y.TgZ(23,"div",1),y.YNc(24,f2,20,3,"div",12),y.qZA(),y.TgZ(25,"header")(26,"h2"),y._uU(27,"Files"),y.qZA()(),y.TgZ(28,"div",13)(29,"div",1),y.YNc(30,A2,18,15,"div",14),y.qZA()(),y.TgZ(31,"div",15)(32,"i",16),y.NdJ("click",function(){return o.close()}),y.qZA(),y.TgZ(33,"div",17),y._UZ(34,"i",18),y.qZA(),y.TgZ(35,"h4"),y._uU(36),y.qZA(),y.TgZ(37,"span",19),y._uU(38),y.qZA(),y.TgZ(39,"h4",20),y._uU(40,"information"),y.qZA(),y._UZ(41,"hr"),y.TgZ(42,"div",21)(43,"span"),y._uU(44,"Created By"),y.qZA(),y.TgZ(45,"span"),y._uU(46,"Admin"),y.qZA()(),y._UZ(47,"hr"),y.TgZ(48,"div",21)(49,"span"),y._uU(50,"Size"),y.qZA(),y.TgZ(51,"span"),y._uU(52),y.qZA()(),y.TgZ(53,"div",22)(54,"button",23),y.NdJ("click",function(){return o.dowenloadFile()}),y._uU(55,"Dowenload"),y.qZA(),y.TgZ(56,"button",24),y.NdJ("click",function(){return o.deleteFile()}),y._uU(57,"Delete"),y.qZA()()(),y.TgZ(58,"div",25)(59,"div",26)(60,"div",27)(61,"div",28)(62,"h5",29),y._uU(63,"Add Folder"),y.qZA(),y._UZ(64,"button",30),y.qZA(),y.TgZ(65,"form",31),y.NdJ("ngSubmit",function(){return o.AddFolder(o.addFolderForm)}),y.TgZ(66,"div",32),y._UZ(67,"input",33)(68,"input",34),y.qZA(),y.TgZ(69,"div",35)(70,"button",36),y._uU(71," Close "),y.qZA(),y.TgZ(72,"button",37),y._uU(73,"ADD"),y.qZA()()()()()(),y.TgZ(74,"div",38)(75,"div",26)(76,"div",27)(77,"div",28)(78,"h5",39),y._uU(79,"Upload File"),y.qZA(),y._UZ(80,"button",30),y.qZA(),y.TgZ(81,"div",32)(82,"label",40),y._uU(83,"Upload Your File"),y.qZA(),y._UZ(84,"br"),y.TgZ(85,"input",41),y.NdJ("change",function(p){return o.upload(p)}),y.qZA()(),y.TgZ(86,"div",35)(87,"button",36),y._uU(88," Close "),y.qZA(),y.TgZ(89,"button",42),y.NdJ("click",function(){return o.uploadImage()}),y._uU(90," Upload "),y.YNc(91,x2,1,0,"i",43),y.qZA()()()()()()()),2&t&&(y.xp6(6),y.AsE("",null==o.folders?null:o.folders.length," folders , ",null==o.files?null:o.files.length," files"),y.xp6(18),y.Q6J("ngForOf",o.folders),y.xp6(6),y.Q6J("ngForOf",o.files),y.xp6(6),y.Oqu(o.fName),y.xp6(2),y.Oqu(o.fType),y.xp6(14),y.Oqu(o.fSize),y.xp6(13),y.Q6J("formGroup",o.addFolderForm),y.xp6(26),y.Q6J("ngIf",o.isLoading))},dependencies:[yo,Nr,Zo,Up,ud,gh,Ca,ml,wd],styles:[".content[_ngcontent-%COMP%]{border-radius:.75rem;overflow:hidden;transition:all ease .5s;box-shadow:#00000059 0 5px 15px;display:flex;flex-direction:column;align-items:center;justify-content:center}.files[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;position:relative}.files[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{width:150px;height:150px;background-color:#fff}.files[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:4rem}.files[_ngcontent-%COMP%]   .crud[_ngcontent-%COMP%]{z-index:999;position:absolute;top:0;right:50px;display:flex;align-items:center;justify-content:center;background-color:#686dd9;color:#fff;width:45px;border-radius:50px}.files[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .crud[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem;padding:0!important}.files[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{line-height:100%;margin:0!important}.content[_ngcontent-%COMP%]:hover{transform:translateY(-5%)}.title[_ngcontent-%COMP%]{background-color:#fff;color:#000;width:100%;height:100%;overflow:hidden;padding:0 10px}.title[_ngcontent-%COMP%]   .dots[_ngcontent-%COMP%]{cursor:pointer}.container-fluid[_ngcontent-%COMP%]{position:relative}.box[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;font-size:2rem}.box[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]{background-color:#fff;border-radius:9999999px;width:50px;height:50px;padding:.5rem;display:flex;justify-content:center;align-items:center;box-shadow:#00000059 0 5px 15px}.box[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{color:#686dd9}.content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:0}.content[_ngcontent-%COMP%]   .crud[_ngcontent-%COMP%]{font-size:1.5rem}.content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap}.content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{width:90%}.content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .crud[_ngcontent-%COMP%]{width:10%}.content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .crud[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{background-color:#f2f1f8}.content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .crud[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .crud[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{cursor:pointer}.content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .crud[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#686dd9;color:#fff!important}.content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .crud[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{color:#fff!important}.details[_ngcontent-%COMP%]{z-index:99999999;position:fixed;background-color:#fff;top:0;right:0;bottom:0px;width:300px;border-radius:.25rem;transition:all 2s;opacity:0;transform:translate(150%)}.details[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{margin:30px auto;background-color:#eee;width:200px;height:200px;display:flex;justify-content:center;align-items:center}.details[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-weight:700;font-size:4rem}.details[_ngcontent-%COMP%]   .fileType[_ngcontent-%COMP%]{background-color:#2a2929;padding:0 20px;border-radius:50px;color:#fff;overflow-wrap:break-word}.details[_ngcontent-%COMP%]   .space-bet[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.main-bg[_ngcontent-%COMP%]{background-color:#686dd9;color:#fff}.btn.main-bg[_ngcontent-%COMP%]:hover{border:solid 1px #000!important}.dropdown-item[_ngcontent-%COMP%]{cursor:pointer}"]}),i})();function R2(i,e){if(1&i){const t=y.EpF();y.TgZ(0,"div",3)(1,"div",4)(2,"div",5),y.NdJ("click",function(){const p=y.CHM(t).$implicit,v=y.oxw();return y.KtG(v.folderID(p._id))}),y._UZ(3,"img",6),y.qZA(),y.TgZ(4,"div",7)(5,"h4",8),y._uU(6),y.qZA(),y.TgZ(7,"p",9),y._uU(8),y.qZA()()()()}if(2&i){const t=e.$implicit;y.xp6(2),y.MGl("routerLink","/home/folder/",t._id,""),y.xp6(4),y.hij(" ",t.title," "),y.xp6(2),y.Oqu(t.depart)}}let O2=(()=>{class i{constructor(t){this._Ss=t,this.folders=[],this.files=[],this.token=localStorage.getItem("accessToken")}ngOnInit(){this.showFav(this.token)}showFav(t){this._Ss.getfav(t).subscribe({next:o=>{console.log(o),this.folders=o.data}})}folderID(t){localStorage.setItem("FolderId",t)}}return i.\u0275fac=function(t){return new(t||i)(y.Y36(Tx))},i.\u0275cmp=y.Xpm({type:i,selectors:[["app-star"]],decls:3,vars:1,consts:[[1,"container"],[1,"row"],["class","col-lg-3 col-sm-6 col-md-4 mb-5",4,"ngFor","ngForOf"],[1,"col-lg-3","col-sm-6","col-md-4","mb-5"],[1,"content"],[1,"image",3,"routerLink","click"],["src","../../assets/Img/bg.jpg","alt","",1,"img-fluid"],[1,"title"],[1,"pt-2"],[1,"py-2"]],template:function(t,o){1&t&&(y.TgZ(0,"div",0)(1,"div",1),y.YNc(2,R2,9,3,"div",2),y.qZA()()),2&t&&(y.xp6(2),y.Q6J("ngForOf",o.folders))},dependencies:[yo,Zo],styles:[".content[_ngcontent-%COMP%]{border-radius:.75rem;overflow:hidden;transition:all ease .5s;box-shadow:#00000059 0 5px 15px;display:flex;flex-direction:column;align-items:center;justify-content:center}.content[_ngcontent-%COMP%]:hover{transform:translateY(-5%)}.title[_ngcontent-%COMP%]{background-color:#fff;color:#000;width:100%;height:100%;overflow:hidden;padding:0 10px}.title[_ngcontent-%COMP%]   .dots[_ngcontent-%COMP%]{cursor:pointer}"]}),i})(),N2=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=y.Xpm({type:i,selectors:[["app-addfolder"]],decls:2,vars:0,template:function(t,o){1&t&&(y.TgZ(0,"h1"),y._uU(1,"SOON"),y.qZA())}}),i})(),P2=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=y.Xpm({type:i,selectors:[["app-notfound"]],decls:2,vars:0,template:function(t,o){1&t&&(y.TgZ(0,"p"),y._uU(1,"notfound works!"),y.qZA())}}),i})();function k2(i,e){1&i&&y._UZ(0,"i",44)}function F2(i,e){1&i&&y._UZ(0,"i",45)}function L2(i,e){1&i&&y._UZ(0,"i",46)}function V2(i,e){1&i&&y._UZ(0,"i",47)}function U2(i,e){1&i&&y._UZ(0,"i",48)}function B2(i,e){1&i&&y._UZ(0,"i",45)}function j2(i,e){1&i&&y._UZ(0,"i",45)}function H2(i,e){1&i&&y._UZ(0,"i",49)}function $2(i,e){1&i&&y._UZ(0,"i",47)}function G2(i,e){1&i&&y._UZ(0,"i",50)}function q2(i,e){1&i&&y._UZ(0,"i",51)}function z2(i,e){1&i&&y._UZ(0,"i",45)}function W2(i,e){1&i&&y._UZ(0,"i",52)}function Z2(i,e){1&i&&y._UZ(0,"i",51)}function K2(i,e){if(1&i){const t=y.EpF();y.TgZ(0,"div",32),y.NdJ("click",function(){const p=y.CHM(t).$implicit,v=y.oxw();return y.KtG(v.fileDetails(p))}),y.TgZ(1,"div",33),y.YNc(2,k2,1,0,"i",34),y.YNc(3,F2,1,0,"i",35),y.YNc(4,L2,1,0,"i",36),y.YNc(5,V2,1,0,"i",37),y.YNc(6,U2,1,0,"i",38),y.YNc(7,B2,1,0,"i",35),y.YNc(8,j2,1,0,"i",35),y.YNc(9,H2,1,0,"i",39),y.YNc(10,$2,1,0,"i",37),y.YNc(11,G2,1,0,"i",40),y.YNc(12,q2,1,0,"i",41),y.YNc(13,z2,1,0,"i",35),y.YNc(14,W2,1,0,"i",42),y.YNc(15,Z2,1,0,"i",41),y.TgZ(16,"p",43),y._uU(17),y.qZA()()()}if(2&i){const t=e.$implicit;y.xp6(2),y.Q6J("ngIf","text/plain"==t.type),y.xp6(1),y.Q6J("ngIf","image/png"==t.type),y.xp6(1),y.Q6J("ngIf","application/pdf"==t.type),y.xp6(1),y.Q6J("ngIf","video/mp4"==t.type),y.xp6(1),y.Q6J("ngIf","application/msword"==t.type),y.xp6(1),y.Q6J("ngIf","image/gif"==t.type),y.xp6(1),y.Q6J("ngIf","image/jpeg"==t.type),y.xp6(1),y.Q6J("ngIf","audio/mpeg"==t.type),y.xp6(1),y.Q6J("ngIf","video/mpeg"==t.type),y.xp6(1),y.Q6J("ngIf","application/vnd.openxmlformats-officedocument.presentationml.presentation"==t.type),y.xp6(1),y.Q6J("ngIf","application/vnd.rar"==t.type),y.xp6(1),y.Q6J("ngIf","image/svg+xml"==t.type),y.xp6(1),y.Q6J("ngIf","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"==t.type),y.xp6(1),y.Q6J("ngIf","application/zip"==t.type),y.xp6(2),y.Oqu(t.name)}}function Y2(i,e){1&i&&y._UZ(0,"i",53)}let Q2=(()=>{class i{constructor(t,o){this._Ss=t,this._afstorage=o,this.token=localStorage.getItem("accessToken"),this.filePath="",this.files=[],this.fileType="",this.isLoading=!1,this.folders=[],this.fName="",this.fSize="",this.fType="",this.fId="",this.fUrl=""}ngOnInit(){this.showFiles()}storefileData(t){let o=localStorage.getItem("FolderId");this._Ss.folderFiles(t,o).subscribe({next:c=>{console.log(c),this.showFiles()}})}showFiles(){let t=localStorage.getItem("FolderId");this._Ss.getfolderFiles(t).subscribe({next:o=>{console.log(o),this.files=o.data}})}upload(t){console.log(t.target.files[0].type),this.filePath=t.target.files[0],this.fileType=t.target.files[0].type}uploadImage(){let t;this.isLoading=!0,$("#uploadFile").val("");const o=this.filePath;console.log(o.type);const c=localStorage.getItem("userID");this._afstorage.storage.ref(`files/${o.name}`).put(o).then(p=>{this._afstorage.storage.ref("files").child(o.name).getDownloadURL().then(v=>{this.fileData=p,t={name:o.name,size:this.fileData._delegate.bytesTransferred,URL:v,type:this.fileType,userId:c},this.storefileData(t)}),this.isLoading=!1,$("#addFile").modal("hide")})}deleteFile(){console.log(this.fId),this._Ss.delFile(this.fId).subscribe({next:t=>{console.log(t),this.showFiles()}})}fileDetails(t){console.log(t),this.fName=t.name,this.fSize=t.size<1e6?(t.size/1024).toFixed(2):t.size>1e6?(t.size/1024/1024).toFixed(2):t.size.toFixed(2),this.fType=t.type,this.fId=t._id,this.fUrl=t.URL,$(".details").css({"-webkit-transform":"translateX(0)",opacity:"1"})}close(){$(".details").css({"-webkit-transform":"translateX(150%)",opacity:"0"})}dowenloadFile(){window.location.replace(this.fUrl)}}return i.\u0275fac=function(t){return new(t||i)(y.Y36(Tx),y.Y36(Ux))},i.\u0275cmp=y.Xpm({type:i,selectors:[["app-folder"]],decls:55,vars:5,consts:[[1,"container"],[1,"row"],[1,"box"],[1,"dropdown"],[1,"icon","mb-4"],["data-bs-toggle","modal","data-bs-target","#addFile",1,"add"],[1,"fa-solid","fa-plus"],[1,"files"],["class","box col-xl-2 col-lg-3 col-sm-4 col-md-4 mb-3 col-6",3,"click",4,"ngFor","ngForOf"],["id","",1,"details"],[1,"fa-solid","fa-xmark","fa-xl","mt-3",3,"click"],[1,"image"],[1,"fa-regular","fa-file"],[1,"fileType"],[1,"mt-5"],[1,"space-bet"],[1,"crud","space-bet","mt-5"],["type","button",1,"btn","main-bg","rounded-pill","px-3",3,"click"],["type","button",1,"btn","btn-outline-secondary","rounded-pill","px-3",3,"click"],["id","addFile","tabindex","-1","aria-labelledby","addFileLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","addFileLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],["for","file"],["type","file","id","uploadFile","accept",".bmp, .doc, .pdf ,image/* ,audio/* ,video/* ,.xls,.xlsx,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel,.rar,.zip",3,"change"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","button",1,"btn","btn-success",3,"click"],["class","fas fa-spinner fa-spin",4,"ngIf"],[1,"box","col-xl-2","col-lg-3","col-sm-4","col-md-4","mb-3","col-6",3,"click"],[1,"content","my-2","text-center","p-3"],["class","far fa-file-alt mb-3",4,"ngIf"],["class","far fa-file-image mb-3",4,"ngIf"],["class","far fa-file-pdf mb-3",4,"ngIf"],["class","far fa-file-video mb-3",4,"ngIf"],["class","far fa-file-word mb-3",4,"ngIf"],["class","far fa-file-audio mb-3",4,"ngIf"],["class","far fa-file-powerpoint mb-3",4,"ngIf"],["class","far fa-file-archive mb-3",4,"ngIf"],["class","far fa-file-excel mb-3",4,"ngIf"],[1,"w-auto"],[1,"far","fa-file-alt","mb-3"],[1,"far","fa-file-image","mb-3"],[1,"far","fa-file-pdf","mb-3"],[1,"far","fa-file-video","mb-3"],[1,"far","fa-file-word","mb-3"],[1,"far","fa-file-audio","mb-3"],[1,"far","fa-file-powerpoint","mb-3"],[1,"far","fa-file-archive","mb-3"],[1,"far","fa-file-excel","mb-3"],[1,"fas","fa-spinner","fa-spin"]],template:function(t,o){1&t&&(y.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"span",5),y._UZ(6,"i",6),y.qZA()()()(),y.TgZ(7,"div",7)(8,"div",1),y.YNc(9,K2,18,15,"div",8),y.qZA()(),y.TgZ(10,"div",9)(11,"i",10),y.NdJ("click",function(){return o.close()}),y.qZA(),y.TgZ(12,"div",11),y._UZ(13,"i",12),y.qZA(),y.TgZ(14,"h4"),y._uU(15),y.qZA(),y.TgZ(16,"span",13),y._uU(17),y.qZA(),y.TgZ(18,"h4",14),y._uU(19,"information"),y.qZA(),y._UZ(20,"hr"),y.TgZ(21,"div",15)(22,"span"),y._uU(23,"Created By"),y.qZA(),y.TgZ(24,"span"),y._uU(25,"Admin"),y.qZA()(),y._UZ(26,"hr"),y.TgZ(27,"div",15)(28,"span"),y._uU(29,"Size"),y.qZA(),y.TgZ(30,"span"),y._uU(31),y.qZA()(),y.TgZ(32,"div",16)(33,"button",17),y.NdJ("click",function(){return o.dowenloadFile()}),y._uU(34,"Dowenload"),y.qZA(),y.TgZ(35,"button",18),y.NdJ("click",function(){return o.deleteFile()}),y._uU(36,"Delete"),y.qZA()()()()(),y.TgZ(37,"div",19)(38,"div",20)(39,"div",21)(40,"div",22)(41,"h5",23),y._uU(42,"Upload File"),y.qZA(),y._UZ(43,"button",24),y.qZA(),y.TgZ(44,"div",25)(45,"label",26),y._uU(46,"Upload Your File"),y.qZA(),y._UZ(47,"br"),y.TgZ(48,"input",27),y.NdJ("change",function(p){return o.upload(p)}),y.qZA()(),y.TgZ(49,"div",28)(50,"button",29),y._uU(51," Close "),y.qZA(),y.TgZ(52,"button",30),y.NdJ("click",function(){return o.uploadImage()}),y._uU(53," Upload "),y.YNc(54,Y2,1,0,"i",31),y.qZA()()()()()),2&t&&(y.xp6(9),y.Q6J("ngForOf",o.files),y.xp6(6),y.Oqu(o.fName),y.xp6(2),y.Oqu(o.fType),y.xp6(14),y.Oqu(o.fSize),y.xp6(23),y.Q6J("ngIf",o.isLoading))},dependencies:[yo,Nr],styles:[".box[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;font-size:2rem}.box[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]{background-color:#fff;border-radius:9999999px;width:50px;height:50px;padding:.5rem;display:flex;justify-content:center;align-items:center;box-shadow:#00000059 0 5px 15px}.box[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{color:#686dd9}.content[_ngcontent-%COMP%]{border-radius:.75rem;overflow:hidden;transition:all ease .5s;box-shadow:#00000059 0 5px 15px;display:flex;flex-direction:column;align-items:center;justify-content:center}.files[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;position:relative}.files[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{width:150px;height:150px;background-color:#fff}.files[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:4rem}.files[_ngcontent-%COMP%]   .crud[_ngcontent-%COMP%]{z-index:999;position:absolute;top:0;right:50px;display:flex;align-items:center;justify-content:center;background-color:#686dd9;color:#fff;width:45px;border-radius:50px}.files[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .crud[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem;padding:0!important}.files[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{line-height:100%;margin:0!important}.content[_ngcontent-%COMP%]:hover{transform:translateY(-5%)}.details[_ngcontent-%COMP%]{z-index:99999999;position:fixed;background-color:#fff;top:0;right:0;bottom:0px;width:300px;border-radius:.25rem;transition:all 2s;opacity:0;transform:translate(150%)}.details[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{margin:30px auto;background-color:#eee;width:200px;height:200px;display:flex;justify-content:center;align-items:center}.details[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-weight:700;font-size:4rem}.details[_ngcontent-%COMP%]   .fileType[_ngcontent-%COMP%]{background-color:#2a2929;padding:0 20px;border-radius:50px;color:#fff;overflow-wrap:break-word}.details[_ngcontent-%COMP%]   .space-bet[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.main-bg[_ngcontent-%COMP%]{background-color:#686dd9;color:#fff}.btn.main-bg[_ngcontent-%COMP%]:hover{border:solid 1px #000!important}"]}),i})(),J2=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=y.Xpm({type:i,selectors:[["app-notes"]],decls:2,vars:0,template:function(t,o){1&t&&(y.TgZ(0,"h1"),y._uU(1,"SOON"),y.qZA())}}),i})(),X2=(()=>{class i{constructor(t,o){this._router=t,this._authService=o}canActivate(t,o){return!!this._authService.gettoken()||(this._router.navigate(["/signin"]),!1)}}return i.\u0275fac=function(t){return new(t||i)(y.LFG(Vr),y.LFG(Qy))},i.\u0275prov=y.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function eV(i,e){if(1&i&&(y.TgZ(0,"div",26),y._uU(1),y.qZA()),2&i){const t=y.oxw();y.xp6(1),y.Oqu(t.errMSG)}}const tV=[{path:"",redirectTo:"/signin",pathMatch:"full"},{path:"signin",component:SE},{path:"signup",component:(()=>{class i{constructor(t,o){this._auth=t,this._router=o,this.errMSG="",this.signupForm=new mf({name:new ws(null,[fh.required]),email:new ws(null,[fh.required,fh.email]),password:new ws(null,[fh.required])})}ngOnInit(){}signUp(t){this._auth.signup(t.value).subscribe({next:o=>{"Success"==o.Message?(console.log(o),this._router.navigate(["signin"])):this.errMSG=o.errorMessage}})}}return i.\u0275fac=function(t){return new(t||i)(y.Y36(Qy),y.Y36(Vr))},i.\u0275cmp=y.Xpm({type:i,selectors:[["app-signup"]],decls:44,vars:2,consts:[[1,"signup"],[1,"forgetPassowrd"],["routerLink","/signin",1,"pointer"],[1,"container-fluid"],[1,"row"],[1,"col-md-3","right"],[1,"p-2"],[1,"text-center","mt-5"],[1,"h4","text-center"],[1,"image","text-center","mt-5"],["src","../../assets/Img/sign-in.svg","alt","Welcome",1,"img-fluid"],[1,"col-md-9","left"],[1,"container"],[1,"content"],[1,"header"],[1,"button"],[1,"image"],["src","../../assets/Img/icons8-google-48.png","alt","",1,"img-fluid"],["type","button",1,"btn","btn-primary"],["action","/",3,"formGroup","ngSubmit"],["for","/",1,"mt-3"],["type","text","name","name","formControlName","name","title","name-input",1,"form-control"],["type","email","name","email","formControlName","email","title","email-input",1,"form-control"],["type","password","name","passowrd","formControlName","password","title","passowrd-input",1,"form-control"],["type","submit","title","/",1,"btn","mt-4","log-btn"],["class","err alert alert-danger mt-3 text-center p-1",4,"ngIf"],[1,"err","alert","alert-danger","mt-3","text-center","p-1"]],template:function(t,o){1&t&&(y.TgZ(0,"section",0)(1,"div",1)(2,"p"),y._uU(3,"Already User? "),y.TgZ(4,"span",2),y._uU(5,"SignIn"),y.qZA()()(),y.TgZ(6,"div",3)(7,"div",4)(8,"div",5)(9,"h5",6),y._uU(10,"MDrive"),y.qZA(),y.TgZ(11,"h2",7),y._uU(12,"Welcome To Our Drive"),y.qZA(),y.TgZ(13,"p",8),y._uU(14,"Education Zone"),y.qZA(),y.TgZ(15,"div",9),y._UZ(16,"img",10),y.qZA()(),y.TgZ(17,"div",11)(18,"div",12)(19,"div",4)(20,"div",13)(21,"div",14)(22,"h4"),y._uU(23,"Sign Up To MDrive"),y.qZA(),y.TgZ(24,"div",15)(25,"div",16),y._UZ(26,"img",17),y.qZA(),y.TgZ(27,"button",18),y._uU(28," Sign Up With Google "),y.qZA()(),y.TgZ(29,"h5"),y._uU(30,"Or"),y.qZA(),y.TgZ(31,"form",19),y.NdJ("ngSubmit",function(){return o.signUp(o.signupForm)}),y.TgZ(32,"label",20),y._uU(33,"Name"),y.qZA(),y._UZ(34,"input",21),y.TgZ(35,"label",20),y._uU(36,"EmailAddress"),y.qZA(),y._UZ(37,"input",22),y.TgZ(38,"label",20),y._uU(39,"Password"),y.qZA(),y._UZ(40,"input",23),y.TgZ(41,"button",24),y._uU(42,"SIGN UP"),y.qZA()(),y.YNc(43,eV,2,1,"div",25),y.qZA()()()()()()()()),2&t&&(y.xp6(31),y.Q6J("formGroup",o.signupForm),y.xp6(12),y.Q6J("ngIf",o.errMSG))},dependencies:[Nr,Zo,Up,ud,gh,Ca,ml,wd],styles:['.right[_ngcontent-%COMP%]{font-family:IM Fell Double Pica SC,serif;background-color:#f2ced7;color:#7b521c;height:100vh}.pointer[_ngcontent-%COMP%]{cursor:pointer}.signup[_ngcontent-%COMP%]{position:relative}.signup[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30rem}.left[_ngcontent-%COMP%]{font-family:Roboto,sans-serif}.left[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{background-color:#fff;border-bottom-left-radius:.25rem;border-top-left-radius:.25rem}.left[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{display:flex;align-items:center;width:-moz-fit-content;width:fit-content;border-radius:.5rem}.left[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;height:100vh}.left[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{width:50%;display:flex;flex-direction:column;justify-content:center;text-align:start}.left[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{position:relative;text-align:center}.left[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]:after{content:"";position:absolute;display:block;top:50%;right:-15px;height:1px;width:50%;background-color:#222}.left[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]:before{content:"";position:absolute;left:-15px;top:50%;height:1px;width:50%;background-color:#222}.left[_ngcontent-%COMP%]   .log-btn[_ngcontent-%COMP%]{background-color:#ea4c89;width:100px;color:#fff}.forgetPassowrd[_ngcontent-%COMP%]{position:absolute;top:10px;right:20px}.forgetPassowrd[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#442bc7}@media (max-width: 768px){.button[_ngcontent-%COMP%]{margin:10px 0}button[_ngcontent-%COMP%]{font-size:15px;height:40px;width:164px}.left[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{width:100%!important}.left[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{height:50vh;width:100%}.right[_ngcontent-%COMP%]{height:50vh}.signup[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:15rem}.signup[_ngcontent-%COMP%]{display:flex;flex-flow:column}.right[_ngcontent-%COMP%]{order:2}.left[_ngcontent-%COMP%]{order:1}}']}),i})()},{path:"home",canActivate:[X2],component:AE,children:[{path:"files",component:M2},{path:"notes",component:J2},{path:"star",component:O2},{path:"addfolder",component:N2},{path:"folder/:id",component:Q2}]},{path:"**",component:P2}];let nV=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=y.oAB({type:i}),i.\u0275inj=y.cJS({imports:[S_.forRoot(tV,{useHash:!0}),S_]}),i})(),rV=(()=>{class i{constructor(){this.title="Drive"}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=y.Xpm({type:i,selectors:[["app-root"]],decls:1,vars:0,template:function(t,o){1&t&&y._UZ(0,"router-outlet")},dependencies:[E]}),i})();const xw=ee(2707);class Zm{static init(e){return xw.default.initializeApp(e),[]}static getFirestore(){return xw.default.firestore()}static _getFirestore(){return xw.default.firestore}static getAuth(){return xw.default.auth()}static getStorage(){return xw.default.storage()}static getFirestoreTimestamp(){return xw.default.firestore.Timestamp.now()}}ee(8739);class iV{constructor(){this.listeners=new Map}appendArray(e){return Zm._getFirestore().FieldValue.arrayUnion(e)}increment(e){return Zm._getFirestore().FieldValue.increment(e)}genDocId(){return Zm.getFirestore().collection("TEMP").doc().id}all(e){const t=Zm.getFirestore().batch();for(let o of e.operations)o.getOperation(t);return new Promise((o,c)=>{t.commit().then(()=>{try{e.onComplete()}catch{}o()}).catch(p=>{try{e.onFail(p)}catch{}c(p)})})}create(e){return new Promise((t,o)=>{if(null==e.data||null==e.data)throw new Error("Error creating data. Data is null or undefined.");if(this.isCollectionPath(e.path)){let c=this.genCollectionReference(e.path).doc();c.set(e.data).then(()=>{try{e.onComplete(c.id)}catch{}t(c.id)}).catch(p=>{try{e.onFail(p)}catch{}o(p)})}else if(this.isDocumentPath(e.path)){let c=this.genDocumentReference(e.path);c.set(e.data).then(()=>{try{e.onComplete(c.id)}catch{}t(c.id)}).catch(p=>{try{e.onFail(p)}catch{}o(p)})}})}delete(e){return new Promise((t,o)=>{this.checkDocumentPathValidity(e.path),this.genDocumentReference(e.path).delete().then(()=>{try{e.onComplete()}catch{}t()}).catch(c=>{try{e.onFail(c)}catch{}o(c)})})}update(e){return new Promise((t,o)=>{this.checkDocumentPathValidity(e.path);const c=this.genDocumentReference(e.path);c.update(e.data).then(()=>{try{e.onComplete(c)}catch{}t(c)}).catch(p=>{try{e.onFail(p)}catch{}o(p)})})}getCollection(e){let t=this.genCollectionReference(e.path);return new Promise((null!=e.where||null!=e.where)&&e.where.length>0?(o,c)=>{let p;const v=Array(e.where)[0];for(let C=0;C<v.length;C++)p=null==p?v[C].getQuery(t):v[C].concatQuery(p);p.get().then(C=>{try{e.onComplete(C)}catch{}o(C)}).catch(C=>{try{e.onFail(C)}catch{}c(C)})}:(o,c)=>{t.get().then(p=>{try{e.onComplete(p)}catch{}o(p)}).catch(p=>{try{e.onFail(p)}catch{}c(p)})})}getDocument(e){return new Promise((t,o)=>{this.genDocumentReference(e.path).get().then(c=>{try{e.onComplete(c)}catch{}t(c)}).catch(c=>{try{e.onFail(c)}catch{}o(c)})})}listenToDocument(e){this.validateListenerName(e.name),this.addListener(e.name,this.genDocumentReference(e.path).onSnapshot(t=>{try{e.onUpdate(t)}catch{}}))}listenToCollection(e){this.validateListenerName(e.name);let t=this.genCollectionReference(e.path);if((null!=e.where||null!=e.where)&&e.where.length>0){let o;const c=Array(e.where)[0];for(let p=0;p<c.length;p++)o=null==o?c[p].getQuery(t):c[p].concatQuery(o);this.addListener(e.name,o.onSnapshot(p=>{try{e.onUpdate(p)}catch{}}))}else this.addListener(e.name,t.onSnapshot(o=>{try{e.onUpdate(o)}catch{}}))}genCollectionReference(e){this.checkCollectionPathValidity(e);const t=Array(e)[0];let o,c;for(let p=0;p<t.length;p++)p%2==0?o=null==o?Zm.getFirestore().collection(t[p]):c.collection(t[p]):c=o.doc(t[p]);return o}genDocumentReference(e){this.checkDocumentPathValidity(e);const t=Array(e)[0];let o,c;for(let p=0;p<t.length;p++)p%2==0?o=null==o?Zm.getFirestore().collection(t[p]):c.collection(t[p]):c=o.doc(t[p]);return c}addListener(e,t){return this.listeners.set(e,t),t}stopListeningTo(e){try{this.listeners.get(e)(),this.listeners.delete(e)}catch{}}stopListeningToAll(){this.listeners.forEach((e,t,o)=>{this.stopListeningTo(t)})}validateListenerName(e){if(null==e||null==e||"string"!=typeof e||e.trim().length<=0)throw"Listener name cannot be empty.";if(null!=this.listeners.get(e))throw`Listener name: ${e} is already taken.`}checkCollectionPathValidity(e){if(null==e||null==e||e.length<=0||!this.isCollectionPath(e))throw"Not a valid path to a collection."}isCollectionPath(e){return Array(e)[0].length%2==1}checkDocumentPathValidity(e){if(null==e||null==e||e.length<=0||!this.isDocumentPath(e))throw"Not a valid path to a document."}isDocumentPath(e){return Array(e)[0].length%2==0}}let oV=(()=>{class i{constructor(){Zm.init({torageBucket:"gs://mdrive-e7b27.appspot.com",apiKey:"AIzaSyDHEhqrrOVRmBuNJyCCbUkh_gIZ-S8Hk_A",authDomain:"mdrive-e7b27.firebaseapp.com",projectId:"mdrive-e7b27",messagingSenderId:"538117856319",appId:"1:538117856319:web:e88ba0191e2981e7b1ac8a",measurementId:"G-X3PVFC5NXP"})}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=y.oAB({type:i,bootstrap:[rV]}),i.\u0275inj=y.cJS({providers:[iV,Zm],imports:[Vn,nV,DE,On,h2,Zs.hO.initializeApp({storageBucket:"gs://mdrive-e7b27.appspot.com",apiKey:"AIzaSyDHEhqrrOVRmBuNJyCCbUkh_gIZ-S8Hk_A",authDomain:"mdrive-e7b27.firebaseapp.com",projectId:"mdrive-e7b27",messagingSenderId:"538117856319",appId:"1:538117856319:web:e88ba0191e2981e7b1ac8a",measurementId:"G-X3PVFC5NXP"})]}),i})();(0,y.G48)(),Yc().bootstrapModule(oV).catch(i=>console.error(i))},5867:(Ut,qe,ee)=>{ee.d(qe,{C6:()=>y.getApps,Mq:()=>y.getApp});var y=ee(9681);(0,y.registerVersion)("firebase","9.10.0","app")},127:(Ut,qe,ee)=>{ee.d(qe,{Z:()=>y.Z});var y=ee(3942);y.Z.registerVersion("firebase","9.10.0","app-compat")},2476:(Ut,qe,ee)=>{ee.r(qe);var y=ee(5861),L=ee(3942),J=ee(2090),me=ee(9681),Ie=ee(655),Ue=ee(1877),Oe=ee(4859);const Ne=function be(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},ut=function we(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Pe=new J.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),yt=new Ue.Yd("@firebase/auth");function ht(T,...w){yt.logLevel<=Ue.in.ERROR&&yt.error(`Auth (${me.SDK_VERSION}): ${T}`,...w)}function ze(T,...w){throw rt(T,...w)}function Ce(T,...w){return rt(T,...w)}function je(T,w,E){const x=Object.assign(Object.assign({},ut()),{[w]:E});return new J.LL("auth","Firebase",x).create(w,{appName:T.name})}function ft(T,w,E){if(!(w instanceof E))throw E.name!==w.constructor.name&&ze(T,"argument-error"),je(T,"argument-error",`Type of ${w.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function rt(T,...w){if("string"!=typeof T){const E=w[0],x=[...w.slice(1)];return x[0]&&(x[0].appName=T.name),T._errorFactory.create(E,...x)}return Pe.create(T,...w)}function le(T,w,...E){if(!T)throw rt(w,...E)}function He(T){const w="INTERNAL ASSERTION FAILED: "+T;throw ht(w),new Error(w)}function ge(T,w){T||He(w)}const _e=new Map;function Re(T){ge(T instanceof Function,"Expected a class definition");let w=_e.get(T);return w?(ge(w instanceof T,"Instance stored in cache mismatched with class"),w):(w=new T,_e.set(T,w),w)}function Qe(){var T;return typeof self<"u"&&(null===(T=self.location)||void 0===T?void 0:T.href)||""}function Vt(){return"http:"===Jt()||"https:"===Jt()}function Jt(){var T;return typeof self<"u"&&(null===(T=self.location)||void 0===T?void 0:T.protocol)||null}class St{constructor(w,E){this.shortDelay=w,this.longDelay=E,ge(E>w,"Short delay should be less than long delay!"),this.isMobile=(0,J.uI)()||(0,J.b$)()}get(){return function _n(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Vt()||(0,J.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Tt(T,w){ge(T.emulator,"Emulator should always be set here");const{url:E}=T.emulator;return w?`${E}${w.startsWith("/")?w.slice(1):w}`:E}class Ot{static initialize(w,E,x){this.fetchImpl=w,E&&(this.headersImpl=E),x&&(this.responseImpl=x)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void He("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void He("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void He("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Xt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Xn=new St(3e4,6e4);function un(T,w){return T.tenantId&&!w.tenantId?Object.assign(Object.assign({},w),{tenantId:T.tenantId}):w}function jn(T,w,E,x){return go.apply(this,arguments)}function go(){return(go=(0,y.Z)(function*(T,w,E,x,U={}){return ci(T,U,(0,y.Z)(function*(){let Q={},he={};x&&("GET"===w?he=x:Q={body:JSON.stringify(x)});const Ve=(0,J.xO)(Object.assign({key:T.config.apiKey},he)).slice(1),pt=yield T._getAdditionalHeaders();return pt["Content-Type"]="application/json",T.languageCode&&(pt["X-Firebase-Locale"]=T.languageCode),Ot.fetch()(wn(T,T.config.apiHost,E,Ve),Object.assign({method:w,headers:pt,referrerPolicy:"no-referrer"},Q))}))})).apply(this,arguments)}function ci(T,w,E){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,y.Z)(function*(T,w,E){T._canInitEmulator=!1;const x=Object.assign(Object.assign({},Xt),w);try{const U=new cn(T),Q=yield Promise.race([E(),U.promise]);U.clearNetworkTimeout();const he=yield Q.json();if("needConfirmation"in he)throw lr(T,"account-exists-with-different-credential",he);if(Q.ok&&!("errorMessage"in he))return he;{const Ve=Q.ok?he.errorMessage:he.error.message,[pt,Rt]=Ve.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===pt)throw lr(T,"credential-already-in-use",he);if("EMAIL_EXISTS"===pt)throw lr(T,"email-already-in-use",he);if("USER_DISABLED"===pt)throw lr(T,"user-disabled",he);const en=x[pt]||pt.toLowerCase().replace(/[_\s]+/g,"-");if(Rt)throw je(T,en,Rt);ze(T,en)}}catch(U){if(U instanceof J.ZR)throw U;ze(T,"network-request-failed")}})).apply(this,arguments)}function Wr(T,w,E,x){return ns.apply(this,arguments)}function ns(){return(ns=(0,y.Z)(function*(T,w,E,x,U={}){const Q=yield jn(T,w,E,x,U);return"mfaPendingCredential"in Q&&ze(T,"multi-factor-auth-required",{_serverResponse:Q}),Q})).apply(this,arguments)}function wn(T,w,E,x){const U=`${w}${E}?${x}`;return T.config.emulator?Tt(T.config,U):`${T.config.apiScheme}://${U}`}class cn{constructor(w){this.auth=w,this.timer=null,this.promise=new Promise((E,x)=>{this.timer=setTimeout(()=>x(Ce(this.auth,"network-request-failed")),Xn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function lr(T,w,E){const x={appName:T.name};E.email&&(x.email=E.email),E.phoneNumber&&(x.phoneNumber=E.phoneNumber);const U=Ce(T,w,x);return U.customData._tokenResponse=E,U}function dt(){return(dt=(0,y.Z)(function*(T,w){return jn(T,"POST","/v1/accounts:delete",w)})).apply(this,arguments)}function yr(T,w){return vr.apply(this,arguments)}function vr(){return(vr=(0,y.Z)(function*(T,w){return jn(T,"POST","/v1/accounts:update",w)})).apply(this,arguments)}function Mn(T,w){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,y.Z)(function*(T,w){return jn(T,"POST","/v1/accounts:lookup",w)})).apply(this,arguments)}function Mi(T){if(T)try{const w=new Date(Number(T));if(!isNaN(w.getTime()))return w.toUTCString()}catch{}}function Kn(){return(Kn=(0,y.Z)(function*(T,w=!1){const E=(0,J.m9)(T),x=yield E.getIdToken(w),U=Pt(x);le(U&&U.exp&&U.auth_time&&U.iat,E.auth,"internal-error");const Q="object"==typeof U.firebase?U.firebase:void 0,he=Q?.sign_in_provider;return{claims:U,token:x,authTime:Mi(qt(U.auth_time)),issuedAtTime:Mi(qt(U.iat)),expirationTime:Mi(qt(U.exp)),signInProvider:he||null,signInSecondFactor:Q?.sign_in_second_factor||null}})).apply(this,arguments)}function qt(T){return 1e3*Number(T)}function Pt(T){var w;const[E,x,U]=T.split(".");if(void 0===E||void 0===x||void 0===U)return ht("JWT malformed, contained fewer than 3 sections"),null;try{const Q=(0,J.tV)(x);return Q?JSON.parse(Q):(ht("Failed to decode base64 JWT payload"),null)}catch(Q){return ht("Caught error parsing JWT payload as JSON",null===(w=Q)||void 0===w?void 0:w.toString()),null}}function Zr(T,w){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,y.Z)(function*(T,w,E=!1){if(E)return w;try{return yield w}catch(x){throw x instanceof J.ZR&&Kr(x)&&T.auth.currentUser===T&&(yield T.auth.signOut()),x}})).apply(this,arguments)}function Kr({code:T}){return"auth/user-disabled"===T||"auth/user-token-expired"===T}class nn{constructor(w){this.user=w,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(w){var E;if(w){const x=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),x}{this.errorBackoff=3e4;const U=(null!==(E=this.user.stsTokenManager.expirationTime)&&void 0!==E?E:0)-Date.now()-3e5;return Math.max(0,U)}}schedule(w=!1){var E=this;if(!this.isRunning)return;const x=this.getInterval(w);this.timerId=setTimeout((0,y.Z)(function*(){yield E.iteration()}),x)}iteration(){var w=this;return(0,y.Z)(function*(){var E;try{yield w.user.getIdToken(!0)}catch(x){return void("auth/network-request-failed"===(null===(E=x)||void 0===E?void 0:E.code)&&w.schedule(!0))}w.schedule()})()}}class To{constructor(w,E){this.createdAt=w,this.lastLoginAt=E,this._initializeTime()}_initializeTime(){this.lastSignInTime=Mi(this.lastLoginAt),this.creationTime=Mi(this.createdAt)}_copy(w){this.createdAt=w.createdAt,this.lastLoginAt=w.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Fn(T){return $i.apply(this,arguments)}function $i(){return($i=(0,y.Z)(function*(T){var w;const E=T.auth,x=yield T.getIdToken(),U=yield Zr(T,Mn(E,{idToken:x}));le(U?.users.length,E,"internal-error");const Q=U.users[0];T._notifyReloadListener(Q);const he=null!==(w=Q.providerUserInfo)&&void 0!==w&&w.length?Z(Q.providerUserInfo):[],Ve=q(T.providerData,he),en=!!T.isAnonymous&&!(T.email&&Q.passwordHash||Ve?.length),Ft={uid:Q.localId,displayName:Q.displayName||null,photoURL:Q.photoUrl||null,email:Q.email||null,emailVerified:Q.emailVerified||!1,phoneNumber:Q.phoneNumber||null,tenantId:Q.tenantId||null,providerData:Ve,metadata:new To(Q.createdAt,Q.lastLoginAt),isAnonymous:en};Object.assign(T,Ft)})).apply(this,arguments)}function j(){return(j=(0,y.Z)(function*(T){const w=(0,J.m9)(T);yield Fn(w),yield w.auth._persistUserIfCurrent(w),w.auth._notifyListenersIfCurrent(w)})).apply(this,arguments)}function q(T,w){return[...T.filter(x=>!w.some(U=>U.providerId===x.providerId)),...w]}function Z(T){return T.map(w=>{var{providerId:E}=w,x=(0,Ie._T)(w,["providerId"]);return{providerId:E,uid:x.rawId||"",displayName:x.displayName||null,email:x.email||null,phoneNumber:x.phoneNumber||null,photoURL:x.photoUrl||null}})}function re(){return(re=(0,y.Z)(function*(T,w){const E=yield ci(T,{},(0,y.Z)(function*(){const x=(0,J.xO)({grant_type:"refresh_token",refresh_token:w}).slice(1),{tokenApiHost:U,apiKey:Q}=T.config,he=wn(T,U,"/v1/token",`key=${Q}`),Ve=yield T._getAdditionalHeaders();return Ve["Content-Type"]="application/x-www-form-urlencoded",Ot.fetch()(he,{method:"POST",headers:Ve,body:x})}));return{accessToken:E.access_token,expiresIn:E.expires_in,refreshToken:E.refresh_token}})).apply(this,arguments)}class xe{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(w){le(w.idToken,"internal-error"),le(typeof w.idToken<"u","internal-error"),le(typeof w.refreshToken<"u","internal-error");const E="expiresIn"in w&&typeof w.expiresIn<"u"?Number(w.expiresIn):function Yn(T){const w=Pt(T);return le(w,"internal-error"),le(typeof w.exp<"u","internal-error"),le(typeof w.iat<"u","internal-error"),Number(w.exp)-Number(w.iat)}(w.idToken);this.updateTokensAndExpiration(w.idToken,w.refreshToken,E)}getToken(w,E=!1){var x=this;return(0,y.Z)(function*(){return le(!x.accessToken||x.refreshToken,w,"user-token-expired"),E||!x.accessToken||x.isExpired?x.refreshToken?(yield x.refresh(w,x.refreshToken),x.accessToken):null:x.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(w,E){var x=this;return(0,y.Z)(function*(){const{accessToken:U,refreshToken:Q,expiresIn:he}=yield function z(T,w){return re.apply(this,arguments)}(w,E);x.updateTokensAndExpiration(U,Q,Number(he))})()}updateTokensAndExpiration(w,E,x){this.refreshToken=E||null,this.accessToken=w||null,this.expirationTime=Date.now()+1e3*x}static fromJSON(w,E){const{refreshToken:x,accessToken:U,expirationTime:Q}=E,he=new xe;return x&&(le("string"==typeof x,"internal-error",{appName:w}),he.refreshToken=x),U&&(le("string"==typeof U,"internal-error",{appName:w}),he.accessToken=U),Q&&(le("number"==typeof Q,"internal-error",{appName:w}),he.expirationTime=Q),he}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(w){this.accessToken=w.accessToken,this.refreshToken=w.refreshToken,this.expirationTime=w.expirationTime}_clone(){return Object.assign(new xe,this.toJSON())}_performRefresh(){return He("not implemented")}}function Ke(T,w){le("string"==typeof T||typeof T>"u","internal-error",{appName:w})}class mt{constructor(w){var{uid:E,auth:x,stsTokenManager:U}=w,Q=(0,Ie._T)(w,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new nn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=E,this.auth=x,this.stsTokenManager=U,this.accessToken=U.accessToken,this.displayName=Q.displayName||null,this.email=Q.email||null,this.emailVerified=Q.emailVerified||!1,this.phoneNumber=Q.phoneNumber||null,this.photoURL=Q.photoURL||null,this.isAnonymous=Q.isAnonymous||!1,this.tenantId=Q.tenantId||null,this.providerData=Q.providerData?[...Q.providerData]:[],this.metadata=new To(Q.createdAt||void 0,Q.lastLoginAt||void 0)}getIdToken(w){var E=this;return(0,y.Z)(function*(){const x=yield Zr(E,E.stsTokenManager.getToken(E.auth,w));return le(x,E.auth,"internal-error"),E.accessToken!==x&&(E.accessToken=x,yield E.auth._persistUserIfCurrent(E),E.auth._notifyListenersIfCurrent(E)),x})()}getIdTokenResult(w){return function kn(T){return Kn.apply(this,arguments)}(this,w)}reload(){return function ce(T){return j.apply(this,arguments)}(this)}_assign(w){this!==w&&(le(this.uid===w.uid,this.auth,"internal-error"),this.displayName=w.displayName,this.photoURL=w.photoURL,this.email=w.email,this.emailVerified=w.emailVerified,this.phoneNumber=w.phoneNumber,this.isAnonymous=w.isAnonymous,this.tenantId=w.tenantId,this.providerData=w.providerData.map(E=>Object.assign({},E)),this.metadata._copy(w.metadata),this.stsTokenManager._assign(w.stsTokenManager))}_clone(w){return new mt(Object.assign(Object.assign({},this),{auth:w,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(w){le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=w,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(w){this.reloadListener?this.reloadListener(w):this.reloadUserInfo=w}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(w,E=!1){var x=this;return(0,y.Z)(function*(){let U=!1;w.idToken&&w.idToken!==x.stsTokenManager.accessToken&&(x.stsTokenManager.updateFromServerResponse(w),U=!0),E&&(yield Fn(x)),yield x.auth._persistUserIfCurrent(x),U&&x.auth._notifyListenersIfCurrent(x)})()}delete(){var w=this;return(0,y.Z)(function*(){const E=yield w.getIdToken();return yield Zr(w,function mr(T,w){return dt.apply(this,arguments)}(w.auth,{idToken:E})),w.stsTokenManager.clearRefreshToken(),w.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(w=>Object.assign({},w)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(w,E){var x,U,Q,he,Ve,pt,Rt,en;const Ft=null!==(x=E.displayName)&&void 0!==x?x:void 0,Mr=null!==(U=E.email)&&void 0!==U?U:void 0,Ws=null!==(Q=E.phoneNumber)&&void 0!==Q?Q:void 0,bc=null!==(he=E.photoURL)&&void 0!==he?he:void 0,sh=null!==(Ve=E.tenantId)&&void 0!==Ve?Ve:void 0,oi=null!==(pt=E._redirectEventId)&&void 0!==pt?pt:void 0,ef=null!==(Rt=E.createdAt)&&void 0!==Rt?Rt:void 0,_s=null!==(en=E.lastLoginAt)&&void 0!==en?en:void 0,{uid:Ea,emailVerified:Rg,isAnonymous:Og,providerData:Ic,stsTokenManager:ey}=E;le(Ea&&ey,w,"internal-error");const s_=xe.fromJSON(this.name,ey);le("string"==typeof Ea,w,"internal-error"),Ke(Ft,w.name),Ke(Mr,w.name),le("boolean"==typeof Rg,w,"internal-error"),le("boolean"==typeof Og,w,"internal-error"),Ke(Ws,w.name),Ke(bc,w.name),Ke(sh,w.name),Ke(oi,w.name),Ke(ef,w.name),Ke(_s,w.name);const Za=new mt({uid:Ea,auth:w,email:Mr,emailVerified:Rg,displayName:Ft,isAnonymous:Og,photoURL:bc,phoneNumber:Ws,tenantId:sh,stsTokenManager:s_,createdAt:ef,lastLoginAt:_s});return Ic&&Array.isArray(Ic)&&(Za.providerData=Ic.map(Tu=>Object.assign({},Tu))),oi&&(Za._redirectEventId=oi),Za}static _fromIdTokenResponse(w,E,x=!1){return(0,y.Z)(function*(){const U=new xe;U.updateFromServerResponse(E);const Q=new mt({uid:E.localId,auth:w,stsTokenManager:U,isAnonymous:x});return yield Fn(Q),Q})()}}const gn=(()=>{class T{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,y.Z)(function*(){return!0})()}_set(E,x){var U=this;return(0,y.Z)(function*(){U.storage[E]=x})()}_get(E){var x=this;return(0,y.Z)(function*(){const U=x.storage[E];return void 0===U?null:U})()}_remove(E){var x=this;return(0,y.Z)(function*(){delete x.storage[E]})()}_addListener(E,x){}_removeListener(E,x){}}return T.type="NONE",T})();function ln(T,w,E){return`firebase:${T}:${w}:${E}`}class Nt{constructor(w,E,x){this.persistence=w,this.auth=E,this.userKey=x;const{config:U,name:Q}=this.auth;this.fullUserKey=ln(this.userKey,U.apiKey,Q),this.fullPersistenceKey=ln("persistence",U.apiKey,Q),this.boundEventHandler=E._onStorageEvent.bind(E),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(w){return this.persistence._set(this.fullUserKey,w.toJSON())}getCurrentUser(){var w=this;return(0,y.Z)(function*(){const E=yield w.persistence._get(w.fullUserKey);return E?mt._fromJSON(w.auth,E):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(w){var E=this;return(0,y.Z)(function*(){if(E.persistence===w)return;const x=yield E.getCurrentUser();return yield E.removeCurrentUser(),E.persistence=w,x?E.setCurrentUser(x):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(w,E,x="authUser"){return(0,y.Z)(function*(){if(!E.length)return new Nt(Re(gn),w,x);const U=(yield Promise.all(E.map(function(){var Rt=(0,y.Z)(function*(en){if(yield en._isAvailable())return en});return function(en){return Rt.apply(this,arguments)}}()))).filter(Rt=>Rt);let Q=U[0]||Re(gn);const he=ln(x,w.config.apiKey,w.name);let Ve=null;for(const Rt of E)try{const en=yield Rt._get(he);if(en){const Ft=mt._fromJSON(w,en);Rt!==Q&&(Ve=Ft),Q=Rt;break}}catch{}const pt=U.filter(Rt=>Rt._shouldAllowMigration);return Q._shouldAllowMigration&&pt.length?(Q=pt[0],Ve&&(yield Q._set(he,Ve.toJSON())),yield Promise.all(E.map(function(){var Rt=(0,y.Z)(function*(en){if(en!==Q)try{yield en._remove(he)}catch{}});return function(en){return Rt.apply(this,arguments)}}())),new Nt(Q,w,x)):new Nt(Q,w,x)})()}}function an(T){const w=T.toLowerCase();if(w.includes("opera/")||w.includes("opr/")||w.includes("opios/"))return"Opera";if(Gi(w))return"IEMobile";if(w.includes("msie")||w.includes("trident/"))return"IE";if(w.includes("edge/"))return"Edge";if(er(w))return"Firefox";if(w.includes("silk/"))return"Silk";if(wt(w))return"Blackberry";if(Yt(w))return"Webos";if(Yr(w))return"Safari";if((w.includes("chrome/")||Ts(w))&&!w.includes("edge/"))return"Chrome";if(Qr(w))return"Android";{const x=T.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===x?.length)return x[1]}return"Other"}function er(T=(0,J.z$)()){return/firefox\//i.test(T)}function Yr(T=(0,J.z$)()){const w=T.toLowerCase();return w.includes("safari/")&&!w.includes("chrome/")&&!w.includes("crios/")&&!w.includes("android")}function Ts(T=(0,J.z$)()){return/crios\//i.test(T)}function Gi(T=(0,J.z$)()){return/iemobile/i.test(T)}function Qr(T=(0,J.z$)()){return/android/i.test(T)}function wt(T=(0,J.z$)()){return/blackberry/i.test(T)}function Yt(T=(0,J.z$)()){return/webos/i.test(T)}function Hn(T=(0,J.z$)()){return/iphone|ipad|ipod/i.test(T)||/macintosh/i.test(T)&&/mobile/i.test(T)}function ou(T=(0,J.z$)()){return Hn(T)||Qr(T)||Yt(T)||wt(T)||/windows phone/i.test(T)||Gi(T)}function Ss(T,w=[]){let E;switch(T){case"Browser":E=an((0,J.z$)());break;case"Worker":E=`${an((0,J.z$)())}-${T}`;break;default:E=T}const x=w.length?w.join(","):"FirebaseCore-web";return`${E}/JsCore/${me.SDK_VERSION}/${x}`}class ta{constructor(w){this.auth=w,this.queue=[]}pushCallback(w,E){const x=Q=>new Promise((he,Ve)=>{try{he(w(Q))}catch(pt){Ve(pt)}});x.onAbort=E,this.queue.push(x);const U=this.queue.length-1;return()=>{this.queue[U]=()=>Promise.resolve()}}runMiddleware(w){var E=this;return(0,y.Z)(function*(){var x;if(E.auth.currentUser===w)return;const U=[];try{for(const Q of E.queue)yield Q(w),Q.onAbort&&U.push(Q.onAbort)}catch(Q){U.reverse();for(const he of U)try{he()}catch{}throw E.auth._errorFactory.create("login-blocked",{originalMessage:null===(x=Q)||void 0===x?void 0:x.message})}})()}}class Cn{constructor(w,E,x){this.app=w,this.heartbeatServiceProvider=E,this.config=x,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new rs(this),this.idTokenSubscription=new rs(this),this.beforeStateQueue=new ta(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Pe,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=w.name,this.clientVersion=x.sdkClientVersion}_initializeWithPersistence(w,E){var x=this;return E&&(this._popupRedirectResolver=Re(E)),this._initializationPromise=this.queue((0,y.Z)(function*(){var U,Q;if(!x._deleted&&(x.persistenceManager=yield Nt.create(x,w),!x._deleted)){if(null!==(U=x._popupRedirectResolver)&&void 0!==U&&U._shouldInitProactively)try{yield x._popupRedirectResolver._initialize(x)}catch{}yield x.initializeCurrentUser(E),x.lastNotifiedUid=(null===(Q=x.currentUser)||void 0===Q?void 0:Q.uid)||null,!x._deleted&&(x._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var w=this;return(0,y.Z)(function*(){if(w._deleted)return;const E=yield w.assertedPersistence.getCurrentUser();if(w.currentUser||E){if(w.currentUser&&E&&w.currentUser.uid===E.uid)return w._currentUser._assign(E),void(yield w.currentUser.getIdToken());yield w._updateCurrentUser(E,!0)}})()}initializeCurrentUser(w){var E=this;return(0,y.Z)(function*(){var x;const U=yield E.assertedPersistence.getCurrentUser();let Q=U,he=!1;if(w&&E.config.authDomain){yield E.getOrInitRedirectPersistenceManager();const Ve=null===(x=E.redirectUser)||void 0===x?void 0:x._redirectEventId,pt=Q?._redirectEventId,Rt=yield E.tryRedirectSignIn(w);(!Ve||Ve===pt)&&Rt?.user&&(Q=Rt.user,he=!0)}if(!Q)return E.directlySetCurrentUser(null);if(!Q._redirectEventId){if(he)try{yield E.beforeStateQueue.runMiddleware(Q)}catch(Ve){Q=U,E._popupRedirectResolver._overrideRedirectResult(E,()=>Promise.reject(Ve))}return Q?E.reloadAndSetCurrentUserOrClear(Q):E.directlySetCurrentUser(null)}return le(E._popupRedirectResolver,E,"argument-error"),yield E.getOrInitRedirectPersistenceManager(),E.redirectUser&&E.redirectUser._redirectEventId===Q._redirectEventId?E.directlySetCurrentUser(Q):E.reloadAndSetCurrentUserOrClear(Q)})()}tryRedirectSignIn(w){var E=this;return(0,y.Z)(function*(){let x=null;try{x=yield E._popupRedirectResolver._completeRedirectFn(E,w,!0)}catch{yield E._setRedirectUser(null)}return x})()}reloadAndSetCurrentUserOrClear(w){var E=this;return(0,y.Z)(function*(){var x;try{yield Fn(w)}catch(U){if("auth/network-request-failed"!==(null===(x=U)||void 0===x?void 0:x.code))return E.directlySetCurrentUser(null)}return E.directlySetCurrentUser(w)})()}useDeviceLanguage(){this.languageCode=function _t(){if(typeof navigator>"u")return null;const T=navigator;return T.languages&&T.languages[0]||T.language||null}()}_delete(){var w=this;return(0,y.Z)(function*(){w._deleted=!0})()}updateCurrentUser(w){var E=this;return(0,y.Z)(function*(){const x=w?(0,J.m9)(w):null;return x&&le(x.auth.config.apiKey===E.config.apiKey,E,"invalid-user-token"),E._updateCurrentUser(x&&x._clone(E))})()}_updateCurrentUser(w,E=!1){var x=this;return(0,y.Z)(function*(){if(!x._deleted)return w&&le(x.tenantId===w.tenantId,x,"tenant-id-mismatch"),E||(yield x.beforeStateQueue.runMiddleware(w)),x.queue((0,y.Z)(function*(){yield x.directlySetCurrentUser(w),x.notifyAuthListeners()}))})()}signOut(){var w=this;return(0,y.Z)(function*(){return yield w.beforeStateQueue.runMiddleware(null),(w.redirectPersistenceManager||w._popupRedirectResolver)&&(yield w._setRedirectUser(null)),w._updateCurrentUser(null,!0)})()}setPersistence(w){var E=this;return this.queue((0,y.Z)(function*(){yield E.assertedPersistence.setPersistence(Re(w))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(w){this._errorFactory=new J.LL("auth","Firebase",w())}onAuthStateChanged(w,E,x){return this.registerStateListener(this.authStateSubscription,w,E,x)}beforeAuthStateChanged(w,E){return this.beforeStateQueue.pushCallback(w,E)}onIdTokenChanged(w,E,x){return this.registerStateListener(this.idTokenSubscription,w,E,x)}toJSON(){var w;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(w=this._currentUser)||void 0===w?void 0:w.toJSON()}}_setRedirectUser(w,E){var x=this;return(0,y.Z)(function*(){const U=yield x.getOrInitRedirectPersistenceManager(E);return null===w?U.removeCurrentUser():U.setCurrentUser(w)})()}getOrInitRedirectPersistenceManager(w){var E=this;return(0,y.Z)(function*(){if(!E.redirectPersistenceManager){const x=w&&Re(w)||E._popupRedirectResolver;le(x,E,"argument-error"),E.redirectPersistenceManager=yield Nt.create(E,[Re(x._redirectPersistence)],"redirectUser"),E.redirectUser=yield E.redirectPersistenceManager.getCurrentUser()}return E.redirectPersistenceManager})()}_redirectUserForId(w){var E=this;return(0,y.Z)(function*(){var x,U;return E._isInitialized&&(yield E.queue((0,y.Z)(function*(){}))),(null===(x=E._currentUser)||void 0===x?void 0:x._redirectEventId)===w?E._currentUser:(null===(U=E.redirectUser)||void 0===U?void 0:U._redirectEventId)===w?E.redirectUser:null})()}_persistUserIfCurrent(w){var E=this;return(0,y.Z)(function*(){if(w===E.currentUser)return E.queue((0,y.Z)(function*(){return E.directlySetCurrentUser(w)}))})()}_notifyListenersIfCurrent(w){w===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var w,E;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const x=null!==(E=null===(w=this.currentUser)||void 0===w?void 0:w.uid)&&void 0!==E?E:null;this.lastNotifiedUid!==x&&(this.lastNotifiedUid=x,this.authStateSubscription.next(this.currentUser))}registerStateListener(w,E,x,U){if(this._deleted)return()=>{};const Q="function"==typeof E?E:E.next.bind(E),he=this._isInitialized?Promise.resolve():this._initializationPromise;return le(he,this,"internal-error"),he.then(()=>Q(this.currentUser)),"function"==typeof E?w.addObserver(E,x,U):w.addObserver(E)}directlySetCurrentUser(w){var E=this;return(0,y.Z)(function*(){E.currentUser&&E.currentUser!==w&&E._currentUser._stopProactiveRefresh(),w&&E.isProactiveRefreshEnabled&&w._startProactiveRefresh(),E.currentUser=w,w?yield E.assertedPersistence.setCurrentUser(w):yield E.assertedPersistence.removeCurrentUser()})()}queue(w){return this.operations=this.operations.then(w,w),this.operations}get assertedPersistence(){return le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(w){!w||this.frameworks.includes(w)||(this.frameworks.push(w),this.frameworks.sort(),this.clientVersion=Ss(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var w=this;return(0,y.Z)(function*(){var E;const x={"X-Client-Version":w.clientVersion};w.app.options.appId&&(x["X-Firebase-gmpid"]=w.app.options.appId);const U=yield null===(E=w.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===E?void 0:E.getHeartbeatsHeader();return U&&(x["X-Firebase-Client"]=U),x})()}}function _r(T){return(0,J.m9)(T)}class rs{constructor(w){this.auth=w,this.observer=null,this.addObserver=(0,J.ne)(E=>this.observer=E)}get next(){return le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function is(T){const w=T.indexOf(":");return w<0?"":T.substr(0,w+1)}function os(T){if(!T)return null;const w=Number(T);return isNaN(w)?null:w}class Ri{constructor(w,E){this.providerId=w,this.signInMethod=E}toJSON(){return He("not implemented")}_getIdTokenResponse(w){return He("not implemented")}_linkToIdToken(w,E){return He("not implemented")}_getReauthenticationResolver(w){return He("not implemented")}}function dr(T,w){return Fc.apply(this,arguments)}function Fc(){return(Fc=(0,y.Z)(function*(T,w){return jn(T,"POST","/v1/accounts:resetPassword",un(T,w))})).apply(this,arguments)}function tr(T,w){return na.apply(this,arguments)}function na(){return(na=(0,y.Z)(function*(T,w){return jn(T,"POST","/v1/accounts:update",w)})).apply(this,arguments)}function Cl(T,w){return As.apply(this,arguments)}function As(){return(As=(0,y.Z)(function*(T,w){return jn(T,"POST","/v1/accounts:update",un(T,w))})).apply(this,arguments)}function yo(){return(yo=(0,y.Z)(function*(T,w){return Wr(T,"POST","/v1/accounts:signInWithPassword",un(T,w))})).apply(this,arguments)}function ra(T,w){return cr.apply(this,arguments)}function cr(){return(cr=(0,y.Z)(function*(T,w){return jn(T,"POST","/v1/accounts:sendOobCode",un(T,w))})).apply(this,arguments)}function Nr(T,w){return su.apply(this,arguments)}function su(){return(su=(0,y.Z)(function*(T,w){return ra(T,w)})).apply(this,arguments)}function Hr(T,w){return qi.apply(this,arguments)}function qi(){return(qi=(0,y.Z)(function*(T,w){return ra(T,w)})).apply(this,arguments)}function $u(T,w){return Gu.apply(this,arguments)}function Gu(){return(Gu=(0,y.Z)(function*(T,w){return ra(T,w)})).apply(this,arguments)}function Dl(T,w){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,y.Z)(function*(T,w){return ra(T,w)})).apply(this,arguments)}function Tl(){return(Tl=(0,y.Z)(function*(T,w){return Wr(T,"POST","/v1/accounts:signInWithEmailLink",un(T,w))})).apply(this,arguments)}function qu(){return(qu=(0,y.Z)(function*(T,w){return Wr(T,"POST","/v1/accounts:signInWithEmailLink",un(T,w))})).apply(this,arguments)}class au extends Ri{constructor(w,E,x,U=null){super("password",x),this._email=w,this._password=E,this._tenantId=U}static _fromEmailAndPassword(w,E){return new au(w,E,"password")}static _fromEmailAndCode(w,E,x=null){return new au(w,E,"emailLink",x)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(w){const E="string"==typeof w?JSON.parse(w):w;if(E?.email&&E?.password){if("password"===E.signInMethod)return this._fromEmailAndPassword(E.email,E.password);if("emailLink"===E.signInMethod)return this._fromEmailAndCode(E.email,E.password,E.tenantId)}return null}_getIdTokenResponse(w){var E=this;return(0,y.Z)(function*(){switch(E.signInMethod){case"password":return function Hu(T,w){return yo.apply(this,arguments)}(w,{returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function Pd(T,w){return Tl.apply(this,arguments)}(w,{email:E._email,oobCode:E._password});default:ze(w,"internal-error")}})()}_linkToIdToken(w,E){var x=this;return(0,y.Z)(function*(){switch(x.signInMethod){case"password":return tr(w,{idToken:E,returnSecureToken:!0,email:x._email,password:x._password});case"emailLink":return function kd(T,w){return qu.apply(this,arguments)}(w,{idToken:E,email:x._email,oobCode:x._password});default:ze(w,"internal-error")}})()}_getReauthenticationResolver(w){return this._getIdTokenResponse(w)}}function ei(T,w){return Lh.apply(this,arguments)}function Lh(){return(Lh=(0,y.Z)(function*(T,w){return Wr(T,"POST","/v1/accounts:signInWithIdp",un(T,w))})).apply(this,arguments)}class Ao extends Ri{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(w){const E=new Ao(w.providerId,w.signInMethod);return w.idToken||w.accessToken?(w.idToken&&(E.idToken=w.idToken),w.accessToken&&(E.accessToken=w.accessToken),w.nonce&&!w.pendingToken&&(E.nonce=w.nonce),w.pendingToken&&(E.pendingToken=w.pendingToken)):w.oauthToken&&w.oauthTokenSecret?(E.accessToken=w.oauthToken,E.secret=w.oauthTokenSecret):ze("argument-error"),E}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(w){const E="string"==typeof w?JSON.parse(w):w,{providerId:x,signInMethod:U}=E,Q=(0,Ie._T)(E,["providerId","signInMethod"]);if(!x||!U)return null;const he=new Ao(x,U);return he.idToken=Q.idToken||void 0,he.accessToken=Q.accessToken||void 0,he.secret=Q.secret,he.nonce=Q.nonce,he.pendingToken=Q.pendingToken||null,he}_getIdTokenResponse(w){return ei(w,this.buildRequest())}_linkToIdToken(w,E){const x=this.buildRequest();return x.idToken=E,ei(w,x)}_getReauthenticationResolver(w){const E=this.buildRequest();return E.autoCreate=!1,ei(w,E)}buildRequest(){const w={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)w.pendingToken=this.pendingToken;else{const E={};this.idToken&&(E.id_token=this.idToken),this.accessToken&&(E.access_token=this.accessToken),this.secret&&(E.oauth_token_secret=this.secret),E.providerId=this.providerId,this.nonce&&!this.pendingToken&&(E.nonce=this.nonce),w.postBody=(0,J.xO)(E)}return w}}function Uh(T,w){return Fd.apply(this,arguments)}function Fd(){return(Fd=(0,y.Z)(function*(T,w){return jn(T,"POST","/v1/accounts:sendVerificationCode",un(T,w))})).apply(this,arguments)}function ia(){return(ia=(0,y.Z)(function*(T,w){return Wr(T,"POST","/v1/accounts:signInWithPhoneNumber",un(T,w))})).apply(this,arguments)}function zu(){return(zu=(0,y.Z)(function*(T,w){const E=yield Wr(T,"POST","/v1/accounts:signInWithPhoneNumber",un(T,w));if(E.temporaryProof)throw lr(T,"account-exists-with-different-credential",E);return E})).apply(this,arguments)}const Jf={USER_NOT_FOUND:"user-not-found"};function Wu(){return(Wu=(0,y.Z)(function*(T,w){return Wr(T,"POST","/v1/accounts:signInWithPhoneNumber",un(T,Object.assign(Object.assign({},w),{operation:"REAUTH"})),Jf)})).apply(this,arguments)}class to extends Ri{constructor(w){super("phone","phone"),this.params=w}static _fromVerification(w,E){return new to({verificationId:w,verificationCode:E})}static _fromTokenResponse(w,E){return new to({phoneNumber:w,temporaryProof:E})}_getIdTokenResponse(w){return function Sl(T,w){return ia.apply(this,arguments)}(w,this._makeVerificationRequest())}_linkToIdToken(w,E){return function gg(T,w){return zu.apply(this,arguments)}(w,Object.assign({idToken:E},this._makeVerificationRequest()))}_getReauthenticationResolver(w){return function Ld(T,w){return Wu.apply(this,arguments)}(w,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:w,phoneNumber:E,verificationId:x,verificationCode:U}=this.params;return w&&E?{temporaryProof:w,phoneNumber:E}:{sessionInfo:x,code:U}}toJSON(){const w={providerId:this.providerId};return this.params.phoneNumber&&(w.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(w.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(w.verificationCode=this.params.verificationCode),this.params.verificationId&&(w.verificationId=this.params.verificationId),w}static fromJSON(w){"string"==typeof w&&(w=JSON.parse(w));const{verificationId:E,verificationCode:x,phoneNumber:U,temporaryProof:Q}=w;return x||E||U||Q?new to({verificationId:E,verificationCode:x,phoneNumber:U,temporaryProof:Q}):null}}class Zu{constructor(w){var E,x,U,Q,he,Ve;const pt=(0,J.zd)((0,J.pd)(w)),Rt=null!==(E=pt.apiKey)&&void 0!==E?E:null,en=null!==(x=pt.oobCode)&&void 0!==x?x:null,Ft=function Al(T){switch(T){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(U=pt.mode)&&void 0!==U?U:null);le(Rt&&en&&Ft,"argument-error"),this.apiKey=Rt,this.operation=Ft,this.code=en,this.continueUrl=null!==(Q=pt.continueUrl)&&void 0!==Q?Q:null,this.languageCode=null!==(he=pt.languageCode)&&void 0!==he?he:null,this.tenantId=null!==(Ve=pt.tenantId)&&void 0!==Ve?Ve:null}static parseLink(w){const E=function Bh(T){const w=(0,J.zd)((0,J.pd)(T)).link,E=w?(0,J.zd)((0,J.pd)(w)).deep_link_id:null,x=(0,J.zd)((0,J.pd)(T)).deep_link_id;return(x?(0,J.zd)((0,J.pd)(x)).link:null)||x||E||w||T}(w);try{return new Zu(E)}catch{return null}}}let xo=(()=>{class T{constructor(){this.providerId=T.PROVIDER_ID}static credential(E,x){return au._fromEmailAndPassword(E,x)}static credentialWithLink(E,x){const U=Zu.parseLink(x);return le(U,"argument-error"),au._fromEmailAndCode(E,U.code,U.tenantId)}}return T.PROVIDER_ID="password",T.EMAIL_PASSWORD_SIGN_IN_METHOD="password",T.EMAIL_LINK_SIGN_IN_METHOD="emailLink",T})();class zi{constructor(w){this.providerId=w,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(w){this.defaultLanguageCode=w}setCustomParameters(w){return this.customParameters=w,this}getCustomParameters(){return this.customParameters}}class xs extends zi{constructor(){super(...arguments),this.scopes=[]}addScope(w){return this.scopes.includes(w)||this.scopes.push(w),this}getScopes(){return[...this.scopes]}}class uu extends xs{static credentialFromJSON(w){const E="string"==typeof w?JSON.parse(w):w;return le("providerId"in E&&"signInMethod"in E,"argument-error"),Ao._fromParams(E)}credential(w){return this._credential(Object.assign(Object.assign({},w),{nonce:w.rawNonce}))}_credential(w){return le(w.idToken||w.accessToken,"argument-error"),Ao._fromParams(Object.assign(Object.assign({},w),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(w){return uu.oauthCredentialFromTaggedObject(w)}static credentialFromError(w){return uu.oauthCredentialFromTaggedObject(w.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:w}){if(!w)return null;const{oauthIdToken:E,oauthAccessToken:x,oauthTokenSecret:U,pendingToken:Q,nonce:he,providerId:Ve}=w;if(!x&&!U&&!E&&!Q||!Ve)return null;try{return new uu(Ve)._credential({idToken:E,accessToken:x,nonce:he,pendingToken:Q})}catch{return null}}}let ss=(()=>{class T extends xs{constructor(){super("facebook.com")}static credential(E){return Ao._fromParams({providerId:T.PROVIDER_ID,signInMethod:T.FACEBOOK_SIGN_IN_METHOD,accessToken:E})}static credentialFromResult(E){return T.credentialFromTaggedObject(E)}static credentialFromError(E){return T.credentialFromTaggedObject(E.customData||{})}static credentialFromTaggedObject({_tokenResponse:E}){if(!E||!("oauthAccessToken"in E)||!E.oauthAccessToken)return null;try{return T.credential(E.oauthAccessToken)}catch{return null}}}return T.FACEBOOK_SIGN_IN_METHOD="facebook.com",T.PROVIDER_ID="facebook.com",T})(),Mo=(()=>{class T extends xs{constructor(){super("google.com"),this.addScope("profile")}static credential(E,x){return Ao._fromParams({providerId:T.PROVIDER_ID,signInMethod:T.GOOGLE_SIGN_IN_METHOD,idToken:E,accessToken:x})}static credentialFromResult(E){return T.credentialFromTaggedObject(E)}static credentialFromError(E){return T.credentialFromTaggedObject(E.customData||{})}static credentialFromTaggedObject({_tokenResponse:E}){if(!E)return null;const{oauthIdToken:x,oauthAccessToken:U}=E;if(!x&&!U)return null;try{return T.credential(x,U)}catch{return null}}}return T.GOOGLE_SIGN_IN_METHOD="google.com",T.PROVIDER_ID="google.com",T})(),Yu=(()=>{class T extends xs{constructor(){super("github.com")}static credential(E){return Ao._fromParams({providerId:T.PROVIDER_ID,signInMethod:T.GITHUB_SIGN_IN_METHOD,accessToken:E})}static credentialFromResult(E){return T.credentialFromTaggedObject(E)}static credentialFromError(E){return T.credentialFromTaggedObject(E.customData||{})}static credentialFromTaggedObject({_tokenResponse:E}){if(!E||!("oauthAccessToken"in E)||!E.oauthAccessToken)return null;try{return T.credential(E.oauthAccessToken)}catch{return null}}}return T.GITHUB_SIGN_IN_METHOD="github.com",T.PROVIDER_ID="github.com",T})();class Aa extends Ri{constructor(w,E){super(w,w),this.pendingToken=E}_getIdTokenResponse(w){return ei(w,this.buildRequest())}_linkToIdToken(w,E){const x=this.buildRequest();return x.idToken=E,ei(w,x)}_getReauthenticationResolver(w){const E=this.buildRequest();return E.autoCreate=!1,ei(w,E)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(w){const E="string"==typeof w?JSON.parse(w):w,{providerId:x,signInMethod:U,pendingToken:Q}=E;return x&&U&&Q&&x===U?new Aa(x,Q):null}static _create(w,E){return new Aa(w,E)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Nn extends zi{constructor(w){le(w.startsWith("saml."),"argument-error"),super(w)}static credentialFromResult(w){return Nn.samlCredentialFromTaggedObject(w)}static credentialFromError(w){return Nn.samlCredentialFromTaggedObject(w.customData||{})}static credentialFromJSON(w){const E=Aa.fromJSON(w);return le(E,"argument-error"),E}static samlCredentialFromTaggedObject({_tokenResponse:w}){if(!w)return null;const{pendingToken:E,providerId:x}=w;if(!E||!x)return null;try{return Aa._create(x,E)}catch{return null}}}let Oi=(()=>{class T extends xs{constructor(){super("twitter.com")}static credential(E,x){return Ao._fromParams({providerId:T.PROVIDER_ID,signInMethod:T.TWITTER_SIGN_IN_METHOD,oauthToken:E,oauthTokenSecret:x})}static credentialFromResult(E){return T.credentialFromTaggedObject(E)}static credentialFromError(E){return T.credentialFromTaggedObject(E.customData||{})}static credentialFromTaggedObject({_tokenResponse:E}){if(!E)return null;const{oauthAccessToken:x,oauthTokenSecret:U}=E;if(!x||!U)return null;try{return T.credential(x,U)}catch{return null}}}return T.TWITTER_SIGN_IN_METHOD="twitter.com",T.PROVIDER_ID="twitter.com",T})();function Qu(T,w){return jh.apply(this,arguments)}function jh(){return(jh=(0,y.Z)(function*(T,w){return Wr(T,"POST","/v1/accounts:signUp",un(T,w))})).apply(this,arguments)}class $r{constructor(w){this.user=w.user,this.providerId=w.providerId,this._tokenResponse=w._tokenResponse,this.operationType=w.operationType}static _fromIdTokenResponse(w,E,x,U=!1){return(0,y.Z)(function*(){const Q=yield mt._fromIdTokenResponse(w,x,U),he=Lc(x);return new $r({user:Q,providerId:he,_tokenResponse:x,operationType:E})})()}static _forOperation(w,E,x){return(0,y.Z)(function*(){yield w._updateTokensIfNecessary(x,!0);const U=Lc(x);return new $r({user:w,providerId:U,_tokenResponse:x,operationType:E})})()}}function Lc(T){return T.providerId?T.providerId:"phoneNumber"in T?"phone":null}function Dr(){return(Dr=(0,y.Z)(function*(T){var w;const E=_r(T);if(yield E._initializationPromise,null!==(w=E.currentUser)&&void 0!==w&&w.isAnonymous)return new $r({user:E.currentUser,providerId:null,operationType:"signIn"});const x=yield Qu(E,{returnSecureToken:!0}),U=yield $r._fromIdTokenResponse(E,"signIn",x,!0);return yield E._updateCurrentUser(U.user),U})).apply(this,arguments)}class Ml extends J.ZR{constructor(w,E,x,U){var Q;super(E.code,E.message),this.operationType=x,this.user=U,Object.setPrototypeOf(this,Ml.prototype),this.customData={appName:w.name,tenantId:null!==(Q=w.tenantId)&&void 0!==Q?Q:void 0,_serverResponse:E.customData._serverResponse,operationType:x}}static _fromErrorAndOperation(w,E,x,U){return new Ml(w,E,x,U)}}function ep(T,w,E,x){return("reauthenticate"===w?E._getReauthenticationResolver(T):E._getIdTokenResponse(T)).catch(Q=>{throw"auth/multi-factor-auth-required"===Q.code?Ml._fromErrorAndOperation(T,Q,w,x):Q})}function Ro(T){return new Set(T.map(({providerId:w})=>w).filter(w=>!!w))}function xa(){return(xa=(0,y.Z)(function*(T,w){const E=(0,J.m9)(T);yield Ln(!0,E,w);const{providerUserInfo:x}=yield yr(E.auth,{idToken:yield E.getIdToken(),deleteProvider:[w]}),U=Ro(x||[]);return E.providerData=E.providerData.filter(Q=>U.has(Q.providerId)),U.has("phone")||(E.phoneNumber=null),yield E.auth._persistUserIfCurrent(E),E})).apply(this,arguments)}function ro(T,w){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,y.Z)(function*(T,w,E=!1){const x=yield Zr(T,w._linkToIdToken(T.auth,yield T.getIdToken()),E);return $r._forOperation(T,"link",x)})).apply(this,arguments)}function Ln(T,w,E){return Ju.apply(this,arguments)}function Ju(){return(Ju=(0,y.Z)(function*(T,w,E){yield Fn(w);const U=!1===T?"provider-already-linked":"no-such-provider";le(Ro(w.providerData).has(E)===T,w.auth,U)})).apply(this,arguments)}function Oo(T,w){return Rl.apply(this,arguments)}function Rl(){return(Rl=(0,y.Z)(function*(T,w,E=!1){var x;const{auth:U}=T,Q="reauthenticate";try{const he=yield Zr(T,ep(U,Q,w,T),E);le(he.idToken,U,"internal-error");const Ve=Pt(he.idToken);le(Ve,U,"internal-error");const{sub:pt}=Ve;return le(T.uid===pt,U,"user-mismatch"),$r._forOperation(T,Q,he)}catch(he){throw"auth/user-not-found"===(null===(x=he)||void 0===x?void 0:x.code)&&ze(U,"user-mismatch"),he}})).apply(this,arguments)}function as(T,w){return Vc.apply(this,arguments)}function Vc(){return(Vc=(0,y.Z)(function*(T,w,E=!1){const x="signIn",U=yield ep(T,x,w),Q=yield $r._fromIdTokenResponse(T,x,U);return E||(yield T._updateCurrentUser(Q.user)),Q})).apply(this,arguments)}function Tr(T,w){return dn.apply(this,arguments)}function dn(){return(dn=(0,y.Z)(function*(T,w){return as(_r(T),w)})).apply(this,arguments)}function Uc(T,w){return Vd.apply(this,arguments)}function Vd(){return(Vd=(0,y.Z)(function*(T,w){const E=(0,J.m9)(T);return yield Ln(!1,E,w.providerId),ro(E,w)})).apply(this,arguments)}function Xu(T,w){return Bc.apply(this,arguments)}function Bc(){return(Bc=(0,y.Z)(function*(T,w){return Oo((0,J.m9)(T),w)})).apply(this,arguments)}function Ol(T,w){return us.apply(this,arguments)}function us(){return(us=(0,y.Z)(function*(T,w){return Wr(T,"POST","/v1/accounts:signInWithCustomToken",un(T,w))})).apply(this,arguments)}function jc(){return(jc=(0,y.Z)(function*(T,w){const E=_r(T),x=yield Ol(E,{token:w,returnSecureToken:!0}),U=yield $r._fromIdTokenResponse(E,"signIn",x);return yield E._updateCurrentUser(U.user),U})).apply(this,arguments)}class Je{constructor(w,E){this.factorId=w,this.uid=E.mfaEnrollmentId,this.enrollmentTime=new Date(E.enrolledAt).toUTCString(),this.displayName=E.displayName}static _fromServerResponse(w,E){return"phoneInfo"in E?Tn._fromServerResponse(w,E):ze(w,"internal-error")}}class Tn extends Je{constructor(w){super("phone",w),this.phoneNumber=w.phoneInfo}static _fromServerResponse(w,E){return new Tn(E)}}function Ma(T,w,E){var x;le((null===(x=E.url)||void 0===x?void 0:x.length)>0,T,"invalid-continue-uri"),le(typeof E.dynamicLinkDomain>"u"||E.dynamicLinkDomain.length>0,T,"invalid-dynamic-link-domain"),w.continueUrl=E.url,w.dynamicLinkDomain=E.dynamicLinkDomain,w.canHandleCodeInApp=E.handleCodeInApp,E.iOS&&(le(E.iOS.bundleId.length>0,T,"missing-ios-bundle-id"),w.iOSBundleId=E.iOS.bundleId),E.android&&(le(E.android.packageName.length>0,T,"missing-android-pkg-name"),w.androidInstallApp=E.android.installApp,w.androidMinimumVersionCode=E.android.minimumVersion,w.androidPackageName=E.android.packageName)}function wr(){return(wr=(0,y.Z)(function*(T,w,E){const x=(0,J.m9)(T),U={requestType:"PASSWORD_RESET",email:w};E&&Ma(x,U,E),yield Hr(x,U)})).apply(this,arguments)}function Os(){return(Os=(0,y.Z)(function*(T,w,E){yield dr((0,J.m9)(T),{oobCode:w,newPassword:E})})).apply(this,arguments)}function $c(){return($c=(0,y.Z)(function*(T,w){yield Cl((0,J.m9)(T),{oobCode:w})})).apply(this,arguments)}function hr(T,w){return Nl.apply(this,arguments)}function Nl(){return(Nl=(0,y.Z)(function*(T,w){const E=(0,J.m9)(T),x=yield dr(E,{oobCode:w}),U=x.requestType;switch(le(U,E,"internal-error"),U){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":le(x.newEmail,E,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":le(x.mfaInfo,E,"internal-error");default:le(x.email,E,"internal-error")}let Q=null;return x.mfaInfo&&(Q=Je._fromServerResponse(_r(E),x.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===x.requestType?x.newEmail:x.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===x.requestType?x.email:x.newEmail)||null,multiFactorInfo:Q},operation:U}})).apply(this,arguments)}function Hh(){return(Hh=(0,y.Z)(function*(T,w){const{data:E}=yield hr((0,J.m9)(T),w);return E.email})).apply(this,arguments)}function Pr(){return(Pr=(0,y.Z)(function*(T,w,E){const x=_r(T),U=yield Qu(x,{returnSecureToken:!0,email:w,password:E}),Q=yield $r._fromIdTokenResponse(x,"signIn",U);return yield x._updateCurrentUser(Q.user),Q})).apply(this,arguments)}function Ra(){return(Ra=(0,y.Z)(function*(T,w,E){const x=(0,J.m9)(T),U={requestType:"EMAIL_SIGNIN",email:w};le(E.handleCodeInApp,x,"argument-error"),E&&Ma(x,U,E),yield $u(x,U)})).apply(this,arguments)}function vo(){return(vo=(0,y.Z)(function*(T,w,E){const x=(0,J.m9)(T),U=xo.credentialWithLink(w,E||Qe());return le(U._tenantId===(x.tenantId||null),x,"tenant-id-mismatch"),Tr(x,U)})).apply(this,arguments)}function np(T,w){return jd.apply(this,arguments)}function jd(){return(jd=(0,y.Z)(function*(T,w){return jn(T,"POST","/v1/accounts:createAuthUri",un(T,w))})).apply(this,arguments)}function oa(){return(oa=(0,y.Z)(function*(T,w){const x={identifier:w,continueUri:Vt()?Qe():"http://localhost"},{signinMethods:U}=yield np((0,J.m9)(T),x);return U||[]})).apply(this,arguments)}function du(){return(du=(0,y.Z)(function*(T,w){const E=(0,J.m9)(T),U={requestType:"VERIFY_EMAIL",idToken:yield T.getIdToken()};w&&Ma(E.auth,U,w);const{email:Q}=yield Nr(E.auth,U);Q!==T.email&&(yield T.reload())})).apply(this,arguments)}function Gc(){return(Gc=(0,y.Z)(function*(T,w,E){const x=(0,J.m9)(T),Q={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield T.getIdToken(),newEmail:w};E&&Ma(x.auth,Q,E);const{email:he}=yield Dl(x.auth,Q);he!==T.email&&(yield T.reload())})).apply(this,arguments)}function nc(T,w){return rc.apply(this,arguments)}function rc(){return(rc=(0,y.Z)(function*(T,w){return jn(T,"POST","/v1/accounts:update",w)})).apply(this,arguments)}function Fl(){return(Fl=(0,y.Z)(function*(T,{displayName:w,photoURL:E}){if(void 0===w&&void 0===E)return;const x=(0,J.m9)(T),Q={idToken:yield x.getIdToken(),displayName:w,photoUrl:E,returnSecureToken:!0},he=yield Zr(x,nc(x.auth,Q));x.displayName=he.displayName||null,x.photoURL=he.photoUrl||null;const Ve=x.providerData.find(({providerId:pt})=>"password"===pt);Ve&&(Ve.displayName=x.displayName,Ve.photoURL=x.photoURL),yield x._updateTokensIfNecessary(he)})).apply(this,arguments)}function Na(T,w,E){return oc.apply(this,arguments)}function oc(){return(oc=(0,y.Z)(function*(T,w,E){const{auth:x}=T,Q={idToken:yield T.getIdToken(),returnSecureToken:!0};w&&(Q.email=w),E&&(Q.password=E);const he=yield Zr(T,tr(x,Q));yield T._updateTokensIfNecessary(he,!0)})).apply(this,arguments)}class io{constructor(w,E,x={}){this.isNewUser=w,this.providerId=E,this.profile=x}}class nr extends io{constructor(w,E,x,U){super(w,E,x),this.username=U}}class $d extends io{constructor(w,E){super(w,"facebook.com",E)}}class Ll extends nr{constructor(w,E){super(w,"github.com",E,"string"==typeof E?.login?E?.login:null)}}class hu extends io{constructor(w,E){super(w,"google.com",E)}}class Vl extends nr{constructor(w,E,x){super(w,"twitter.com",E,x)}}function qc(T){const{user:w,_tokenResponse:E}=T;return w.isAnonymous&&!E?{providerId:null,isNewUser:!1,profile:null}:function Gr(T){var w,E;if(!T)return null;const{providerId:x}=T,U=T.rawUserInfo?JSON.parse(T.rawUserInfo):{},Q=T.isNewUser||"identitytoolkit#SignupNewUserResponse"===T.kind;if(!x&&T?.idToken){const he=null===(E=null===(w=Pt(T.idToken))||void 0===w?void 0:w.firebase)||void 0===E?void 0:E.sign_in_provider;if(he)return new io(Q,"anonymous"!==he&&"custom"!==he?he:null)}if(!x)return null;switch(x){case"facebook.com":return new $d(Q,U);case"github.com":return new Ll(Q,U);case"google.com":return new hu(Q,U);case"twitter.com":return new Vl(Q,U,T.screenName||null);case"custom":case"anonymous":return new io(Q,null);default:return new io(Q,x,U)}}(E)}class Ns{constructor(w,E,x){this.type=w,this.credential=E,this.auth=x}static _fromIdtoken(w,E){return new Ns("enroll",w,E)}static _fromMfaPendingCredential(w){return new Ns("signin",w)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(w){var E,x;if(w?.multiFactorSession){if(null!==(E=w.multiFactorSession)&&void 0!==E&&E.pendingCredential)return Ns._fromMfaPendingCredential(w.multiFactorSession.pendingCredential);if(null!==(x=w.multiFactorSession)&&void 0!==x&&x.idToken)return Ns._fromIdtoken(w.multiFactorSession.idToken)}return null}}class zc{constructor(w,E,x){this.session=w,this.hints=E,this.signInResolver=x}static _fromError(w,E){const x=_r(w),U=E.customData._serverResponse,Q=(U.mfaInfo||[]).map(Ve=>Je._fromServerResponse(x,Ve));le(U.mfaPendingCredential,x,"internal-error");const he=Ns._fromMfaPendingCredential(U.mfaPendingCredential);return new zc(he,Q,function(){var Ve=(0,y.Z)(function*(pt){const Rt=yield pt._process(x,he);delete U.mfaInfo,delete U.mfaPendingCredential;const en=Object.assign(Object.assign({},U),{idToken:Rt.idToken,refreshToken:Rt.refreshToken});switch(E.operationType){case"signIn":const Ft=yield $r._fromIdTokenResponse(x,E.operationType,en);return yield x._updateCurrentUser(Ft.user),Ft;case"reauthenticate":return le(E.user,x,"internal-error"),$r._forOperation(E.user,E.operationType,en);default:ze(x,"internal-error")}});return function(pt){return Ve.apply(this,arguments)}}())}resolveSignIn(w){var E=this;return(0,y.Z)(function*(){return E.signInResolver(w)})()}}function sc(T,w){return jn(T,"POST","/v2/accounts/mfaEnrollment:start",un(T,w))}class $h{constructor(w){this.user=w,this.enrolledFactors=[],w._onReload(E=>{E.mfaInfo&&(this.enrolledFactors=E.mfaInfo.map(x=>Je._fromServerResponse(w.auth,x)))})}static _fromUser(w){return new $h(w)}getSession(){var w=this;return(0,y.Z)(function*(){return Ns._fromIdtoken(yield w.user.getIdToken(),w.user.auth)})()}enroll(w,E){var x=this;return(0,y.Z)(function*(){const U=w,Q=yield x.getSession(),he=yield Zr(x.user,U._process(x.user.auth,Q,E));return yield x.user._updateTokensIfNecessary(he),x.user.reload()})()}unenroll(w){var E=this;return(0,y.Z)(function*(){var x;const U="string"==typeof w?w:w.uid,Q=yield E.user.getIdToken(),he=yield Zr(E.user,function ac(T,w){return jn(T,"POST","/v2/accounts/mfaEnrollment:withdraw",un(T,w))}(E.user.auth,{idToken:Q,mfaEnrollmentId:U}));E.enrolledFactors=E.enrolledFactors.filter(({uid:Ve})=>Ve!==U),yield E.user._updateTokensIfNecessary(he);try{yield E.user.reload()}catch(Ve){if("auth/user-token-expired"!==(null===(x=Ve)||void 0===x?void 0:x.code))throw Ve}})()}}const Zc=new WeakMap,ti="__sak";class ke{constructor(w,E){this.storageRetriever=w,this.type=E}_isAvailable(){try{return this.storage?(this.storage.setItem(ti,"1"),this.storage.removeItem(ti),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(w,E){return this.storage.setItem(w,JSON.stringify(E)),Promise.resolve()}_get(w){const E=this.storage.getItem(w);return Promise.resolve(E?JSON.parse(E):null)}_remove(w){return this.storage.removeItem(w),Promise.resolve()}get storage(){return this.storageRetriever()}}const fr=(()=>{class T extends ke{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(E,x)=>this.onStorageEvent(E,x),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function et(){const T=(0,J.z$)();return Yr(T)||Hn(T)}()&&function sr(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=ou(),this._shouldAllowMigration=!0}forAllChangedKeys(E){for(const x of Object.keys(this.listeners)){const U=this.storage.getItem(x),Q=this.localCache[x];U!==Q&&E(x,Q,U)}}onStorageEvent(E,x=!1){if(!E.key)return void this.forAllChangedKeys((Ve,pt,Rt)=>{this.notifyListeners(Ve,Rt)});const U=E.key;if(x?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Ve=this.storage.getItem(U);if(E.newValue!==Ve)null!==E.newValue?this.storage.setItem(U,E.newValue):this.storage.removeItem(U);else if(this.localCache[U]===E.newValue&&!x)return}const Q=()=>{const Ve=this.storage.getItem(U);!x&&this.localCache[U]===Ve||this.notifyListeners(U,Ve)},he=this.storage.getItem(U);!function Jr(){return(0,J.w1)()&&10===document.documentMode}()||he===E.newValue||E.newValue===E.oldValue?Q():setTimeout(Q,10)}notifyListeners(E,x){this.localCache[E]=x;const U=this.listeners[E];if(U)for(const Q of Array.from(U))Q(x&&JSON.parse(x))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((E,x,U)=>{this.onStorageEvent(new StorageEvent("storage",{key:E,oldValue:x,newValue:U}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(E,x){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[E]||(this.listeners[E]=new Set,this.localCache[E]=this.storage.getItem(E)),this.listeners[E].add(x)}_removeListener(E,x){this.listeners[E]&&(this.listeners[E].delete(x),0===this.listeners[E].size&&delete this.listeners[E]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(E,x){var U=()=>super._set,Q=this;return(0,y.Z)(function*(){yield U().call(Q,E,x),Q.localCache[E]=JSON.stringify(x)})()}_get(E){var x=()=>super._get,U=this;return(0,y.Z)(function*(){const Q=yield x().call(U,E);return U.localCache[E]=JSON.stringify(Q),Q})()}_remove(E){var x=()=>super._remove,U=this;return(0,y.Z)(function*(){yield x().call(U,E),delete U.localCache[E]})()}}return T.type="LOCAL",T})(),ko=(()=>{class T extends ke{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(E,x){}_removeListener(E,x){}}return T.type="SESSION",T})();let rn=(()=>{class T{constructor(E){this.eventTarget=E,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(E){const x=this.receivers.find(Q=>Q.isListeningto(E));if(x)return x;const U=new T(E);return this.receivers.push(U),U}isListeningto(E){return this.eventTarget===E}handleEvent(E){var x=this;return(0,y.Z)(function*(){const U=E,{eventId:Q,eventType:he,data:Ve}=U.data,pt=x.handlersMap[he];if(!pt?.size)return;U.ports[0].postMessage({status:"ack",eventId:Q,eventType:he});const Rt=Array.from(pt).map(function(){var Ft=(0,y.Z)(function*(Mr){return Mr(U.origin,Ve)});return function(Mr){return Ft.apply(this,arguments)}}()),en=yield function kt(T){return Promise.all(T.map(function(){var w=(0,y.Z)(function*(E){try{return{fulfilled:!0,value:yield E}}catch(x){return{fulfilled:!1,reason:x}}});return function(E){return w.apply(this,arguments)}}()))}(Rt);U.ports[0].postMessage({status:"done",eventId:Q,eventType:he,response:en})})()}_subscribe(E,x){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[E]||(this.handlersMap[E]=new Set),this.handlersMap[E].add(x)}_unsubscribe(E,x){this.handlersMap[E]&&x&&this.handlersMap[E].delete(x),(!x||0===this.handlersMap[E].size)&&delete this.handlersMap[E],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return T.receivers=[],T})();function vt(T="",w=10){let E="";for(let x=0;x<w;x++)E+=Math.floor(10*Math.random());return T+E}class zd{constructor(w){this.target=w,this.handlers=new Set}removeMessageHandler(w){w.messageChannel&&(w.messageChannel.port1.removeEventListener("message",w.onMessage),w.messageChannel.port1.close()),this.handlers.delete(w)}_send(w,E,x=50){var U=this;return(0,y.Z)(function*(){const Q=typeof MessageChannel<"u"?new MessageChannel:null;if(!Q)throw new Error("connection_unavailable");let he,Ve;return new Promise((pt,Rt)=>{const en=vt("",20);Q.port1.start();const Ft=setTimeout(()=>{Rt(new Error("unsupported_event"))},x);Ve={messageChannel:Q,onMessage(Mr){const Ws=Mr;if(Ws.data.eventId===en)switch(Ws.data.status){case"ack":clearTimeout(Ft),he=setTimeout(()=>{Rt(new Error("timeout"))},3e3);break;case"done":clearTimeout(he),pt(Ws.data.response);break;default:clearTimeout(Ft),clearTimeout(he),Rt(new Error("invalid_response"))}}},U.handlers.add(Ve),Q.port1.addEventListener("message",Ve.onMessage),U.target.postMessage({eventType:w,eventId:en,data:E},[Q.port2])}).finally(()=>{Ve&&U.removeMessageHandler(Ve)})})()}}function kr(){return window}function la(){return typeof kr().WorkerGlobalScope<"u"&&"function"==typeof kr().importScripts}function di(){return(di=(0,y.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const oo="firebaseLocalStorageDb",da="firebaseLocalStorage",Vn="fbase_key";class gu{constructor(w){this.request=w}toPromise(){return new Promise((w,E)=>{this.request.addEventListener("success",()=>{w(this.request.result)}),this.request.addEventListener("error",()=>{E(this.request.error)})})}}function Wi(T,w){return T.transaction([da],w?"readwrite":"readonly").objectStore(da)}function qr(){const T=indexedDB.open(oo,1);return new Promise((w,E)=>{T.addEventListener("error",()=>{E(T.error)}),T.addEventListener("upgradeneeded",()=>{const x=T.result;try{x.createObjectStore(da,{keyPath:Vn})}catch(U){E(U)}}),T.addEventListener("success",(0,y.Z)(function*(){const x=T.result;x.objectStoreNames.contains(da)?w(x):(x.close(),yield function mu(){const T=indexedDB.deleteDatabase(oo);return new gu(T).toPromise()}(),w(yield qr()))}))})}function ha(T,w,E){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,y.Z)(function*(T,w,E){const x=Wi(T,!0).put({[Vn]:w,value:E});return new gu(x).toPromise()})).apply(this,arguments)}function ks(){return(ks=(0,y.Z)(function*(T,w){const E=Wi(T,!1).get(w),x=yield new gu(E).toPromise();return void 0===x?null:x.value})).apply(this,arguments)}function fa(T,w){const E=Wi(T,!0).delete(w);return new gu(E).toPromise()}const pa=(()=>{class T{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var E=this;return(0,y.Z)(function*(){return E.db||(E.db=yield qr()),E.db})()}_withRetries(E){var x=this;return(0,y.Z)(function*(){let U=0;for(;;)try{const Q=yield x._openDb();return yield E(Q)}catch(Q){if(U++>3)throw Q;x.db&&(x.db.close(),x.db=void 0)}})()}initializeServiceWorkerMessaging(){var E=this;return(0,y.Z)(function*(){return la()?E.initializeReceiver():E.initializeSender()})()}initializeReceiver(){var E=this;return(0,y.Z)(function*(){E.receiver=rn._getInstance(function Yc(){return la()?self:null}()),E.receiver._subscribe("keyChanged",function(){var x=(0,y.Z)(function*(U,Q){return{keyProcessed:(yield E._poll()).includes(Q.key)}});return function(U,Q){return x.apply(this,arguments)}}()),E.receiver._subscribe("ping",function(){var x=(0,y.Z)(function*(U,Q){return["keyChanged"]});return function(U,Q){return x.apply(this,arguments)}}())})()}initializeSender(){var E=this;return(0,y.Z)(function*(){var x,U;if(E.activeServiceWorker=yield function Pa(){return di.apply(this,arguments)}(),!E.activeServiceWorker)return;E.sender=new zd(E.activeServiceWorker);const Q=yield E.sender._send("ping",{},800);!Q||(null===(x=Q[0])||void 0===x?void 0:x.fulfilled)&&(null===(U=Q[0])||void 0===U?void 0:U.value.includes("keyChanged"))&&(E.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(E){var x=this;return(0,y.Z)(function*(){if(x.sender&&x.activeServiceWorker&&function bn(){var T;return(null===(T=navigator?.serviceWorker)||void 0===T?void 0:T.controller)||null}()===x.activeServiceWorker)try{yield x.sender._send("keyChanged",{key:E},x.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,y.Z)(function*(){try{if(!indexedDB)return!1;const E=yield qr();return yield ha(E,ti,"1"),yield fa(E,ti),!0}catch{}return!1})()}_withPendingWrite(E){var x=this;return(0,y.Z)(function*(){x.pendingWrites++;try{yield E()}finally{x.pendingWrites--}})()}_set(E,x){var U=this;return(0,y.Z)(function*(){return U._withPendingWrite((0,y.Z)(function*(){return yield U._withRetries(Q=>ha(Q,E,x)),U.localCache[E]=x,U.notifyServiceWorker(E)}))})()}_get(E){var x=this;return(0,y.Z)(function*(){const U=yield x._withRetries(Q=>function br(T,w){return ks.apply(this,arguments)}(Q,E));return x.localCache[E]=U,U})()}_remove(E){var x=this;return(0,y.Z)(function*(){return x._withPendingWrite((0,y.Z)(function*(){return yield x._withRetries(U=>fa(U,E)),delete x.localCache[E],x.notifyServiceWorker(E)}))})()}_poll(){var E=this;return(0,y.Z)(function*(){const x=yield E._withRetries(he=>{const Ve=Wi(he,!1).getAll();return new gu(Ve).toPromise()});if(!x)return[];if(0!==E.pendingWrites)return[];const U=[],Q=new Set;for(const{fbase_key:he,value:Ve}of x)Q.add(he),JSON.stringify(E.localCache[he])!==JSON.stringify(Ve)&&(E.notifyListeners(he,Ve),U.push(he));for(const he of Object.keys(E.localCache))E.localCache[he]&&!Q.has(he)&&(E.notifyListeners(he,null),U.push(he));return U})()}notifyListeners(E,x){this.localCache[E]=x;const U=this.listeners[E];if(U)for(const Q of Array.from(U))Q(x)}startPolling(){var E=this;this.stopPolling(),this.pollTimer=setInterval((0,y.Z)(function*(){return E._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(E,x){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[E]||(this.listeners[E]=new Set,this._get(E)),this.listeners[E].add(x)}_removeListener(E,x){this.listeners[E]&&(this.listeners[E].delete(x),0===this.listeners[E].size&&delete this.listeners[E]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return T.type="LOCAL",T})();function yu(T,w){return jn(T,"POST","/v2/accounts/mfaSignIn:start",un(T,w))}function Ii(){return(Ii=(0,y.Z)(function*(T){return(yield jn(T,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ls(T){return new Promise((w,E)=>{const x=document.createElement("script");x.setAttribute("src",T),x.onload=w,x.onerror=U=>{const Q=Ce("internal-error");Q.customData=U,E(Q)},x.type="text/javascript",x.charset="UTF-8",function Ls(){var T,w;return null!==(w=null===(T=document.getElementsByTagName("head"))||void 0===T?void 0:T[0])&&void 0!==w?w:document}().appendChild(x)})}function Qc(T){return`__${T}${Math.floor(1e6*Math.random())}`}const Fa=1e12;class rr{constructor(w){this.auth=w,this.counter=Fa,this._widgets=new Map}render(w,E){const x=this.counter;return this._widgets.set(x,new Gh(w,this.auth.name,E||{})),this.counter++,x}reset(w){var E;const x=w||Fa;null===(E=this._widgets.get(x))||void 0===E||E.delete(),this._widgets.delete(x)}getResponse(w){var E;return(null===(E=this._widgets.get(w||Fa))||void 0===E?void 0:E.getResponse())||""}execute(w){var E=this;return(0,y.Z)(function*(){var x;return null===(x=E._widgets.get(w||Fa))||void 0===x||x.execute(),""})()}}class Gh{constructor(w,E,x){this.params=x,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const U="string"==typeof w?document.getElementById(w):w;le(U,"argument-error",{appName:E}),this.container=U,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function mg(T){const w=[],E="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let x=0;x<T;x++)w.push(E.charAt(Math.floor(Math.random()*E.length)));return w.join("")}(50);const{callback:w,"expired-callback":E}=this.params;if(w)try{w(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,E)try{E()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const rp=Qc("rcb"),qh=new St(3e4,6e4);class wo{constructor(){var w;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(w=kr().grecaptcha)||void 0===w||!w.render)}load(w,E=""){return le(function Km(T){return T.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(T)}(E),w,"argument-error"),this.shouldResolveImmediately(E)?Promise.resolve(kr().grecaptcha):new Promise((x,U)=>{const Q=kr().setTimeout(()=>{U(Ce(w,"network-request-failed"))},qh.get());kr()[rp]=()=>{kr().clearTimeout(Q),delete kr()[rp];const Ve=kr().grecaptcha;if(!Ve)return void U(Ce(w,"internal-error"));const pt=Ve.render;Ve.render=(Rt,en)=>{const Ft=pt(Rt,en);return this.counter++,Ft},this.hostLanguage=E,x(Ve)},ls(`https://www.google.com/recaptcha/api.js??${(0,J.xO)({onload:rp,render:"explicit",hl:E})}`).catch(()=>{clearTimeout(Q),U(Ce(w,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(w){var E;return!(null===(E=kr().grecaptcha)||void 0===E||!E.render)&&(w===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class ri{load(w){return(0,y.Z)(function*(){return new rr(w)})()}clearedOneInstance(){}}const Ym="recaptcha",yg={theme:"light",type:"image"};class Fr{constructor(w,E=Object.assign({},yg),x){this.parameters=E,this.type=Ym,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=_r(x),this.isInvisible="invisible"===this.parameters.size,le(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const U="string"==typeof w?document.getElementById(w):w;le(U,this.auth,"argument-error"),this.container=U,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ri:new wo,this.validateStartingState()}verify(){var w=this;return(0,y.Z)(function*(){w.assertNotDestroyed();const E=yield w.render(),x=w.getAssertedRecaptcha();return x.getResponse(E)||new Promise(Q=>{const he=Ve=>{!Ve||(w.tokenChangeListeners.delete(he),Q(Ve))};w.tokenChangeListeners.add(he),w.isInvisible&&x.execute(E)})})()}render(){try{this.assertNotDestroyed()}catch(w){return Promise.reject(w)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(w=>{throw this.renderPromise=null,w})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(w=>{this.container.removeChild(w)})}validateStartingState(){le(!this.parameters.sitekey,this.auth,"argument-error"),le(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),le(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(w){return E=>{if(this.tokenChangeListeners.forEach(x=>x(E)),"function"==typeof w)w(E);else if("string"==typeof w){const x=kr()[w];"function"==typeof x&&x(E)}}}assertNotDestroyed(){le(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var w=this;return(0,y.Z)(function*(){if(yield w.init(),!w.widgetId){let E=w.container;if(!w.isInvisible){const x=document.createElement("div");E.appendChild(x),E=x}w.widgetId=w.getAssertedRecaptcha().render(E,w.parameters)}return w.widgetId})()}init(){var w=this;return(0,y.Z)(function*(){le(Vt()&&!la(),w.auth,"internal-error"),yield function Un(){let T=null;return new Promise(w=>{"complete"!==document.readyState?(T=()=>w(),window.addEventListener("load",T)):w()}).catch(w=>{throw T&&window.removeEventListener("load",T),w})}(),w.recaptcha=yield w._recaptchaLoader.load(w.auth,w.auth.languageCode||void 0);const E=yield function ni(T){return Ii.apply(this,arguments)}(w.auth);le(E,w.auth,"internal-error"),w.parameters.sitekey=E})()}getAssertedRecaptcha(){return le(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class so{constructor(w,E){this.verificationId=w,this.onConfirmation=E}confirm(w){const E=to._fromVerification(this.verificationId,w);return this.onConfirmation(E)}}function Fo(){return(Fo=(0,y.Z)(function*(T,w,E){const x=_r(T),U=yield La(x,w,(0,J.m9)(E));return new so(U,Q=>Tr(x,Q))})).apply(this,arguments)}function ds(){return(ds=(0,y.Z)(function*(T,w,E){const x=(0,J.m9)(T);yield Ln(!1,x,"phone");const U=yield La(x.auth,w,(0,J.m9)(E));return new so(U,Q=>Uc(x,Q))})).apply(this,arguments)}function Pi(){return(Pi=(0,y.Z)(function*(T,w,E){const x=(0,J.m9)(T),U=yield La(x.auth,w,(0,J.m9)(E));return new so(U,Q=>Xu(x,Q))})).apply(this,arguments)}function La(T,w,E){return Hl.apply(this,arguments)}function Hl(){return(Hl=(0,y.Z)(function*(T,w,E){var x;const U=yield E.verify();try{let Q;if(le("string"==typeof U,T,"argument-error"),le(E.type===Ym,T,"argument-error"),Q="string"==typeof w?{phoneNumber:w}:w,"session"in Q){const he=Q.session;if("phoneNumber"in Q)return le("enroll"===he.type,T,"internal-error"),(yield sc(T,{idToken:he.credential,phoneEnrollmentInfo:{phoneNumber:Q.phoneNumber,recaptchaToken:U}})).phoneSessionInfo.sessionInfo;{le("signin"===he.type,T,"internal-error");const Ve=(null===(x=Q.multiFactorHint)||void 0===x?void 0:x.uid)||Q.multiFactorUid;return le(Ve,T,"missing-multi-factor-info"),(yield yu(T,{mfaPendingCredential:he.credential,mfaEnrollmentId:Ve,phoneSignInInfo:{recaptchaToken:U}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:he}=yield Uh(T,{phoneNumber:Q.phoneNumber,recaptchaToken:U});return he}}finally{E._reset()}})).apply(this,arguments)}function vu(){return(vu=(0,y.Z)(function*(T,w){yield ro((0,J.m9)(T),w)})).apply(this,arguments)}let Va=(()=>{class T{constructor(E){this.providerId=T.PROVIDER_ID,this.auth=_r(E)}verifyPhoneNumber(E,x){return La(this.auth,E,(0,J.m9)(x))}static credential(E,x){return to._fromVerification(E,x)}static credentialFromResult(E){return T.credentialFromTaggedObject(E)}static credentialFromError(E){return T.credentialFromTaggedObject(E.customData||{})}static credentialFromTaggedObject({_tokenResponse:E}){if(!E)return null;const{phoneNumber:x,temporaryProof:U}=E;return x&&U?to._fromTokenResponse(x,U):null}}return T.PROVIDER_ID="phone",T.PHONE_SIGN_IN_METHOD="phone",T})();function Lo(T,w){return w?Re(w):(le(T._popupRedirectResolver,T,"argument-error"),T._popupRedirectResolver)}class Ua extends Ri{constructor(w){super("custom","custom"),this.params=w}_getIdTokenResponse(w){return ei(w,this._buildIdpRequest())}_linkToIdToken(w,E){return ei(w,this._buildIdpRequest(E))}_getReauthenticationResolver(w){return ei(w,this._buildIdpRequest())}_buildIdpRequest(w){const E={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return w&&(E.idToken=w),E}}function Mt(T){return as(T.auth,new Ua(T),T.bypassAuthState)}function cc(T){const{auth:w,user:E}=T;return le(E,w,"internal-error"),Oo(E,new Ua(T),T.bypassAuthState)}function ki(T){return lc.apply(this,arguments)}function lc(){return(lc=(0,y.Z)(function*(T){const{auth:w,user:E}=T;return le(E,w,"internal-error"),ro(E,new Ua(T),T.bypassAuthState)})).apply(this,arguments)}class hs{constructor(w,E,x,U,Q=!1){this.auth=w,this.resolver=x,this.user=U,this.bypassAuthState=Q,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(E)?E:[E]}execute(){var w=this;return new Promise(function(){var E=(0,y.Z)(function*(x,U){w.pendingPromise={resolve:x,reject:U};try{w.eventManager=yield w.resolver._initialize(w.auth),yield w.onExecution(),w.eventManager.registerConsumer(w)}catch(Q){w.reject(Q)}});return function(x,U){return E.apply(this,arguments)}}())}onAuthEvent(w){var E=this;return(0,y.Z)(function*(){const{urlResponse:x,sessionId:U,postBody:Q,tenantId:he,error:Ve,type:pt}=w;if(Ve)return void E.reject(Ve);const Rt={auth:E.auth,requestUri:x,sessionId:U,tenantId:he||void 0,postBody:Q||void 0,user:E.user,bypassAuthState:E.bypassAuthState};try{E.resolve(yield E.getIdpTask(pt)(Rt))}catch(en){E.reject(en)}})()}onError(w){this.reject(w)}getIdpTask(w){switch(w){case"signInViaPopup":case"signInViaRedirect":return Mt;case"linkViaPopup":case"linkViaRedirect":return ki;case"reauthViaPopup":case"reauthViaRedirect":return cc;default:ze(this.auth,"internal-error")}}resolve(w){ge(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(w),this.unregisterAndCleanUp()}reject(w){ge(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(w),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ar=new St(2e3,1e4);function Ba(){return(Ba=(0,y.Z)(function*(T,w,E){const x=_r(T);ft(T,w,zi);const U=Lo(x,E);return new ya(x,"signInViaPopup",w,U).executeNotNull()})).apply(this,arguments)}function Jc(){return(Jc=(0,y.Z)(function*(T,w,E){const x=(0,J.m9)(T);ft(x.auth,w,zi);const U=Lo(x.auth,E);return new ya(x.auth,"reauthViaPopup",w,U,x).executeNotNull()})).apply(this,arguments)}function Fi(){return(Fi=(0,y.Z)(function*(T,w,E){const x=(0,J.m9)(T);ft(x.auth,w,zi);const U=Lo(x.auth,E);return new ya(x.auth,"linkViaPopup",w,U,x).executeNotNull()})).apply(this,arguments)}let ya=(()=>{class T extends hs{constructor(E,x,U,Q,he){super(E,x,Q,he),this.provider=U,this.authWindow=null,this.pollId=null,T.currentPopupAction&&T.currentPopupAction.cancel(),T.currentPopupAction=this}executeNotNull(){var E=this;return(0,y.Z)(function*(){const x=yield E.execute();return le(x,E.auth,"internal-error"),x})()}onExecution(){var E=this;return(0,y.Z)(function*(){ge(1===E.filter.length,"Popup operations only handle one event");const x=vt();E.authWindow=yield E.resolver._openPopup(E.auth,E.provider,E.filter[0],x),E.authWindow.associatedEvent=x,E.resolver._originValidation(E.auth).catch(U=>{E.reject(U)}),E.resolver._isIframeWebStorageSupported(E.auth,U=>{U||E.reject(Ce(E.auth,"web-storage-unsupported"))}),E.pollUserCancellation()})()}get eventId(){var E;return(null===(E=this.authWindow)||void 0===E?void 0:E.associatedEvent)||null}cancel(){this.reject(Ce(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,T.currentPopupAction=null}pollUserCancellation(){const E=()=>{var x,U;this.pollId=null!==(U=null===(x=this.authWindow)||void 0===x?void 0:x.window)&&void 0!==U&&U.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ce(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(E,Ar.get())};E()}}return T.currentPopupAction=null,T})();const Uo=new Map;class Xc extends hs{constructor(w,E,x=!1){super(w,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],E,void 0,x),this.eventId=null}execute(){var w=()=>super.execute,E=this;return(0,y.Z)(function*(){let x=Uo.get(E.auth._key());if(!x){try{const Q=(yield function Vs(T,w){return ao.apply(this,arguments)}(E.resolver,E.auth))?yield w().call(E):null;x=()=>Promise.resolve(Q)}catch(U){x=()=>Promise.reject(U)}Uo.set(E.auth._key(),x)}return E.bypassAuthState||Uo.set(E.auth._key(),()=>Promise.resolve(null)),x()})()}onAuthEvent(w){var E=()=>super.onAuthEvent,x=this;return(0,y.Z)(function*(){if("signInViaRedirect"===w.type)return E().call(x,w);if("unknown"!==w.type){if(w.eventId){const U=yield x.auth._redirectUserForId(w.eventId);if(U)return x.user=U,E().call(x,w);x.resolve(null)}}else x.resolve(null)})()}onExecution(){return(0,y.Z)(function*(){})()}cleanUp(){}}function ao(){return(ao=(0,y.Z)(function*(T,w){const E=Lr(w),x=Bo(T);if(!(yield x._isAvailable()))return!1;const U="true"===(yield x._get(E));return yield x._remove(E),U})).apply(this,arguments)}function va(T,w){return fs.apply(this,arguments)}function fs(){return(fs=(0,y.Z)(function*(T,w){return Bo(T)._set(Lr(w),"true")})).apply(this,arguments)}function _a(T,w){Uo.set(T._key(),w)}function Bo(T){return Re(T._redirectPersistence)}function Lr(T){return ln("pendingRedirect",T.config.apiKey,T.name)}function P(){return(P=(0,y.Z)(function*(T,w,E){const x=_r(T);ft(T,w,zi);const U=Lo(x,E);return yield va(U,x),U._openRedirect(x,w,"signInViaRedirect")})).apply(this,arguments)}function ie(){return(ie=(0,y.Z)(function*(T,w,E){const x=(0,J.m9)(T);ft(x.auth,w,zi);const U=Lo(x.auth,E);yield va(U,x.auth);const Q=yield $t(x);return U._openRedirect(x.auth,w,"reauthViaRedirect",Q)})).apply(this,arguments)}function We(){return(We=(0,y.Z)(function*(T,w,E){const x=(0,J.m9)(T);ft(x.auth,w,zi);const U=Lo(x.auth,E);yield Ln(!1,x,w.providerId),yield va(U,x.auth);const Q=yield $t(x);return U._openRedirect(x.auth,w,"linkViaRedirect",Q)})).apply(this,arguments)}function xt(){return(xt=(0,y.Z)(function*(T,w){return yield _r(T)._initializationPromise,on(T,w,!1)})).apply(this,arguments)}function on(T,w){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,y.Z)(function*(T,w,E=!1){const x=_r(T),U=Lo(x,w),he=yield new Xc(x,U,E).execute();return he&&!E&&(delete he.user._redirectEventId,yield x._persistUserIfCurrent(he.user),yield x._setRedirectUser(null,w)),he})).apply(this,arguments)}function $t(T){return ar.apply(this,arguments)}function ar(){return(ar=(0,y.Z)(function*(T){const w=vt(`${T.uid}:::`);return T._redirectEventId=w,yield T.auth._setRedirectUser(T),yield T.auth._persistUserIfCurrent(T),w})).apply(this,arguments)}class ja{constructor(w){this.auth=w,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(w){this.consumers.add(w),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,w)&&(this.sendToConsumer(this.queuedRedirectEvent,w),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(w){this.consumers.delete(w)}onEvent(w){if(this.hasEventBeenHandled(w))return!1;let E=!1;return this.consumers.forEach(x=>{this.isEventForConsumer(w,x)&&(E=!0,this.sendToConsumer(w,x),this.saveEventToCache(w))}),this.hasHandledPotentialRedirect||!function ps(T){switch(T.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return pn(T);default:return!1}}(w)||(this.hasHandledPotentialRedirect=!0,E||(this.queuedRedirectEvent=w,E=!0)),E}sendToConsumer(w,E){var x;if(w.error&&!pn(w)){const U=(null===(x=w.error.code)||void 0===x?void 0:x.split("auth/")[1])||"internal-error";E.onError(Ce(this.auth,U))}else E.onAuthEvent(w)}isEventForConsumer(w,E){const x=null===E.eventId||!!w.eventId&&w.eventId===E.eventId;return E.filter.includes(w.type)&&x}hasEventBeenHandled(w){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ha(w))}saveEventToCache(w){this.cachedEventUids.add(Ha(w)),this.lastProcessedEventTime=Date.now()}}function Ha(T){return[T.type,T.eventId,T.sessionId,T.tenantId].filter(w=>w).join("-")}function pn({type:T,error:w}){return"unknown"===T&&"auth/no-auth-event"===w?.code}function jo(T){return ii.apply(this,arguments)}function ii(){return(ii=(0,y.Z)(function*(T,w={}){return jn(T,"GET","/v1/projects",w)})).apply(this,arguments)}const _u=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,$a=/^https?/;function zr(){return(zr=(0,y.Z)(function*(T){if(T.config.emulator)return;const{authorizedDomains:w}=yield jo(T);for(const E of w)try{if(Bn(E))return}catch{}ze(T,"unauthorized-domain")})).apply(this,arguments)}function Bn(T){const w=Qe(),{protocol:E,hostname:x}=new URL(w);if(T.startsWith("chrome-extension://")){const he=new URL(T);return""===he.hostname&&""===x?"chrome-extension:"===E&&T.replace("chrome-extension://","")===w.replace("chrome-extension://",""):"chrome-extension:"===E&&he.hostname===x}if(!$a.test(E))return!1;if(_u.test(T))return x===T;const U=T.replace(/\./g,"\\.");return new RegExp("^(.+\\."+U+"|"+U+")$","i").test(x)}const $l=new St(3e4,6e4);function ip(){const T=kr().___jsl;if(T?.H)for(const w of Object.keys(T.H))if(T.H[w].r=T.H[w].r||[],T.H[w].L=T.H[w].L||[],T.H[w].r=[...T.H[w].L],T.CP)for(let E=0;E<T.CP.length;E++)T.CP[E]=null}let gs=null;function Wh(T){return gs=gs||function fi(T){return new Promise((w,E)=>{var x,U,Q;function he(){ip(),gapi.load("gapi.iframes",{callback:()=>{w(gapi.iframes.getContext())},ontimeout:()=>{ip(),E(Ce(T,"network-request-failed"))},timeout:$l.get()})}if(null!==(U=null===(x=kr().gapi)||void 0===x?void 0:x.iframes)&&void 0!==U&&U.Iframe)w(gapi.iframes.getContext());else{if(null===(Q=kr().gapi)||void 0===Q||!Q.load){const Ve=Qc("iframefcb");return kr()[Ve]=()=>{gapi.load?he():E(Ce(T,"network-request-failed"))},ls(`https://apis.google.com/js/api.js?onload=${Ve}`).catch(pt=>E(pt))}he()}}).catch(w=>{throw gs=null,w})}(T),gs}const Zi=new St(5e3,15e3),Ei={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Zh=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _g(T){const w=T.config;le(w.authDomain,T,"auth-domain-config-required");const E=w.emulator?Tt(w,"emulator/auth/iframe"):`https://${T.config.authDomain}/__/auth/iframe`,x={apiKey:w.apiKey,appName:T.name,v:me.SDK_VERSION},U=Zh.get(T.config.apiHost);U&&(x.eid=U);const Q=T._getFrameworks();return Q.length&&(x.fw=Q.join(",")),`${E}?${(0,J.xO)(x).slice(1)}`}function tl(){return tl=(0,y.Z)(function*(T){const w=yield Wh(T),E=kr().gapi;return le(E,T,"internal-error"),w.open({where:document.body,url:_g(T),messageHandlersFilter:E.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ei,dontclear:!0},x=>new Promise(function(){var U=(0,y.Z)(function*(Q,he){yield x.restyle({setHideOnLeave:!1});const Ve=Ce(T,"network-request-failed"),pt=kr().setTimeout(()=>{he(Ve)},Zi.get());function Rt(){kr().clearTimeout(pt),Q(x)}x.ping(Rt).then(Rt,()=>{he(Ve)})});return function(Q,he){return U.apply(this,arguments)}}()))}),tl.apply(this,arguments)}const Gl={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Kd{constructor(w){this.window=w,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Qd(T,w,E,x,U,Q){le(T.config.authDomain,T,"auth-domain-config-required"),le(T.config.apiKey,T,"invalid-api-key");const he={apiKey:T.config.apiKey,appName:T.name,authType:E,redirectUrl:x,v:me.SDK_VERSION,eventId:U};if(w instanceof zi){w.setDefaultLanguage(T.languageCode),he.providerId=w.providerId||"",(0,J.xb)(w.getCustomParameters())||(he.customParameters=JSON.stringify(w.getCustomParameters()));for(const[pt,Rt]of Object.entries(Q||{}))he[pt]=Rt}if(w instanceof xs){const pt=w.getScopes().filter(Rt=>""!==Rt);pt.length>0&&(he.scopes=pt.join(","))}T.tenantId&&(he.tid=T.tenantId);const Ve=he;for(const pt of Object.keys(Ve))void 0===Ve[pt]&&delete Ve[pt];return`${function Jd({config:T}){return T.emulator?Tt(T,"emulator/auth/handler"):`https://${T.authDomain}/__/auth/handler`}(T)}?${(0,J.xO)(Ve).slice(1)}`}const fc="webStorageSupport";class Bs extends class bg{constructor(w){this.factorId=w}_process(w,E,x){switch(E.type){case"enroll":return this._finalizeEnroll(w,E.credential,x);case"signin":return this._finalizeSignIn(w,E.credential);default:return He("unexpected MultiFactorSessionType")}}}{constructor(w){super("phone"),this.credential=w}static _fromCredential(w){return new Bs(w)}_finalizeEnroll(w,E,x){return function Wc(T,w){return jn(T,"POST","/v2/accounts/mfaEnrollment:finalize",un(T,w))}(w,{idToken:E,displayName:x,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(w,E){return function jt(T,w){return jn(T,"POST","/v2/accounts/mfaSignIn:finalize",un(T,w))}(w,{mfaPendingCredential:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let pc=(()=>{class T{constructor(){}static assertion(E){return Bs._fromCredential(E)}}return T.FACTOR_ID="phone",T})();var sp="@firebase/auth";class Qm{constructor(w){this.auth=w,this.internalListeners=new Map}getUid(){var w;return this.assertAuthConfigured(),(null===(w=this.auth.currentUser)||void 0===w?void 0:w.uid)||null}getToken(w){var E=this;return(0,y.Z)(function*(){return E.assertAuthConfigured(),yield E.auth._initializationPromise,E.auth.currentUser?{accessToken:yield E.auth.currentUser.getIdToken(w)}:null})()}addAuthTokenListener(w){if(this.assertAuthConfigured(),this.internalListeners.has(w))return;const E=this.auth.onIdTokenChanged(x=>{var U;w((null===(U=x)||void 0===U?void 0:U.stsTokenManager.accessToken)||null)});this.internalListeners.set(w,E),this.updateProactiveRefresh()}removeAuthTokenListener(w){this.assertAuthConfigured();const E=this.internalListeners.get(w);!E||(this.internalListeners.delete(w),E(),this.updateProactiveRefresh())}assertAuthConfigured(){le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function bu(){return window}function eh(){return(eh=(0,y.Z)(function*(T,w,E){var x;const{BuildInfo:U}=bu();ge(w.sessionId,"AuthEvent did not contain a session ID");const Q=yield Eg(w.sessionId),he={};return Hn()?he.ibi=U.packageName:Qr()?he.apn=U.packageName:ze(T,"operation-not-supported-in-this-environment"),U.displayName&&(he.appDisplayName=U.displayName),he.sessionId=Q,Qd(T,E,w.type,void 0,null!==(x=w.eventId)&&void 0!==x?x:void 0,he)})).apply(this,arguments)}function js(){return(js=(0,y.Z)(function*(T){const{BuildInfo:w}=bu(),E={};Hn()?E.iosBundleId=w.packageName:Qr()?E.androidPackageName=w.packageName:ze(T,"operation-not-supported-in-this-environment"),yield jo(T,E)})).apply(this,arguments)}function $o(){return($o=(0,y.Z)(function*(T,w,E){const{cordova:x}=bu();let U=()=>{};try{yield new Promise((Q,he)=>{let Ve=null;function pt(){var Ft;Q();const Mr=null===(Ft=x.plugins.browsertab)||void 0===Ft?void 0:Ft.close;"function"==typeof Mr&&Mr(),"function"==typeof E?.close&&E.close()}function Rt(){Ve||(Ve=window.setTimeout(()=>{he(Ce(T,"redirect-cancelled-by-user"))},2e3))}function en(){"visible"===document?.visibilityState&&Rt()}w.addPassiveListener(pt),document.addEventListener("resume",Rt,!1),Qr()&&document.addEventListener("visibilitychange",en,!1),U=()=>{w.removePassiveListener(pt),document.removeEventListener("resume",Rt,!1),document.removeEventListener("visibilitychange",en,!1),Ve&&window.clearTimeout(Ve)}})}finally{U()}})).apply(this,arguments)}function Eg(T){return th.apply(this,arguments)}function th(){return(th=(0,y.Z)(function*(T){const w=Jm(T),E=yield crypto.subtle.digest("SHA-256",w);return Array.from(new Uint8Array(E)).map(U=>U.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Jm(T){if(ge(/[0-9a-zA-Z]+/.test(T),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(T);const w=new ArrayBuffer(T.length),E=new Uint8Array(w);for(let x=0;x<T.length;x++)E[x]=T.charCodeAt(x);return E}!function Ki(T){(0,me._registerComponent)(new Oe.wA("auth",(w,{options:E})=>{const x=w.getProvider("app").getImmediate(),U=w.getProvider("heartbeat"),{apiKey:Q,authDomain:he}=x.options;return((Ve,pt)=>{le(Q&&!Q.includes(":"),"invalid-api-key",{appName:Ve.name}),le(!he?.includes(":"),"argument-error",{appName:Ve.name});const Rt={apiKey:Q,authDomain:he,clientPlatform:T,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ss(T)},en=new Cn(Ve,pt,Rt);return function ot(T,w){const E=w?.persistence||[],x=(Array.isArray(E)?E:[E]).map(Re);w?.errorMap&&T._updateErrorMap(w.errorMap),T._initializeWithPersistence(x,w?.popupRedirectResolver)}(en,E),en})(x,U)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((w,E,x)=>{w.getProvider("auth-internal").initialize()})),(0,me._registerComponent)(new Oe.wA("auth-internal",w=>{const E=_r(w.getProvider("auth").getImmediate());return new Qm(E)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,me.registerVersion)(sp,"0.20.7",function o_(T){switch(T){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(T)),(0,me.registerVersion)(sp,"0.20.7","esm2017")}("Browser");class nh extends ja{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(w=>{this.resolveInialized=w})}addPassiveListener(w){this.passiveListeners.add(w)}removePassiveListener(w){this.passiveListeners.delete(w)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(w){return this.resolveInialized(),this.passiveListeners.forEach(E=>E(w)),super.onEvent(w)}initialized(){var w=this;return(0,y.Z)(function*(){yield w.initPromise})()}}function rh(T){return ap.apply(this,arguments)}function ap(){return(ap=(0,y.Z)(function*(T){const w=yield up()._get(cp(T));return w&&(yield up()._remove(cp(T))),w})).apply(this,arguments)}function Hs(){const T=[],w="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<20;E++){const x=Math.floor(Math.random()*w.length);T.push(w.charAt(x))}return T.join("")}function up(){return Re(fr)}function cp(T){return ln("authEvent",T.config.apiKey,T.name)}function Yi(T){if(!T?.includes("?"))return{};const[w,...E]=T.split("?");return(0,J.zd)(E.join("?"))}function Sg(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ce("no-auth-event")}}function $s(){var T;return(null===(T=self?.location)||void 0===T?void 0:T.protocol)||null}function xr(T=(0,J.z$)()){return!("file:"!==$s()&&"ionic:"!==$s()&&"capacitor:"!==$s()||!T.toLowerCase().match(/iphone|ipad|ipod|android/))}function il(){try{const T=self.localStorage,w=vt();if(T)return T.setItem(w,"1"),T.removeItem(w),!function Gs(T=(0,J.z$)()){return function Go(){return(0,J.w1)()&&11===document?.documentMode}()||function Qi(T=(0,J.z$)()){return/Edge\/\d+/.test(T)}(T)}()||(0,J.hl)()}catch{return bo()&&(0,J.hl)()}return!1}function bo(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Wa(){return(function Qh(){return"http:"===$s()||"https:"===$s()}()||(0,J.ru)()||xr())&&!function za(){return(0,J.b$)()||(0,J.UG)()}()&&il()&&!bo()}function yc(){return xr()&&typeof document<"u"}function ih(){return(ih=(0,y.Z)(function*(){return!!yc()&&new Promise(T=>{const w=setTimeout(()=>{T(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(w),T(!0)})})})).apply(this,arguments)}const Jn={LOCAL:"local",NONE:"none",SESSION:"session"},at=le,Kl="persistence";function oh(T){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,y.Z)(function*(T){yield T._initializationPromise;const w=Jh(),E=ln(Kl,T.config.apiKey,T.name);w&&w.setItem(E,T._getPersistence())})).apply(this,arguments)}function Jh(){var T;try{return(null===(T=function xg(){return typeof window<"u"?window:null}())||void 0===T?void 0:T.sessionStorage)||null}catch{return null}}const qo=le;class Cu{constructor(){this.browserResolver=Re(class wg{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ko,this._completeRedirectFn=on,this._overrideRedirectResult=_a}_openPopup(w,E,x,U){var Q=this;return(0,y.Z)(function*(){var he;ge(null===(he=Q.eventManagers[w._key()])||void 0===he?void 0:he.manager,"_initialize() not called before _openPopup()");const Ve=Qd(w,E,x,Qe(),U);return function Us(T,w,E,x=500,U=600){const Q=Math.max((window.screen.availHeight-U)/2,0).toString(),he=Math.max((window.screen.availWidth-x)/2,0).toString();let Ve="";const pt=Object.assign(Object.assign({},Gl),{width:x.toString(),height:U.toString(),top:Q,left:he}),Rt=(0,J.z$)().toLowerCase();E&&(Ve=Ts(Rt)?"_blank":E),er(Rt)&&(w=w||"http://localhost",pt.scrollbars="yes");const en=Object.entries(pt).reduce((Mr,[Ws,bc])=>`${Mr}${Ws}=${bc},`,"");if(function mo(T=(0,J.z$)()){var w;return Hn(T)&&!(null===(w=window.navigator)||void 0===w||!w.standalone)}(Rt)&&"_self"!==Ve)return function Kh(T,w){const E=document.createElement("a");E.href=T,E.target=w;const x=document.createEvent("MouseEvent");x.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),E.dispatchEvent(x)}(w||"",Ve),new Kd(null);const Ft=window.open(w||"",Ve,en);le(Ft,T,"popup-blocked");try{Ft.focus()}catch{}return new Kd(Ft)}(w,Ve,vt())})()}_openRedirect(w,E,x,U){var Q=this;return(0,y.Z)(function*(){return yield Q._originValidation(w),function fn(T){kr().location.href=T}(Qd(w,E,x,Qe(),U)),new Promise(()=>{})})()}_initialize(w){const E=w._key();if(this.eventManagers[E]){const{manager:U,promise:Q}=this.eventManagers[E];return U?Promise.resolve(U):(ge(Q,"If manager is not set, promise should be"),Q)}const x=this.initAndGetManager(w);return this.eventManagers[E]={promise:x},x.catch(()=>{delete this.eventManagers[E]}),x}initAndGetManager(w){var E=this;return(0,y.Z)(function*(){const x=yield function ms(T){return tl.apply(this,arguments)}(w),U=new ja(w);return x.register("authEvent",Q=>(le(Q?.authEvent,w,"invalid-auth-event"),{status:U.onEvent(Q.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),E.eventManagers[w._key()]={manager:U},E.iframes[w._key()]=x,U})()}_isIframeWebStorageSupported(w,E){this.iframes[w._key()].send(fc,{type:fc},U=>{var Q;const he=null===(Q=U?.[0])||void 0===Q?void 0:Q[fc];void 0!==he&&E(!!he),ze(w,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(w){const E=w._key();return this.originValidationPromises[E]||(this.originValidationPromises[E]=function Ho(T){return zr.apply(this,arguments)}(w)),this.originValidationPromises[E]}get _shouldInitProactively(){return ou()||Yr()||Hn()}}),this.cordovaResolver=Re(class Tg{constructor(){this._redirectPersistence=ko,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=on,this._overrideRedirectResult=_a}_initialize(w){var E=this;return(0,y.Z)(function*(){const x=w._key();let U=E.eventManagers.get(x);return U||(U=new nh(w),E.eventManagers.set(x,U),E.attachCallbackListeners(w,U)),U})()}_openPopup(w){ze(w,"operation-not-supported-in-this-environment")}_openRedirect(w,E,x,U){var Q=this;return(0,y.Z)(function*(){!function rl(T){var w,E,x,U,Q,he,Ve,pt,Rt,en;const Ft=bu();le("function"==typeof(null===(w=Ft?.universalLinks)||void 0===w?void 0:w.subscribe),T,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),le(typeof(null===(E=Ft?.BuildInfo)||void 0===E?void 0:E.packageName)<"u",T,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),le("function"==typeof(null===(Q=null===(U=null===(x=Ft?.cordova)||void 0===x?void 0:x.plugins)||void 0===U?void 0:U.browsertab)||void 0===Q?void 0:Q.openUrl),T,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),le("function"==typeof(null===(pt=null===(Ve=null===(he=Ft?.cordova)||void 0===he?void 0:he.plugins)||void 0===Ve?void 0:Ve.browsertab)||void 0===pt?void 0:pt.isAvailable),T,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),le("function"==typeof(null===(en=null===(Rt=Ft?.cordova)||void 0===Rt?void 0:Rt.InAppBrowser)||void 0===en?void 0:en.open),T,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(w);const he=yield Q._initialize(w);yield he.initialized(),he.resetRedirect(),function hi(){Uo.clear()}(),yield Q._originValidation(w);const Ve=function gc(T,w,E=null){return{type:w,eventId:E,urlResponse:null,sessionId:Hs(),postBody:null,tenantId:T.tenantId,error:Ce(T,"no-auth-event")}}(w,x,U);yield function Iu(T,w){return up()._set(cp(T),w)}(w,Ve);const pt=yield function qa(T,w,E){return eh.apply(this,arguments)}(w,Ve,E),Rt=yield function Wl(T){const{cordova:w}=bu();return new Promise(E=>{w.plugins.browsertab.isAvailable(x=>{let U=null;x?w.plugins.browsertab.openUrl(T):U=w.InAppBrowser.open(T,function So(T=(0,J.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(T)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(T)}()?"_blank":"_system","location=yes"),E(U)})})}(pt);return function wa(T,w,E){return $o.apply(this,arguments)}(w,he,Rt)})()}_isIframeWebStorageSupported(w,E){throw new Error("Method not implemented.")}_originValidation(w){const E=w._key();return this.originValidationPromises[E]||(this.originValidationPromises[E]=function Ig(T){return js.apply(this,arguments)}(w)),this.originValidationPromises[E]}attachCallbackListeners(w,E){const{universalLinks:x,handleOpenURL:U,BuildInfo:Q}=bu(),he=setTimeout((0,y.Z)(function*(){yield rh(w),E.onEvent(Sg())}),500),Ve=function(){var en=(0,y.Z)(function*(Ft){clearTimeout(he);const Mr=yield rh(w);let Ws=null;Mr&&Ft?.url&&(Ws=function Zl(T,w){var E,x;const U=function Dg(T){const w=Yi(T),E=w.link?decodeURIComponent(w.link):void 0,x=Yi(E).link,U=w.deep_link_id?decodeURIComponent(w.deep_link_id):void 0;return Yi(U).link||U||x||E||T}(w);if(U.includes("/__/auth/callback")){const Q=Yi(U),he=Q.firebaseError?function Cg(T){try{return JSON.parse(T)}catch{return null}}(decodeURIComponent(Q.firebaseError)):null,Ve=null===(x=null===(E=he?.code)||void 0===E?void 0:E.split("auth/"))||void 0===x?void 0:x[1],pt=Ve?Ce(Ve):null;return pt?{type:T.type,eventId:T.eventId,tenantId:T.tenantId,error:pt,urlResponse:null,sessionId:null,postBody:null}:{type:T.type,eventId:T.eventId,tenantId:T.tenantId,sessionId:T.sessionId,urlResponse:U,postBody:null}}return null}(Mr,Ft.url)),E.onEvent(Ws||Sg())});return function(Mr){return en.apply(this,arguments)}}();typeof x<"u"&&"function"==typeof x.subscribe&&x.subscribe(null,Ve);const pt=U,Rt=`${Q.packageName.toLowerCase()}://`;bu().handleOpenURL=function(){var en=(0,y.Z)(function*(Ft){if(Ft.toLowerCase().startsWith(Rt)&&Ve({url:Ft}),"function"==typeof pt)try{pt(Ft)}catch(Mr){console.error(Mr)}});return function(Ft){return en.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=ko,this._completeRedirectFn=on,this._overrideRedirectResult=_a}_initialize(w){var E=this;return(0,y.Z)(function*(){return yield E.selectUnderlyingResolver(),E.assertedUnderlyingResolver._initialize(w)})()}_openPopup(w,E,x,U){var Q=this;return(0,y.Z)(function*(){return yield Q.selectUnderlyingResolver(),Q.assertedUnderlyingResolver._openPopup(w,E,x,U)})()}_openRedirect(w,E,x,U){var Q=this;return(0,y.Z)(function*(){return yield Q.selectUnderlyingResolver(),Q.assertedUnderlyingResolver._openRedirect(w,E,x,U)})()}_isIframeWebStorageSupported(w,E){this.assertedUnderlyingResolver._isIframeWebStorageSupported(w,E)}_originValidation(w){return this.assertedUnderlyingResolver._originValidation(w)}get _shouldInitProactively(){return yc()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return qo(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var w=this;return(0,y.Z)(function*(){if(w.underlyingResolver)return;const E=yield function Ag(){return ih.apply(this,arguments)}();w.underlyingResolver=E?w.cordovaResolver:w.browserResolver})()}}function qs(T){return T.unwrap()}function zo(T){return Ql(T)}function Ql(T){const{_tokenResponse:w}=T instanceof J.ZR?T.customData:T;if(!w)return null;if(!(T instanceof J.ZR)&&"temporaryProof"in w&&"phoneNumber"in w)return Va.credentialFromResult(T);const E=w.providerId;if(!E||"password"===E)return null;let x;switch(E){case"google.com":x=Mo;break;case"facebook.com":x=ss;break;case"github.com":x=Yu;break;case"twitter.com":x=Oi;break;default:const{oauthIdToken:U,oauthAccessToken:Q,oauthTokenSecret:he,pendingToken:Ve,nonce:pt}=w;return Q||he||U||Ve?Ve?E.startsWith("saml.")?Aa._create(E,Ve):Ao._fromParams({providerId:E,signInMethod:E,pendingToken:Ve,idToken:U,accessToken:Q}):new uu(E).credential({idToken:U,accessToken:Q,rawNonce:pt}):null}return T instanceof J.ZR?x.credentialFromError(T):x.credentialFromResult(T)}function Er(T,w){return w.catch(E=>{throw E instanceof J.ZR&&function vc(T,w){var E,x;const U=null===(E=w.customData)||void 0===E?void 0:E._tokenResponse;if("auth/multi-factor-auth-required"===(null===(x=w)||void 0===x?void 0:x.code))w.resolver=new Xh(T,function Sr(T,w){var E;const x=(0,J.m9)(T),U=w;return le(w.customData.operationType,x,"argument-error"),le(null===(E=U.customData._serverResponse)||void 0===E?void 0:E.mfaPendingCredential,x,"argument-error"),zc._fromError(x,U)}(T,w));else if(U){const Q=Ql(w),he=w;Q&&(he.credential=Q,he.tenantId=U.tenantId||void 0,he.email=U.email||void 0,he.phoneNumber=U.phoneNumber||void 0)}}(T,E),E}).then(E=>{const U=E.user;return{operationType:E.operationType,credential:zo(E),additionalUserInfo:qc(E),user:ba.getOrCreate(U)}})}function Jl(T,w){return Du.apply(this,arguments)}function Du(){return(Du=(0,y.Z)(function*(T,w){const E=yield w;return{verificationId:E.verificationId,confirm:x=>Er(T,E.confirm(x))}})).apply(this,arguments)}class Xh{constructor(w,E){this.resolver=E,this.auth=function Yl(T){return T.wrapped()}(w)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(w){return Er(qs(this.auth),this.resolver.resolveSignIn(w))}}class ba{constructor(w){this._delegate=w,this.multiFactor=function Kc(T){const w=(0,J.m9)(T);return Zc.has(w)||Zc.set(w,$h._fromUser(w)),Zc.get(w)}(w)}static getOrCreate(w){return ba.USER_MAP.has(w)||ba.USER_MAP.set(w,new ba(w)),ba.USER_MAP.get(w)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(w){return this._delegate.getIdTokenResult(w)}getIdToken(w){return this._delegate.getIdToken(w)}linkAndRetrieveDataWithCredential(w){return this.linkWithCredential(w)}linkWithCredential(w){var E=this;return(0,y.Z)(function*(){return Er(E.auth,Uc(E._delegate,w))})()}linkWithPhoneNumber(w,E){var x=this;return(0,y.Z)(function*(){return Jl(x.auth,function Ir(T,w,E){return ds.apply(this,arguments)}(x._delegate,w,E))})()}linkWithPopup(w){var E=this;return(0,y.Z)(function*(){return Er(E.auth,function ma(T,w,E){return Fi.apply(this,arguments)}(E._delegate,w,Cu))})()}linkWithRedirect(w){var E=this;return(0,y.Z)(function*(){return yield oh(_r(E.auth)),function ye(T,w,E){return function Ae(T,w,E){return We.apply(this,arguments)}(T,w,E)}(E._delegate,w,Cu)})()}reauthenticateAndRetrieveDataWithCredential(w){return this.reauthenticateWithCredential(w)}reauthenticateWithCredential(w){var E=this;return(0,y.Z)(function*(){return Er(E.auth,Xu(E._delegate,w))})()}reauthenticateWithPhoneNumber(w,E){return Jl(this.auth,function uc(T,w,E){return Pi.apply(this,arguments)}(this._delegate,w,E))}reauthenticateWithPopup(w){return Er(this.auth,function zh(T,w,E){return Jc.apply(this,arguments)}(this._delegate,w,Cu))}reauthenticateWithRedirect(w){var E=this;return(0,y.Z)(function*(){return yield oh(_r(E.auth)),function k(T,w,E){return function G(T,w,E){return ie.apply(this,arguments)}(T,w,E)}(E._delegate,w,Cu)})()}sendEmailVerification(w){return function kl(T,w){return du.apply(this,arguments)}(this._delegate,w)}unlink(w){var E=this;return(0,y.Z)(function*(){return yield function no(T,w){return xa.apply(this,arguments)}(E._delegate,w),E})()}updateEmail(w){return function ic(T,w){return Na((0,J.m9)(T),w,null)}(this._delegate,w)}updatePassword(w){return function Oa(T,w){return Na((0,J.m9)(T),null,w)}(this._delegate,w)}updatePhoneNumber(w){return function vg(T,w){return vu.apply(this,arguments)}(this._delegate,w)}updateProfile(w){return function Hd(T,w){return Fl.apply(this,arguments)}(this._delegate,w)}verifyBeforeUpdateEmail(w,E){return function tc(T,w,E){return Gc.apply(this,arguments)}(this._delegate,w,E)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ba.USER_MAP=new WeakMap;const Ia=le;let zs=(()=>{class T{constructor(E,x){if(this.app=E,x.isInitialized())return this._delegate=x.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:U}=E.options;Ia(U,"invalid-api-key",{appName:E.name}),Ia(U,"invalid-api-key",{appName:E.name});const Q=typeof window<"u"?Cu:void 0;this._delegate=x.initialize({options:{persistence:_c(U,E.name),popupRedirectResolver:Q}}),this._delegate._updateErrorMap(Ne),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ba.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(E){this._delegate.languageCode=E}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(E){this._delegate.tenantId=E}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(E,x){!function El(T,w,E){const x=_r(T);le(x._canInitEmulator,x,"emulator-config-failed"),le(/^https?:\/\//.test(w),x,"invalid-emulator-scheme");const U=!!E?.disableWarnings,Q=is(w),{host:he,port:Ve}=function jr(T){const w=is(T),E=/(\/\/)?([^?#/]+)/.exec(T.substr(w.length));if(!E)return{host:"",port:null};const x=E[2].split("@").pop()||"",U=/^(\[[^\]]+\])(:|$)/.exec(x);if(U){const Q=U[1];return{host:Q,port:os(x.substr(Q.length+1))}}{const[Q,he]=x.split(":");return{host:Q,port:os(he)}}}(w);x.config.emulator={url:`${Q}//${he}${null===Ve?"":`:${Ve}`}/`},x.settings.appVerificationDisabledForTesting=!0,x.emulatorConfig=Object.freeze({host:he,port:Ve,protocol:Q.replace(":",""),options:Object.freeze({disableWarnings:U})}),U||function Sa(){function T(){const w=document.createElement("p"),E=w.style;w.innerText="Running in emulator mode. Do not use with production credentials.",E.position="fixed",E.width="100%",E.backgroundColor="#ffffff",E.border=".1em solid #000000",E.color="#b50000",E.bottom="0px",E.left="0px",E.margin="0px",E.zIndex="10000",E.textAlign="center",w.classList.add("firebase-emulator-warning"),document.body.appendChild(w)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",T):T())}()}(this._delegate,E,x)}applyActionCode(E){return function Ni(T,w){return $c.apply(this,arguments)}(this._delegate,E)}checkActionCode(E){return hr(this._delegate,E)}confirmPasswordReset(E,x){return function Hc(T,w,E){return Os.apply(this,arguments)}(this._delegate,E,x)}createUserWithEmailAndPassword(E,x){var U=this;return(0,y.Z)(function*(){return Er(U._delegate,function lu(T,w,E){return Pr.apply(this,arguments)}(U._delegate,E,x))})()}fetchProvidersForEmail(E){return this.fetchSignInMethodsForEmail(E)}fetchSignInMethodsForEmail(E){return function ec(T,w){return oa.apply(this,arguments)}(this._delegate,E)}isSignInWithEmailLink(E){return function No(T,w){return"EMAIL_SIGNIN"===Zu.parseLink(w)?.operation}(0,E)}getRedirectResult(){var E=this;return(0,y.Z)(function*(){Ia(Wa(),E._delegate,"operation-not-supported-in-this-environment");const x=yield function st(T,w){return xt.apply(this,arguments)}(E._delegate,Cu);return x?Er(E._delegate,Promise.resolve(x)):{credential:null,user:null}})()}addFrameworkForLogging(E){!function $n(T,w){_r(T)._logFramework(w)}(this._delegate,E)}onAuthStateChanged(E,x,U){const{next:Q,error:he,complete:Ve}=sl(E,x,U);return this._delegate.onAuthStateChanged(Q,he,Ve)}onIdTokenChanged(E,x,U){const{next:Q,error:he,complete:Ve}=sl(E,x,U);return this._delegate.onIdTokenChanged(Q,he,Ve)}sendSignInLinkToEmail(E,x){return function Pl(T,w,E){return Ra.apply(this,arguments)}(this._delegate,E,x)}sendPasswordResetEmail(E,x){return function cu(T,w,E){return wr.apply(this,arguments)}(this._delegate,E,x||void 0)}setPersistence(E){var x=this;return(0,y.Z)(function*(){let U;switch(function ol(T,w){at(Object.values(Jn).includes(w),T,"invalid-persistence-type"),(0,J.b$)()?at(w!==Jn.SESSION,T,"unsupported-persistence-type"):(0,J.UG)()?at(w===Jn.NONE,T,"unsupported-persistence-type"):bo()?at(w===Jn.NONE||w===Jn.LOCAL&&(0,J.hl)(),T,"unsupported-persistence-type"):at(w===Jn.NONE||il(),T,"unsupported-persistence-type")}(x._delegate,E),E){case Jn.SESSION:U=ko;break;case Jn.LOCAL:U=(yield Re(pa)._isAvailable())?pa:fr;break;case Jn.NONE:U=gn;break;default:return ze("argument-error",{appName:x._delegate.name})}return x._delegate.setPersistence(U)})()}signInAndRetrieveDataWithCredential(E){return this.signInWithCredential(E)}signInAnonymously(){return Er(this._delegate,function Xf(T){return Dr.apply(this,arguments)}(this._delegate))}signInWithCredential(E){return Er(this._delegate,Tr(this._delegate,E))}signInWithCustomToken(E){return Er(this._delegate,function Ud(T,w){return jc.apply(this,arguments)}(this._delegate,E))}signInWithEmailAndPassword(E,x){return Er(this._delegate,function cs(T,w,E){return Tr((0,J.m9)(T),xo.credential(w,E))}(this._delegate,E,x))}signInWithEmailLink(E,x){return Er(this._delegate,function tp(T,w,E){return vo.apply(this,arguments)}(this._delegate,E,x))}signInWithPhoneNumber(E,x){return Jl(this._delegate,function Et(T,w,E){return Fo.apply(this,arguments)}(this._delegate,E,x))}signInWithPopup(E){var x=this;return(0,y.Z)(function*(){return Ia(Wa(),x._delegate,"operation-not-supported-in-this-environment"),Er(x._delegate,function dc(T,w,E){return Ba.apply(this,arguments)}(x._delegate,E,Cu))})()}signInWithRedirect(E){var x=this;return(0,y.Z)(function*(){return Ia(Wa(),x._delegate,"operation-not-supported-in-this-environment"),yield oh(x._delegate),function pr(T,w,E){return function el(T,w,E){return P.apply(this,arguments)}(T,w,E)}(x._delegate,E,Cu)})()}updateCurrentUser(E){return this._delegate.updateCurrentUser(E)}verifyPasswordResetCode(E){return function Bd(T,w){return Hh.apply(this,arguments)}(this._delegate,E)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return T.Persistence=Jn,T})();function sl(T,w,E){let x=T;"function"!=typeof T&&({next:x,error:w,complete:E}=T);const U=x;return{next:he=>U(he&&ba.getOrCreate(he)),error:w,complete:E}}function _c(T,w){const E=function vs(T,w){const E=Jh();if(!E)return[];const x=ln(Kl,T,w);switch(E.getItem(x)){case Jn.NONE:return[gn];case Jn.LOCAL:return[pa,ko];case Jn.SESSION:return[ko];default:return[]}}(T,w);if(typeof self<"u"&&!E.includes(pa)&&E.push(pa),typeof window<"u")for(const x of[fr,ko])E.includes(x)||E.push(x);return E.includes(gn)||E.push(gn),E}class wc{constructor(){this.providerId="phone",this._delegate=new Va(qs(L.Z.auth()))}static credential(w,E){return Va.credential(w,E)}verifyPhoneNumber(w,E){return this._delegate.verifyPhoneNumber(w,E)}unwrap(){return this._delegate}}wc.PHONE_SIGN_IN_METHOD=Va.PHONE_SIGN_IN_METHOD,wc.PROVIDER_ID=Va.PROVIDER_ID;const lp=le;class Xl{constructor(w,E,x=L.Z.app()){var U;lp(null===(U=x.options)||void 0===U?void 0:U.apiKey,"invalid-api-key",{appName:x.name}),this._delegate=new Fr(w,E,x.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function dp(T){T.INTERNAL.registerComponent(new Oe.wA("auth-compat",w=>{const E=w.getProvider("app-compat").getImmediate(),x=w.getProvider("auth");return new zs(E,x)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:xo,FacebookAuthProvider:ss,GithubAuthProvider:Yu,GoogleAuthProvider:Mo,OAuthProvider:uu,SAMLAuthProvider:Nn,PhoneAuthProvider:wc,PhoneMultiFactorGenerator:pc,RecaptchaVerifier:Xl,TwitterAuthProvider:Oi,Auth:zs,AuthCredential:Ri,Error:J.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),T.registerVersion("@firebase/auth-compat","0.2.20")}(L.Z)},8036:(Ut,qe,ee)=>{ee.d(qe,{Z:()=>_t});var Ie,Ce,y=ee(655),L=ee(3237),J=ee(1716),me=ee(9474),Ue=((Ie={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",Ie["bad-app-name"]="Illegal App name: '{$appName}",Ie["duplicate-app"]="Firebase App named '{$appName}' already exists",Ie["app-deleted"]="Firebase App named '{$appName}' already deleted",Ie["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",Ie["invalid-log-argument"]="First argument to `onLog` must be null or a function.",Ie),Oe=new L.LL("app","Firebase",Ue),Le="@firebase/app",je="[DEFAULT]",ft=((Ce={})[Le]="fire-core",Ce["@firebase/analytics"]="fire-analytics",Ce["@firebase/app-check"]="fire-app-check",Ce["@firebase/auth"]="fire-auth",Ce["@firebase/database"]="fire-rtdb",Ce["@firebase/functions"]="fire-fn",Ce["@firebase/installations"]="fire-iid",Ce["@firebase/messaging"]="fire-fcm",Ce["@firebase/performance"]="fire-perf",Ce["@firebase/remote-config"]="fire-rc",Ce["@firebase/storage"]="fire-gcs",Ce["@firebase/firestore"]="fire-fst",Ce["fire-js"]="fire-js",Ce["firebase-wrapper"]="fire-js-all",Ce),rt=new me.Yd("@firebase/app"),le=function(){function St(Tt,Ot,Xt){var Xn=this;this.firebase_=Xt,this.isDeleted_=!1,this.name_=Ot.name,this.automaticDataCollectionEnabled_=Ot.automaticDataCollectionEnabled||!1,this.options_=(0,L.p$)(Tt),this.container=new J.H0(Ot.name),this._addComponent(new J.wA("app",function(){return Xn},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(un){return Xn._addComponent(un)})}return Object.defineProperty(St.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(Tt){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=Tt},enumerable:!1,configurable:!0}),Object.defineProperty(St.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(St.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),St.prototype.delete=function(){var Tt=this;return new Promise(function(Ot){Tt.checkDestroyed_(),Ot()}).then(function(){return Tt.firebase_.INTERNAL.removeApp(Tt.name_),Promise.all(Tt.container.getProviders().map(function(Ot){return Ot.delete()}))}).then(function(){Tt.isDeleted_=!0})},St.prototype._getService=function(Tt,Ot){var Xt;void 0===Ot&&(Ot=je),this.checkDestroyed_();var Xn=this.container.getProvider(Tt);return!Xn.isInitialized()&&"EXPLICIT"===(null===(Xt=Xn.getComponent())||void 0===Xt?void 0:Xt.instantiationMode)&&Xn.initialize(),Xn.getImmediate({identifier:Ot})},St.prototype._removeServiceInstance=function(Tt,Ot){void 0===Ot&&(Ot=je),this.container.getProvider(Tt).clearInstance(Ot)},St.prototype._addComponent=function(Tt){try{this.container.addComponent(Tt)}catch(Ot){rt.debug("Component "+Tt.name+" failed to register with FirebaseApp "+this.name,Ot)}},St.prototype._addOrOverwriteComponent=function(Tt){this.container.addOrOverwriteComponent(Tt)},St.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},St.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw Oe.create("app-deleted",{appName:this.name_})},St}();le.prototype.name&&le.prototype.options||le.prototype.delete||console.log("dc");var Re=function _e(){var St=function ge(St){var Tt={},Ot=new Map,Xt={__esModule:!0,initializeApp:function jn(wn,cn){void 0===cn&&(cn={}),("object"!=typeof cn||null===cn)&&(cn={name:cn});var mr=cn;void 0===mr.name&&(mr.name=je);var dt=mr.name;if("string"!=typeof dt||!dt)throw Oe.create("bad-app-name",{appName:String(dt)});if((0,L.r3)(Tt,dt))throw Oe.create("duplicate-app",{appName:dt});var yr=new St(wn,mr,Xt);return Tt[dt]=yr,yr},app:un,registerVersion:function Rr(wn,cn,lr){var mr,dt=null!==(mr=ft[wn])&&void 0!==mr?mr:wn;lr&&(dt+="-"+lr);var yr=dt.match(/\s|\//),vr=cn.match(/\s|\//);if(yr||vr){var Mn=['Unable to register library "'+dt+'" with version "'+cn+'":'];return yr&&Mn.push('library name "'+dt+'" contains illegal characters (whitespace or "/")'),yr&&vr&&Mn.push("and"),vr&&Mn.push('version name "'+cn+'" contains illegal characters (whitespace or "/")'),void rt.warn(Mn.join(" "))}ci(new J.wA(dt+"-version",function(){return{library:dt,version:cn}},"VERSION"))},setLogLevel:me.Ub,onLog:function Wr(wn,cn){if(null!==wn&&"function"!=typeof wn)throw Oe.create("invalid-log-argument");(0,me.Am)(wn,cn)},apps:null,SDK_VERSION:"8.10.0",INTERNAL:{registerComponent:ci,removeApp:function Xn(wn){delete Tt[wn]},components:Ot,useAsService:function ns(wn,cn){return"serverAuth"===cn?null:cn}}};function un(wn){if(!(0,L.r3)(Tt,wn=wn||je))throw Oe.create("no-app",{appName:wn});return Tt[wn]}function ci(wn){var cn=wn.name;if(Ot.has(cn))return rt.debug("There were multiple attempts to register component "+cn+"."),"PUBLIC"===wn.type?Xt[cn]:null;if(Ot.set(cn,wn),"PUBLIC"===wn.type){var lr=function(vr){if(void 0===vr&&(vr=un()),"function"!=typeof vr[cn])throw Oe.create("invalid-app-argument",{appName:cn});return vr[cn]()};void 0!==wn.serviceProps&&(0,L.ZB)(lr,wn.serviceProps),Xt[cn]=lr,St.prototype[cn]=function(){for(var vr=[],Mn=0;Mn<arguments.length;Mn++)vr[Mn]=arguments[Mn];return this._getService.bind(this,cn).apply(this,wn.multipleInstances?vr:[])}}for(var mr=0,dt=Object.keys(Tt);mr<dt.length;mr++)Tt[dt[mr]]._addComponent(wn);return"PUBLIC"===wn.type?Xt[cn]:null}return Xt.default=Xt,Object.defineProperty(Xt,"apps",{get:function go(){return Object.keys(Tt).map(function(wn){return Tt[wn]})}}),un.App=St,Xt}(le);return St.INTERNAL=(0,y.pi)((0,y.pi)({},St.INTERNAL),{createFirebaseNamespace:_e,extendNamespace:function Tt(Ot){(0,L.ZB)(St,Ot)},createSubscribe:L.ne,ErrorFactory:L.LL,deepExtend:L.ZB}),St}(),Ee=function(){function St(Tt){this.container=Tt}return St.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(Ot){if(function ot(St){return"VERSION"===St.getComponent()?.type}(Ot)){var Xt=Ot.getImmediate();return Xt.library+"/"+Xt.version}return null}).filter(function(Ot){return Ot}).join(" ")},St}();if((0,L.jU)()&&void 0!==self.firebase){rt.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Vt=self.firebase.SDK_VERSION;Vt&&Vt.indexOf("LITE")>=0&&rt.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Jt=Re.initializeApp;Re.initializeApp=function(){for(var St=[],Tt=0;Tt<arguments.length;Tt++)St[Tt]=arguments[Tt];return(0,L.UG)()&&rt.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),Jt.apply(void 0,St)};var _n=Re;!function Qe(St,Tt){St.INTERNAL.registerComponent(new J.wA("platform-logger",function(Ot){return new Ee(Ot)},"PRIVATE")),St.registerVersion(Le,"0.6.30",Tt),St.registerVersion("fire-js","")}(_n);const _t=_n},1716:(Ut,qe,ee)=>{ee.d(qe,{H0:()=>Le,wA:()=>J});var y=ee(655),L=ee(3237),J=function(){function ue(te,X,oe){this.name=te,this.instanceFactory=X,this.type=oe,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return ue.prototype.setInstantiationMode=function(te){return this.instantiationMode=te,this},ue.prototype.setMultipleInstances=function(te){return this.multipleInstances=te,this},ue.prototype.setServiceProps=function(te){return this.serviceProps=te,this},ue.prototype.setInstanceCreatedCallback=function(te){return this.onInstanceCreated=te,this},ue}(),me="[DEFAULT]",Ie=function(){function ue(te,X){this.name=te,this.container=X,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return ue.prototype.get=function(te){var X=this.normalizeInstanceIdentifier(te);if(!this.instancesDeferred.has(X)){var oe=new L.BH;if(this.instancesDeferred.set(X,oe),this.isInitialized(X)||this.shouldAutoInitialize())try{var be=this.getOrInitializeService({instanceIdentifier:X});be&&oe.resolve(be)}catch{}}return this.instancesDeferred.get(X).promise},ue.prototype.getImmediate=function(te){var X,oe=this.normalizeInstanceIdentifier(te?.identifier),be=null!==(X=te?.optional)&&void 0!==X&&X;if(!this.isInitialized(oe)&&!this.shouldAutoInitialize()){if(be)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:oe})}catch(we){if(be)return null;throw we}},ue.prototype.getComponent=function(){return this.component},ue.prototype.setComponent=function(te){var X,oe;if(te.name!==this.name)throw Error("Mismatching Component "+te.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=te,this.shouldAutoInitialize()){if(function Oe(ue){return"EAGER"===ue.instantiationMode}(te))try{this.getOrInitializeService({instanceIdentifier:me})}catch{}try{for(var be=(0,y.XA)(this.instancesDeferred.entries()),we=be.next();!we.done;we=be.next()){var Ne=(0,y.CR)(we.value,2),Pe=Ne[1],Me=this.normalizeInstanceIdentifier(Ne[0]);try{var yt=this.getOrInitializeService({instanceIdentifier:Me});Pe.resolve(yt)}catch{}}}catch(ht){X={error:ht}}finally{try{we&&!we.done&&(oe=be.return)&&oe.call(be)}finally{if(X)throw X.error}}}},ue.prototype.clearInstance=function(te){void 0===te&&(te=me),this.instancesDeferred.delete(te),this.instancesOptions.delete(te),this.instances.delete(te)},ue.prototype.delete=function(){return(0,y.mG)(this,void 0,void 0,function(){var te;return(0,y.Jh)(this,function(X){switch(X.label){case 0:return te=Array.from(this.instances.values()),[4,Promise.all((0,y.ev)((0,y.ev)([],(0,y.CR)(te.filter(function(oe){return"INTERNAL"in oe}).map(function(oe){return oe.INTERNAL.delete()}))),(0,y.CR)(te.filter(function(oe){return"_delete"in oe}).map(function(oe){return oe._delete()}))))];case 1:return X.sent(),[2]}})})},ue.prototype.isComponentSet=function(){return null!=this.component},ue.prototype.isInitialized=function(te){return void 0===te&&(te=me),this.instances.has(te)},ue.prototype.getOptions=function(te){return void 0===te&&(te=me),this.instancesOptions.get(te)||{}},ue.prototype.initialize=function(te){var X,oe;void 0===te&&(te={});var be=te.options,we=void 0===be?{}:be,Ne=this.normalizeInstanceIdentifier(te.instanceIdentifier);if(this.isInitialized(Ne))throw Error(this.name+"("+Ne+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var ut=this.getOrInitializeService({instanceIdentifier:Ne,options:we});try{for(var Pe=(0,y.XA)(this.instancesDeferred.entries()),Me=Pe.next();!Me.done;Me=Pe.next()){var yt=(0,y.CR)(Me.value,2),ze=yt[1];Ne===this.normalizeInstanceIdentifier(yt[0])&&ze.resolve(ut)}}catch(je){X={error:je}}finally{try{Me&&!Me.done&&(oe=Pe.return)&&oe.call(Pe)}finally{if(X)throw X.error}}return ut},ue.prototype.onInit=function(te,X){var oe,be=this.normalizeInstanceIdentifier(X),we=null!==(oe=this.onInitCallbacks.get(be))&&void 0!==oe?oe:new Set;we.add(te),this.onInitCallbacks.set(be,we);var Ne=this.instances.get(be);return Ne&&te(Ne,be),function(){we.delete(te)}},ue.prototype.invokeOnInitCallbacks=function(te,X){var oe,be,we=this.onInitCallbacks.get(X);if(we)try{for(var Ne=(0,y.XA)(we),ut=Ne.next();!ut.done;ut=Ne.next()){var Pe=ut.value;try{Pe(te,X)}catch{}}}catch(Me){oe={error:Me}}finally{try{ut&&!ut.done&&(be=Ne.return)&&be.call(Ne)}finally{if(oe)throw oe.error}}},ue.prototype.getOrInitializeService=function(te){var X=te.instanceIdentifier,oe=te.options,be=void 0===oe?{}:oe,we=this.instances.get(X);if(!we&&this.component&&(we=this.component.instanceFactory(this.container,{instanceIdentifier:Ue(X),options:be}),this.instances.set(X,we),this.instancesOptions.set(X,be),this.invokeOnInitCallbacks(we,X),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,X,we)}catch{}return we||null},ue.prototype.normalizeInstanceIdentifier=function(te){return void 0===te&&(te=me),this.component?this.component.multipleInstances?te:me:te},ue.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},ue}();function Ue(ue){return ue===me?void 0:ue}var Le=function(){function ue(te){this.name=te,this.providers=new Map}return ue.prototype.addComponent=function(te){var X=this.getProvider(te.name);if(X.isComponentSet())throw new Error("Component "+te.name+" has already been registered with "+this.name);X.setComponent(te)},ue.prototype.addOrOverwriteComponent=function(te){this.getProvider(te.name).isComponentSet()&&this.providers.delete(te.name),this.addComponent(te)},ue.prototype.getProvider=function(te){if(this.providers.has(te))return this.providers.get(te);var X=new Ie(te,this);return this.providers.set(te,X),X},ue.prototype.getProviders=function(){return Array.from(this.providers.values())},ue}()},9474:(Ut,qe,ee)=>{function y(){for(var oe=0,be=0,we=arguments.length;be<we;be++)oe+=arguments[be].length;var Ne=Array(oe),ut=0;for(be=0;be<we;be++)for(var Pe=arguments[be],Me=0,yt=Pe.length;Me<yt;Me++,ut++)Ne[ut]=Pe[Me];return Ne}ee.d(qe,{Am:()=>X,Ub:()=>te,Yd:()=>ue,in:()=>me});var L,J=[],me=(()=>{return(oe=me||(me={}))[oe.DEBUG=0]="DEBUG",oe[oe.VERBOSE=1]="VERBOSE",oe[oe.INFO=2]="INFO",oe[oe.WARN=3]="WARN",oe[oe.ERROR=4]="ERROR",oe[oe.SILENT=5]="SILENT",me;var oe})(),Ie={debug:me.DEBUG,verbose:me.VERBOSE,info:me.INFO,warn:me.WARN,error:me.ERROR,silent:me.SILENT},Ue=me.INFO,Oe=((L={})[me.DEBUG]="log",L[me.VERBOSE]="log",L[me.INFO]="info",L[me.WARN]="warn",L[me.ERROR]="error",L),Le=function(oe,be){for(var we=[],Ne=2;Ne<arguments.length;Ne++)we[Ne-2]=arguments[Ne];if(!(be<oe.logLevel)){var ut=(new Date).toISOString(),Pe=Oe[be];if(!Pe)throw new Error("Attempted to log a message with an invalid logType (value: "+be+")");console[Pe].apply(console,y(["["+ut+"]  "+oe.name+":"],we))}},ue=function(){function oe(be){this.name=be,this._logLevel=Ue,this._logHandler=Le,this._userLogHandler=null,J.push(this)}return Object.defineProperty(oe.prototype,"logLevel",{get:function(){return this._logLevel},set:function(be){if(!(be in me))throw new TypeError('Invalid value "'+be+'" assigned to `logLevel`');this._logLevel=be},enumerable:!1,configurable:!0}),oe.prototype.setLogLevel=function(be){this._logLevel="string"==typeof be?Ie[be]:be},Object.defineProperty(oe.prototype,"logHandler",{get:function(){return this._logHandler},set:function(be){if("function"!=typeof be)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=be},enumerable:!1,configurable:!0}),Object.defineProperty(oe.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(be){this._userLogHandler=be},enumerable:!1,configurable:!0}),oe.prototype.debug=function(){for(var be=[],we=0;we<arguments.length;we++)be[we]=arguments[we];this._userLogHandler&&this._userLogHandler.apply(this,y([this,me.DEBUG],be)),this._logHandler.apply(this,y([this,me.DEBUG],be))},oe.prototype.log=function(){for(var be=[],we=0;we<arguments.length;we++)be[we]=arguments[we];this._userLogHandler&&this._userLogHandler.apply(this,y([this,me.VERBOSE],be)),this._logHandler.apply(this,y([this,me.VERBOSE],be))},oe.prototype.info=function(){for(var be=[],we=0;we<arguments.length;we++)be[we]=arguments[we];this._userLogHandler&&this._userLogHandler.apply(this,y([this,me.INFO],be)),this._logHandler.apply(this,y([this,me.INFO],be))},oe.prototype.warn=function(){for(var be=[],we=0;we<arguments.length;we++)be[we]=arguments[we];this._userLogHandler&&this._userLogHandler.apply(this,y([this,me.WARN],be)),this._logHandler.apply(this,y([this,me.WARN],be))},oe.prototype.error=function(){for(var be=[],we=0;we<arguments.length;we++)be[we]=arguments[we];this._userLogHandler&&this._userLogHandler.apply(this,y([this,me.ERROR],be)),this._logHandler.apply(this,y([this,me.ERROR],be))},oe}();function te(oe){J.forEach(function(be){be.setLogLevel(oe)})}function X(oe,be){for(var we=function(Me){var yt=null;be&&be.level&&(yt=Ie[be.level]),Me.userLogHandler=null===oe?null:function(ht,ze){for(var Ce=[],je=2;je<arguments.length;je++)Ce[je-2]=arguments[je];var ft=Ce.map(function(rt){if(null==rt)return null;if("string"==typeof rt)return rt;if("number"==typeof rt||"boolean"==typeof rt)return rt.toString();if(rt instanceof Error)return rt.message;try{return JSON.stringify(rt)}catch{return null}}).filter(function(rt){return rt}).join(" ");ze>=(yt??ht.logLevel)&&oe({level:me[ze].toLowerCase(),message:ft,args:Ce,type:ht.name})}},Ne=0,ut=J;Ne<ut.length;Ne++)we(ut[Ne])}},3237:(Ut,qe,ee)=>{ee.d(qe,{BH:()=>we,G6:()=>le,LL:()=>Qe,Mn:()=>ft,Sg:()=>Ne,UG:()=>Me,ZB:()=>oe,b$:()=>ze,d:()=>Ce,jU:()=>yt,m9:()=>$i,ne:()=>mr,p$:()=>X,r3:()=>un,ru:()=>ht,uI:()=>Pe,w1:()=>je,z$:()=>ut});var y=ee(655),Ie=function(ce){for(var j=[],q=0,Z=0;Z<ce.length;Z++){var z=ce.charCodeAt(Z);z<128?j[q++]=z:z<2048?(j[q++]=z>>6|192,j[q++]=63&z|128):55296==(64512&z)&&Z+1<ce.length&&56320==(64512&ce.charCodeAt(Z+1))?(z=65536+((1023&z)<<10)+(1023&ce.charCodeAt(++Z)),j[q++]=z>>18|240,j[q++]=z>>12&63|128,j[q++]=z>>6&63|128,j[q++]=63&z|128):(j[q++]=z>>12|224,j[q++]=z>>6&63|128,j[q++]=63&z|128)}return j},Oe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(ce,j){if(!Array.isArray(ce))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var q=j?this.byteToCharMapWebSafe_:this.byteToCharMap_,Z=[],z=0;z<ce.length;z+=3){var re=ce[z],xe=z+1<ce.length,Ke=xe?ce[z+1]:0,mt=z+2<ce.length,zt=mt?ce[z+2]:0,Nt=(15&Ke)<<2|zt>>6,an=63&zt;mt||(an=64,xe||(Nt=64)),Z.push(q[re>>2],q[(3&re)<<4|Ke>>4],q[Nt],q[an])}return Z.join("")},encodeString:function(ce,j){return this.HAS_NATIVE_SUPPORT&&!j?btoa(ce):this.encodeByteArray(Ie(ce),j)},decodeString:function(ce,j){return this.HAS_NATIVE_SUPPORT&&!j?atob(ce):function(ce){for(var j=[],q=0,Z=0;q<ce.length;){var z=ce[q++];if(z<128)j[Z++]=String.fromCharCode(z);else if(z>191&&z<224){var re=ce[q++];j[Z++]=String.fromCharCode((31&z)<<6|63&re)}else if(z>239&&z<365){var mt=((7&z)<<18|(63&(re=ce[q++]))<<12|(63&(xe=ce[q++]))<<6|63&ce[q++])-65536;j[Z++]=String.fromCharCode(55296+(mt>>10)),j[Z++]=String.fromCharCode(56320+(1023&mt))}else{re=ce[q++];var xe=ce[q++];j[Z++]=String.fromCharCode((15&z)<<12|(63&re)<<6|63&xe)}}return j.join("")}(this.decodeStringToByteArray(ce,j))},decodeStringToByteArray:function(ce,j){this.init_();for(var q=j?this.charToByteMapWebSafe_:this.charToByteMap_,Z=[],z=0;z<ce.length;){var re=q[ce.charAt(z++)],Ke=z<ce.length?q[ce.charAt(z)]:0,zt=++z<ce.length?q[ce.charAt(z)]:64,ln=++z<ce.length?q[ce.charAt(z)]:64;if(++z,null==re||null==Ke||null==zt||null==ln)throw Error();Z.push(re<<2|Ke>>4),64!==zt&&(Z.push(Ke<<4&240|zt>>2),64!==ln&&Z.push(zt<<6&192|ln))}return Z},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var ce=0;ce<this.ENCODED_VALS.length;ce++)this.byteToCharMap_[ce]=this.ENCODED_VALS.charAt(ce),this.charToByteMap_[this.byteToCharMap_[ce]]=ce,this.byteToCharMapWebSafe_[ce]=this.ENCODED_VALS_WEBSAFE.charAt(ce),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[ce]]=ce,ce>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(ce)]=ce,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(ce)]=ce)}}},ue=function(ce){return function(ce){var j=Ie(ce);return Oe.encodeByteArray(j,!0)}(ce).replace(/\./g,"")};function X(ce){return oe(void 0,ce)}function oe(ce,j){if(!(j instanceof Object))return j;switch(j.constructor){case Date:return new Date(j.getTime());case Object:void 0===ce&&(ce={});break;case Array:ce=[];break;default:return j}for(var Z in j)!j.hasOwnProperty(Z)||!be(Z)||(ce[Z]=oe(ce[Z],j[Z]));return ce}function be(ce){return"__proto__"!==ce}var we=function(){function ce(){var j=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(q,Z){j.resolve=q,j.reject=Z})}return ce.prototype.wrapCallback=function(j){var q=this;return function(Z,z){Z?q.reject(Z):q.resolve(z),"function"==typeof j&&(q.promise.catch(function(){}),1===j.length?j(Z):j(Z,z))}},ce}();function Ne(ce,j){if(ce.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var Z=j||"demo-project",z=ce.iat||0,re=ce.sub||ce.user_id;if(!re)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var xe=(0,y.pi)({iss:"https://securetoken.google.com/"+Z,aud:Z,iat:z,exp:z+3600,auth_time:z,sub:re,user_id:re,firebase:{sign_in_provider:"custom",identities:{}}},ce);return[ue(JSON.stringify({alg:"none",type:"JWT"})),ue(JSON.stringify(xe)),""].join(".")}function ut(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Pe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ut())}function Me(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function yt(){return"object"==typeof self&&self.self===self}function ht(){var ce="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof ce&&void 0!==ce.id}function ze(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ce(){return ut().indexOf("Electron/")>=0}function je(){var ce=ut();return ce.indexOf("MSIE ")>=0||ce.indexOf("Trident/")>=0}function ft(){return ut().indexOf("MSAppHost/")>=0}function le(){return!Me()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}var ot=function(ce){function j(q,Z,z){var re=ce.call(this,Z)||this;return re.code=q,re.customData=z,re.name="FirebaseError",Object.setPrototypeOf(re,j.prototype),Error.captureStackTrace&&Error.captureStackTrace(re,Qe.prototype.create),re}return(0,y.ZT)(j,ce),j}(Error),Qe=function(){function ce(j,q,Z){this.service=j,this.serviceName=q,this.errors=Z}return ce.prototype.create=function(j){for(var q=[],Z=1;Z<arguments.length;Z++)q[Z-1]=arguments[Z];var z=q[0]||{},re=this.service+"/"+j,xe=this.errors[j],Ke=xe?Vt(xe,z):"Error",mt=this.serviceName+": "+Ke+" ("+re+").",zt=new ot(re,mt,z);return zt},ce}();function Vt(ce,j){return ce.replace(Jt,function(q,Z){var z=j[Z];return null!=z?String(z):"<"+Z+"?>"})}var Jt=/\{\$([^}]+)}/g;function un(ce,j){return Object.prototype.hasOwnProperty.call(ce,j)}function mr(ce,j){var q=new dt(ce,j);return q.subscribe.bind(q)}!function(){function ce(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var j=1;j<this.blockSize;++j)this.pad_[j]=0;this.reset()}ce.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},ce.prototype.compress_=function(j,q){q||(q=0);var Z=this.W_;if("string"==typeof j)for(var z=0;z<16;z++)Z[z]=j.charCodeAt(q)<<24|j.charCodeAt(q+1)<<16|j.charCodeAt(q+2)<<8|j.charCodeAt(q+3),q+=4;else for(z=0;z<16;z++)Z[z]=j[q]<<24|j[q+1]<<16|j[q+2]<<8|j[q+3],q+=4;for(z=16;z<80;z++)Z[z]=4294967295&((re=Z[z-3]^Z[z-8]^Z[z-14]^Z[z-16])<<1|re>>>31);var ln,Nt,xe=this.chain_[0],Ke=this.chain_[1],mt=this.chain_[2],zt=this.chain_[3],gn=this.chain_[4];for(z=0;z<80;z++){z<40?z<20?(ln=zt^Ke&(mt^zt),Nt=1518500249):(ln=Ke^mt^zt,Nt=1859775393):z<60?(ln=Ke&mt|zt&(Ke|mt),Nt=2400959708):(ln=Ke^mt^zt,Nt=3395469782);var re=(xe<<5|xe>>>27)+ln+gn+Nt+Z[z]&4294967295;gn=zt,zt=mt,mt=4294967295&(Ke<<30|Ke>>>2),Ke=xe,xe=re}this.chain_[0]=this.chain_[0]+xe&4294967295,this.chain_[1]=this.chain_[1]+Ke&4294967295,this.chain_[2]=this.chain_[2]+mt&4294967295,this.chain_[3]=this.chain_[3]+zt&4294967295,this.chain_[4]=this.chain_[4]+gn&4294967295},ce.prototype.update=function(j,q){if(null!=j){void 0===q&&(q=j.length);for(var Z=q-this.blockSize,z=0,re=this.buf_,xe=this.inbuf_;z<q;){if(0===xe)for(;z<=Z;)this.compress_(j,z),z+=this.blockSize;if("string"==typeof j){for(;z<q;)if(re[xe]=j.charCodeAt(z),++z,++xe===this.blockSize){this.compress_(re),xe=0;break}}else for(;z<q;)if(re[xe]=j[z],++z,++xe===this.blockSize){this.compress_(re),xe=0;break}}this.inbuf_=xe,this.total_+=q}},ce.prototype.digest=function(){var j=[],q=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var Z=this.blockSize-1;Z>=56;Z--)this.buf_[Z]=255&q,q/=256;this.compress_(this.buf_);var z=0;for(Z=0;Z<5;Z++)for(var re=24;re>=0;re-=8)j[z]=this.chain_[Z]>>re&255,++z;return j}}();var dt=function(){function ce(j,q){var Z=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=q,this.task.then(function(){j(Z)}).catch(function(z){Z.error(z)})}return ce.prototype.next=function(j){this.forEachObserver(function(q){q.next(j)})},ce.prototype.error=function(j){this.forEachObserver(function(q){q.error(j)}),this.close(j)},ce.prototype.complete=function(){this.forEachObserver(function(j){j.complete()}),this.close()},ce.prototype.subscribe=function(j,q,Z){var re,z=this;if(void 0===j&&void 0===q&&void 0===Z)throw new Error("Missing Observer.");re=function vr(ce,j){if("object"!=typeof ce||null===ce)return!1;for(var q=0,Z=j;q<Z.length;q++){var z=Z[q];if(z in ce&&"function"==typeof ce[z])return!0}return!1}(j,["next","error","complete"])?j:{next:j,error:q,complete:Z},void 0===re.next&&(re.next=Mn),void 0===re.error&&(re.error=Mn),void 0===re.complete&&(re.complete=Mn);var xe=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{z.finalError?re.error(z.finalError):re.complete()}catch{}}),this.observers.push(re),xe},ce.prototype.unsubscribeOne=function(j){void 0===this.observers||void 0===this.observers[j]||(delete this.observers[j],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},ce.prototype.forEachObserver=function(j){if(!this.finalized)for(var q=0;q<this.observers.length;q++)this.sendOne(q,j)},ce.prototype.sendOne=function(j,q){var Z=this;this.task.then(function(){if(void 0!==Z.observers&&void 0!==Z.observers[j])try{q(Z.observers[j])}catch(z){typeof console<"u"&&console.error&&console.error(z)}})},ce.prototype.close=function(j){var q=this;this.finalized||(this.finalized=!0,void 0!==j&&(this.finalError=j),this.task.then(function(){q.observers=void 0,q.onNoObservers=void 0}))},ce}();function Mn(){}function $i(ce){return ce&&ce._delegate?ce._delegate:ce}},2707:(Ut,qe,ee)=>{ee.r(qe),ee.d(qe,{default:()=>y.Z});var y=ee(8036),J="8.10.1";y.Z.registerVersion("firebase",J,"app"),y.Z.SDK_VERSION=J},8739:(Ut,qe,ee)=>{ee.r(qe);var y=ee(8036),L=ee(655),J=ee(3237),me=ee(9474),Ie=function(a,s){return(Ie=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,f){l.__proto__=f}||function(l,f){for(var m in f)Object.prototype.hasOwnProperty.call(f,m)&&(l[m]=f[m])})(a,s)};function Oe(a){var s="function"==typeof Symbol&&Symbol.iterator,l=s&&a[s],f=0;if(l)return l.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&f>=a.length&&(a=void 0),{value:a&&a[f++],done:!a}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")}var ue,Le=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},te=te||{},X=Le||self;function oe(){}function be(a){var s=typeof a;return"array"==(s="object"!=s?s:a?Array.isArray(a)?"array":s:"null")||"object"==s&&"number"==typeof a.length}function we(a){var s=typeof a;return"object"==s&&null!=a||"function"==s}var ut="closure_uid_"+(1e9*Math.random()>>>0),Pe=0;function Me(a,s,l){return a.call.apply(a.bind,arguments)}function yt(a,s,l){if(!a)throw Error();if(2<arguments.length){var f=Array.prototype.slice.call(arguments,2);return function(){var m=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(m,f),a.apply(s,m)}}return function(){return a.apply(s,arguments)}}function ht(a,s,l){return(ht=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Me:yt).apply(null,arguments)}function ze(a,s){var l=Array.prototype.slice.call(arguments,1);return function(){var f=l.slice();return f.push.apply(f,arguments),a.apply(this,f)}}function Ce(a,s){function l(){}l.prototype=s.prototype,a.Z=s.prototype,a.prototype=new l,a.prototype.constructor=a,a.Vb=function(f,m,b){for(var D=Array(arguments.length-2),M=2;M<arguments.length;M++)D[M-2]=arguments[M];return s.prototype[m].apply(f,D)}}function je(){this.s=this.s,this.o=this.o}var rt={};je.prototype.s=!1,je.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var a=function Ne(a){return Object.prototype.hasOwnProperty.call(a,ut)&&a[ut]||(a[ut]=++Pe)}(this);delete rt[a]}},je.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var le=Array.prototype.indexOf?function(a,s){return Array.prototype.indexOf.call(a,s,void 0)}:function(a,s){if("string"==typeof a)return"string"!=typeof s||1!=s.length?-1:a.indexOf(s,0);for(var l=0;l<a.length;l++)if(l in a&&a[l]===s)return l;return-1},He=Array.prototype.forEach?function(a,s,l){Array.prototype.forEach.call(a,s,l)}:function(a,s,l){for(var f=a.length,m="string"==typeof a?a.split(""):a,b=0;b<f;b++)b in m&&s.call(l,m[b],b,a)};function _e(a){return Array.prototype.concat.apply([],arguments)}function Re(a){var s=a.length;if(0<s){for(var l=Array(s),f=0;f<s;f++)l[f]=a[f];return l}return[]}function Ee(a){return/^[\s\xa0]*$/.test(a)}var Jt,ot=String.prototype.trim?function(a){return a.trim()}:function(a){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(a)[1]};function Qe(a,s){return-1!=a.indexOf(s)}function Vt(a,s){return a<s?-1:a>s?1:0}e:{var _n=X.navigator;if(_n){var _t=_n.userAgent;if(_t){Jt=_t;break e}}Jt=""}function St(a,s,l){for(var f in a)s.call(l,a[f],f,a)}function Tt(a){var s={};for(var l in a)s[l]=a[l];return s}var Ot="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Xt(a,s){for(var l,f,m=1;m<arguments.length;m++){for(l in f=arguments[m])a[l]=f[l];for(var b=0;b<Ot.length;b++)l=Ot[b],Object.prototype.hasOwnProperty.call(f,l)&&(a[l]=f[l])}}function Xn(a){return Xn[" "](a),a}Xn[" "]=oe;var cn,a,jn=Qe(Jt,"Opera"),go=Qe(Jt,"Trident")||Qe(Jt,"MSIE"),ci=Qe(Jt,"Edge"),Rr=ci||go,Wr=Qe(Jt,"Gecko")&&!(Qe(Jt.toLowerCase(),"webkit")&&!Qe(Jt,"Edge"))&&!(Qe(Jt,"Trident")||Qe(Jt,"MSIE"))&&!Qe(Jt,"Edge"),ns=Qe(Jt.toLowerCase(),"webkit")&&!Qe(Jt,"Edge");function wn(){var a=X.document;return a?a.documentMode:void 0}e:{var lr="",mr=(a=Jt,Wr?/rv:([^\);]+)(\)|;)/.exec(a):ci?/Edge\/([\d\.]+)/.exec(a):go?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a):ns?/WebKit\/(\S+)/.exec(a):jn?/(?:Version)[ \/]?(\S+)/.exec(a):void 0);if(mr&&(lr=mr?mr[1]:""),go){var dt=wn();if(null!=dt&&dt>parseFloat(lr)){cn=String(dt);break e}}cn=lr}var yr={};var Mi=X.document&&go&&(wn()||parseInt(cn,10))||void 0,Or=function(){if(!X.addEventListener||!Object.defineProperty)return!1;var a=!1,s=Object.defineProperty({},"passive",{get:function(){a=!0}});try{X.addEventListener("test",oe,s),X.removeEventListener("test",oe,s)}catch{}return a}();function kn(a,s){this.type=a,this.g=this.target=s,this.defaultPrevented=!1}function Kn(a,s){if(kn.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var l=this.type=a.type,f=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=s,s=a.relatedTarget){if(Wr){e:{try{Xn(s.nodeName);var m=!0;break e}catch{}m=!1}m||(s=null)}}else"mouseover"==l?s=a.fromElement:"mouseout"==l&&(s=a.toElement);this.relatedTarget=s,f?(this.clientX=void 0!==f.clientX?f.clientX:f.pageX,this.clientY=void 0!==f.clientY?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0):(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType="string"==typeof a.pointerType?a.pointerType:qt[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Kn.Z.h.call(this)}}kn.prototype.h=function(){this.defaultPrevented=!0},Ce(Kn,kn);var qt={2:"touch",3:"pen",4:"mouse"};Kn.prototype.h=function(){Kn.Z.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Pt="closure_listenable_"+(1e6*Math.random()|0),Yn=0;function Zr(a,s,l,f,m){this.listener=a,this.proxy=null,this.src=s,this.type=l,this.capture=!!f,this.ia=m,this.key=++Yn,this.ca=this.fa=!1}function Cr(a){a.ca=!0,a.listener=null,a.proxy=null,a.src=null,a.ia=null}function Kr(a){this.src=a,this.g={},this.h=0}function nn(a,s){var l=s.type;if(l in a.g){var b,f=a.g[l],m=le(f,s);(b=0<=m)&&Array.prototype.splice.call(f,m,1),b&&(Cr(s),0==a.g[l].length&&(delete a.g[l],a.h--))}}function To(a,s,l,f){for(var m=0;m<a.length;++m){var b=a[m];if(!b.ca&&b.listener==s&&b.capture==!!l&&b.ia==f)return m}return-1}Kr.prototype.add=function(a,s,l,f,m){var b=a.toString();(a=this.g[b])||(a=this.g[b]=[],this.h++);var D=To(a,s,f,m);return-1<D?(s=a[D],l||(s.fa=!1)):((s=new Zr(s,this.src,b,!!f,m)).fa=l,a.push(s)),s};var Fn="closure_lm_"+(1e6*Math.random()|0),$i={};function ce(a,s,l,f,m){if(f&&f.once)return Z(a,s,l,f,m);if(Array.isArray(s)){for(var b=0;b<s.length;b++)ce(a,s[b],l,f,m);return null}return l=gn(l),a&&a[Pt]?a.N(s,l,we(f)?!!f.capture:!!f,m):j(a,s,l,!1,f,m)}function j(a,s,l,f,m,b){if(!s)throw Error("Invalid event type");var D=we(m)?!!m.capture:!!m,M=mt(a);if(M||(a[Fn]=M=new Kr(a)),(l=M.add(s,l,f,D,b)).proxy)return l;if(f=function q(){var s=Ke;return function a(l){return s.call(a.src,a.listener,l)}}(),l.proxy=f,f.src=a,f.listener=l,a.addEventListener)Or||(m=D),void 0===m&&(m=!1),a.addEventListener(s.toString(),f,m);else if(a.attachEvent)a.attachEvent(xe(s.toString()),f);else{if(!a.addListener||!a.removeListener)throw Error("addEventListener and attachEvent are unavailable.");a.addListener(f)}return l}function Z(a,s,l,f,m){if(Array.isArray(s)){for(var b=0;b<s.length;b++)Z(a,s[b],l,f,m);return null}return l=gn(l),a&&a[Pt]?a.O(s,l,we(f)?!!f.capture:!!f,m):j(a,s,l,!0,f,m)}function z(a,s,l,f,m){if(Array.isArray(s))for(var b=0;b<s.length;b++)z(a,s[b],l,f,m);else f=we(f)?!!f.capture:!!f,l=gn(l),a&&a[Pt]?(a=a.i,(s=String(s).toString())in a.g&&-1<(l=To(b=a.g[s],l,f,m))&&(Cr(b[l]),Array.prototype.splice.call(b,l,1),0==b.length&&(delete a.g[s],a.h--))):a&&(a=mt(a))&&(s=a.g[s.toString()],a=-1,s&&(a=To(s,l,f,m)),(l=-1<a?s[a]:null)&&re(l))}function re(a){if("number"!=typeof a&&a&&!a.ca){var s=a.src;if(s&&s[Pt])nn(s.i,a);else{var l=a.type,f=a.proxy;s.removeEventListener?s.removeEventListener(l,f,a.capture):s.detachEvent?s.detachEvent(xe(l),f):s.addListener&&s.removeListener&&s.removeListener(f),(l=mt(s))?(nn(l,a),0==l.h&&(l.src=null,s[Fn]=null)):Cr(a)}}}function xe(a){return a in $i?$i[a]:$i[a]="on"+a}function Ke(a,s){if(a.ca)a=!0;else{s=new Kn(s,this);var l=a.listener,f=a.ia||a.src;a.fa&&re(a),a=l.call(f,s)}return a}function mt(a){return(a=a[Fn])instanceof Kr?a:null}var zt="__closure_events_fn_"+(1e9*Math.random()>>>0);function gn(a){return"function"==typeof a?a:(a[zt]||(a[zt]=function(s){return a.handleEvent(s)}),a[zt])}function ln(){je.call(this),this.i=new Kr(this),this.P=this,this.I=null}function Nt(a,s){var l,f=a.I;if(f)for(l=[];f;f=f.I)l.push(f);if(a=a.P,f=s.type||s,"string"==typeof s)s=new kn(s,a);else if(s instanceof kn)s.target=s.target||a;else{var m=s;Xt(s=new kn(f,a),m)}if(m=!0,l)for(var b=l.length-1;0<=b;b--){var D=s.g=l[b];m=an(D,f,!0,s)&&m}if(m=an(D=s.g=a,f,!0,s)&&m,m=an(D,f,!1,s)&&m,l)for(b=0;b<l.length;b++)m=an(D=s.g=l[b],f,!1,s)&&m}function an(a,s,l,f){if(!(s=a.i.g[String(s)]))return!0;s=s.concat();for(var m=!0,b=0;b<s.length;++b){var D=s[b];if(D&&!D.ca&&D.capture==l){var M=D.listener,F=D.ia||D.src;D.fa&&nn(a.i,D),m=!1!==M.call(F,f)&&m}}return m&&!f.defaultPrevented}Ce(ln,je),ln.prototype[Pt]=!0,ln.prototype.removeEventListener=function(a,s,l,f){z(this,a,s,l,f)},ln.prototype.M=function(){if(ln.Z.M.call(this),this.i){var s,a=this.i;for(s in a.g){for(var l=a.g[s],f=0;f<l.length;f++)Cr(l[f]);delete a.g[s],a.h--}}this.I=null},ln.prototype.N=function(a,s,l,f){return this.i.add(String(a),s,!1,l,f)},ln.prototype.O=function(a,s,l,f){return this.i.add(String(a),s,!0,l,f)};var er=X.JSON.stringify;function Yr(){var a=Jr,s=null;return a.g&&(s=a.g,a.g=a.g.next,a.g||(a.h=null),s.next=null),s}var Hn,Ts=function(){function a(){this.h=this.g=null}return a.prototype.add=function(s,l){var f=Gi.get();f.set(s,l),this.h?this.h.next=f:this.g=f,this.h=f},a}(),Gi=new(function(){function a(s,l){this.i=s,this.j=l,this.h=0,this.g=null}return a.prototype.get=function(){var s;return 0<this.h?(this.h--,this.g=(s=this.g).next,s.next=null):s=this.i(),s},a}())(function(){return new Qr},function(a){return a.reset()}),Qr=function(){function a(){this.next=this.g=this.h=null}return a.prototype.set=function(s,l){this.h=s,this.g=l,this.next=null},a.prototype.reset=function(){this.next=this.g=this.h=null},a}();function wt(a){X.setTimeout(function(){throw a},0)}function Yt(a,s){Hn||function So(){var a=X.Promise.resolve(void 0);Hn=function(){a.then(ou)}}(),mo||(Hn(),mo=!0),Jr.add(a,s)}var mo=!1,Jr=new Ts;function ou(){for(var a;a=Yr();){try{a.h.call(a.g)}catch(l){wt(l)}var s=Gi;s.j(a),100>s.h&&(s.h++,a.next=s.g,s.g=a)}mo=!1}function sr(a,s){ln.call(this),this.h=a||1,this.g=s||X,this.j=ht(this.kb,this),this.l=Date.now()}function Ss(a){a.da=!1,a.S&&(a.g.clearTimeout(a.S),a.S=null)}function ta(a,s,l){if("function"==typeof a)l&&(a=ht(a,l));else{if(!a||"function"!=typeof a.handleEvent)throw Error("Invalid listener argument");a=ht(a.handleEvent,a)}return 2147483647<Number(s)?-1:X.setTimeout(a,s||0)}function Cn(a){a.g=ta(function(){a.g=null,a.i&&(a.i=!1,Cn(a))},a.j);var s=a.h;a.h=null,a.m.apply(null,s)}Ce(sr,ln),(ue=sr.prototype).da=!1,ue.S=null,ue.kb=function(){if(this.da){var a=Date.now()-this.l;0<a&&a<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-a):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Nt(this,"tick"),this.da&&(Ss(this),this.start()))}},ue.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ue.M=function(){sr.Z.M.call(this),Ss(this),delete this.g};var _r=function(a){function s(l,f){var m=a.call(this)||this;return m.m=l,m.j=f,m.h=null,m.i=!1,m.g=null,m}return function Ue(a,s){if("function"!=typeof s&&null!==s)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function l(){this.constructor=a}Ie(a,s),a.prototype=null===s?Object.create(s):(l.prototype=s.prototype,new l)}(s,a),s.prototype.l=function(l){this.h=arguments,this.g?this.i=!0:Cn(this)},s.prototype.M=function(){a.prototype.M.call(this),this.g&&(X.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},s}(je);function rs(a){je.call(this),this.h=a,this.g={}}Ce(rs,je);var El=[];function is(a,s,l,f){Array.isArray(l)||(l&&(El[0]=l.toString()),l=El);for(var m=0;m<l.length;m++){var b=ce(s,l[m],f||a.handleEvent,!1,a.h||a);if(!b)break;a.g[b.key]=b}}function jr(a){St(a.g,function(s,l){this.g.hasOwnProperty(l)&&re(s)},a),a.g={}}function os(){this.g=!0}function dr(a,s,l,f){a.info(function(){return"XMLHTTP TEXT ("+s+"): "+function tr(a,s){if(!a.g)return s;if(!s)return null;try{var l=JSON.parse(s);if(l)for(a=0;a<l.length;a++)if(Array.isArray(l[a])){var f=l[a];if(!(2>f.length)){var m=f[1];if(Array.isArray(m)&&!(1>m.length)){var b=m[0];if("noop"!=b&&"stop"!=b&&"close"!=b)for(var D=1;D<m.length;D++)m[D]=""}}}return er(l)}catch{return s}}(a,l)+(f?" "+f:"")})}rs.prototype.M=function(){rs.Z.M.call(this),jr(this)},rs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},os.prototype.Aa=function(){this.g=!1},os.prototype.info=function(){};var na={},Cl=null;function As(){return Cl=Cl||new ln}function Hu(a){kn.call(this,na.Ma,a)}function yo(a){var s=As();Nt(s,new Hu(s,a))}function ra(a,s){kn.call(this,na.STAT_EVENT,a),this.stat=s}function cr(a){var s=As();Nt(s,new ra(s,a))}function Nr(a,s){kn.call(this,na.Na,a),this.size=s}function su(a,s){if("function"!=typeof a)throw Error("Fn must not be null and must be a function");return X.setTimeout(function(){a()},s)}na.Ma="serverreachability",Ce(Hu,kn),na.STAT_EVENT="statevent",Ce(ra,kn),na.Na="timingevent",Ce(Nr,kn);var Hr={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},qi={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function $u(){}function Dl(){}$u.prototype.h=null;var kd,Xr={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Pd(){kn.call(this,"d")}function Tl(){kn.call(this,"c")}function qu(){}function au(a,s,l,f){this.l=a,this.j=s,this.m=l,this.X=f||1,this.V=new rs(this),this.P=Lh,this.W=new sr(a=Rr?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new ei}function ei(){this.i=null,this.g="",this.h=!1}Ce(Pd,kn),Ce(Tl,kn),Ce(qu,$u),qu.prototype.g=function(){return new XMLHttpRequest},qu.prototype.i=function(){return{}},kd=new qu;var Lh=45e3,Vh={},Ao={};function Uh(a,s,l){a.K=1,a.v=Oi(Mo(s)),a.s=l,a.U=!0,Fd(a,null)}function Fd(a,s){a.F=Date.now(),zu(a),a.A=Mo(a.v);var l=a.A,f=a.X;Array.isArray(f)||(f=[String(f)]),Ju(l.h,"t",f),a.C=0,l=a.l.H,a.h=new ei,a.g=Gd(a.l,l?s:null,!a.s),0<a.O&&(a.L=new _r(ht(a.Ia,a,a.g),a.O)),is(a.V,a.g,"readystatechange",a.gb),s=a.H?Tt(a.H):{},a.s?(a.u||(a.u="POST"),s["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.s,s)):(a.u="GET",a.g.ea(a.A,a.u,null,s)),yo(1),function Sa(a,s,l,f,m,b){a.info(function(){if(a.g)if(b)for(var D="",M=b.split("&"),F=0;F<M.length;F++){var H=M[F].split("=");if(1<H.length){var Y=H[0];H=H[1];var se=Y.split("_");D=2<=se.length&&"type"==se[1]?D+(Y+"=")+H+"&":D+(Y+"=redacted&")}}else D=null;else D=b;return"XMLHTTP REQ ("+f+") [attempt "+m+"]: "+s+"\n"+l+"\n"+D})}(a.j,a.u,a.A,a.m,a.X,a.s)}function Sl(a){return!!a.g&&"GET"==a.u&&2!=a.K&&a.l.Ba}function ia(a,s,l){for(var m,f=!0;!a.I&&a.C<l.length;){if((m=gg(a,l))==Ao){4==s&&(a.o=4,cr(14),f=!1),dr(a.j,a.m,null,"[Incomplete Response]");break}if(m==Vh){a.o=4,cr(15),dr(a.j,a.m,l,"[Invalid Chunk]"),f=!1;break}dr(a.j,a.m,m,null),Al(a,m)}Sl(a)&&m!=Ao&&m!=Vh&&(a.h.g="",a.C=0),4!=s||0!=l.length||a.h.h||(a.o=1,cr(16),f=!1),a.i=a.i&&f,f?0<l.length&&!a.aa&&(a.aa=!0,(s=a.l).g==a&&s.$&&!s.L&&(s.h.info("Great, no buffering proxy detected. Bytes received: "+l.length),Gr(s),s.L=!0,cr(11))):(dr(a.j,a.m,l,"[Invalid Chunked Response]"),to(a),Wu(a))}function gg(a,s){var l=a.C,f=s.indexOf("\n",l);return-1==f?Ao:(l=Number(s.substring(l,f)),isNaN(l)?Vh:(f+=1)+l>s.length?Ao:(s=s.substr(f,l),a.C=f+l,s))}function zu(a){a.Y=Date.now()+a.P,Jf(a,a.P)}function Jf(a,s){if(null!=a.B)throw Error("WatchDog timer not null");a.B=su(ht(a.eb,a),s)}function Ld(a){a.B&&(X.clearTimeout(a.B),a.B=null)}function Wu(a){0==a.l.G||a.I||$d(a.l,a)}function to(a){Ld(a);var s=a.L;s&&"function"==typeof s.na&&s.na(),a.L=null,Ss(a.W),jr(a.V),a.g&&(s=a.g,a.g=null,s.abort(),s.na())}function Al(a,s){try{var l=a.l;if(0!=l.G&&(l.g==a||Vd(l.i,a)))if(l.I=a.N,!a.J&&Vd(l.i,a)&&3==l.G){try{var f=l.Ca.g.parse(s)}catch{f=null}if(Array.isArray(f)&&3==f.length){var m=f;if(0==m[0]){e:if(!l.u){if(l.g){if(!(l.g.F+3e3<a.F))break e;nr(l),tc(l)}oc(l),cr(18)}}else l.ta=m[1],0<l.ta-l.U&&37500>m[2]&&l.N&&0==l.A&&!l.v&&(l.v=su(ht(l.ab,l),6e3));if(1>=Uc(l.i)&&l.ka){try{l.ka()}catch{}l.ka=void 0}}else hu(l,11)}else if((a.J||l.g==a)&&nr(l),!Ee(s))for(m=l.Ca.g.parse(s),s=0;s<m.length;s++){var b=m[s];if(l.U=b[0],b=b[1],2==l.G)if("c"==b[0]){l.J=b[1],l.la=b[2];var D=b[3];null!=D&&(l.ma=D,l.h.info("VER="+l.ma));var M=b[4];null!=M&&(l.za=M,l.h.info("SVER="+l.za));var F=b[5];null!=F&&"number"==typeof F&&0<F&&(l.K=f=1.5*F,l.h.info("backChannelRequestTimeoutMs_="+f)),f=l;var H=a.g;if(H){var Y=H.g?H.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Y){var se=f.i;!se.g&&(Qe(Y,"spdy")||Qe(Y,"quic")||Qe(Y,"h2"))&&(se.j=se.l,se.g=new Set,se.h&&(Xu(se,se.h),se.h=null))}if(f.D){var de=H.g?H.g.getResponseHeader("X-HTTP-Session-Id"):null;de&&(f.sa=de,Nn(f.F,f.D,de))}}l.G=3,l.j&&l.j.xa(),l.$&&(l.O=Date.now()-a.F,l.h.info("Handshake RTT: "+l.O+"ms"));var Se=a;if((f=l).oa=qc(f,f.H?f.la:null,f.W),Se.J){Bc(f.i,Se);var De=Se,$e=f.K;$e&&De.setTimeout($e),De.B&&(Ld(De),zu(De)),f.g=Se}else Na(f);0<l.l.length&&rc(l)}else"stop"!=b[0]&&"close"!=b[0]||hu(l,7);else 3==l.G&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?hu(l,7):du(l):"noop"!=b[0]&&l.j&&l.j.wa(b),l.A=0)}yo(4)}catch{}}function Zu(a,s){if(a.forEach&&"function"==typeof a.forEach)a.forEach(s,void 0);else if(be(a)||"string"==typeof a)He(a,s,void 0);else{if(a.T&&"function"==typeof a.T)var l=a.T();else if(a.R&&"function"==typeof a.R)l=void 0;else if(be(a)||"string"==typeof a){l=[];for(var f=a.length,m=0;m<f;m++)l.push(m)}else for(m in l=[],f=0,a)l[f++]=m;f=function Bh(a){if(a.R&&"function"==typeof a.R)return a.R();if("string"==typeof a)return a.split("");if(be(a)){for(var s=[],l=a.length,f=0;f<l;f++)s.push(a[f]);return s}for(f in s=[],l=0,a)s[l++]=a[f];return s}(a),m=f.length;for(var b=0;b<m;b++)s.call(void 0,f[b],l&&l[b],a)}}function Ku(a,s){this.h={},this.g=[],this.i=0;var l=arguments.length;if(1<l){if(l%2)throw Error("Uneven number of arguments");for(var f=0;f<l;f+=2)this.set(arguments[f],arguments[f+1])}else if(a)if(a instanceof Ku)for(l=a.T(),f=0;f<l.length;f++)this.set(l[f],a.get(l[f]));else for(f in a)this.set(f,a[f])}function xo(a){if(a.i!=a.g.length){for(var s=0,l=0;s<a.g.length;){var f=a.g[s];zi(a.h,f)&&(a.g[l++]=f),s++}a.g.length=l}if(a.i!=a.g.length){var m={};for(l=s=0;s<a.g.length;)zi(m,f=a.g[s])||(a.g[l++]=f,m[f]=1),s++;a.g.length=l}}function zi(a,s){return Object.prototype.hasOwnProperty.call(a,s)}(ue=au.prototype).setTimeout=function(a){this.P=a},ue.gb=function(a){a=a.target;var s=this.L;s&&3==vo(a)?s.l():this.Ia(a)},ue.Ia=function(a){try{if(a==this.g)e:{var s=vo(this.g),l=this.g.Da(),f=this.g.ba();if(!(3>s)&&(3!=s||Rr||this.g&&(this.h.h||this.g.ga()||np(this.g)))){this.I||4!=s||7==l||yo(8==l||0>=f?3:2),Ld(this);var m=this.g.ba();this.N=m;t:if(Sl(this)){var b=np(this.g);a="";var D=b.length,M=4==vo(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){to(this),Wu(this);var F="";break t}this.h.i=new X.TextDecoder}for(l=0;l<D;l++)this.h.h=!0,a+=this.h.i.decode(b[l],{stream:M&&l==D-1});b.splice(0,D),this.h.g+=a,this.C=0,F=this.h.g}else F=this.g.ga();if(this.i=200==m,function Ri(a,s,l,f,m,b,D){a.info(function(){return"XMLHTTP RESP ("+f+") [ attempt "+m+"]: "+s+"\n"+l+"\n"+b+" "+D})}(this.j,this.u,this.A,this.m,this.X,s,m),this.i){if(this.$&&!this.J){t:{if(this.g){var H,Y=this.g;if((H=Y.g?Y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ee(H)){var se=H;break t}}se=null}if(!(m=se)){this.i=!1,this.o=3,cr(12),to(this),Wu(this);break e}dr(this.j,this.m,m,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Al(this,m)}this.U?(ia(this,s,F),Rr&&this.i&&3==s&&(is(this.V,this.W,"tick",this.fb),this.W.start())):(dr(this.j,this.m,F,null),Al(this,F)),4==s&&to(this),this.i&&!this.I&&(4==s?$d(this.l,this):(this.i=!1,zu(this)))}else 400==m&&0<F.indexOf("Unknown SID")?(this.o=3,cr(12)):(this.o=0,cr(13)),to(this),Wu(this)}}}catch{}},ue.fb=function(){if(this.g){var a=vo(this.g),s=this.g.ga();this.C<s.length&&(Ld(this),ia(this,a,s),this.i&&4!=a&&zu(this))}},ue.cancel=function(){this.I=!0,to(this)},ue.eb=function(){this.B=null;var a=Date.now();0<=a-this.Y?(function Fc(a,s){a.info(function(){return"TIMEOUT: "+s})}(this.j,this.A),2!=this.K&&(yo(3),cr(17)),to(this),this.o=2,Wu(this)):Jf(this,this.Y-a)},(ue=Ku.prototype).R=function(){xo(this);for(var a=[],s=0;s<this.g.length;s++)a.push(this.h[this.g[s]]);return a},ue.T=function(){return xo(this),this.g.concat()},ue.get=function(a,s){return zi(this.h,a)?this.h[a]:s},ue.set=function(a,s){zi(this.h,a)||(this.i++,this.g.push(a)),this.h[a]=s},ue.forEach=function(a,s){for(var l=this.T(),f=0;f<l.length;f++){var m=l[f],b=this.get(m);a.call(s,b,m,this)}};var xs=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function ss(a,s){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,a instanceof ss){this.g=void 0!==s?s:a.g,Yu(this,a.j),this.s=a.s,xl(this,a.i),Aa(this,a.m),this.l=a.l,s=a.h;var l=new xa;l.i=s.i,s.g&&(l.g=new Ku(s.g),l.h=s.h),Ms(this,l),this.o=a.o}else a&&(l=String(a).match(xs))?(this.g=!!s,Yu(this,l[1]||"",!0),this.s=$r(l[2]||""),xl(this,l[3]||"",!0),Aa(this,l[4]),this.l=$r(l[5]||"",!0),Ms(this,l[6]||"",!0),this.o=$r(l[7]||"")):(this.g=!!s,this.h=new xa(null,this.g))}function Mo(a){return new ss(a)}function Yu(a,s,l){a.j=l?$r(s,!0):s,a.j&&(a.j=a.j.replace(/:$/,""))}function xl(a,s,l){a.i=l?$r(s,!0):s}function Aa(a,s){if(s){if(s=Number(s),isNaN(s)||0>s)throw Error("Bad port number "+s);a.m=s}else a.m=null}function Ms(a,s,l){s instanceof xa?(a.h=s,function Rl(a,s){s&&!a.j&&(ro(a),a.i=null,a.g.forEach(function(l,f){var m=f.toLowerCase();f!=m&&(Rs(this,f),Ju(this,m,l))},a)),a.j=s}(a.h,a.g)):(l||(s=Lc(s,Ro)),a.h=new xa(s,a.g))}function Nn(a,s,l){a.h.set(s,l)}function Oi(a){return Nn(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function $r(a,s){return a?s?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Lc(a,s,l){return"string"==typeof a?(a=encodeURI(a).replace(s,Xf),l&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Xf(a){return"%"+((a=a.charCodeAt(0))>>4&15).toString(16)+(15&a).toString(16)}ss.prototype.toString=function(){var a=[],s=this.j;s&&a.push(Lc(s,Dr,!0),":");var l=this.i;return(l||"file"==s)&&(a.push("//"),(s=this.s)&&a.push(Lc(s,Dr,!0),"@"),a.push(encodeURIComponent(String(l)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(l=this.m)&&a.push(":",String(l))),(l=this.l)&&(this.i&&"/"!=l.charAt(0)&&a.push("/"),a.push(Lc(l,"/"==l.charAt(0)?ep:Ml,!0))),(l=this.h.toString())&&a.push("?",l),(l=this.o)&&a.push("#",Lc(l,no)),a.join("")};var Dr=/[#\/\?@]/g,Ml=/[#\?:]/g,ep=/[#\?]/g,Ro=/[#\?@]/g,no=/#/g;function xa(a,s){this.h=this.g=null,this.i=a||null,this.j=!!s}function ro(a){a.g||(a.g=new Ku,a.h=0,a.i&&function uu(a,s){if(a){a=a.split("&");for(var l=0;l<a.length;l++){var f=a[l].indexOf("="),m=null;if(0<=f){var b=a[l].substring(0,f);m=a[l].substring(f+1)}else b=a[l];s(b,m?decodeURIComponent(m.replace(/\+/g," ")):"")}}}(a.i,function(s,l){a.add(decodeURIComponent(s.replace(/\+/g," ")),l)}))}function Rs(a,s){ro(a),s=Oo(a,s),zi(a.g.h,s)&&(a.i=null,a.h-=a.g.get(s).length,zi((a=a.g).h,s)&&(delete a.h[s],a.i--,a.g.length>2*a.i&&xo(a)))}function Ln(a,s){return ro(a),s=Oo(a,s),zi(a.g.h,s)}function Ju(a,s,l){Rs(a,s),0<l.length&&(a.i=null,a.g.set(Oo(a,s),Re(l)),a.h+=l.length)}function Oo(a,s){return s=String(s),a.j&&(s=s.toLowerCase()),s}(ue=xa.prototype).add=function(a,s){ro(this),this.i=null,a=Oo(this,a);var l=this.g.get(a);return l||this.g.set(a,l=[]),l.push(s),this.h+=1,this},ue.forEach=function(a,s){ro(this),this.g.forEach(function(l,f){He(l,function(m){a.call(s,m,f,this)},this)},this)},ue.T=function(){ro(this);for(var a=this.g.R(),s=this.g.T(),l=[],f=0;f<s.length;f++)for(var m=a[f],b=0;b<m.length;b++)l.push(s[f]);return l},ue.R=function(a){ro(this);var s=[];if("string"==typeof a)Ln(this,a)&&(s=_e(s,this.g.get(Oo(this,a))));else{a=this.g.R();for(var l=0;l<a.length;l++)s=_e(s,a[l])}return s},ue.set=function(a,s){return ro(this),this.i=null,Ln(this,a=Oo(this,a))&&(this.h-=this.g.get(a).length),this.g.set(a,[s]),this.h+=1,this},ue.get=function(a,s){return a&&0<(a=this.R(a)).length?String(a[0]):s},ue.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var a=[],s=this.g.T(),l=0;l<s.length;l++){var f=s[l],m=encodeURIComponent(String(f));f=this.R(f);for(var b=0;b<f.length;b++){var D=m;""!==f[b]&&(D+="="+encodeURIComponent(String(f[b]))),a.push(D)}}return this.i=a.join("&")};var as=function a(s,l){this.h=s,this.g=l};function Vc(a){this.l=a||Tr,a=X.PerformanceNavigationTiming?0<(a=X.performance.getEntriesByType("navigation")).length&&("hq"==a[0].nextHopProtocol||"h2"==a[0].nextHopProtocol):!!(X.g&&X.g.Ea&&X.g.Ea()&&X.g.Ea().Zb),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Tr=10;function dn(a){return!!a.h||!!a.g&&a.g.size>=a.j}function Uc(a){return a.h?1:a.g?a.g.size:0}function Vd(a,s){return a.h?a.h==s:!!a.g&&a.g.has(s)}function Xu(a,s){a.g?a.g.add(s):a.h=s}function Bc(a,s){a.h&&a.h==s?a.h=null:a.g&&a.g.has(s)&&a.g.delete(s)}function Ol(a){var s,l;if(null!=a.h)return a.i.concat(a.h.D);if(null!=a.g&&0!==a.g.size){var f=a.i;try{for(var m=Oe(a.g.values()),b=m.next();!b.done;b=m.next())f=f.concat(b.value.D)}catch(M){s={error:M}}finally{try{b&&!b.done&&(l=m.return)&&l.call(m)}finally{if(s)throw s.error}}return f}return Re(a.i)}function us(){}function Ud(){this.g=new us}function jc(a,s,l){var f=l||"";try{Zu(a,function(m,b){var D=m;we(m)&&(D=er(m)),s.push(f+b+"="+encodeURIComponent(D))})}catch(m){throw s.push(f+"type="+encodeURIComponent("_badmap")),m}}function Tn(a,s,l,f,m){try{s.onload=null,s.onerror=null,s.onabort=null,s.ontimeout=null,m(f)}catch{}}function Ma(a){this.l=a.$b||null,this.j=a.ib||!1}function cu(a,s){ln.call(this),this.D=a,this.u=s,this.m=void 0,this.readyState=wr,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Vc.prototype.cancel=function(){var a,s;if(this.i=Ol(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var l=Oe(this.g.values()),f=l.next();!f.done;f=l.next())f.value.cancel()}catch(b){a={error:b}}finally{try{f&&!f.done&&(s=l.return)&&s.call(l)}finally{if(a)throw a.error}}this.g.clear()}},us.prototype.stringify=function(a){return X.JSON.stringify(a,void 0)},us.prototype.parse=function(a){return X.JSON.parse(a,void 0)},Ce(Ma,$u),Ma.prototype.g=function(){return new cu(this.l,this.j)},Ma.prototype.i=function(a){return function(){return a}}({}),Ce(cu,ln);var wr=0;function Hc(a){a.j.read().then(a.Sa.bind(a)).catch(a.ha.bind(a))}function Os(a){a.readyState=4,a.l=null,a.j=null,a.A=null,Ni(a)}function Ni(a){a.onreadystatechange&&a.onreadystatechange.call(a)}(ue=cu.prototype).open=function(a,s){if(this.readyState!=wr)throw this.abort(),Error("Error reopening a connection");this.C=a,this.B=s,this.readyState=1,Ni(this)},ue.send=function(a){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var s={headers:this.v,method:this.C,credentials:this.m,cache:void 0};a&&(s.body=a),(this.D||X).fetch(new Request(this.B,s)).then(this.Va.bind(this),this.ha.bind(this))},ue.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Os(this)),this.readyState=wr},ue.Va=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Ni(this)),this.g&&(this.readyState=3,Ni(this),this.g)))if("arraybuffer"===this.responseType)a.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof X.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Hc(this)}else a.text().then(this.Ua.bind(this),this.ha.bind(this))},ue.Sa=function(a){if(this.g){if(this.u&&a.value)this.response.push(a.value);else if(!this.u){var s=a.value?a.value:new Uint8Array(0);(s=this.A.decode(s,{stream:!a.done}))&&(this.response=this.responseText+=s)}a.done?Os(this):Ni(this),3==this.readyState&&Hc(this)}},ue.Ua=function(a){this.g&&(this.response=this.responseText=a,Os(this))},ue.Ta=function(a){this.g&&(this.response=a,Os(this))},ue.ha=function(){this.g&&Os(this)},ue.setRequestHeader=function(a,s){this.v.append(a,s)},ue.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},ue.getAllResponseHeaders=function(){if(!this.h)return"";for(var a=[],s=this.h.entries(),l=s.next();!l.done;)a.push((l=l.value)[0]+": "+l[1]),l=s.next();return a.join("\r\n")},Object.defineProperty(cu.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(a){this.m=a?"include":"same-origin"}});var $c=X.JSON.parse;function hr(a){ln.call(this),this.headers=new Ku,this.u=a||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Nl,this.K=this.L=!1}Ce(hr,ln);var Nl="",Bd=/^https?$/i,Hh=["POST","PUT"];function Pr(a){return"content-type"==a.toLowerCase()}function cs(a,s){a.h=!1,a.g&&(a.l=!0,a.g.abort(),a.l=!1),a.j=s,a.m=5,Pl(a),No(a)}function Pl(a){a.D||(a.D=!0,Nt(a,"complete"),Nt(a,"error"))}function Ra(a){if(a.h&&typeof te<"u"&&(!a.C[1]||4!=vo(a)||2!=a.ba()))if(a.v&&4==vo(a))ta(a.Fa,0,a);else if(Nt(a,"readystatechange"),4==vo(a)){a.h=!1;try{var f,s=a.ba();e:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var l=!0;break e;default:l=!1}if(!(f=l)){var m;if(m=0===s){var b=String(a.H).match(xs)[1]||null;if(!b&&X.self&&X.self.location){var D=X.self.location.protocol;b=D.substr(0,D.length-1)}m=!Bd.test(b?b.toLowerCase():"")}f=m}if(f)Nt(a,"complete"),Nt(a,"success");else{a.m=6;try{var M=2<vo(a)?a.g.statusText:""}catch{M=""}a.j=M+" ["+a.ba()+"]",Pl(a)}}finally{No(a)}}}function No(a,s){if(a.g){tp(a);var l=a.g,f=a.C[0]?oe:null;a.g=null,a.C=null,s||Nt(a,"ready");try{l.onreadystatechange=f}catch{}}}function tp(a){a.g&&a.K&&(a.g.ontimeout=null),a.A&&(X.clearTimeout(a.A),a.A=null)}function vo(a){return a.g?a.g.readyState:0}function np(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.J){case Nl:case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function ec(a,s,l){e:{for(f in l){var f=!1;break e}f=!0}f||(l=function jd(a){var s="";return St(a,function(l,f){s+=f,s+=":",s+=l,s+="\r\n"}),s}(l),"string"==typeof a?null!=l&&encodeURIComponent(String(l)):Nn(a,s,l))}function oa(a,s,l){return l&&l.internalChannelParams&&l.internalChannelParams[a]||s}function kl(a){this.za=0,this.l=[],this.h=new os,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=oa("failFast",!1,a),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=oa("baseRetryDelayMs",5e3,a),this.$a=oa("retryDelaySeedMs",1e4,a),this.Ya=oa("forwardChannelMaxRetries",2,a),this.ra=oa("forwardChannelRequestTimeoutMs",2e4,a),this.qa=a&&a.xmlHttpFactory||void 0,this.Ba=a&&a.Yb||!1,this.K=void 0,this.H=a&&a.supportsCrossDomainXhr||!1,this.J="",this.i=new Vc(a&&a.concurrentRequestLimit),this.Ca=new Ud,this.ja=a&&a.fastHandshake||!1,this.Ra=a&&a.Wb||!1,a&&a.Aa&&this.h.Aa(),a&&a.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&a&&a.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!a||!1!==a.Xb}function du(a){if(Gc(a),3==a.G){var s=a.V++,l=Mo(a.F);Nn(l,"SID",a.J),Nn(l,"RID",s),Nn(l,"TYPE","terminate"),ic(a,l),(s=new au(a,a.h,s,void 0)).K=2,s.v=Oi(Mo(l)),l=!1,X.navigator&&X.navigator.sendBeacon&&(l=X.navigator.sendBeacon(s.v.toString(),"")),!l&&X.Image&&((new Image).src=s.v,l=!0),l||(s.g=Gd(s.l,null),s.g.ea(s.v)),s.F=Date.now(),zu(s)}Vl(a)}function tc(a){a.g&&(Gr(a),a.g.cancel(),a.g=null)}function Gc(a){tc(a),a.u&&(X.clearTimeout(a.u),a.u=null),nr(a),a.i.cancel(),a.m&&("number"==typeof a.m&&X.clearTimeout(a.m),a.m=null)}function nc(a,s){a.l.push(new as(a.Za++,s)),3==a.G&&rc(a)}function rc(a){dn(a.i)||a.m||(a.m=!0,Yt(a.Ha,a),a.C=0)}function Fl(a,s){var l;l=s?s.m:a.V++;var f=Mo(a.F);Nn(f,"SID",a.J),Nn(f,"RID",l),Nn(f,"AID",a.U),ic(a,f),a.o&&a.s&&ec(f,a.o,a.s),l=new au(a,a.h,l,a.C+1),null===a.o&&(l.H=a.s),s&&(a.l=s.D.concat(a.l)),s=Oa(a,l,1e3),l.setTimeout(Math.round(.5*a.ra)+Math.round(.5*a.ra*Math.random())),Xu(a.i,l),Uh(l,f,s)}function ic(a,s){a.j&&Zu({},function(l,f){Nn(s,f,l)})}function Oa(a,s,l){l=Math.min(a.l.length,l);var f=a.j?ht(a.j.Oa,a.j,a):null;e:for(var m=a.l,b=-1;;){var D=["count="+l];-1==b?0<l?D.push("ofs="+(b=m[0].h)):b=0:D.push("ofs="+b);for(var M=!0,F=0;F<l;F++){var H=m[F].h,Y=m[F].g;if(0>(H-=b))b=Math.max(0,m[F].h-100),M=!1;else try{jc(Y,D,"req"+H+"_")}catch{f&&f(Y)}}if(M){f=D.join("&");break e}}return a=a.l.splice(0,l),s.D=a,f}function Na(a){a.g||a.u||(a.Y=1,Yt(a.Ga,a),a.A=0)}function oc(a){return!(a.g||a.u||3<=a.A||(a.Y++,a.u=su(ht(a.Ga,a),Ll(a,a.A)),a.A++,0))}function Gr(a){null!=a.B&&(X.clearTimeout(a.B),a.B=null)}function io(a){a.g=new au(a,a.h,"rpc",a.Y),null===a.o&&(a.g.H=a.s),a.g.O=0;var s=Mo(a.oa);Nn(s,"RID","rpc"),Nn(s,"SID",a.J),Nn(s,"CI",a.N?"0":"1"),Nn(s,"AID",a.U),ic(a,s),Nn(s,"TYPE","xmlhttp"),a.o&&a.s&&ec(s,a.o,a.s),a.K&&a.g.setTimeout(a.K);var l=a.g;a=a.la,l.K=1,l.v=Oi(Mo(s)),l.s=null,l.U=!0,Fd(l,a)}function nr(a){null!=a.v&&(X.clearTimeout(a.v),a.v=null)}function $d(a,s){var l=null;if(a.g==s){nr(a),Gr(a),a.g=null;var f=2}else{if(!Vd(a.i,s))return;l=s.D,Bc(a.i,s),f=1}if(a.I=s.N,0!=a.G)if(s.i)if(1==f){l=s.s?s.s.length:0,s=Date.now()-s.F;var m=a.C;Nt(f=As(),new Nr(f,l,s,m)),rc(a)}else Na(a);else if(3==(m=s.o)||0==m&&0<a.I||!(1==f&&function Hd(a,s){return!(Uc(a.i)>=a.i.j-(a.m?1:0)||(a.m?(a.l=s.D.concat(a.l),0):1==a.G||2==a.G||a.C>=(a.Xa?0:a.Ya)||(a.m=su(ht(a.Ha,a,s),Ll(a,a.C)),a.C++,0)))}(a,s)||2==f&&oc(a)))switch(l&&0<l.length&&(s=a.i,s.i=s.i.concat(l)),m){case 1:hu(a,5);break;case 4:hu(a,10);break;case 3:hu(a,6);break;default:hu(a,2)}}function Ll(a,s){var l=a.Pa+Math.floor(Math.random()*a.$a);return a.j||(l*=2),l*s}function hu(a,s){if(a.h.info("Error code "+s),2==s){var l=null;a.j&&(l=null);var f=ht(a.jb,a);l||(l=new ss("//www.google.com/images/cleardot.gif"),X.location&&"http"==X.location.protocol||Yu(l,"https"),Oi(l)),function Je(a,s){var l=new os;if(X.Image){var f=new Image;f.onload=ze(Tn,l,f,"TestLoadImage: loaded",!0,s),f.onerror=ze(Tn,l,f,"TestLoadImage: error",!1,s),f.onabort=ze(Tn,l,f,"TestLoadImage: abort",!1,s),f.ontimeout=ze(Tn,l,f,"TestLoadImage: timeout",!1,s),X.setTimeout(function(){f.ontimeout&&f.ontimeout()},1e4),f.src=a}else s(!1)}(l.toString(),f)}else cr(2);a.G=0,a.j&&a.j.va(s),Vl(a),Gc(a)}function Vl(a){a.G=0,a.I=-1,a.j&&((0!=Ol(a.i).length||0!=a.l.length)&&(a.i.i.length=0,Re(a.l),a.l.length=0),a.j.ua())}function qc(a,s,l){var f=function Qu(a){return a instanceof ss?Mo(a):new ss(a,void 0)}(l);if(""!=f.i)s&&xl(f,s+"."+f.i),Aa(f,f.m);else{var m=X.location;f=function jh(a,s,l,f){var m=new ss(null,void 0);return a&&Yu(m,a),s&&xl(m,s),l&&Aa(m,l),f&&(m.l=f),m}(m.protocol,s?s+"."+m.hostname:m.hostname,+m.port,l)}return a.aa&&St(a.aa,function(b,D){Nn(f,D,b)}),l=a.sa,(s=a.D)&&l&&Nn(f,s,l),Nn(f,"VER",a.ma),ic(a,f),f}function Gd(a,s,l){if(s&&!a.H)throw Error("Can't create secondary domain capable XhrIo object.");return(s=new hr(l&&a.Ba&&!a.qa?new Ma({ib:!0}):a.qa)).L=a.H,s}function Ul(){}function sa(){if(go&&!(10<=Number(Mi)))throw Error("Environmental error: no available transport.")}function li(a,s){ln.call(this),this.g=new kl(s),this.l=a,this.h=s&&s.messageUrlParams||null,a=s&&s.messageHeaders||null,s&&s.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.s=a,a=s&&s.initMessageHeaders||null,s&&s.messageContentType&&(a?a["X-WebChannel-Content-Type"]=s.messageContentType:a={"X-WebChannel-Content-Type":s.messageContentType}),s&&s.ya&&(a?a["X-WebChannel-Client-Profile"]=s.ya:a={"X-WebChannel-Client-Profile":s.ya}),this.g.P=a,(a=s&&s.httpHeadersOverwriteParam)&&!Ee(a)&&(this.g.o=a),this.A=s&&s.supportsCrossDomainXhr||!1,this.v=s&&s.sendRawJson||!1,(s=s&&s.httpSessionIdParam)&&!Ee(s)&&(this.g.D=s,null!==(a=this.h)&&s in a&&s in(a=this.h)&&delete a[s]),this.j=new pu(this)}function qd(a){Pd.call(this);var s=a.__sm__;if(s){e:{for(var l in s){a=l;break e}a=void 0}(this.i=a)&&(a=this.i,s=null!==s&&a in s?s[a]:void 0),this.data=s}else this.data=a}function fu(){Tl.call(this),this.status=1}function pu(a){this.g=a}(ue=hr.prototype).ea=function(a,s,l,f){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+a);s=s?s.toUpperCase():"GET",this.H=a,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():kd.g(),this.C=function Gu(a){return a.h||(a.h=a.i())}(this.u?this.u:kd),this.g.onreadystatechange=ht(this.Fa,this);try{this.F=!0,this.g.open(s,String(a),!0),this.F=!1}catch(b){return void cs(this,b)}a=l||"";var m=new Ku(this.headers);f&&Zu(f,function(b,D){m.set(D,b)}),f=function ge(a){e:{for(var s=Pr,l=a.length,f="string"==typeof a?a.split(""):a,m=0;m<l;m++)if(m in f&&s.call(void 0,f[m],m,a)){s=m;break e}s=-1}return 0>s?null:"string"==typeof a?a.charAt(s):a[s]}(m.T()),l=X.FormData&&a instanceof X.FormData,!(0<=le(Hh,s))||f||l||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),m.forEach(function(b,D){this.g.setRequestHeader(D,b)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{tp(this),0<this.B&&((this.K=function lu(a){return go&&function vr(){return function un(a){var s=yr;return Object.prototype.hasOwnProperty.call(s,9)?s[9]:s[9]=a(9)}(function(){for(var a=0,s=ot(String(cn)).split("."),l=ot("9").split("."),f=Math.max(s.length,l.length),m=0;0==a&&m<f;m++){var b=s[m]||"",D=l[m]||"";do{if(b=/(\d*)(\D*)(.*)/.exec(b)||["","","",""],D=/(\d*)(\D*)(.*)/.exec(D)||["","","",""],0==b[0].length&&0==D[0].length)break;a=Vt(0==b[1].length?0:parseInt(b[1],10),0==D[1].length?0:parseInt(D[1],10))||Vt(0==b[2].length,0==D[2].length)||Vt(b[2],D[2]),b=b[3],D=D[3]}while(0==a)}return 0<=a})}()&&"number"==typeof a.timeout&&void 0!==a.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ht(this.pa,this)):this.A=ta(this.pa,this.B,this)),this.v=!0,this.g.send(a),this.v=!1}catch(b){cs(this,b)}},ue.pa=function(){typeof te<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Nt(this,"timeout"),this.abort(8))},ue.abort=function(a){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=a||7,Nt(this,"complete"),Nt(this,"abort"),No(this))},ue.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),No(this,!0)),hr.Z.M.call(this)},ue.Fa=function(){this.s||(this.F||this.v||this.l?Ra(this):this.cb())},ue.cb=function(){Ra(this)},ue.ba=function(){try{return 2<vo(this)?this.g.status:-1}catch{return-1}},ue.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}},ue.Qa=function(a){if(this.g){var s=this.g.responseText;return a&&0==s.indexOf(a)&&(s=s.substring(a.length)),$c(s)}},ue.Da=function(){return this.m},ue.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(ue=kl.prototype).ma=8,ue.G=1,ue.hb=function(a){try{this.h.info("Origin Trials invoked: "+a)}catch{}},ue.Ha=function(a){if(this.m)if(this.m=null,1==this.G){if(!a){this.V=Math.floor(1e5*Math.random()),a=this.V++;var s=new au(this,this.h,a,void 0),l=this.s;if(this.P&&(l?Xt(l=Tt(l),this.P):l=this.P),null===this.o&&(s.H=l),this.ja)e:{for(var f=0,m=0;m<this.l.length;m++){var b=this.l[m];if(void 0===(b="__data__"in b.g&&"string"==typeof(b=b.g.__data__)?b.length:void 0))break;if(4096<(f+=b)){f=m;break e}if(4096===f||m===this.l.length-1){f=m+1;break e}}f=1e3}else f=1e3;f=Oa(this,s,f),Nn(m=Mo(this.F),"RID",a),Nn(m,"CVER",22),this.D&&Nn(m,"X-HTTP-Session-Id",this.D),ic(this,m),this.o&&l&&ec(m,this.o,l),Xu(this.i,s),this.Ra&&Nn(m,"TYPE","init"),this.ja?(Nn(m,"$req",f),Nn(m,"SID","null"),s.$=!0,Uh(s,m,null)):Uh(s,m,f),this.G=2}}else 3==this.G&&(a?Fl(this,a):0==this.l.length||dn(this.i)||Fl(this))},ue.Ga=function(){if(this.u=null,io(this),this.$&&!(this.L||null==this.g||0>=this.O)){var a=2*this.O;this.h.info("BP detection timer enabled: "+a),this.B=su(ht(this.bb,this),a)}},ue.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,cr(10),tc(this),io(this))},ue.ab=function(){null!=this.v&&(this.v=null,tc(this),oc(this),cr(19))},ue.jb=function(a){a?(this.h.info("Successfully pinged google.com"),cr(2)):(this.h.info("Failed to ping google.com"),cr(1))},(ue=Ul.prototype).xa=function(){},ue.wa=function(){},ue.va=function(){},ue.ua=function(){},ue.Oa=function(){},sa.prototype.g=function(a,s){return new li(a,s)},Ce(li,ln),li.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var a=this.g,s=this.l,l=this.h||void 0;a.Wa&&(a.h.info("Origin Trials enabled."),Yt(ht(a.hb,a,s))),cr(0),a.W=s,a.aa=l||{},a.N=a.X,a.F=qc(a,null,a.W),rc(a)},li.prototype.close=function(){du(this.g)},li.prototype.u=function(a){if("string"==typeof a){var s={};s.__data__=a,nc(this.g,s)}else this.v?((s={}).__data__=er(a),nc(this.g,s)):nc(this.g,a)},li.prototype.M=function(){this.g.j=null,delete this.j,du(this.g),delete this.g,li.Z.M.call(this)},Ce(qd,Pd),Ce(fu,Tl),Ce(pu,Ul),pu.prototype.xa=function(){Nt(this.g,"a")},pu.prototype.wa=function(a){Nt(this.g,new qd(a))},pu.prototype.va=function(a){Nt(this.g,new fu(a))},pu.prototype.ua=function(){Nt(this.g,"b")},sa.prototype.createWebChannel=sa.prototype.g,li.prototype.send=li.prototype.u,li.prototype.open=li.prototype.m,li.prototype.close=li.prototype.close,Hr.NO_ERROR=0,Hr.TIMEOUT=8,Hr.HTTP_ERROR=6,qi.COMPLETE="complete",Dl.EventType=Xr,Xr.OPEN="a",Xr.CLOSE="b",Xr.ERROR="c",Xr.MESSAGE="d",ln.prototype.listen=ln.prototype.N,hr.prototype.listenOnce=hr.prototype.O,hr.prototype.getLastError=hr.prototype.La,hr.prototype.getLastErrorCode=hr.prototype.Da,hr.prototype.getStatus=hr.prototype.ba,hr.prototype.getResponseJson=hr.prototype.Qa,hr.prototype.getResponseText=hr.prototype.ga,hr.prototype.send=hr.prototype.ea;var Ns=Hr,zc=qi,Sr=na,sc_PROXY=10,sc_NOPROXY=11,Wc=Ma,ac=Dl,$h=hr,ti=function(){function a(s,l){var f=this;this.previousValue=s,l&&(l.sequenceNumberHandler=function(m){return f.t(m)},this.i=function(m){return l.writeSequenceNumber(m)})}return a.prototype.t=function(s){return this.previousValue=Math.max(s,this.previousValue),this.previousValue},a.prototype.next=function(){var s=++this.previousValue;return this.i&&this.i(s),s},a}();ti.o=-1;var ke={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},et=function(a){function s(l,f){var m=this;return(m=a.call(this,f)||this).code=l,m.message=f,m.name="FirebaseError",m.toString=function(){return m.name+": [code="+m.code+"]: "+m.message},m}return(0,L.ZT)(s,a),s}(Error),Po=new me.Yd("@firebase/firestore");function Bl(){return Po.logLevel}function tt(a){for(var s=[],l=1;l<arguments.length;l++)s[l-1]=arguments[l];if(Po.logLevel<=me.in.DEBUG){var f=s.map(ko);Po.debug.apply(Po,(0,L.ev)(["Firestore (8.10.1): "+a],f))}}function fr(a){for(var s=[],l=1;l<arguments.length;l++)s[l-1]=arguments[l];if(Po.logLevel<=me.in.ERROR){var f=s.map(ko);Po.error.apply(Po,(0,L.ev)(["Firestore (8.10.1): "+a],f))}}function ca(a){for(var s=[],l=1;l<arguments.length;l++)s[l-1]=arguments[l];if(Po.logLevel<=me.in.WARN){var f=s.map(ko);Po.warn.apply(Po,(0,L.ev)(["Firestore (8.10.1): "+a],f))}}function ko(a){if("string"==typeof a)return a;try{return JSON.stringify(a)}catch{return a}}function kt(a){void 0===a&&(a="Unexpected state");var s="FIRESTORE (8.10.1) INTERNAL ASSERTION FAILED: "+a;throw fr(s),new Error(s)}function rn(a,s){a||kt()}function vt(a,s){return a}function zd(a){var s=typeof self<"u"&&(self.crypto||self.msCrypto),l=new Uint8Array(a);if(s&&"function"==typeof s.getRandomValues)s.getRandomValues(l);else for(var f=0;f<a;f++)l[f]=Math.floor(256*Math.random());return l}var kr=function(){function a(){}return a.u=function(){for(var s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",l=Math.floor(256/s.length)*s.length,f="";f.length<20;)for(var m=zd(40),b=0;b<m.length;++b)f.length<20&&m[b]<l&&(f+=s.charAt(m[b]%s.length));return f},a}();function fn(a,s){return a<s?-1:a>s?1:0}function la(a,s,l){return a.length===s.length&&a.every(function(f,m){return l(f,s[m])})}function Pa(a){return a+"\0"}var di=function(){function a(s,l){if(this.seconds=s,this.nanoseconds=l,l<0)throw new et(ke.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+l);if(l>=1e9)throw new et(ke.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+l);if(s<-62135596800)throw new et(ke.INVALID_ARGUMENT,"Timestamp seconds out of range: "+s);if(s>=253402300800)throw new et(ke.INVALID_ARGUMENT,"Timestamp seconds out of range: "+s)}return a.now=function(){return a.fromMillis(Date.now())},a.fromDate=function(s){return a.fromMillis(s.getTime())},a.fromMillis=function(s){var l=Math.floor(s/1e3);return new a(l,Math.floor(1e6*(s-1e3*l)))},a.prototype.toDate=function(){return new Date(this.toMillis())},a.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},a.prototype._compareTo=function(s){return this.seconds===s.seconds?fn(this.nanoseconds,s.nanoseconds):fn(this.seconds,s.seconds)},a.prototype.isEqual=function(s){return s.seconds===this.seconds&&s.nanoseconds===this.nanoseconds},a.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},a.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},a.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},a}(),bn=function(){function a(s){this.timestamp=s}return a.fromTimestamp=function(s){return new a(s)},a.min=function(){return new a(new di(0,0))},a.prototype.compareTo=function(s){return this.timestamp._compareTo(s.timestamp)},a.prototype.isEqual=function(s){return this.timestamp.isEqual(s.timestamp)},a.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},a.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},a.prototype.toTimestamp=function(){return this.timestamp},a}();function Yc(a){var s=0;for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&s++;return s}function oo(a,s){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&s(l,a[l])}function Wd(a){for(var s in a)if(Object.prototype.hasOwnProperty.call(a,s))return!1;return!0}var da=function(){function a(s,l,f){void 0===l?l=0:l>s.length&&kt(),void 0===f?f=s.length-l:f>s.length-l&&kt(),this.segments=s,this.offset=l,this.len=f}return Object.defineProperty(a.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),a.prototype.isEqual=function(s){return 0===a.comparator(this,s)},a.prototype.child=function(s){var l=this.segments.slice(this.offset,this.limit());return s instanceof a?s.forEach(function(f){l.push(f)}):l.push(s),this.construct(l)},a.prototype.limit=function(){return this.offset+this.length},a.prototype.popFirst=function(s){return this.construct(this.segments,this.offset+(s=void 0===s?1:s),this.length-s)},a.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},a.prototype.firstSegment=function(){return this.segments[this.offset]},a.prototype.lastSegment=function(){return this.get(this.length-1)},a.prototype.get=function(s){return this.segments[this.offset+s]},a.prototype.isEmpty=function(){return 0===this.length},a.prototype.isPrefixOf=function(s){if(s.length<this.length)return!1;for(var l=0;l<this.length;l++)if(this.get(l)!==s.get(l))return!1;return!0},a.prototype.isImmediateParentOf=function(s){if(this.length+1!==s.length)return!1;for(var l=0;l<this.length;l++)if(this.get(l)!==s.get(l))return!1;return!0},a.prototype.forEach=function(s){for(var l=this.offset,f=this.limit();l<f;l++)s(this.segments[l])},a.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},a.comparator=function(s,l){for(var f=Math.min(s.length,l.length),m=0;m<f;m++){var b=s.get(m),D=l.get(m);if(b<D)return-1;if(b>D)return 1}return s.length<l.length?-1:s.length>l.length?1:0},a}(),Vn=function(a){function s(){return null!==a&&a.apply(this,arguments)||this}return(0,L.ZT)(s,a),s.prototype.construct=function(l,f,m){return new s(l,f,m)},s.prototype.canonicalString=function(){return this.toArray().join("/")},s.prototype.toString=function(){return this.canonicalString()},s.fromString=function(){for(var l=[],f=0;f<arguments.length;f++)l[f]=arguments[f];for(var m=[],b=0,D=l;b<D.length;b++){var M=D[b];if(M.indexOf("//")>=0)throw new et(ke.INVALID_ARGUMENT,"Invalid segment ("+M+"). Paths must not contain // in them.");m.push.apply(m,M.split("/").filter(function(F){return F.length>0}))}return new s(m)},s.emptyPath=function(){return new s([])},s}(da),gu=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Wi=function(a){function s(){return null!==a&&a.apply(this,arguments)||this}return(0,L.ZT)(s,a),s.prototype.construct=function(l,f,m){return new s(l,f,m)},s.isValidIdentifier=function(l){return gu.test(l)},s.prototype.canonicalString=function(){return this.toArray().map(function(l){return l=l.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),s.isValidIdentifier(l)||(l="`"+l+"`"),l}).join(".")},s.prototype.toString=function(){return this.canonicalString()},s.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},s.keyField=function(){return new s(["__name__"])},s.fromServerFormat=function(l){for(var f=[],m="",b=0,D=function(){if(0===m.length)throw new et(ke.INVALID_ARGUMENT,"Invalid field path ("+l+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");f.push(m),m=""},M=!1;b<l.length;){var F=l[b];if("\\"===F){if(b+1===l.length)throw new et(ke.INVALID_ARGUMENT,"Path has trailing escape character: "+l);var H=l[b+1];if("\\"!==H&&"."!==H&&"`"!==H)throw new et(ke.INVALID_ARGUMENT,"Path has invalid escape sequence: "+l);m+=H,b+=2}else"`"===F?(M=!M,b++):"."!==F||M?(m+=F,b++):(D(),b++)}if(D(),M)throw new et(ke.INVALID_ARGUMENT,"Unterminated ` in path: "+l);return new s(f)},s.emptyPath=function(){return new s([])},s}(da),mu=function(){function a(s){this.fields=s,s.sort(Wi.comparator)}return a.prototype.covers=function(s){for(var l=0,f=this.fields;l<f.length;l++)if(f[l].isPrefixOf(s))return!0;return!1},a.prototype.isEqual=function(s){return la(this.fields,s.fields,function(l,f){return l.isEqual(f)})},a}(),qr=function(){function a(s){this.binaryString=s}return a.fromBase64String=function(s){return new a(atob(s))},a.fromUint8Array=function(s){return new a(function(l){for(var f="",m=0;m<l.length;++m)f+=String.fromCharCode(l[m]);return f}(s))},a.prototype.toBase64=function(){return btoa(this.binaryString)},a.prototype.toUint8Array=function(){return function(s){for(var l=new Uint8Array(s.length),f=0;f<s.length;f++)l[f]=s.charCodeAt(f);return l}(this.binaryString)},a.prototype.approximateByteSize=function(){return 2*this.binaryString.length},a.prototype.compareTo=function(s){return fn(this.binaryString,s.binaryString)},a.prototype.isEqual=function(s){return this.binaryString===s.binaryString},a}();qr.EMPTY_BYTE_STRING=new qr("");var ha=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ps(a){if(rn(!!a),"string"==typeof a){var s=0,l=ha.exec(a);if(rn(!!l),l[1]){var f=l[1];f=(f+"000000000").substr(0,9),s=Number(f)}var m=new Date(a);return{seconds:Math.floor(m.getTime()/1e3),nanos:s}}return{seconds:br(a.seconds),nanos:br(a.nanos)}}function br(a){return"number"==typeof a?a:"string"==typeof a?Number(a):0}function ks(a){return"string"==typeof a?qr.fromBase64String(a):qr.fromUint8Array(a)}function fa(a){var s,l;return"server_timestamp"===(null===(l=((null===(s=a?.mapValue)||void 0===s?void 0:s.fields)||{}).__type__)||void 0===l?void 0:l.stringValue)}function jl(a){var s=a.mapValue.fields.__previous_value__;return fa(s)?jl(s):s}function _o(a){var s=Ps(a.mapValue.fields.__local_write_time__.timestampValue);return new di(s.seconds,s.nanos)}function Fs(a){return null==a}function pa(a){return 0===a&&1/a==-1/0}function yu(a){return"number"==typeof a&&Number.isInteger(a)&&!pa(a)&&a<=Number.MAX_SAFE_INTEGER&&a>=Number.MIN_SAFE_INTEGER}var jt=function(){function a(s){this.path=s}return a.fromPath=function(s){return new a(Vn.fromString(s))},a.fromName=function(s){return new a(Vn.fromString(s).popFirst(5))},a.prototype.hasCollectionId=function(s){return this.path.length>=2&&this.path.get(this.path.length-2)===s},a.prototype.isEqual=function(s){return null!==s&&0===Vn.comparator(this.path,s.path)},a.prototype.toString=function(){return this.path.toString()},a.comparator=function(s,l){return Vn.comparator(s.path,l.path)},a.isDocumentKey=function(s){return s.length%2==0},a.fromSegments=function(s){return new a(new Vn(s.slice()))},a}();function ni(a){return"nullValue"in a?0:"booleanValue"in a?1:"integerValue"in a||"doubleValue"in a?2:"timestampValue"in a?3:"stringValue"in a?5:"bytesValue"in a?6:"referenceValue"in a?7:"geoPointValue"in a?8:"arrayValue"in a?9:"mapValue"in a?fa(a)?4:10:kt()}function Ii(a,s){var m,l=ni(a);if(l!==ni(s))return!1;switch(l){case 0:return!0;case 1:return a.booleanValue===s.booleanValue;case 4:return _o(a).isEqual(_o(s));case 3:return function(f,m){if("string"==typeof f.timestampValue&&"string"==typeof m.timestampValue&&f.timestampValue.length===m.timestampValue.length)return f.timestampValue===m.timestampValue;var b=Ps(f.timestampValue),D=Ps(m.timestampValue);return b.seconds===D.seconds&&b.nanos===D.nanos}(a,s);case 5:return a.stringValue===s.stringValue;case 6:return m=s,ks(a.bytesValue).isEqual(ks(m.bytesValue));case 7:return a.referenceValue===s.referenceValue;case 8:return function(f,m){return br(f.geoPointValue.latitude)===br(m.geoPointValue.latitude)&&br(f.geoPointValue.longitude)===br(m.geoPointValue.longitude)}(a,s);case 2:return function(f,m){if("integerValue"in f&&"integerValue"in m)return br(f.integerValue)===br(m.integerValue);if("doubleValue"in f&&"doubleValue"in m){var b=br(f.doubleValue),D=br(m.doubleValue);return b===D?pa(b)===pa(D):isNaN(b)&&isNaN(D)}return!1}(a,s);case 9:return la(a.arrayValue.values||[],s.arrayValue.values||[],Ii);case 10:return function(f,m){var b=f.mapValue.fields||{},D=m.mapValue.fields||{};if(Yc(b)!==Yc(D))return!1;for(var M in b)if(b.hasOwnProperty(M)&&(void 0===D[M]||!Ii(b[M],D[M])))return!1;return!0}(a,s);default:return kt()}}function Ls(a,s){return void 0!==(a.values||[]).find(function(l){return Ii(l,s)})}function ls(a,s){var m,b,D,M,l=ni(a),f=ni(s);if(l!==f)return fn(l,f);switch(l){case 0:return 0;case 1:return fn(a.booleanValue,s.booleanValue);case 2:return b=s,(D=br((m=a).integerValue||m.doubleValue))<(M=br(b.integerValue||b.doubleValue))?-1:D>M?1:D===M?0:isNaN(D)?isNaN(M)?0:-1:1;case 3:return Qc(a.timestampValue,s.timestampValue);case 4:return Qc(_o(a),_o(s));case 5:return fn(a.stringValue,s.stringValue);case 6:return function(m,b){var D=ks(m),M=ks(b);return D.compareTo(M)}(a.bytesValue,s.bytesValue);case 7:return function(m,b){for(var D=m.split("/"),M=b.split("/"),F=0;F<D.length&&F<M.length;F++){var H=fn(D[F],M[F]);if(0!==H)return H}return fn(D.length,M.length)}(a.referenceValue,s.referenceValue);case 8:return function(m,b){var D=fn(br(m.latitude),br(b.latitude));return 0!==D?D:fn(br(m.longitude),br(b.longitude))}(a.geoPointValue,s.geoPointValue);case 9:return function(m,b){for(var D=m.values||[],M=b.values||[],F=0;F<D.length&&F<M.length;++F){var H=ls(D[F],M[F]);if(H)return H}return fn(D.length,M.length)}(a.arrayValue,s.arrayValue);case 10:return function(m,b){var D=m.fields||{},M=Object.keys(D),F=b.fields||{},H=Object.keys(F);M.sort(),H.sort();for(var Y=0;Y<M.length&&Y<H.length;++Y){var se=fn(M[Y],H[Y]);if(0!==se)return se;var de=ls(D[M[Y]],F[H[Y]]);if(0!==de)return de}return fn(M.length,H.length)}(a.mapValue,s.mapValue);default:throw kt()}}function Qc(a,s){if("string"==typeof a&&"string"==typeof s&&a.length===s.length)return fn(a,s);var l=Ps(a),f=Ps(s),m=fn(l.seconds,f.seconds);return 0!==m?m:fn(l.nanos,f.nanos)}function ka(a){return ga(a)}function ga(a){return"nullValue"in a?"null":"booleanValue"in a?""+a.booleanValue:"integerValue"in a?""+a.integerValue:"doubleValue"in a?""+a.doubleValue:"timestampValue"in a?"time("+(m=Ps(a.timestampValue)).seconds+","+m.nanos+")":"stringValue"in a?a.stringValue:"bytesValue"in a?ks(a.bytesValue).toBase64():"referenceValue"in a?jt.fromName(a.referenceValue).toString():"geoPointValue"in a?"geo("+(s=a.geoPointValue).latitude+","+s.longitude+")":"arrayValue"in a?function(f){for(var m="[",b=!0,D=0,M=f.values||[];D<M.length;D++)b?b=!1:m+=",",m+=ga(M[D]);return m+"]"}(a.arrayValue):"mapValue"in a?function(f){for(var m="{",b=!0,D=0,M=Object.keys(f.fields||{}).sort();D<M.length;D++){var F=M[D];b?b=!1:m+=",",m+=F+":"+ga(f.fields[F])}return m+"}"}(a.mapValue):kt();var m,s}function Fa(a,s){return{referenceValue:"projects/"+a.projectId+"/databases/"+a.database+"/documents/"+s.path.canonicalString()}}function rr(a){return!!a&&"integerValue"in a}function Gh(a){return!!a&&"arrayValue"in a}function mg(a){return!!a&&"nullValue"in a}function rp(a){return!!a&&"doubleValue"in a&&isNaN(Number(a.doubleValue))}function qh(a){return!!a&&"mapValue"in a}function Zd(a){if(a.geoPointValue)return{geoPointValue:Object.assign({},a.geoPointValue)};if(a.timestampValue&&"object"==typeof a.timestampValue)return{timestampValue:Object.assign({},a.timestampValue)};if(a.mapValue){var s={mapValue:{fields:{}}};return oo(a.mapValue.fields,function(m,b){return s.mapValue.fields[m]=Zd(b)}),s}if(a.arrayValue){for(var l={arrayValue:{values:[]}},f=0;f<(a.arrayValue.values||[]).length;++f)l.arrayValue.values[f]=Zd(a.arrayValue.values[f]);return l}return Object.assign({},a)}var wo=function(){function a(s){this.value=s}return a.empty=function(){return new a({mapValue:{}})},a.prototype.field=function(s){if(s.isEmpty())return this.value;for(var l=this.value,f=0;f<s.length-1;++f)if(!qh(l=(l.mapValue.fields||{})[s.get(f)]))return null;return(l=(l.mapValue.fields||{})[s.lastSegment()])||null},a.prototype.set=function(s,l){this.getFieldsMap(s.popLast())[s.lastSegment()]=Zd(l)},a.prototype.setAll=function(s){var l=this,f=Wi.emptyPath(),m={},b=[];s.forEach(function(M,F){if(!f.isImmediateParentOf(F)){var H=l.getFieldsMap(f);l.applyChanges(H,m,b),m={},b=[],f=F.popLast()}M?m[F.lastSegment()]=Zd(M):b.push(F.lastSegment())});var D=this.getFieldsMap(f);this.applyChanges(D,m,b)},a.prototype.delete=function(s){var l=this.field(s.popLast());qh(l)&&l.mapValue.fields&&delete l.mapValue.fields[s.lastSegment()]},a.prototype.isEqual=function(s){return Ii(this.value,s.value)},a.prototype.getFieldsMap=function(s){var l=this.value;l.mapValue.fields||(l.mapValue={fields:{}});for(var f=0;f<s.length;++f){var m=l.mapValue.fields[s.get(f)];qh(m)&&m.mapValue.fields||(m={mapValue:{fields:{}}},l.mapValue.fields[s.get(f)]=m),l=m}return l.mapValue.fields},a.prototype.applyChanges=function(s,l,f){oo(l,function(M,F){return s[M]=F});for(var m=0,b=f;m<b.length;m++)delete s[b[m]]},a.prototype.clone=function(){return new a(Zd(this.value))},a}();function Km(a){var s=[];return oo(a.fields,function(l,f){var m=new Wi([l]);if(qh(f)){var b=Km(f.mapValue).fields;if(0===b.length)s.push(m);else for(var D=0,M=b;D<M.length;D++)s.push(m.child(M[D]))}else s.push(m)}),new mu(s)}var ri=function(){function a(s,l,f,m,b){this.key=s,this.documentType=l,this.version=f,this.data=m,this.documentState=b}return a.newInvalidDocument=function(s){return new a(s,0,bn.min(),wo.empty(),0)},a.newFoundDocument=function(s,l,f){return new a(s,1,l,f,0)},a.newNoDocument=function(s,l){return new a(s,2,l,wo.empty(),0)},a.newUnknownDocument=function(s,l){return new a(s,3,l,wo.empty(),2)},a.prototype.convertToFoundDocument=function(s,l){return this.version=s,this.documentType=1,this.data=l,this.documentState=0,this},a.prototype.convertToNoDocument=function(s){return this.version=s,this.documentType=2,this.data=wo.empty(),this.documentState=0,this},a.prototype.convertToUnknownDocument=function(s){return this.version=s,this.documentType=3,this.data=wo.empty(),this.documentState=2,this},a.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},a.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(a.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),a.prototype.isValidDocument=function(){return 0!==this.documentType},a.prototype.isFoundDocument=function(){return 1===this.documentType},a.prototype.isNoDocument=function(){return 2===this.documentType},a.prototype.isUnknownDocument=function(){return 3===this.documentType},a.prototype.isEqual=function(s){return s instanceof a&&this.key.isEqual(s.key)&&this.version.isEqual(s.version)&&this.documentType===s.documentType&&this.documentState===s.documentState&&this.data.isEqual(s.data)},a.prototype.clone=function(){return new a(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},a.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},a}(),Ym=function(a,s,l,f,m,b,D){void 0===s&&(s=null),void 0===l&&(l=[]),void 0===f&&(f=[]),void 0===m&&(m=null),void 0===b&&(b=null),void 0===D&&(D=null),this.path=a,this.collectionGroup=s,this.orderBy=l,this.filters=f,this.limit=m,this.startAt=b,this.endAt=D,this.h=null};function yg(a,s,l,f,m,b,D){return void 0===s&&(s=null),void 0===l&&(l=[]),void 0===f&&(f=[]),void 0===m&&(m=null),void 0===b&&(b=null),void 0===D&&(D=null),new Ym(a,s,l,f,m,b,D)}function Fr(a){var s=vt(a);if(null===s.h){var l=s.path.canonicalString();null!==s.collectionGroup&&(l+="|cg:"+s.collectionGroup),l+="|f:",l+=s.filters.map(function(f){return(m=f).field.canonicalString()+m.op.toString()+ka(m.value);var m}).join(","),l+="|ob:",l+=s.orderBy.map(function(f){return(m=f).field.canonicalString()+m.dir;var m}).join(","),Fs(s.limit)||(l+="|l:",l+=s.limit),s.startAt&&(l+="|lb:",l+=Va(s.startAt)),s.endAt&&(l+="|ub:",l+=Va(s.endAt)),s.h=l}return s.h}function Un(a,s){if(a.limit!==s.limit||a.orderBy.length!==s.orderBy.length)return!1;for(var l=0;l<a.orderBy.length;l++)if(!Ua(a.orderBy[l],s.orderBy[l]))return!1;if(a.filters.length!==s.filters.length)return!1;for(var f=0;f<a.filters.length;f++)if((m=a.filters[f]).op!==(b=s.filters[f]).op||!m.field.isEqual(b.field)||!Ii(m.value,b.value))return!1;var m,b;return a.collectionGroup===s.collectionGroup&&!!a.path.isEqual(s.path)&&!!cc(a.startAt,s.startAt)&&cc(a.endAt,s.endAt)}function so(a){return jt.isDocumentKey(a.path)&&null===a.collectionGroup&&0===a.filters.length}var Et=function(a){function s(l,f,m){var b=this;return(b=a.call(this)||this).field=l,b.op=f,b.value=m,b}return(0,L.ZT)(s,a),s.create=function(l,f,m){return l.isKeyField()?"in"===f||"not-in"===f?this.l(l,f,m):new Fo(l,f,m):"array-contains"===f?new Pi(l,m):"in"===f?new La(l,m):"not-in"===f?new Hl(l,m):"array-contains-any"===f?new vg(l,m):new s(l,f,m)},s.l=function(l,f,m){return"in"===f?new Ir(l,m):new ds(l,m)},s.prototype.matches=function(l){var f=l.data.field(this.field);return"!="===this.op?null!==f&&this.m(ls(f,this.value)):null!==f&&ni(this.value)===ni(f)&&this.m(ls(f,this.value))},s.prototype.m=function(l){switch(this.op){case"<":return l<0;case"<=":return l<=0;case"==":return 0===l;case"!=":return 0!==l;case">":return l>0;case">=":return l>=0;default:return kt()}},s.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},s}(function(){}),Fo=function(a){function s(l,f,m){var b=this;return(b=a.call(this,l,f,m)||this).key=jt.fromName(m.referenceValue),b}return(0,L.ZT)(s,a),s.prototype.matches=function(l){var f=jt.comparator(l.key,this.key);return this.m(f)},s}(Et),Ir=function(a){function s(l,f){var m=this;return(m=a.call(this,l,"in",f)||this).keys=uc(0,f),m}return(0,L.ZT)(s,a),s.prototype.matches=function(l){return this.keys.some(function(f){return f.isEqual(l.key)})},s}(Et),ds=function(a){function s(l,f){var m=this;return(m=a.call(this,l,"not-in",f)||this).keys=uc(0,f),m}return(0,L.ZT)(s,a),s.prototype.matches=function(l){return!this.keys.some(function(f){return f.isEqual(l.key)})},s}(Et);function uc(a,s){var l;return((null===(l=s.arrayValue)||void 0===l?void 0:l.values)||[]).map(function(f){return jt.fromName(f.referenceValue)})}var Pi=function(a){function s(l,f){return a.call(this,l,"array-contains",f)||this}return(0,L.ZT)(s,a),s.prototype.matches=function(l){var f=l.data.field(this.field);return Gh(f)&&Ls(f.arrayValue,this.value)},s}(Et),La=function(a){function s(l,f){return a.call(this,l,"in",f)||this}return(0,L.ZT)(s,a),s.prototype.matches=function(l){var f=l.data.field(this.field);return null!==f&&Ls(this.value.arrayValue,f)},s}(Et),Hl=function(a){function s(l,f){return a.call(this,l,"not-in",f)||this}return(0,L.ZT)(s,a),s.prototype.matches=function(l){if(Ls(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var f=l.data.field(this.field);return null!==f&&!Ls(this.value.arrayValue,f)},s}(Et),vg=function(a){function s(l,f){return a.call(this,l,"array-contains-any",f)||this}return(0,L.ZT)(s,a),s.prototype.matches=function(l){var f=this,m=l.data.field(this.field);return!(!Gh(m)||!m.arrayValue.values)&&m.arrayValue.values.some(function(b){return Ls(f.value.arrayValue,b)})},s}(Et),vu=function(a,s){this.position=a,this.before=s};function Va(a){return(a.before?"b":"a")+":"+a.position.map(function(s){return ka(s)}).join(",")}var Lo=function(a,s){void 0===s&&(s="asc"),this.field=a,this.dir=s};function Ua(a,s){return a.dir===s.dir&&a.field.isEqual(s.field)}function Mt(a,s,l){for(var f=0,m=0;m<a.position.length;m++){var b=s[m],D=a.position[m];if(f=b.field.isKeyField()?jt.comparator(jt.fromName(D.referenceValue),l.key):ls(D,l.data.field(b.field)),"desc"===b.dir&&(f*=-1),0!==f)break}return a.before?f<=0:f<0}function cc(a,s){if(null===a)return null===s;if(null===s||a.before!==s.before||a.position.length!==s.position.length)return!1;for(var l=0;l<a.position.length;l++)if(!Ii(a.position[l],s.position[l]))return!1;return!0}var ki=function(a,s,l,f,m,b,D,M){void 0===s&&(s=null),void 0===l&&(l=[]),void 0===f&&(f=[]),void 0===m&&(m=null),void 0===b&&(b="F"),void 0===D&&(D=null),void 0===M&&(M=null),this.path=a,this.collectionGroup=s,this.explicitOrderBy=l,this.filters=f,this.limit=m,this.limitType=b,this.startAt=D,this.endAt=M,this.p=null,this.T=null};function lc(a,s,l,f,m,b,D,M){return new ki(a,s,l,f,m,b,D,M)}function hs(a){return new ki(a)}function Ar(a){return!Fs(a.limit)&&"F"===a.limitType}function dc(a){return!Fs(a.limit)&&"L"===a.limitType}function Ba(a){return a.explicitOrderBy.length>0?a.explicitOrderBy[0].field:null}function zh(a){for(var s=0,l=a.filters;s<l.length;s++){var f=l[s];if(f.g())return f.field}return null}function Jc(a){return null!==a.collectionGroup}function ma(a){var s=vt(a);if(null===s.p){s.p=[];var l=zh(s),f=Ba(s);if(null!==l&&null===f)l.isKeyField()||s.p.push(new Lo(l)),s.p.push(new Lo(Wi.keyField(),"asc"));else{for(var m=!1,b=0,D=s.explicitOrderBy;b<D.length;b++){var M=D[b];s.p.push(M),M.field.isKeyField()&&(m=!0)}if(!m){var F=s.explicitOrderBy.length>0?s.explicitOrderBy[s.explicitOrderBy.length-1].dir:"asc";s.p.push(new Lo(Wi.keyField(),F))}}}return s.p}function Fi(a){var s=vt(a);if(!s.T)if("F"===s.limitType)s.T=yg(s.path,s.collectionGroup,ma(s),s.filters,s.limit,s.startAt,s.endAt);else{for(var l=[],f=0,m=ma(s);f<m.length;f++){var b=m[f];l.push(new Lo(b.field,"desc"===b.dir?"asc":"desc"))}var M=s.endAt?new vu(s.endAt.position,!s.endAt.before):null,F=s.startAt?new vu(s.startAt.position,!s.startAt.before):null;s.T=yg(s.path,s.collectionGroup,l,s.filters,s.limit,M,F)}return s.T}function ya(a,s,l){return new ki(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),s,l,a.startAt,a.endAt)}function Vo(a,s){return Un(Fi(a),Fi(s))&&a.limitType===s.limitType}function Uo(a){return Fr(Fi(a))+"|lt:"+a.limitType}function Xc(a){return"Query(target="+(l=(s=Fi(a)).path.canonicalString(),null!==s.collectionGroup&&(l+=" collectionGroup="+s.collectionGroup),s.filters.length>0&&(l+=", filters: ["+s.filters.map(function(f){return(m=f).field.canonicalString()+" "+m.op+" "+ka(m.value);var m}).join(", ")+"]"),Fs(s.limit)||(l+=", limit: "+s.limit),s.orderBy.length>0&&(l+=", orderBy: ["+s.orderBy.map(function(f){return(m=f).field.canonicalString()+" ("+m.dir+")";var m}).join(", ")+"]"),s.startAt&&(l+=", startAt: "+Va(s.startAt)),s.endAt&&(l+=", endAt: "+Va(s.endAt)),"Target("+l+"); limitType=")+a.limitType+")";var s,l}function Vs(a,s){return s.isFoundDocument()&&(m=(f=s).key.path,null!==(l=a).collectionGroup?f.key.hasCollectionId(l.collectionGroup)&&l.path.isPrefixOf(m):jt.isDocumentKey(l.path)?l.path.isEqual(m):l.path.isImmediateParentOf(m))&&function(l,f){for(var m=0,b=l.explicitOrderBy;m<b.length;m++){var D=b[m];if(!D.field.isKeyField()&&null===f.data.field(D.field))return!1}return!0}(a,s)&&function(l,f){for(var m=0,b=l.filters;m<b.length;m++)if(!b[m].matches(f))return!1;return!0}(a,s)&&function(l,f){return!(l.startAt&&!Mt(l.startAt,ma(l),f)||l.endAt&&Mt(l.endAt,ma(l),f))}(a,s);var l,f,m}function ao(a){return function(s,l){for(var f=!1,m=0,b=ma(a);m<b.length;m++){var D=b[m],M=va(D,s,l);if(0!==M)return M;f=f||D.field.isKeyField()}return 0}}function va(a,s,l){var m,D,M,F,f=a.field.isKeyField()?jt.comparator(s.key,l.key):(D=l,M=s.data.field(m=a.field),F=D.data.field(m),null!==M&&null!==F?ls(M,F):kt());switch(a.dir){case"asc":return f;case"desc":return-1*f;default:return kt()}}function fs(a,s){if(a.I){if(isNaN(s))return{doubleValue:"NaN"};if(s===1/0)return{doubleValue:"Infinity"};if(s===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pa(s)?"-0":s}}function hi(a){return{integerValue:""+a}}function _a(a,s){return yu(s)?hi(s):fs(a,s)}var Bo=function(){this._=void 0};function Lr(a,s,l){return a instanceof P?(b={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:(f=l).seconds,nanos:f.nanoseconds}}}},(m=s)&&(b.fields.__previous_value__=m),{mapValue:b}):a instanceof k?G(a,s):a instanceof ie?ye(a,s):function(f,m){var b=el(f,m),D=We(b)+We(f.A);return rr(b)&&rr(f.A)?hi(D):fs(f.R,D)}(a,s);var f,m,b}function pr(a,s,l){return a instanceof k?G(a,s):a instanceof ie?ye(a,s):l}function el(a,s){return a instanceof Ae?rr(l=s)||(f=l)&&"doubleValue"in f?s:{integerValue:0}:null;var f,l}var P=function(a){function s(){return null!==a&&a.apply(this,arguments)||this}return(0,L.ZT)(s,a),s}(Bo),k=function(a){function s(l){var f=this;return(f=a.call(this)||this).elements=l,f}return(0,L.ZT)(s,a),s}(Bo);function G(a,s){for(var l=st(s),f=function(D){l.some(function(M){return Ii(M,D)})||l.push(D)},m=0,b=a.elements;m<b.length;m++)f(b[m]);return{arrayValue:{values:l}}}var ie=function(a){function s(l){var f=this;return(f=a.call(this)||this).elements=l,f}return(0,L.ZT)(s,a),s}(Bo);function ye(a,s){for(var l=st(s),f=function(D){l=l.filter(function(M){return!Ii(M,D)})},m=0,b=a.elements;m<b.length;m++)f(b[m]);return{arrayValue:{values:l}}}var Ae=function(a){function s(l,f){var m=this;return(m=a.call(this)||this).R=l,m.A=f,m}return(0,L.ZT)(s,a),s}(Bo);function We(a){return br(a.integerValue||a.doubleValue)}function st(a){return Gh(a)&&a.arrayValue.values?a.arrayValue.values.slice():[]}var xt=function(a,s){this.field=a,this.transform=s},on=function(a,s){this.version=a,this.transformResults=s},Bt=function(){function a(s,l){this.updateTime=s,this.exists=l}return a.none=function(){return new a},a.exists=function(s){return new a(void 0,s)},a.updateTime=function(s){return new a(s)},Object.defineProperty(a.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),a.prototype.isEqual=function(s){return this.exists===s.exists&&(this.updateTime?!!s.updateTime&&this.updateTime.isEqual(s.updateTime):!s.updateTime)},a}();function $t(a,s){return void 0!==a.updateTime?s.isFoundDocument()&&s.version.isEqual(a.updateTime):void 0===a.exists||a.exists===s.isFoundDocument()}var ar=function(){};function Li(a,s,l){var f,m,b,D,M;a instanceof jo?(m=s,b=l,D=(f=a).value.clone(),M=$a(f.fieldTransforms,m,b.transformResults),D.setAll(M),m.convertToFoundDocument(b.version,D).setHasCommittedMutations()):a instanceof ii?function(f,m,b){if($t(f.precondition,m)){var D=$a(f.fieldTransforms,m,b.transformResults),M=m.data;M.setAll(_u(f)),M.setAll(D),m.convertToFoundDocument(b.version,M).setHasCommittedMutations()}else m.convertToUnknownDocument(b.version)}(a,s,l):function(f,m,b){m.convertToNoDocument(b.version).setHasCommittedMutations()}(0,s,l)}function ja(a,s,l){var m;a instanceof jo?function(f,m,b){if($t(f.precondition,m)){var D=f.value.clone(),M=Ho(f.fieldTransforms,b,m);D.setAll(M),m.convertToFoundDocument(ps(m),D).setHasLocalMutations()}}(a,s,l):a instanceof ii?function(f,m,b){if($t(f.precondition,m)){var D=Ho(f.fieldTransforms,b,m),M=m.data;M.setAll(_u(f)),M.setAll(D),m.convertToFoundDocument(ps(m),M).setHasLocalMutations()}}(a,s,l):$t(a.precondition,m=s)&&m.convertToNoDocument(bn.min())}function Ha(a,s){for(var l=null,f=0,m=a.fieldTransforms;f<m.length;f++){var b=m[f],D=s.data.field(b.field),M=el(b.transform,D||null);null!=M&&(null==l&&(l=wo.empty()),l.set(b.field,M))}return l||null}function pn(a,s){return a.type===s.type&&!!a.key.isEqual(s.key)&&!!a.precondition.isEqual(s.precondition)&&(f=s.fieldTransforms,!!(void 0===(l=a.fieldTransforms)&&void 0===f||l&&f&&la(l,f,function(m,b){return(D=m).field.isEqual((M=b).field)&&(H=M.transform,(F=D.transform)instanceof k&&H instanceof k||F instanceof ie&&H instanceof ie?la(F.elements,H.elements,Ii):F instanceof Ae&&H instanceof Ae?Ii(F.A,H.A):F instanceof P&&H instanceof P);var D,M,F,H})))&&(0===a.type?a.value.isEqual(s.value):1!==a.type||a.data.isEqual(s.data)&&a.fieldMask.isEqual(s.fieldMask));var l,f}function ps(a){return a.isFoundDocument()?a.version:bn.min()}var jo=function(a){function s(l,f,m,b){void 0===b&&(b=[]);var D=this;return(D=a.call(this)||this).key=l,D.value=f,D.precondition=m,D.fieldTransforms=b,D.type=0,D}return(0,L.ZT)(s,a),s}(ar),ii=function(a){function s(l,f,m,b,D){void 0===D&&(D=[]);var M=this;return(M=a.call(this)||this).key=l,M.data=f,M.fieldMask=m,M.precondition=b,M.fieldTransforms=D,M.type=1,M}return(0,L.ZT)(s,a),s}(ar);function _u(a){var s=new Map;return a.fieldMask.fields.forEach(function(l){if(!l.isEmpty()){var f=a.data.field(l);s.set(l,f)}}),s}function $a(a,s,l){var f=new Map;rn(a.length===l.length);for(var m=0;m<l.length;m++){var b=a[m],D=b.transform,M=s.data.field(b.field);f.set(b.field,pr(D,M,l[m]))}return f}function Ho(a,s,l){for(var f=new Map,m=0,b=a;m<b.length;m++){var D=b[m],M=D.transform,F=l.data.field(D.field);f.set(D.field,Lr(M,F,s))}return f}var zr,Bn,$l=function(a){function s(l,f){var m=this;return(m=a.call(this)||this).key=l,m.precondition=f,m.type=2,m.fieldTransforms=[],m}return(0,L.ZT)(s,a),s}(ar),ip=function(a){function s(l,f){var m=this;return(m=a.call(this)||this).key=l,m.precondition=f,m.type=3,m.fieldTransforms=[],m}return(0,L.ZT)(s,a),s}(ar),fi=function(a){this.count=a};function gs(a){switch(a){case ke.OK:return kt();case ke.CANCELLED:case ke.UNKNOWN:case ke.DEADLINE_EXCEEDED:case ke.RESOURCE_EXHAUSTED:case ke.INTERNAL:case ke.UNAVAILABLE:case ke.UNAUTHENTICATED:return!1;case ke.INVALID_ARGUMENT:case ke.NOT_FOUND:case ke.ALREADY_EXISTS:case ke.PERMISSION_DENIED:case ke.FAILED_PRECONDITION:case ke.ABORTED:case ke.OUT_OF_RANGE:case ke.UNIMPLEMENTED:case ke.DATA_LOSS:return!0;default:return kt()}}function Wh(a){if(void 0===a)return fr("GRPC error has no .code"),ke.UNKNOWN;switch(a){case zr.OK:return ke.OK;case zr.CANCELLED:return ke.CANCELLED;case zr.UNKNOWN:return ke.UNKNOWN;case zr.DEADLINE_EXCEEDED:return ke.DEADLINE_EXCEEDED;case zr.RESOURCE_EXHAUSTED:return ke.RESOURCE_EXHAUSTED;case zr.INTERNAL:return ke.INTERNAL;case zr.UNAVAILABLE:return ke.UNAVAILABLE;case zr.UNAUTHENTICATED:return ke.UNAUTHENTICATED;case zr.INVALID_ARGUMENT:return ke.INVALID_ARGUMENT;case zr.NOT_FOUND:return ke.NOT_FOUND;case zr.ALREADY_EXISTS:return ke.ALREADY_EXISTS;case zr.PERMISSION_DENIED:return ke.PERMISSION_DENIED;case zr.FAILED_PRECONDITION:return ke.FAILED_PRECONDITION;case zr.ABORTED:return ke.ABORTED;case zr.OUT_OF_RANGE:return ke.OUT_OF_RANGE;case zr.UNIMPLEMENTED:return ke.UNIMPLEMENTED;case zr.DATA_LOSS:return ke.DATA_LOSS;default:return kt()}}(Bn=zr||(zr={}))[Bn.OK=0]="OK",Bn[Bn.CANCELLED=1]="CANCELLED",Bn[Bn.UNKNOWN=2]="UNKNOWN",Bn[Bn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Bn[Bn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Bn[Bn.NOT_FOUND=5]="NOT_FOUND",Bn[Bn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Bn[Bn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Bn[Bn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Bn[Bn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Bn[Bn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Bn[Bn.ABORTED=10]="ABORTED",Bn[Bn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Bn[Bn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Bn[Bn.INTERNAL=13]="INTERNAL",Bn[Bn.UNAVAILABLE=14]="UNAVAILABLE",Bn[Bn.DATA_LOSS=15]="DATA_LOSS";var Zi=function(){function a(s,l){this.comparator=s,this.root=l||Ga.EMPTY}return a.prototype.insert=function(s,l){return new a(this.comparator,this.root.insert(s,l,this.comparator).copy(null,null,Ga.BLACK,null,null))},a.prototype.remove=function(s){return new a(this.comparator,this.root.remove(s,this.comparator).copy(null,null,Ga.BLACK,null,null))},a.prototype.get=function(s){for(var l=this.root;!l.isEmpty();){var f=this.comparator(s,l.key);if(0===f)return l.value;f<0?l=l.left:f>0&&(l=l.right)}return null},a.prototype.indexOf=function(s){for(var l=0,f=this.root;!f.isEmpty();){var m=this.comparator(s,f.key);if(0===m)return l+f.left.size;m<0?f=f.left:(l+=f.left.size+1,f=f.right)}return-1},a.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(a.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),a.prototype.minKey=function(){return this.root.minKey()},a.prototype.maxKey=function(){return this.root.maxKey()},a.prototype.inorderTraversal=function(s){return this.root.inorderTraversal(s)},a.prototype.forEach=function(s){this.inorderTraversal(function(l,f){return s(l,f),!1})},a.prototype.toString=function(){var s=[];return this.inorderTraversal(function(l,f){return s.push(l+":"+f),!1}),"{"+s.join(", ")+"}"},a.prototype.reverseTraversal=function(s){return this.root.reverseTraversal(s)},a.prototype.getIterator=function(){return new op(this.root,null,this.comparator,!1)},a.prototype.getIteratorFrom=function(s){return new op(this.root,s,this.comparator,!1)},a.prototype.getReverseIterator=function(){return new op(this.root,null,this.comparator,!0)},a.prototype.getReverseIteratorFrom=function(s){return new op(this.root,s,this.comparator,!0)},a}(),op=function(){function a(s,l,f,m){this.isReverse=m,this.nodeStack=[];for(var b=1;!s.isEmpty();)if(b=l?f(s.key,l):1,m&&(b*=-1),b<0)s=this.isReverse?s.left:s.right;else{if(0===b){this.nodeStack.push(s);break}this.nodeStack.push(s),s=this.isReverse?s.right:s.left}}return a.prototype.getNext=function(){var s=this.nodeStack.pop(),l={key:s.key,value:s.value};if(this.isReverse)for(s=s.left;!s.isEmpty();)this.nodeStack.push(s),s=s.right;else for(s=s.right;!s.isEmpty();)this.nodeStack.push(s),s=s.left;return l},a.prototype.hasNext=function(){return this.nodeStack.length>0},a.prototype.peek=function(){if(0===this.nodeStack.length)return null;var s=this.nodeStack[this.nodeStack.length-1];return{key:s.key,value:s.value}},a}(),Ga=function(){function a(s,l,f,m,b){this.key=s,this.value=l,this.color=f??a.RED,this.left=m??a.EMPTY,this.right=b??a.EMPTY,this.size=this.left.size+1+this.right.size}return a.prototype.copy=function(s,l,f,m,b){return new a(s??this.key,l??this.value,f??this.color,m??this.left,b??this.right)},a.prototype.isEmpty=function(){return!1},a.prototype.inorderTraversal=function(s){return this.left.inorderTraversal(s)||s(this.key,this.value)||this.right.inorderTraversal(s)},a.prototype.reverseTraversal=function(s){return this.right.reverseTraversal(s)||s(this.key,this.value)||this.left.reverseTraversal(s)},a.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},a.prototype.minKey=function(){return this.min().key},a.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},a.prototype.insert=function(s,l,f){var m=this,b=f(s,m.key);return(m=b<0?m.copy(null,null,null,m.left.insert(s,l,f),null):0===b?m.copy(null,l,null,null,null):m.copy(null,null,null,null,m.right.insert(s,l,f))).fixUp()},a.prototype.removeMin=function(){if(this.left.isEmpty())return a.EMPTY;var s=this;return s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),(s=s.copy(null,null,null,s.left.removeMin(),null)).fixUp()},a.prototype.remove=function(s,l){var f,m=this;if(l(s,m.key)<0)m.left.isEmpty()||m.left.isRed()||m.left.left.isRed()||(m=m.moveRedLeft()),m=m.copy(null,null,null,m.left.remove(s,l),null);else{if(m.left.isRed()&&(m=m.rotateRight()),m.right.isEmpty()||m.right.isRed()||m.right.left.isRed()||(m=m.moveRedRight()),0===l(s,m.key)){if(m.right.isEmpty())return a.EMPTY;f=m.right.min(),m=m.copy(f.key,f.value,null,null,m.right.removeMin())}m=m.copy(null,null,null,null,m.right.remove(s,l))}return m.fixUp()},a.prototype.isRed=function(){return this.color},a.prototype.fixUp=function(){var s=this;return s.right.isRed()&&!s.left.isRed()&&(s=s.rotateLeft()),s.left.isRed()&&s.left.left.isRed()&&(s=s.rotateRight()),s.left.isRed()&&s.right.isRed()&&(s=s.colorFlip()),s},a.prototype.moveRedLeft=function(){var s=this.colorFlip();return s.right.left.isRed()&&(s=(s=(s=s.copy(null,null,null,null,s.right.rotateRight())).rotateLeft()).colorFlip()),s},a.prototype.moveRedRight=function(){var s=this.colorFlip();return s.left.left.isRed()&&(s=(s=s.rotateRight()).colorFlip()),s},a.prototype.rotateLeft=function(){var s=this.copy(null,null,a.RED,null,this.right.left);return this.right.copy(null,null,this.color,s,null)},a.prototype.rotateRight=function(){var s=this.copy(null,null,a.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,s)},a.prototype.colorFlip=function(){var s=this.left.copy(null,null,!this.left.color,null,null),l=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,s,l)},a.prototype.checkMaxDepth=function(){var s=this.check();return Math.pow(2,s)<=this.size+1},a.prototype.check=function(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw kt();var s=this.left.check();if(s!==this.right.check())throw kt();return s+(this.isRed()?0:1)},a}();Ga.EMPTY=null,Ga.RED=!0,Ga.BLACK=!1,Ga.EMPTY=new(function(){function a(){this.size=0}return Object.defineProperty(a.prototype,"key",{get:function(){throw kt()},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"value",{get:function(){throw kt()},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"color",{get:function(){throw kt()},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"left",{get:function(){throw kt()},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"right",{get:function(){throw kt()},enumerable:!1,configurable:!0}),a.prototype.copy=function(s,l,f,m,b){return this},a.prototype.insert=function(s,l,f){return new Ga(s,l)},a.prototype.remove=function(s,l){return this},a.prototype.isEmpty=function(){return!0},a.prototype.inorderTraversal=function(s){return!1},a.prototype.reverseTraversal=function(s){return!1},a.prototype.minKey=function(){return null},a.prototype.maxKey=function(){return null},a.prototype.isRed=function(){return!1},a.prototype.checkMaxDepth=function(){return!0},a.prototype.check=function(){return 0},a}());var Ei=function(){function a(s){this.comparator=s,this.data=new Zi(this.comparator)}return a.prototype.has=function(s){return null!==this.data.get(s)},a.prototype.first=function(){return this.data.minKey()},a.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(a.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),a.prototype.indexOf=function(s){return this.data.indexOf(s)},a.prototype.forEach=function(s){this.data.inorderTraversal(function(l,f){return s(l),!1})},a.prototype.forEachInRange=function(s,l){for(var f=this.data.getIteratorFrom(s[0]);f.hasNext();){var m=f.getNext();if(this.comparator(m.key,s[1])>=0)return;l(m.key)}},a.prototype.forEachWhile=function(s,l){var f;for(f=void 0!==l?this.data.getIteratorFrom(l):this.data.getIterator();f.hasNext();)if(!s(f.getNext().key))return},a.prototype.firstAfterOrEqual=function(s){var l=this.data.getIteratorFrom(s);return l.hasNext()?l.getNext().key:null},a.prototype.getIterator=function(){return new Zh(this.data.getIterator())},a.prototype.getIteratorFrom=function(s){return new Zh(this.data.getIteratorFrom(s))},a.prototype.add=function(s){return this.copy(this.data.remove(s).insert(s,!0))},a.prototype.delete=function(s){return this.has(s)?this.copy(this.data.remove(s)):this},a.prototype.isEmpty=function(){return this.data.isEmpty()},a.prototype.unionWith=function(s){var l=this;return l.size<s.size&&(l=s,s=this),s.forEach(function(f){l=l.add(f)}),l},a.prototype.isEqual=function(s){if(!(s instanceof a)||this.size!==s.size)return!1;for(var l=this.data.getIterator(),f=s.data.getIterator();l.hasNext();){var m=l.getNext().key,b=f.getNext().key;if(0!==this.comparator(m,b))return!1}return!0},a.prototype.toArray=function(){var s=[];return this.forEach(function(l){s.push(l)}),s},a.prototype.toString=function(){var s=[];return this.forEach(function(l){return s.push(l)}),"SortedSet("+s.toString()+")"},a.prototype.copy=function(s){var l=new a(this.comparator);return l.data=s,l},a}(),Zh=function(){function a(s){this.iter=s}return a.prototype.getNext=function(){return this.iter.getNext().key},a.prototype.hasNext=function(){return this.iter.hasNext()},a}(),_g=new Zi(jt.comparator);function ms(){return _g}var tl=new Zi(jt.comparator);function Gl(){return tl}var wu=new Zi(jt.comparator);function hc(){return wu}var Rn=new Ei(jt.comparator);function qn(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];for(var l=Rn,f=0,m=a;f<m.length;f++){var b=m[f];l=l.add(b)}return l}var Kd=new Ei(fn);function Us(){return Kd}var Kh=function(){function a(s,l,f,m,b){this.snapshotVersion=s,this.targetChanges=l,this.targetMismatches=f,this.documentUpdates=m,this.resolvedLimboDocuments=b}return a.createSynthesizedRemoteEventForCurrentChange=function(s,l){var f=new Map;return f.set(s,Yd.createSynthesizedTargetChangeForCurrentChange(s,l)),new a(bn.min(),f,Us(),ms(),qn())},a}(),Yd=function(){function a(s,l,f,m,b){this.resumeToken=s,this.current=l,this.addedDocuments=f,this.modifiedDocuments=m,this.removedDocuments=b}return a.createSynthesizedTargetChangeForCurrentChange=function(s,l){return new a(qr.EMPTY_BYTE_STRING,l,qn(),qn(),qn())},a}(),nl=function(a,s,l,f){this.v=a,this.removedTargetIds=s,this.key=l,this.P=f},Qd=function(a,s){this.targetId=a,this.V=s},Jd=function(a,s,l,f){void 0===l&&(l=qr.EMPTY_BYTE_STRING),void 0===f&&(f=null),this.state=a,this.targetIds=s,this.resumeToken=l,this.cause=f},fc=function(){function a(){this.S=0,this.D=bg(),this.C=qr.EMPTY_BYTE_STRING,this.N=!1,this.k=!0}return Object.defineProperty(a.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"F",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"$",{get:function(){return this.k},enumerable:!1,configurable:!0}),a.prototype.O=function(s){s.approximateByteSize()>0&&(this.k=!0,this.C=s)},a.prototype.M=function(){var s=qn(),l=qn(),f=qn();return this.D.forEach(function(m,b){switch(b){case 0:s=s.add(m);break;case 2:l=l.add(m);break;case 1:f=f.add(m);break;default:kt()}}),new Yd(this.C,this.N,s,l,f)},a.prototype.L=function(){this.k=!1,this.D=bg()},a.prototype.B=function(s,l){this.k=!0,this.D=this.D.insert(s,l)},a.prototype.q=function(s){this.k=!0,this.D=this.D.remove(s)},a.prototype.U=function(){this.S+=1},a.prototype.K=function(){this.S-=1},a.prototype.j=function(){this.k=!0,this.N=!0},a}(),wg=function(){function a(s){this.W=s,this.G=new Map,this.H=ms(),this.J=ql(),this.Y=new Ei(fn)}return a.prototype.X=function(s){for(var l=0,f=s.v;l<f.length;l++){var m=f[l];s.P&&s.P.isFoundDocument()?this.Z(m,s.P):this.tt(m,s.key,s.P)}for(var b=0,D=s.removedTargetIds;b<D.length;b++)this.tt(m=D[b],s.key,s.P)},a.prototype.et=function(s){var l=this;this.forEachTarget(s,function(f){var m=l.nt(f);switch(s.state){case 0:l.st(f)&&m.O(s.resumeToken);break;case 1:m.K(),m.F||m.L(),m.O(s.resumeToken);break;case 2:m.K(),m.F||l.removeTarget(f);break;case 3:l.st(f)&&(m.j(),m.O(s.resumeToken));break;case 4:l.st(f)&&(l.it(f),m.O(s.resumeToken));break;default:kt()}})},a.prototype.forEachTarget=function(s,l){var f=this;s.targetIds.length>0?s.targetIds.forEach(l):this.G.forEach(function(m,b){f.st(b)&&l(b)})},a.prototype.rt=function(s){var l=s.targetId,f=s.V.count,m=this.ot(l);if(m){var b=m.target;if(so(b))if(0===f){var D=new jt(b.path);this.tt(l,D,ri.newNoDocument(D,bn.min()))}else rn(1===f);else this.ct(l)!==f&&(this.it(l),this.Y=this.Y.add(l))}},a.prototype.ut=function(s){var l=this,f=new Map;this.G.forEach(function(D,M){var F=l.ot(M);if(F){if(D.current&&so(F.target)){var H=new jt(F.target.path);null!==l.H.get(H)||l.at(M,H)||l.tt(M,H,ri.newNoDocument(H,s))}D.$&&(f.set(M,D.M()),D.L())}});var m=qn();this.J.forEach(function(D,M){var F=!0;M.forEachWhile(function(H){var Y=l.ot(H);return!Y||2===Y.purpose||(F=!1,!1)}),F&&(m=m.add(D))});var b=new Kh(s,f,this.Y,this.H,m);return this.H=ms(),this.J=ql(),this.Y=new Ei(fn),b},a.prototype.Z=function(s,l){if(this.st(s)){var f=this.at(s,l.key)?2:0;this.nt(s).B(l.key,f),this.H=this.H.insert(l.key,l),this.J=this.J.insert(l.key,this.ht(l.key).add(s))}},a.prototype.tt=function(s,l,f){if(this.st(s)){var m=this.nt(s);this.at(s,l)?m.B(l,1):m.q(l),this.J=this.J.insert(l,this.ht(l).delete(s)),f&&(this.H=this.H.insert(l,f))}},a.prototype.removeTarget=function(s){this.G.delete(s)},a.prototype.ct=function(s){var l=this.nt(s).M();return this.W.getRemoteKeysForTarget(s).size+l.addedDocuments.size-l.removedDocuments.size},a.prototype.U=function(s){this.nt(s).U()},a.prototype.nt=function(s){var l=this.G.get(s);return l||(l=new fc,this.G.set(s,l)),l},a.prototype.ht=function(s){var l=this.J.get(s);return l||(l=new Ei(fn),this.J=this.J.insert(s,l)),l},a.prototype.st=function(s){var l=null!==this.ot(s);return l||tt("WatchChangeAggregator","Detected inactive target",s),l},a.prototype.ot=function(s){var l=this.G.get(s);return l&&l.F?null:this.W.lt(s)},a.prototype.it=function(s){var l=this;this.G.set(s,new fc),this.W.getRemoteKeysForTarget(s).forEach(function(f){l.tt(s,f,null)})},a.prototype.at=function(s,l){return this.W.getRemoteKeysForTarget(s).has(l)},a}();function ql(){return new Zi(jt.comparator)}function bg(){return new Zi(jt.comparator)}var Bs={asc:"ASCENDING",desc:"DESCENDING"},pc={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},sp=function(a,s){this.databaseId=a,this.I=s};function zl(a,s){return a.I?new Date(1e3*s.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+s.nanoseconds).slice(-9)+"Z":{seconds:""+s.seconds,nanos:s.nanoseconds}}function Qm(a,s){return a.I?s.toBase64():s.toUint8Array()}function o_(a,s){return zl(a,s.toTimestamp())}function Ki(a){return rn(!!a),bn.fromTimestamp((l=Ps(a),new di(l.seconds,l.nanos)));var l}function Yh(a,s){return(l=a,new Vn(["projects",l.projectId,"databases",l.database])).child("documents").child(s).canonicalString();var l}function bu(a){var s=Vn.fromString(a);return rn(Dg(s)),s}function Xd(a,s){return Yh(a.databaseId,s.path)}function qa(a,s){var l=bu(s);if(l.get(1)!==a.databaseId.projectId)throw new et(ke.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+l.get(1)+" vs "+a.databaseId.projectId);if(l.get(3)!==a.databaseId.database)throw new et(ke.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+l.get(3)+" vs "+a.databaseId.database);return new jt(Wl(l))}function eh(a,s){return Yh(a.databaseId,s)}function Ig(a){var s=bu(a);return 4===s.length?Vn.emptyPath():Wl(s)}function js(a){return new Vn(["projects",a.databaseId.projectId,"databases",a.databaseId.database]).canonicalString()}function Wl(a){return rn(a.length>4&&"documents"===a.get(4)),a.popFirst(5)}function wa(a,s,l){return{name:Xd(a,s),fields:l.value.mapValue.fields}}function $o(a,s,l){var f=qa(a,s.name),m=Ki(s.updateTime),b=new wo({mapValue:{fields:s.fields}}),D=ri.newFoundDocument(f,m,b);return l&&D.setHasCommittedMutations(),l?D.setHasCommittedMutations():D}function rl(a,s){var l,m;if(s instanceof jo)l={update:wa(a,s.key,s.value)};else if(s instanceof $l)l={delete:Xd(a,s.key)};else if(s instanceof ii)l={update:wa(a,s.key,s.data),updateMask:Cg(s.fieldMask)};else{if(!(s instanceof ip))return kt();l={verify:Xd(a,s.key)}}return s.fieldTransforms.length>0&&(l.updateTransforms=s.fieldTransforms.map(function(f){return function(m,b){var D=b.transform;if(D instanceof P)return{fieldPath:b.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(D instanceof k)return{fieldPath:b.field.canonicalString(),appendMissingElements:{values:D.elements}};if(D instanceof ie)return{fieldPath:b.field.canonicalString(),removeAllFromArray:{values:D.elements}};if(D instanceof Ae)return{fieldPath:b.field.canonicalString(),increment:D.A};throw kt()}(0,f)})),s.precondition.isNone||(l.currentDocument=void 0!==(m=s.precondition).updateTime?{updateTime:o_(a,m.updateTime)}:void 0!==m.exists?{exists:m.exists}:kt()),l}function Eg(a,s){var H,l=s.currentDocument?void 0!==(H=s.currentDocument).updateTime?Bt.updateTime(Ki(H.updateTime)):void 0!==H.exists?Bt.exists(H.exists):Bt.none():Bt.none(),f=s.updateTransforms?s.updateTransforms.map(function(H){return function(Y,se){var de=null;"setToServerValue"in se?(rn("REQUEST_TIME"===se.setToServerValue),de=new P):"appendMissingElements"in se?de=new k(se.appendMissingElements.values||[]):"removeAllFromArray"in se?de=new ie(se.removeAllFromArray.values||[]):"increment"in se?de=new Ae(Y,se.increment):kt();var $e=Wi.fromServerFormat(se.fieldPath);return new xt($e,de)}(a,H)}):[];if(s.update){var m=qa(a,s.update.name),b=new wo({mapValue:{fields:s.update.fields}});if(s.updateMask){var D=function(H){return new mu((H.fieldPaths||[]).map(function(se){return Wi.fromServerFormat(se)}))}(s.updateMask);return new ii(m,b,D,l,f)}return new jo(m,b,l,f)}if(s.delete){var M=qa(a,s.delete);return new $l(M,l)}if(s.verify){var F=qa(a,s.verify);return new ip(F,l)}return kt()}function th(a,s){return{documents:[eh(a,s.path)]}}function Jm(a,s){var l={structuredQuery:{}},f=s.path;null!==s.collectionGroup?(l.parent=eh(a,f),l.structuredQuery.from=[{collectionId:s.collectionGroup,allDescendants:!0}]):(l.parent=eh(a,f.popLast()),l.structuredQuery.from=[{collectionId:f.lastSegment()}]);var m=function(M){if(0!==M.length){var F=M.map(function(H){return function(Y){if("=="===Y.op){if(rp(Y.value))return{unaryFilter:{field:Zl(Y.field),op:"IS_NAN"}};if(mg(Y.value))return{unaryFilter:{field:Zl(Y.field),op:"IS_NULL"}}}else if("!="===Y.op){if(rp(Y.value))return{unaryFilter:{field:Zl(Y.field),op:"IS_NOT_NAN"}};if(mg(Y.value))return{unaryFilter:{field:Zl(Y.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zl(Y.field),op:ap(Y.op),value:Y.value}}}(H)});return 1===F.length?F[0]:{compositeFilter:{op:"AND",filters:F}}}}(s.filters);m&&(l.structuredQuery.where=m);var b=function(M){if(0!==M.length)return M.map(function(F){return{field:Zl((H=F).field),direction:rh(H.dir)};var H})}(s.orderBy);b&&(l.structuredQuery.orderBy=b);var F,D=(F=s.limit,a.I||Fs(F)?F:{value:F});return null!==D&&(l.structuredQuery.limit=D),s.startAt&&(l.structuredQuery.startAt=gc(s.startAt)),s.endAt&&(l.structuredQuery.endAt=gc(s.endAt)),l}function Xm(a){var s=Ig(a.parent),l=a.structuredQuery,f=l.from?l.from.length:0,m=null;if(f>0){rn(1===f);var b=l.from[0];b.allDescendants?m=b.collectionId:s=s.child(b.collectionId)}var D=[];l.where&&(D=nh(l.where));var M=[];l.orderBy&&(M=l.orderBy.map(function(se){return new Lo(Hs((de=se).field),function(Se){switch(Se){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(de.direction));var de}));var se,de,F=null;l.limit&&(F=Fs(de="object"==typeof(se=l.limit)?se.value:se)?null:de);var H=null;l.startAt&&(H=Iu(l.startAt));var Y=null;return l.endAt&&(Y=Iu(l.endAt)),lc(s,m,M,D,F,"F",H,Y)}function nh(a){return a?void 0!==a.unaryFilter?[cp(a)]:void 0!==a.fieldFilter?[up(a)]:void 0!==a.compositeFilter?a.compositeFilter.filters.map(function(s){return nh(s)}).reduce(function(s,l){return s.concat(l)}):kt():[]}function gc(a){return{before:a.before,values:a.position}}function Iu(a){return new vu(a.values||[],!!a.before)}function rh(a){return Bs[a]}function ap(a){return pc[a]}function Zl(a){return{fieldPath:a.canonicalString()}}function Hs(a){return Wi.fromServerFormat(a.fieldPath)}function up(a){return Et.create(Hs(a.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return kt()}}(a.fieldFilter.op),a.fieldFilter.value)}function cp(a){switch(a.unaryFilter.op){case"IS_NAN":var s=Hs(a.unaryFilter.field);return Et.create(s,"==",{doubleValue:NaN});case"IS_NULL":var l=Hs(a.unaryFilter.field);return Et.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var f=Hs(a.unaryFilter.field);return Et.create(f,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var m=Hs(a.unaryFilter.field);return Et.create(m,"!=",{nullValue:"NULL_VALUE"});default:return kt()}}function Cg(a){var s=[];return a.fields.forEach(function(l){return s.push(l.canonicalString())}),{fieldPaths:s}}function Dg(a){return a.length>=4&&"projects"===a.get(0)&&"databases"===a.get(2)}function Yi(a){for(var s="",l=0;l<a.length;l++)s.length>0&&(s=Tg(s)),s=mc(a.get(l),s);return Tg(s)}function mc(a,s){for(var l=s,f=a.length,m=0;m<f;m++){var b=a.charAt(m);switch(b){case"\0":l+="\x01\x10";break;case"\x01":l+="\x01\x11";break;default:l+=b}}return l}function Tg(a){return a+"\x01\x01"}function ys(a){var s=a.length;if(rn(s>=2),2===s)return rn("\x01"===a.charAt(0)&&"\x01"===a.charAt(1)),Vn.emptyPath();for(var l=s-2,f=[],m="",b=0;b<s;){var D=a.indexOf("\x01",b);switch((D<0||D>l)&&kt(),a.charAt(D+1)){case"\x01":var M=a.substring(b,D),F=void 0;0===m.length?F=M:(F=m+=M,m=""),f.push(F);break;case"\x10":m+=a.substring(b,D),m+="\0";break;case"\x11":m+=a.substring(b,D+1);break;default:kt()}b=D+2}return new Vn(f)}var Sg=function(a,s){this.seconds=a,this.nanoseconds=s},$n=function(a,s,l){this.ownerId=a,this.allowTabSynchronization=s,this.leaseTimestampMs=l};$n.store="owner",$n.key="owner";var Eu=function(a,s,l){this.userId=a,this.lastAcknowledgedBatchId=s,this.lastStreamToken=l};Eu.store="mutationQueues",Eu.keyPath="userId";var Gn=function(a,s,l,f,m){this.userId=a,this.batchId=s,this.localWriteTimeMs=l,this.baseMutations=f,this.mutations=m};Gn.store="mutations",Gn.keyPath="batchId",Gn.userMutationsIndex="userMutationsIndex",Gn.userMutationsKeyPath=["userId","batchId"];var pi=function(){function a(){}return a.prefixForUser=function(s){return[s]},a.prefixForPath=function(s,l){return[s,Yi(l)]},a.key=function(s,l,f){return[s,Yi(l),f]},a}();pi.store="documentMutations",pi.PLACEHOLDER=new pi;var $s=function(a,s){this.path=a,this.readTime=s},Qh=function(a,s){this.path=a,this.version=s},xr=function(a,s,l,f,m,b){this.unknownDocument=a,this.noDocument=s,this.document=l,this.hasCommittedMutations=f,this.readTime=m,this.parentPath=b};xr.store="remoteDocuments",xr.readTimeIndex="readTimeIndex",xr.readTimeIndexPath="readTime",xr.collectionReadTimeIndex="collectionReadTimeIndex",xr.collectionReadTimeIndexPath=["parentPath","readTime"];var za=function(a){this.byteSize=a};za.store="remoteDocumentGlobal",za.key="remoteDocumentGlobalKey";var Go=function(a,s,l,f,m,b,D){this.targetId=a,this.canonicalId=s,this.readTime=l,this.resumeToken=f,this.lastListenSequenceNumber=m,this.lastLimboFreeSnapshotVersion=b,this.query=D};Go.store="targets",Go.keyPath="targetId",Go.queryTargetsIndexName="queryTargetsIndex",Go.queryTargetsKeyPath=["canonicalId","targetId"];var Qi=function(a,s,l){this.targetId=a,this.path=s,this.sequenceNumber=l};Qi.store="targetDocuments",Qi.keyPath=["targetId","path"],Qi.documentTargetsIndex="documentTargetsIndex",Qi.documentTargetsKeyPath=["path","targetId"];var Gs=function(a,s,l,f){this.highestTargetId=a,this.highestListenSequenceNumber=s,this.lastRemoteSnapshotVersion=l,this.targetCount=f};Gs.key="targetGlobalKey",Gs.store="targetGlobal";var il=function(a,s){this.collectionId=a,this.parent=s};il.store="collectionParents",il.keyPath=["collectionId","parent"];var bo=function(a,s,l,f){this.clientId=a,this.updateTimeMs=s,this.networkEnabled=l,this.inForeground=f};bo.store="clientMetadata",bo.keyPath="clientId";var Wa=function(a,s,l){this.bundleId=a,this.createTime=s,this.version=l};Wa.store="bundles",Wa.keyPath="bundleId";var yc=function(a,s,l){this.name=a,this.readTime=s,this.bundledQuery=l};yc.store="namedQueries",yc.keyPath="name";var Ag=(0,L.ev)((0,L.ev)([],(0,L.ev)((0,L.ev)([],(0,L.ev)((0,L.ev)([],(0,L.ev)((0,L.ev)([],[Eu.store,Gn.store,pi.store,xr.store,Go.store,$n.store,Gs.store,Qi.store]),[bo.store])),[za.store])),[il.store])),[Wa.store,yc.store]),ih="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",xg=function(){function a(){this.onCommittedListeners=[]}return a.prototype.addOnCommittedListener=function(s){this.onCommittedListeners.push(s)},a.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(s){return s()})},a}(),Jn=function(){var a=this;this.promise=new Promise(function(s,l){a.resolve=s,a.reject=l})},at=function(){function a(s){var l=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,s(function(f){l.isDone=!0,l.result=f,l.nextCallback&&l.nextCallback(f)},function(f){l.isDone=!0,l.error=f,l.catchCallback&&l.catchCallback(f)})}return a.prototype.catch=function(s){return this.next(void 0,s)},a.prototype.next=function(s,l){var f=this;return this.callbackAttached&&kt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(l,this.error):this.wrapSuccess(s,this.result):new a(function(m,b){f.nextCallback=function(D){f.wrapSuccess(s,D).next(m,b)},f.catchCallback=function(D){f.wrapFailure(l,D).next(m,b)}})},a.prototype.toPromise=function(){var s=this;return new Promise(function(l,f){s.next(l,f)})},a.prototype.wrapUserFunction=function(s){try{var l=s();return l instanceof a?l:a.resolve(l)}catch(f){return a.reject(f)}},a.prototype.wrapSuccess=function(s,l){return s?this.wrapUserFunction(function(){return s(l)}):a.resolve(l)},a.prototype.wrapFailure=function(s,l){return s?this.wrapUserFunction(function(){return s(l)}):a.reject(l)},a.resolve=function(s){return new a(function(l,f){l(s)})},a.reject=function(s){return new a(function(l,f){f(s)})},a.waitFor=function(s){return new a(function(l,f){var m=0,b=0,D=!1;s.forEach(function(M){++m,M.next(function(){++b,D&&b===m&&l()},function(F){return f(F)})}),D=!0,b===m&&l()})},a.or=function(s){for(var l=a.resolve(!1),f=function(D){l=l.next(function(M){return M?a.resolve(M):D()})},m=0,b=s;m<b.length;m++)f(b[m]);return l},a.forEach=function(s,l){var f=this,m=[];return s.forEach(function(b,D){m.push(l.call(f,b,D))}),this.waitFor(m)},a}(),Kl=function(){function a(s,l){var f=this;this.action=s,this.transaction=l,this.aborted=!1,this.ft=new Jn,this.transaction.oncomplete=function(){f.ft.resolve()},this.transaction.onabort=function(){l.error?f.ft.reject(new Ji(s,l.error)):f.ft.resolve()},this.transaction.onerror=function(m){var b=qs(m.target.error);f.ft.reject(new Ji(s,b))}}return a.open=function(s,l,f,m){try{return new a(l,s.transaction(m,f))}catch(b){throw new Ji(l,b)}},Object.defineProperty(a.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),a.prototype.abort=function(s){s&&this.ft.reject(s),this.aborted||(tt("SimpleDb","Aborting transaction:",s?s.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},a.prototype.store=function(s){var l=this.transaction.objectStore(s);return new Jh(l)},a}(),ol=function(){function a(s,l,f){this.name=s,this.version=l,this.wt=f,12.2===a._t((0,J.z$)())&&fr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return a.delete=function(s){return tt("SimpleDb","Removing database:",s),qo(window.indexedDB.deleteDatabase(s)).toPromise()},a.yt=function(){if(typeof indexedDB>"u")return!1;if(a.gt())return!0;var s=(0,J.z$)(),l=a._t(s),f=0<l&&l<10,m=a.Et(s),b=0<m&&m<4.5;return!(s.indexOf("MSIE ")>0||s.indexOf("Trident/")>0||s.indexOf("Edge/")>0||f||b)},a.gt=function(){var s;return typeof process<"u"&&"YES"===(null===(s=process.env)||void 0===s?void 0:s.Tt)},a.It=function(s,l){return s.store(l)},a._t=function(s){var l=s.match(/i(?:phone|pad|pod) os ([\d_]+)/i),f=l?l[1].split("_").slice(0,2).join("."):"-1";return Number(f)},a.Et=function(s){var l=s.match(/Android ([\d.]+)/i),f=l?l[1].split(".").slice(0,2).join("."):"-1";return Number(f)},a.prototype.At=function(s){return(0,L.mG)(this,void 0,void 0,function(){var l,f=this;return(0,L.Jh)(this,function(m){switch(m.label){case 0:return this.db?[3,2]:(tt("SimpleDb","Opening database:",this.name),l=this,[4,new Promise(function(b,D){var M=indexedDB.open(f.name,f.version);M.onsuccess=function(F){b(F.target.result)},M.onblocked=function(){D(new Ji(s,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},M.onerror=function(F){var H=F.target.error;D("VersionError"===H.name?new et(ke.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new Ji(s,H))},M.onupgradeneeded=function(F){tt("SimpleDb",'Database "'+f.name+'" requires upgrade from version:',F.oldVersion),f.wt.Rt(F.target.result,M.transaction,F.oldVersion,f.version).next(function(){tt("SimpleDb","Database upgrade to version "+f.version+" complete")})}})]);case 1:l.db=m.sent(),m.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(b){return f.bt(b)}),this.db)]}})})},a.prototype.vt=function(s){this.bt=s,this.db&&(this.db.onversionchange=function(l){return s(l)})},a.prototype.runTransaction=function(s,l,f,m){return(0,L.mG)(this,void 0,void 0,function(){var b,D,M,F,H;return(0,L.Jh)(this,function(Y){switch(Y.label){case 0:b="readonly"===l,D=0,M=function(){var se,de,Se,De,$e;return(0,L.Jh)(this,function(gt){switch(gt.label){case 0:++D,gt.label=1;case 1:return gt.trys.push([1,4,,5]),[4,F.At(s)];case 2:return F.db=gt.sent(),se=Kl.open(F.db,s,b?"readonly":"readwrite",f),de=m(se).catch(function(bt){return se.abort(bt),at.reject(bt)}).toPromise(),Se={},de.catch(function(){}),[4,se.dt];case 3:return[2,(Se.value=(gt.sent(),de),Se)];case 4:return tt("SimpleDb","Transaction failed with error:",(De=gt.sent()).message,"Retrying:",$e="FirebaseError"!==De.name&&D<3),F.close(),$e?[3,5]:[2,{value:Promise.reject(De)}];case 5:return[2]}})},F=this,Y.label=1;case 1:return[5,M()];case 2:if("object"==typeof(H=Y.sent()))return[2,H.value];Y.label=3;case 3:return[3,1];case 4:return[2]}})})},a.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},a}(),oh=function(){function a(s){this.Pt=s,this.Vt=!1,this.St=null}return Object.defineProperty(a.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"cursor",{set:function(s){this.Pt=s},enumerable:!1,configurable:!0}),a.prototype.done=function(){this.Vt=!0},a.prototype.Ct=function(s){this.St=s},a.prototype.delete=function(){return qo(this.Pt.delete())},a}(),Ji=function(a){function s(l,f){var m=this;return(m=a.call(this,ke.UNAVAILABLE,"IndexedDB transaction '"+l+"' failed: "+f)||this).name="IndexedDbTransactionError",m}return(0,L.ZT)(s,a),s}(et);function vs(a){return"IndexedDbTransactionError"===a.name}var Jh=function(){function a(s){this.store=s}return a.prototype.put=function(s,l){var f;return void 0!==l?(tt("SimpleDb","PUT",this.store.name,s,l),f=this.store.put(l,s)):(tt("SimpleDb","PUT",this.store.name,"<auto-key>",s),f=this.store.put(s)),qo(f)},a.prototype.add=function(s){return tt("SimpleDb","ADD",this.store.name,s,s),qo(this.store.add(s))},a.prototype.get=function(s){var l=this;return qo(this.store.get(s)).next(function(f){return void 0===f&&(f=null),tt("SimpleDb","GET",l.store.name,s,f),f})},a.prototype.delete=function(s){return tt("SimpleDb","DELETE",this.store.name,s),qo(this.store.delete(s))},a.prototype.count=function(){return tt("SimpleDb","COUNT",this.store.name),qo(this.store.count())},a.prototype.Nt=function(s,l){var f=this.cursor(this.options(s,l)),m=[];return this.xt(f,function(b,D){m.push(D)}).next(function(){return m})},a.prototype.kt=function(s,l){tt("SimpleDb","DELETE ALL",this.store.name);var f=this.options(s,l);f.Ft=!1;var m=this.cursor(f);return this.xt(m,function(b,D,M){return M.delete()})},a.prototype.$t=function(s,l){var f;l?f=s:(f={},l=s);var m=this.cursor(f);return this.xt(m,l)},a.prototype.Ot=function(s){var l=this.cursor({});return new at(function(f,m){l.onerror=function(b){var D=qs(b.target.error);m(D)},l.onsuccess=function(b){var D=b.target.result;D?s(D.primaryKey,D.value).next(function(M){M?D.continue():f()}):f()}})},a.prototype.xt=function(s,l){var f=[];return new at(function(m,b){s.onerror=function(D){b(D.target.error)},s.onsuccess=function(D){var M=D.target.result;if(M){var F=new oh(M),H=l(M.primaryKey,M.value,F);if(H instanceof at){var Y=H.catch(function(se){return F.done(),at.reject(se)});f.push(Y)}F.isDone?m():null===F.Dt?M.continue():M.continue(F.Dt)}else m()}}).next(function(){return at.waitFor(f)})},a.prototype.options=function(s,l){var f;return void 0!==s&&("string"==typeof s?f=s:l=s),{index:f,range:l}},a.prototype.cursor=function(s){var l="next";if(s.reverse&&(l="prev"),s.index){var f=this.store.index(s.index);return s.Ft?f.openKeyCursor(s.range,l):f.openCursor(s.range,l)}return this.store.openCursor(s.range,l)},a}();function qo(a){return new at(function(s,l){a.onsuccess=function(f){s(f.target.result)},a.onerror=function(f){var m=qs(f.target.error);l(m)}})}var Cu=!1;function qs(a){var s=ol._t((0,J.z$)());if(s>=12.2&&s<13){var l="An internal error was encountered in the Indexed Database server";if(a.message.indexOf(l)>=0){var f=new et("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+l+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Cu||(Cu=!0,setTimeout(function(){throw f},0)),f}}return a}var Yl=function(a){function s(l,f){var m=this;return(m=a.call(this)||this).Mt=l,m.currentSequenceNumber=f,m}return(0,L.ZT)(s,a),s}(xg);function zo(a,s){var l=vt(a);return ol.It(l.Mt,s)}var vc=function(){function a(s,l,f,m){this.batchId=s,this.localWriteTime=l,this.baseMutations=f,this.mutations=m}return a.prototype.applyToRemoteDocument=function(s,l){for(var f=l.mutationResults,m=0;m<this.mutations.length;m++){var b=this.mutations[m];b.key.isEqual(s.key)&&Li(b,s,f[m])}},a.prototype.applyToLocalView=function(s){for(var l=0,f=this.baseMutations;l<f.length;l++)(D=f[l]).key.isEqual(s.key)&&ja(D,s,this.localWriteTime);for(var m=0,b=this.mutations;m<b.length;m++){var D;(D=b[m]).key.isEqual(s.key)&&ja(D,s,this.localWriteTime)}},a.prototype.applyToLocalDocumentSet=function(s){var l=this;this.mutations.forEach(function(f){var m=s.get(f.key),b=m;l.applyToLocalView(b),m.isValidDocument()||b.convertToNoDocument(bn.min())})},a.prototype.keys=function(){return this.mutations.reduce(function(s,l){return s.add(l.key)},qn())},a.prototype.isEqual=function(s){return this.batchId===s.batchId&&la(this.mutations,s.mutations,function(l,f){return pn(l,f)})&&la(this.baseMutations,s.baseMutations,function(l,f){return pn(l,f)})},a}(),Ql=function(){function a(s,l,f,m){this.batch=s,this.commitVersion=l,this.mutationResults=f,this.docVersions=m}return a.from=function(s,l,f){rn(s.mutations.length===f.length);for(var m=hc(),b=s.mutations,D=0;D<b.length;D++)m=m.insert(b[D].key,f[D].version);return new a(s,l,f,m)},a}(),Er=function(){function a(s,l,f,m,b,D,M){void 0===b&&(b=bn.min()),void 0===D&&(D=bn.min()),void 0===M&&(M=qr.EMPTY_BYTE_STRING),this.target=s,this.targetId=l,this.purpose=f,this.sequenceNumber=m,this.snapshotVersion=b,this.lastLimboFreeSnapshotVersion=D,this.resumeToken=M}return a.prototype.withSequenceNumber=function(s){return new a(this.target,this.targetId,this.purpose,s,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},a.prototype.withResumeToken=function(s,l){return new a(this.target,this.targetId,this.purpose,this.sequenceNumber,l,this.lastLimboFreeSnapshotVersion,s)},a.prototype.withLastLimboFreeSnapshotVersion=function(s){return new a(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,s,this.resumeToken)},a}(),Jl=function(a){this.Lt=a};function Du(a,s){if(s.document)return $o(a.Lt,s.document,!!s.hasCommittedMutations);if(s.noDocument){var l=jt.fromSegments(s.noDocument.path),f=sl(s.noDocument.readTime),m=ri.newNoDocument(l,f);return s.hasCommittedMutations?m.setHasCommittedMutations():m}if(s.unknownDocument){var b=jt.fromSegments(s.unknownDocument.path);return f=sl(s.unknownDocument.version),ri.newUnknownDocument(b,f)}return kt()}function Xh(a,s,l){var se,de,f=ba(l),m=s.key.path.popLast().toArray();if(s.isFoundDocument()){var b={name:Xd(se=a.Lt,(de=s).key),fields:de.data.value.mapValue.fields,updateTime:zl(se,de.version.toTimestamp())},D=s.hasCommittedMutations;return new xr(null,null,b,D,f,m)}if(s.isNoDocument()){var M=s.key.path.toArray(),F=zs(s.version);return D=s.hasCommittedMutations,new xr(null,new $s(M,F),null,D,f,m)}if(s.isUnknownDocument()){var H=s.key.path.toArray(),Y=zs(s.version);return new xr(new Qh(H,Y),null,null,!0,f,m)}return kt()}function ba(a){var s=a.toTimestamp();return[s.seconds,s.nanoseconds]}function Ia(a){var s=new di(a[0],a[1]);return bn.fromTimestamp(s)}function zs(a){var s=a.toTimestamp();return new Sg(s.seconds,s.nanoseconds)}function sl(a){var s=new di(a.seconds,a.nanoseconds);return bn.fromTimestamp(s)}function _c(a,s){for(var l=(s.baseMutations||[]).map(function(F){return Eg(a.Lt,F)}),f=0;f<s.mutations.length-1;++f)f+1<s.mutations.length&&void 0!==s.mutations[f+1].transform&&(s.mutations[f].updateTransforms=s.mutations[f+1].transform.fieldTransforms,s.mutations.splice(f+1,1),++f);var D=s.mutations.map(function(F){return Eg(a.Lt,F)}),M=di.fromMillis(s.localWriteTimeMs);return new vc(s.batchId,M,l,D)}function wc(a){var s,l,f=sl(a.readTime),m=void 0!==a.lastLimboFreeSnapshotVersion?sl(a.lastLimboFreeSnapshotVersion):bn.min();return void 0!==a.query.documents?(rn(1===(l=a.query).documents.length),s=Fi(hs(Ig(l.documents[0])))):s=Fi(Xm(a.query)),new Er(s,a.targetId,0,a.lastListenSequenceNumber,f,m,qr.fromBase64String(a.resumeToken))}function lp(a,s){var l,f=zs(s.snapshotVersion),m=zs(s.lastLimboFreeSnapshotVersion);l=so(s.target)?th(a.Lt,s.target):Jm(a.Lt,s.target);var b=s.resumeToken.toBase64();return new Go(s.targetId,Fr(s.target),f,b,s.sequenceNumber,m,l)}function Xl(a){var s=Xm({parent:a.parent,structuredQuery:a.structuredQuery});return"LAST"===a.limitType?ya(s,s.limit,"L"):s}var Mg=function(){function a(){}return a.prototype.getBundleMetadata=function(s,l){return dp(s).get(l).next(function(f){if(f)return{id:(m=f).bundleId,createTime:sl(m.createTime),version:m.version};var m})},a.prototype.saveBundleMetadata=function(s,l){return dp(s).put({bundleId:(f=l).id,createTime:zs(Ki(f.createTime)),version:f.version});var f},a.prototype.getNamedQuery=function(s,l){return T(s).get(l).next(function(f){if(f)return{name:(m=f).name,query:Xl(m.bundledQuery),readTime:sl(m.readTime)};var m})},a.prototype.saveNamedQuery=function(s,l){return T(s).put({name:(f=l).name,readTime:zs(Ki(f.readTime)),bundledQuery:f.bundledQuery});var f},a}();function dp(a){return zo(a,Wa.store)}function T(a){return zo(a,yc.store)}var w=function(){function a(){this.Bt=new E}return a.prototype.addToCollectionParentIndex=function(s,l){return this.Bt.add(l),at.resolve()},a.prototype.getCollectionParents=function(s,l){return at.resolve(this.Bt.getEntries(l))},a}(),E=function(){function a(){this.index={}}return a.prototype.add=function(s){var l=s.lastSegment(),f=s.popLast(),m=this.index[l]||new Ei(Vn.comparator),b=!m.has(f);return this.index[l]=m.add(f),b},a.prototype.has=function(s){var l=s.lastSegment(),f=s.popLast(),m=this.index[l];return m&&m.has(f)},a.prototype.getEntries=function(s){return(this.index[s]||new Ei(Vn.comparator)).toArray()},a}(),x=function(){function a(){this.qt=new E}return a.prototype.addToCollectionParentIndex=function(s,l){var f=this;if(!this.qt.has(l)){var m=l.lastSegment(),b=l.popLast();s.addOnCommittedListener(function(){f.qt.add(l)});var D={collectionId:m,parent:Yi(b)};return U(s).put(D)}return at.resolve()},a.prototype.getCollectionParents=function(s,l){var f=[],m=IDBKeyRange.bound([l,""],[Pa(l),""],!1,!0);return U(s).Nt(m).next(function(b){for(var D=0,M=b;D<M.length;D++){var F=M[D];if(F.collectionId!==l)break;f.push(ys(F.parent))}return f})},a}();function U(a){return zo(a,il.store)}var Q={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},he=function(){function a(s,l,f){this.cacheSizeCollectionThreshold=s,this.percentileToCollect=l,this.maximumSequenceNumbersToCollect=f}return a.withCacheSize=function(s){return new a(s,a.DEFAULT_COLLECTION_PERCENTILE,a.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},a}();function Ve(a,s,l){var f=a.store(Gn.store),m=a.store(pi.store),b=[],D=IDBKeyRange.only(l.batchId),M=0,F=f.$t({range:D},function(De,$e,gt){return M++,gt.delete()});b.push(F.next(function(){rn(1===M)}));for(var H=[],Y=0,se=l.mutations;Y<se.length;Y++){var de=se[Y],Se=pi.key(s,de.key.path,l.batchId);b.push(m.delete(Se)),H.push(de.key)}return at.waitFor(b).next(function(){return H})}function pt(a){if(!a)return 0;var s;if(a.document)s=a.document;else if(a.unknownDocument)s=a.unknownDocument;else{if(!a.noDocument)throw kt();s=a.noDocument}return JSON.stringify(s).length}he.DEFAULT_COLLECTION_PERCENTILE=10,he.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,he.DEFAULT=new he(41943040,he.DEFAULT_COLLECTION_PERCENTILE,he.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),he.DISABLED=new he(-1,0,0);var Rt=function(){function a(s,l,f,m){this.userId=s,this.R=l,this.Ut=f,this.referenceDelegate=m,this.Kt={}}return a.Qt=function(s,l,f,m){return rn(""!==s.uid),new a(s.isAuthenticated()?s.uid:"",l,f,m)},a.prototype.checkEmpty=function(s){var l=!0,f=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ft(s).$t({index:Gn.userMutationsIndex,range:f},function(m,b,D){l=!1,D.done()}).next(function(){return l})},a.prototype.addMutationBatch=function(s,l,f,m){var b=this,D=Mr(s),M=Ft(s);return M.add({}).next(function(F){rn("number"==typeof F);for(var H=new vc(F,l,f,m),Y=function(bt,Qt,sn){var On=sn.baseMutations.map(function(ur){return rl(bt.Lt,ur)}),Wn=sn.mutations.map(function(ur){return rl(bt.Lt,ur)});return new Gn(Qt,sn.batchId,sn.localWriteTime.toMillis(),On,Wn)}(b.R,b.userId,H),se=[],de=new Ei(function(bt,Qt){return fn(bt.canonicalString(),Qt.canonicalString())}),Se=0,De=m;Se<De.length;Se++){var $e=De[Se],gt=pi.key(b.userId,$e.key.path,F);de=de.add($e.key.path.popLast()),se.push(M.put(Y)),se.push(D.put(gt,pi.PLACEHOLDER))}return de.forEach(function(bt){se.push(b.Ut.addToCollectionParentIndex(s,bt))}),s.addOnCommittedListener(function(){b.Kt[F]=H.keys()}),at.waitFor(se).next(function(){return H})})},a.prototype.lookupMutationBatch=function(s,l){var f=this;return Ft(s).get(l).next(function(m){return m?(rn(m.userId===f.userId),_c(f.R,m)):null})},a.prototype.jt=function(s,l){var f=this;return this.Kt[l]?at.resolve(this.Kt[l]):this.lookupMutationBatch(s,l).next(function(m){if(m){var b=m.keys();return f.Kt[l]=b,b}return null})},a.prototype.getNextMutationBatchAfterBatchId=function(s,l){var f=this,m=l+1,b=IDBKeyRange.lowerBound([this.userId,m]),D=null;return Ft(s).$t({index:Gn.userMutationsIndex,range:b},function(M,F,H){F.userId===f.userId&&(rn(F.batchId>=m),D=_c(f.R,F)),H.done()}).next(function(){return D})},a.prototype.getHighestUnacknowledgedBatchId=function(s){var l=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),f=-1;return Ft(s).$t({index:Gn.userMutationsIndex,range:l,reverse:!0},function(m,b,D){f=b.batchId,D.done()}).next(function(){return f})},a.prototype.getAllMutationBatches=function(s){var l=this,f=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ft(s).Nt(Gn.userMutationsIndex,f).next(function(m){return m.map(function(b){return _c(l.R,b)})})},a.prototype.getAllMutationBatchesAffectingDocumentKey=function(s,l){var f=this,m=pi.prefixForPath(this.userId,l.path),b=IDBKeyRange.lowerBound(m),D=[];return Mr(s).$t({range:b},function(M,F,H){var Y=M[0],de=M[2],Se=ys(M[1]);if(Y===f.userId&&l.path.isEqual(Se))return Ft(s).get(de).next(function(De){if(!De)throw kt();rn(De.userId===f.userId),D.push(_c(f.R,De))});H.done()}).next(function(){return D})},a.prototype.getAllMutationBatchesAffectingDocumentKeys=function(s,l){var f=this,m=new Ei(fn),b=[];return l.forEach(function(D){var M=pi.prefixForPath(f.userId,D.path),F=IDBKeyRange.lowerBound(M),H=Mr(s).$t({range:F},function(Y,se,de){var Se=Y[0],$e=Y[2],gt=ys(Y[1]);Se===f.userId&&D.path.isEqual(gt)?m=m.add($e):de.done()});b.push(H)}),at.waitFor(b).next(function(){return f.Wt(s,m)})},a.prototype.getAllMutationBatchesAffectingQuery=function(s,l){var f=this,m=l.path,b=m.length+1,D=pi.prefixForPath(this.userId,m),M=IDBKeyRange.lowerBound(D),F=new Ei(fn);return Mr(s).$t({range:M},function(H,Y,se){var de=H[0],De=H[2],$e=ys(H[1]);de===f.userId&&m.isPrefixOf($e)?$e.length===b&&(F=F.add(De)):se.done()}).next(function(){return f.Wt(s,F)})},a.prototype.Wt=function(s,l){var f=this,m=[],b=[];return l.forEach(function(D){b.push(Ft(s).get(D).next(function(M){if(null===M)throw kt();rn(M.userId===f.userId),m.push(_c(f.R,M))}))}),at.waitFor(b).next(function(){return m})},a.prototype.removeMutationBatch=function(s,l){var f=this;return Ve(s.Mt,this.userId,l).next(function(m){return s.addOnCommittedListener(function(){f.Gt(l.batchId)}),at.forEach(m,function(b){return f.referenceDelegate.markPotentiallyOrphaned(s,b)})})},a.prototype.Gt=function(s){delete this.Kt[s]},a.prototype.performConsistencyCheck=function(s){var l=this;return this.checkEmpty(s).next(function(f){if(!f)return at.resolve();var m=IDBKeyRange.lowerBound(pi.prefixForUser(l.userId)),b=[];return Mr(s).$t({range:m},function(D,M,F){if(D[0]===l.userId){var H=ys(D[1]);b.push(H)}else F.done()}).next(function(){rn(0===b.length)})})},a.prototype.containsKey=function(s,l){return en(s,this.userId,l)},a.prototype.zt=function(s){var l=this;return Ws(s).get(this.userId).next(function(f){return f||new Eu(l.userId,-1,"")})},a}();function en(a,s,l){var f=pi.prefixForPath(s,l.path),m=f[1],b=IDBKeyRange.lowerBound(f),D=!1;return Mr(a).$t({range:b,Ft:!0},function(M,F,H){M[0]===s&&M[1]===m&&(D=!0),H.done()}).next(function(){return D})}function Ft(a){return zo(a,Gn.store)}function Mr(a){return zo(a,pi.store)}function Ws(a){return zo(a,Eu.store)}var bc=function(){function a(s){this.Ht=s}return a.prototype.next=function(){return this.Ht+=2,this.Ht},a.Jt=function(){return new a(0)},a.Yt=function(){return new a(-1)},a}(),sh=function(){function a(s,l){this.referenceDelegate=s,this.R=l}return a.prototype.allocateTargetId=function(s){var l=this;return this.Xt(s).next(function(f){var m=new bc(f.highestTargetId);return f.highestTargetId=m.next(),l.Zt(s,f).next(function(){return f.highestTargetId})})},a.prototype.getLastRemoteSnapshotVersion=function(s){return this.Xt(s).next(function(l){return bn.fromTimestamp(new di(l.lastRemoteSnapshotVersion.seconds,l.lastRemoteSnapshotVersion.nanoseconds))})},a.prototype.getHighestSequenceNumber=function(s){return this.Xt(s).next(function(l){return l.highestListenSequenceNumber})},a.prototype.setTargetsMetadata=function(s,l,f){var m=this;return this.Xt(s).next(function(b){return b.highestListenSequenceNumber=l,f&&(b.lastRemoteSnapshotVersion=f.toTimestamp()),l>b.highestListenSequenceNumber&&(b.highestListenSequenceNumber=l),m.Zt(s,b)})},a.prototype.addTargetData=function(s,l){var f=this;return this.te(s,l).next(function(){return f.Xt(s).next(function(m){return m.targetCount+=1,f.ee(l,m),f.Zt(s,m)})})},a.prototype.updateTargetData=function(s,l){return this.te(s,l)},a.prototype.removeTargetData=function(s,l){var f=this;return this.removeMatchingKeysForTargetId(s,l.targetId).next(function(){return oi(s).delete(l.targetId)}).next(function(){return f.Xt(s)}).next(function(m){return rn(m.targetCount>0),m.targetCount-=1,f.Zt(s,m)})},a.prototype.removeTargets=function(s,l,f){var m=this,b=0,D=[];return oi(s).$t(function(M,F){var H=wc(F);H.sequenceNumber<=l&&null===f.get(H.targetId)&&(b++,D.push(m.removeTargetData(s,H)))}).next(function(){return at.waitFor(D)}).next(function(){return b})},a.prototype.forEachTarget=function(s,l){return oi(s).$t(function(f,m){var b=wc(m);l(b)})},a.prototype.Xt=function(s){return ef(s).get(Gs.key).next(function(l){return rn(null!==l),l})},a.prototype.Zt=function(s,l){return ef(s).put(Gs.key,l)},a.prototype.te=function(s,l){return oi(s).put(lp(this.R,l))},a.prototype.ee=function(s,l){var f=!1;return s.targetId>l.highestTargetId&&(l.highestTargetId=s.targetId,f=!0),s.sequenceNumber>l.highestListenSequenceNumber&&(l.highestListenSequenceNumber=s.sequenceNumber,f=!0),f},a.prototype.getTargetCount=function(s){return this.Xt(s).next(function(l){return l.targetCount})},a.prototype.getTargetData=function(s,l){var f=Fr(l),m=IDBKeyRange.bound([f,Number.NEGATIVE_INFINITY],[f,Number.POSITIVE_INFINITY]),b=null;return oi(s).$t({range:m,index:Go.queryTargetsIndexName},function(D,M,F){var H=wc(M);Un(l,H.target)&&(b=H,F.done())}).next(function(){return b})},a.prototype.addMatchingKeys=function(s,l,f){var m=this,b=[],D=_s(s);return l.forEach(function(M){var F=Yi(M.path);b.push(D.put(new Qi(f,F))),b.push(m.referenceDelegate.addReference(s,f,M))}),at.waitFor(b)},a.prototype.removeMatchingKeys=function(s,l,f){var m=this,b=_s(s);return at.forEach(l,function(D){var M=Yi(D.path);return at.waitFor([b.delete([f,M]),m.referenceDelegate.removeReference(s,f,D)])})},a.prototype.removeMatchingKeysForTargetId=function(s,l){var f=_s(s),m=IDBKeyRange.bound([l],[l+1],!1,!0);return f.delete(m)},a.prototype.getMatchingKeysForTargetId=function(s,l){var f=IDBKeyRange.bound([l],[l+1],!1,!0),m=_s(s),b=qn();return m.$t({range:f,Ft:!0},function(D,M,F){var H=ys(D[1]),Y=new jt(H);b=b.add(Y)}).next(function(){return b})},a.prototype.containsKey=function(s,l){var f=Yi(l.path),m=IDBKeyRange.bound([f],[Pa(f)],!1,!0),b=0;return _s(s).$t({index:Qi.documentTargetsIndex,Ft:!0,range:m},function(D,M,F){0!==D[0]&&(b++,F.done())}).next(function(){return b>0})},a.prototype.lt=function(s,l){return oi(s).get(l).next(function(f){return f?wc(f):null})},a}();function oi(a){return zo(a,Go.store)}function ef(a){return zo(a,Gs.store)}function _s(a){return zo(a,Qi.store)}function Ea(a){return(0,L.mG)(this,void 0,void 0,function(){return(0,L.Jh)(this,function(s){if(a.code!==ke.FAILED_PRECONDITION||a.message!==ih)throw a;return tt("LocalStore","Unexpectedly lost primary lease"),[2]})})}function Rg(a,s){var f=a[1],b=s[1],D=fn(a[0],s[0]);return 0===D?fn(f,b):D}var Og=function(){function a(s){this.ne=s,this.buffer=new Ei(Rg),this.se=0}return a.prototype.ie=function(){return++this.se},a.prototype.re=function(s){var l=[s,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(l);else{var f=this.buffer.last();Rg(l,f)<0&&(this.buffer=this.buffer.delete(f).add(l))}},Object.defineProperty(a.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),a}(),Ic=function(){function a(s,l){this.garbageCollector=s,this.asyncQueue=l,this.oe=!1,this.ce=null}return a.prototype.start=function(s){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(s)},a.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(a.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),a.prototype.ue=function(s){var l=this,f=this.oe?3e5:6e4;tt("LruGarbageCollector","Garbage collection scheduled in "+f+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",f,function(){return(0,L.mG)(l,void 0,void 0,function(){var m;return(0,L.Jh)(this,function(b){switch(b.label){case 0:this.ce=null,this.oe=!0,b.label=1;case 1:return b.trys.push([1,3,,7]),[4,s.collectGarbage(this.garbageCollector)];case 2:return b.sent(),[3,7];case 3:return vs(m=b.sent())?(tt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",m),[3,6]):[3,4];case 4:return[4,Ea(m)];case 5:b.sent(),b.label=6;case 6:return[3,7];case 7:return[4,this.ue(s)];case 8:return b.sent(),[2]}})})})},a}(),ey=function(){function a(s,l){this.ae=s,this.params=l}return a.prototype.calculateTargetCount=function(s,l){return this.ae.he(s).next(function(f){return Math.floor(l/100*f)})},a.prototype.nthSequenceNumber=function(s,l){var f=this;if(0===l)return at.resolve(ti.o);var m=new Og(l);return this.ae.forEachTarget(s,function(b){return m.re(b.sequenceNumber)}).next(function(){return f.ae.le(s,function(b){return m.re(b)})}).next(function(){return m.maxValue})},a.prototype.removeTargets=function(s,l,f){return this.ae.removeTargets(s,l,f)},a.prototype.removeOrphanedDocuments=function(s,l){return this.ae.removeOrphanedDocuments(s,l)},a.prototype.collect=function(s,l){var f=this;return-1===this.params.cacheSizeCollectionThreshold?(tt("LruGarbageCollector","Garbage collection skipped; disabled"),at.resolve(Q)):this.getCacheSize(s).next(function(m){return m<f.params.cacheSizeCollectionThreshold?(tt("LruGarbageCollector","Garbage collection skipped; Cache size "+m+" is lower than threshold "+f.params.cacheSizeCollectionThreshold),Q):f.fe(s,l)})},a.prototype.getCacheSize=function(s){return this.ae.getCacheSize(s)},a.prototype.fe=function(s,l){var f,m,b,D,M,F,H,Y=this,se=Date.now();return this.calculateTargetCount(s,this.params.percentileToCollect).next(function(de){return de>Y.params.maximumSequenceNumbersToCollect?(tt("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+Y.params.maximumSequenceNumbersToCollect+" from "+de),m=Y.params.maximumSequenceNumbersToCollect):m=de,D=Date.now(),Y.nthSequenceNumber(s,m)}).next(function(de){return f=de,M=Date.now(),Y.removeTargets(s,f,l)}).next(function(de){return b=de,F=Date.now(),Y.removeOrphanedDocuments(s,f)}).next(function(de){return H=Date.now(),Bl()<=me.in.DEBUG&&tt("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(D-se)+"ms\n\tDetermined least recently used "+m+" in "+(M-D)+"ms\n\tRemoved "+b+" targets in "+(F-M)+"ms\n\tRemoved "+de+" documents in "+(H-F)+"ms\nTotal Duration: "+(H-se)+"ms"),at.resolve({didRun:!0,sequenceNumbersCollected:m,targetsRemoved:b,documentsRemoved:de})})},a}(),s_=function(){function a(s,l){this.db=s,this.garbageCollector=new ey(this,l)}return a.prototype.he=function(s){var l=this.de(s);return this.db.getTargetCache().getTargetCount(s).next(function(f){return l.next(function(m){return f+m})})},a.prototype.de=function(s){var l=0;return this.le(s,function(f){l++}).next(function(){return l})},a.prototype.forEachTarget=function(s,l){return this.db.getTargetCache().forEachTarget(s,l)},a.prototype.le=function(s,l){return this.we(s,function(f,m){return l(m)})},a.prototype.addReference=function(s,l,f){return Za(s,f)},a.prototype.removeReference=function(s,l,f){return Za(s,f)},a.prototype.removeTargets=function(s,l,f){return this.db.getTargetCache().removeTargets(s,l,f)},a.prototype.markPotentiallyOrphaned=function(s,l){return Za(s,l)},a.prototype._e=function(s,l){return m=l,b=!1,Ws(f=s).Ot(function(D){return en(f,D,m).next(function(M){return M&&(b=!0),at.resolve(!M)})}).next(function(){return b});var f,m,b},a.prototype.removeOrphanedDocuments=function(s,l){var f=this,m=this.db.getRemoteDocumentCache().newChangeBuffer(),b=[],D=0;return this.we(s,function(M,F){if(F<=l){var H=f._e(s,M).next(function(Y){if(!Y)return D++,m.getEntry(s,M).next(function(){return m.removeEntry(M),_s(s).delete([0,Yi(M.path)])})});b.push(H)}}).next(function(){return at.waitFor(b)}).next(function(){return m.apply(s)}).next(function(){return D})},a.prototype.removeTarget=function(s,l){var f=l.withSequenceNumber(s.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(s,f)},a.prototype.updateLimboDocument=function(s,l){return Za(s,l)},a.prototype.we=function(s,l){var f,m=_s(s),b=ti.o;return m.$t({index:Qi.documentTargetsIndex},function(D,M){var H=M.path,Y=M.sequenceNumber;0===D[0]?(b!==ti.o&&l(new jt(ys(f)),b),b=Y,f=H):b=ti.o}).next(function(){b!==ti.o&&l(new jt(ys(f)),b)})},a.prototype.getCacheSize=function(s){return this.db.getRemoteDocumentCache().getSize(s)},a}();function Za(a,s){return _s(a).put((f=a.currentSequenceNumber,new Qi(0,Yi(s.path),f)));var f}var Tu=function(){function a(s,l){this.mapKeyFn=s,this.equalsFn=l,this.inner={}}return a.prototype.get=function(s){var l=this.mapKeyFn(s),f=this.inner[l];if(void 0!==f)for(var m=0,b=f;m<b.length;m++){var D=b[m],F=D[1];if(this.equalsFn(D[0],s))return F}},a.prototype.has=function(s){return void 0!==this.get(s)},a.prototype.set=function(s,l){var f=this.mapKeyFn(s),m=this.inner[f];if(void 0!==m){for(var b=0;b<m.length;b++)if(this.equalsFn(m[b][0],s))return void(m[b]=[s,l]);m.push([s,l])}else this.inner[f]=[[s,l]]},a.prototype.delete=function(s){var l=this.mapKeyFn(s),f=this.inner[l];if(void 0===f)return!1;for(var m=0;m<f.length;m++)if(this.equalsFn(f[m][0],s))return 1===f.length?delete this.inner[l]:f.splice(m,1),!0;return!1},a.prototype.forEach=function(s){oo(this.inner,function(l,f){for(var m=0,b=f;m<b.length;m++){var D=b[m];s(D[0],D[1])}})},a.prototype.isEmpty=function(){return Wd(this.inner)},a}(),Mw=function(){function a(){this.changes=new Tu(function(s){return s.toString()},function(s,l){return s.isEqual(l)}),this.changesApplied=!1}return a.prototype.getReadTime=function(s){var l=this.changes.get(s);return l?l.readTime:bn.min()},a.prototype.addEntry=function(s,l){this.assertNotApplied(),this.changes.set(s.key,{document:s,readTime:l})},a.prototype.removeEntry=function(s,l){void 0===l&&(l=null),this.assertNotApplied(),this.changes.set(s,{document:ri.newInvalidDocument(s),readTime:l})},a.prototype.getEntry=function(s,l){this.assertNotApplied();var f=this.changes.get(l);return void 0!==f?at.resolve(f.document):this.getFromCache(s,l)},a.prototype.getEntries=function(s,l){return this.getAllFromCache(s,l)},a.prototype.apply=function(s){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(s)},a.prototype.assertNotApplied=function(){},a}(),Rw=function(){function a(s,l){this.R=s,this.Ut=l}return a.prototype.addEntry=function(s,l,f){return al(s).put(hp(l),f)},a.prototype.removeEntry=function(s,l){var f=al(s),m=hp(l);return f.delete(m)},a.prototype.updateMetadata=function(s,l){var f=this;return this.getMetadata(s).next(function(m){return m.byteSize+=l,f.me(s,m)})},a.prototype.getEntry=function(s,l){var f=this;return al(s).get(hp(l)).next(function(m){return f.ye(l,m)})},a.prototype.ge=function(s,l){var f=this;return al(s).get(hp(l)).next(function(m){return{document:f.ye(l,m),size:pt(m)}})},a.prototype.getEntries=function(s,l){var f=this,m=ms();return this.pe(s,l,function(b,D){var M=f.ye(b,D);m=m.insert(b,M)}).next(function(){return m})},a.prototype.Ee=function(s,l){var f=this,m=ms(),b=new Zi(jt.comparator);return this.pe(s,l,function(D,M){var F=f.ye(D,M);m=m.insert(D,F),b=b.insert(D,pt(M))}).next(function(){return{documents:m,Te:b}})},a.prototype.pe=function(s,l,f){if(l.isEmpty())return at.resolve();var m=IDBKeyRange.bound(l.first().path.toArray(),l.last().path.toArray()),b=l.getIterator(),D=b.getNext();return al(s).$t({range:m},function(M,F,H){for(var Y=jt.fromSegments(M);D&&jt.comparator(D,Y)<0;)f(D,null),D=b.getNext();D&&D.isEqual(Y)&&(f(D,F),D=b.hasNext()?b.getNext():null),D?H.Ct(D.path.toArray()):H.done()}).next(function(){for(;D;)f(D,null),D=b.hasNext()?b.getNext():null})},a.prototype.getDocumentsMatchingQuery=function(s,l,f){var m=this,b=ms(),D=l.path.length+1,M={};if(f.isEqual(bn.min())){var F=l.path.toArray();M.range=IDBKeyRange.lowerBound(F)}else{var H=l.path.toArray(),Y=ba(f);M.range=IDBKeyRange.lowerBound([H,Y],!0),M.index=xr.collectionReadTimeIndex}return al(s).$t(M,function(se,de,Se){if(se.length===D){var De=Du(m.R,de);l.path.isPrefixOf(De.key.path)?Vs(l,De)&&(b=b.insert(De.key,De)):Se.done()}}).next(function(){return b})},a.prototype.newChangeBuffer=function(s){return new tf(this,!!s&&s.trackRemovals)},a.prototype.getSize=function(s){return this.getMetadata(s).next(function(l){return l.byteSize})},a.prototype.getMetadata=function(s){return ed(s).get(za.key).next(function(l){return rn(!!l),l})},a.prototype.me=function(s,l){return ed(s).put(za.key,l)},a.prototype.ye=function(s,l){if(l){var f=Du(this.R,l);if(!f.isNoDocument()||!f.version.isEqual(bn.min()))return f}return ri.newInvalidDocument(s)},a}(),tf=function(a){function s(l,f){var m=this;return(m=a.call(this)||this).Ie=l,m.trackRemovals=f,m.Ae=new Tu(function(b){return b.toString()},function(b,D){return b.isEqual(D)}),m}return(0,L.ZT)(s,a),s.prototype.applyChanges=function(l){var f=this,m=[],b=0,D=new Ei(function(M,F){return fn(M.canonicalString(),F.canonicalString())});return this.changes.forEach(function(M,F){var H=f.Ae.get(M);if(F.document.isValidDocument()){var Y=Xh(f.Ie.R,F.document,f.getReadTime(M));D=D.add(M.path.popLast());var se=pt(Y);b+=se-H,m.push(f.Ie.addEntry(l,M,Y))}else if(b-=H,f.trackRemovals){var de=Xh(f.Ie.R,ri.newNoDocument(M,bn.min()),f.getReadTime(M));m.push(f.Ie.addEntry(l,M,de))}else m.push(f.Ie.removeEntry(l,M))}),D.forEach(function(M){m.push(f.Ie.Ut.addToCollectionParentIndex(l,M))}),m.push(this.Ie.updateMetadata(l,b)),at.waitFor(m)},s.prototype.getFromCache=function(l,f){var m=this;return this.Ie.ge(l,f).next(function(b){return m.Ae.set(f,b.size),b.document})},s.prototype.getAllFromCache=function(l,f){var m=this;return this.Ie.Ee(l,f).next(function(b){var D=b.documents;return b.Te.forEach(function(M,F){m.Ae.set(M,F)}),D})},s}(Mw);function ed(a){return zo(a,za.store)}function al(a){return zo(a,xr.store)}function hp(a){return a.path.toArray()}var a_=function(){function a(s){this.R=s}return a.prototype.Rt=function(s,l,f,m){var b=this;rn(f<m&&f>=0&&m<=11);var F,D=new Kl("createOrUpgrade",l);f<1&&m>=1&&(s.createObjectStore($n.store),(F=s).createObjectStore(Eu.store,{keyPath:Eu.keyPath}),F.createObjectStore(Gn.store,{keyPath:Gn.keyPath,autoIncrement:!0}).createIndex(Gn.userMutationsIndex,Gn.userMutationsKeyPath,{unique:!0}),F.createObjectStore(pi.store),Ng(s),function(F){F.createObjectStore(xr.store)}(s));var M=at.resolve();return f<3&&m>=3&&(0!==f&&(function(F){F.deleteObjectStore(Qi.store),F.deleteObjectStore(Go.store),F.deleteObjectStore(Gs.store)}(s),Ng(s)),M=M.next(function(){return function(F){var H=F.store(Gs.store),Y=new Gs(0,0,bn.min().toTimestamp(),0);return H.put(Gs.key,Y)}(D)})),f<4&&m>=4&&(0!==f&&(M=M.next(function(){return function(F,H){return H.store(Gn.store).Nt().next(function(Y){F.deleteObjectStore(Gn.store),F.createObjectStore(Gn.store,{keyPath:Gn.keyPath,autoIncrement:!0}).createIndex(Gn.userMutationsIndex,Gn.userMutationsKeyPath,{unique:!0});var se=H.store(Gn.store),de=Y.map(function(Se){return se.put(Se)});return at.waitFor(de)})}(s,D)})),M=M.next(function(){!function(F){F.createObjectStore(bo.store,{keyPath:bo.keyPath})}(s)})),f<5&&m>=5&&(M=M.next(function(){return b.Re(D)})),f<6&&m>=6&&(M=M.next(function(){return function(F){F.createObjectStore(za.store)}(s),b.be(D)})),f<7&&m>=7&&(M=M.next(function(){return b.ve(D)})),f<8&&m>=8&&(M=M.next(function(){return b.Pe(s,D)})),f<9&&m>=9&&(M=M.next(function(){(function(F){F.objectStoreNames.contains("remoteDocumentChanges")&&F.deleteObjectStore("remoteDocumentChanges")})(s),function(F){var H=F.objectStore(xr.store);H.createIndex(xr.readTimeIndex,xr.readTimeIndexPath,{unique:!1}),H.createIndex(xr.collectionReadTimeIndex,xr.collectionReadTimeIndexPath,{unique:!1})}(l)})),f<10&&m>=10&&(M=M.next(function(){return b.Ve(D)})),f<11&&m>=11&&(M=M.next(function(){(function(F){F.createObjectStore(Wa.store,{keyPath:Wa.keyPath})})(s),function(F){F.createObjectStore(yc.store,{keyPath:yc.keyPath})}(s)})),M},a.prototype.be=function(s){var l=0;return s.store(xr.store).$t(function(f,m){l+=pt(m)}).next(function(){var f=new za(l);return s.store(za.store).put(za.key,f)})},a.prototype.Re=function(s){var l=this,f=s.store(Eu.store),m=s.store(Gn.store);return f.Nt().next(function(b){return at.forEach(b,function(D){var M=IDBKeyRange.bound([D.userId,-1],[D.userId,D.lastAcknowledgedBatchId]);return m.Nt(Gn.userMutationsIndex,M).next(function(F){return at.forEach(F,function(H){rn(H.userId===D.userId);var Y=_c(l.R,H);return Ve(s,D.userId,Y).next(function(){})})})})})},a.prototype.ve=function(s){var l=s.store(Qi.store),f=s.store(xr.store);return s.store(Gs.store).get(Gs.key).next(function(m){var b=[];return f.$t(function(D,M){var F=new Vn(D),H=[0,Yi(F)];b.push(l.get(H).next(function(Y){return Y?at.resolve():l.put(new Qi(0,Yi(F),m.highestListenSequenceNumber))}))}).next(function(){return at.waitFor(b)})})},a.prototype.Pe=function(s,l){s.createObjectStore(il.store,{keyPath:il.keyPath});var f=l.store(il.store),m=new E,b=function(D){if(m.add(D)){var M=D.lastSegment(),F=D.popLast();return f.put({collectionId:M,parent:Yi(F)})}};return l.store(xr.store).$t({Ft:!0},function(D,M){var F=new Vn(D);return b(F.popLast())}).next(function(){return l.store(pi.store).$t({Ft:!0},function(D,M){var H=ys(D[1]);return b(H.popLast())})})},a.prototype.Ve=function(s){var l=this,f=s.store(Go.store);return f.$t(function(m,b){var D=wc(b),M=lp(l.R,D);return f.put(M)})},a}();function Ng(a){a.createObjectStore(Qi.store,{keyPath:Qi.keyPath}).createIndex(Qi.documentTargetsIndex,Qi.documentTargetsKeyPath,{unique:!0}),a.createObjectStore(Go.store,{keyPath:Go.keyPath}).createIndex(Go.queryTargetsIndexName,Go.queryTargetsKeyPath,{unique:!0}),a.createObjectStore(Gs.store)}var ty="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",ny=function(){function a(s,l,f,m,b,D,M,F,H,Y){if(this.allowTabSynchronization=s,this.persistenceKey=l,this.clientId=f,this.Se=b,this.window=D,this.document=M,this.De=H,this.Ce=Y,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ke=null,this.inForeground=!1,this.Fe=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(se){return Promise.resolve()},!a.yt())throw new et(ke.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new s_(this,m),this.Le=l+"main",this.R=new Jl(F),this.Be=new ol(this.Le,11,new a_(this.R)),this.qe=new sh(this.referenceDelegate,this.R),this.Ut=new x,this.Ue=new Rw(this.R,this.Ut),this.Ke=new Mg,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===Y&&fr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return a.prototype.start=function(){var s=this;return this.je().then(function(){if(!s.isPrimary&&!s.allowTabSynchronization)throw new et(ke.FAILED_PRECONDITION,ty);return s.We(),s.Ge(),s.ze(),s.runTransaction("getHighestListenSequenceNumber","readonly",function(l){return s.qe.getHighestSequenceNumber(l)})}).then(function(l){s.Ne=new ti(l,s.De)}).then(function(){s.xe=!0}).catch(function(l){return s.Be&&s.Be.close(),Promise.reject(l)})},a.prototype.He=function(s){var l=this;return this.Me=function(f){return(0,L.mG)(l,void 0,void 0,function(){return(0,L.Jh)(this,function(m){return this.started?[2,s(f)]:[2]})})},s(this.isPrimary)},a.prototype.setDatabaseDeletedListener=function(s){var l=this;this.Be.vt(function(f){return(0,L.mG)(l,void 0,void 0,function(){return(0,L.Jh)(this,function(m){switch(m.label){case 0:return null===f.newVersion?[4,s()]:[3,2];case 1:m.sent(),m.label=2;case 2:return[2]}})})})},a.prototype.setNetworkEnabled=function(s){var l=this;this.networkEnabled!==s&&(this.networkEnabled=s,this.Se.enqueueAndForget(function(){return(0,L.mG)(l,void 0,void 0,function(){return(0,L.Jh)(this,function(f){switch(f.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:f.sent(),f.label=2;case 2:return[2]}})})}))},a.prototype.je=function(){var s=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(l){return Pg(l).put(new bo(s.clientId,Date.now(),s.networkEnabled,s.inForeground)).next(function(){if(s.isPrimary)return s.Je(l).next(function(f){f||(s.isPrimary=!1,s.Se.enqueueRetryable(function(){return s.Me(!1)}))})}).next(function(){return s.Ye(l)}).next(function(f){return s.isPrimary&&!f?s.Xe(l).next(function(){return!1}):!!f&&s.Ze(l).next(function(){return!0})})}).catch(function(l){if(vs(l))return tt("IndexedDbPersistence","Failed to extend owner lease: ",l),s.isPrimary;if(!s.allowTabSynchronization)throw l;return tt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",l),!1}).then(function(l){s.isPrimary!==l&&s.Se.enqueueRetryable(function(){return s.Me(l)}),s.isPrimary=l})},a.prototype.Je=function(s){var l=this;return td(s).get($n.key).next(function(f){return at.resolve(l.tn(f))})},a.prototype.en=function(s){return Pg(s).delete(this.clientId)},a.prototype.nn=function(){return(0,L.mG)(this,void 0,void 0,function(){var s,l,f,b=this;return(0,L.Jh)(this,function(D){switch(D.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(M){var F=zo(M,bo.store);return F.Nt().next(function(H){var Y=b.rn(H,18e5),se=H.filter(function(de){return-1===Y.indexOf(de)});return at.forEach(se,function(de){return F.delete(de.clientId)}).next(function(){return se})})}).catch(function(){return[]})]);case 1:if(s=D.sent(),this.Qe)for(l=0,f=s;l<f.length;l++)this.Qe.removeItem(this.on(f[l].clientId));D.label=2;case 2:return[2]}})})},a.prototype.ze=function(){var s=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return s.je().then(function(){return s.nn()}).then(function(){return s.ze()})})},a.prototype.tn=function(s){return!!s&&s.ownerId===this.clientId},a.prototype.Ye=function(s){var l=this;return this.Ce?at.resolve(!0):td(s).get($n.key).next(function(f){if(null!==f&&l.sn(f.leaseTimestampMs,5e3)&&!l.cn(f.ownerId)){if(l.tn(f)&&l.networkEnabled)return!0;if(!l.tn(f)){if(!f.allowTabSynchronization)throw new et(ke.FAILED_PRECONDITION,ty);return!1}}return!(!l.networkEnabled||!l.inForeground)||Pg(s).Nt().next(function(m){return void 0===l.rn(m,5e3).find(function(b){return!(l.clientId===b.clientId||!(!l.networkEnabled&&b.networkEnabled||!l.inForeground&&b.inForeground&&l.networkEnabled===b.networkEnabled))})})}).next(function(f){return l.isPrimary!==f&&tt("IndexedDbPersistence","Client "+(f?"is":"is not")+" eligible for a primary lease."),f})},a.prototype.shutdown=function(){return(0,L.mG)(this,void 0,void 0,function(){var s=this;return(0,L.Jh)(this,function(l){switch(l.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[$n.store,bo.store],function(f){var m=new Yl(f,ti.o);return s.Xe(m).next(function(){return s.en(m)})})];case 1:return l.sent(),this.Be.close(),this.ln(),[2]}})})},a.prototype.rn=function(s,l){var f=this;return s.filter(function(m){return f.sn(m.updateTimeMs,l)&&!f.cn(m.clientId)})},a.prototype.fn=function(){var s=this;return this.runTransaction("getActiveClients","readonly",function(l){return Pg(l).Nt().next(function(f){return s.rn(f,18e5).map(function(m){return m.clientId})})})},Object.defineProperty(a.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),a.prototype.getMutationQueue=function(s){return Rt.Qt(s,this.R,this.Ut,this.referenceDelegate)},a.prototype.getTargetCache=function(){return this.qe},a.prototype.getRemoteDocumentCache=function(){return this.Ue},a.prototype.getIndexManager=function(){return this.Ut},a.prototype.getBundleCache=function(){return this.Ke},a.prototype.runTransaction=function(s,l,f){var b,m=this;return tt("IndexedDbPersistence","Starting transaction:",s),this.Be.runTransaction(s,"readonly"===l?"readonly":"readwrite",Ag,function(M){return b=new Yl(M,m.Ne?m.Ne.next():ti.o),"readwrite-primary"===l?m.Je(b).next(function(F){return!!F||m.Ye(b)}).next(function(F){if(!F)throw fr("Failed to obtain primary lease for action '"+s+"'."),m.isPrimary=!1,m.Se.enqueueRetryable(function(){return m.Me(!1)}),new et(ke.FAILED_PRECONDITION,ih);return f(b)}).next(function(F){return m.Ze(b).next(function(){return F})}):m.dn(b).next(function(){return f(b)})}).then(function(M){return b.raiseOnCommittedEvent(),M})},a.prototype.dn=function(s){var l=this;return td(s).get($n.key).next(function(f){if(null!==f&&l.sn(f.leaseTimestampMs,5e3)&&!l.cn(f.ownerId)&&!l.tn(f)&&!(l.Ce||l.allowTabSynchronization&&f.allowTabSynchronization))throw new et(ke.FAILED_PRECONDITION,ty)})},a.prototype.Ze=function(s){var l=new $n(this.clientId,this.allowTabSynchronization,Date.now());return td(s).put($n.key,l)},a.yt=function(){return ol.yt()},a.prototype.Xe=function(s){var l=this,f=td(s);return f.get($n.key).next(function(m){return l.tn(m)?(tt("IndexedDbPersistence","Releasing primary lease."),f.delete($n.key)):at.resolve()})},a.prototype.sn=function(s,l){var f=Date.now();return!(s<f-l||s>f&&(fr("Detected an update time that is in the future: "+s+" > "+f),1))},a.prototype.We=function(){var s=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Fe=function(){s.Se.enqueueAndForget(function(){return s.inForeground="visible"===s.document.visibilityState,s.je()})},this.document.addEventListener("visibilitychange",this.Fe),this.inForeground="visible"===this.document.visibilityState)},a.prototype.an=function(){this.Fe&&(this.document.removeEventListener("visibilitychange",this.Fe),this.Fe=null)},a.prototype.Ge=function(){var s,l=this;"function"==typeof(null===(s=this.window)||void 0===s?void 0:s.addEventListener)&&(this.ke=function(){l.un(),(0,J.G6)()&&navigator.appVersion.match("Version/14")&&l.Se.enterRestrictedMode(!0),l.Se.enqueueAndForget(function(){return l.shutdown()})},this.window.addEventListener("pagehide",this.ke))},a.prototype.hn=function(){this.ke&&(this.window.removeEventListener("pagehide",this.ke),this.ke=null)},a.prototype.cn=function(s){var l;try{var f=null!==(null===(l=this.Qe)||void 0===l?void 0:l.getItem(this.on(s)));return tt("IndexedDbPersistence","Client '"+s+"' "+(f?"is":"is not")+" zombied in LocalStorage"),f}catch(m){return fr("IndexedDbPersistence","Failed to get zombied client id.",m),!1}},a.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(s){fr("Failed to set zombie client id.",s)}},a.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch{}},a.prototype.on=function(s){return"firestore_zombie_"+this.persistenceKey+"_"+s},a}();function td(a){return zo(a,$n.store)}function Pg(a){return zo(a,bo.store)}function fp(a,s){var l=a.projectId;return a.isDefaultDatabase||(l+="."+a.database),"firestore/"+s+"/"+l+"/"}var kg=function(a,s){this.progress=a,this.wn=s},nd=function(){function a(s,l,f){this.Ue=s,this._n=l,this.Ut=f}return a.prototype.mn=function(s,l){var f=this;return this._n.getAllMutationBatchesAffectingDocumentKey(s,l).next(function(m){return f.yn(s,l,m)})},a.prototype.yn=function(s,l,f){return this.Ue.getEntry(s,l).next(function(m){for(var b=0,D=f;b<D.length;b++)D[b].applyToLocalView(m);return m})},a.prototype.gn=function(s,l){s.forEach(function(f,m){for(var b=0,D=l;b<D.length;b++)D[b].applyToLocalView(m)})},a.prototype.pn=function(s,l){var f=this;return this.Ue.getEntries(s,l).next(function(m){return f.En(s,m).next(function(){return m})})},a.prototype.En=function(s,l){var f=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(s,l).next(function(m){return f.gn(l,m)})},a.prototype.getDocumentsMatchingQuery=function(s,l,f){return jt.isDocumentKey((m=l).path)&&null===m.collectionGroup&&0===m.filters.length?this.Tn(s,l.path):Jc(l)?this.In(s,l,f):this.An(s,l,f);var m},a.prototype.Tn=function(s,l){return this.mn(s,new jt(l)).next(function(f){var m=Gl();return f.isFoundDocument()&&(m=m.insert(f.key,f)),m})},a.prototype.In=function(s,l,f){var m=this,b=l.collectionGroup,D=Gl();return this.Ut.getCollectionParents(s,b).next(function(M){return at.forEach(M,function(F){var Y,se,H=(Y=l,se=F.child(b),new ki(se,null,Y.explicitOrderBy.slice(),Y.filters.slice(),Y.limit,Y.limitType,Y.startAt,Y.endAt));return m.An(s,H,f).next(function(Y){Y.forEach(function(se,de){D=D.insert(se,de)})})}).next(function(){return D})})},a.prototype.An=function(s,l,f){var m,b,D=this;return this.Ue.getDocumentsMatchingQuery(s,l,f).next(function(M){return m=M,D._n.getAllMutationBatchesAffectingQuery(s,l)}).next(function(M){return D.Rn(s,b=M,m).next(function(F){m=F;for(var H=0,Y=b;H<Y.length;H++)for(var se=Y[H],de=0,Se=se.mutations;de<Se.length;de++){var De=Se[de],$e=De.key,gt=m.get($e);null==gt&&(gt=ri.newInvalidDocument($e),m=m.insert($e,gt)),ja(De,gt,se.localWriteTime),gt.isFoundDocument()||(m=m.remove($e))}})}).next(function(){return m.forEach(function(M,F){Vs(l,F)||(m=m.remove(M))}),m})},a.prototype.Rn=function(s,l,f){for(var m=qn(),b=0,D=l;b<D.length;b++)for(var M=0,F=D[b].mutations;M<F.length;M++){var H=F[M];H instanceof ii&&null===f.get(H.key)&&(m=m.add(H.key))}var Y=f;return this.Ue.getEntries(s,m).next(function(se){return se.forEach(function(de,Se){Se.isFoundDocument()&&(Y=Y.insert(de,Se))}),Y})},a}(),Ow=function(){function a(s,l,f,m){this.targetId=s,this.fromCache=l,this.bn=f,this.vn=m}return a.Pn=function(s,l){for(var f=qn(),m=qn(),b=0,D=l.docChanges;b<D.length;b++){var M=D[b];switch(M.type){case 0:f=f.add(M.doc.key);break;case 1:m=m.add(M.doc.key)}}return new a(s,l.fromCache,f,m)},a}(),u_=function(){function a(){}return a.prototype.Vn=function(s){this.Sn=s},a.prototype.getDocumentsMatchingQuery=function(s,l,f,m){var D,b=this;return 0===(D=l).filters.length&&null===D.limit&&null==D.startAt&&null==D.endAt&&(0===D.explicitOrderBy.length||1===D.explicitOrderBy.length&&D.explicitOrderBy[0].field.isKeyField())||f.isEqual(bn.min())?this.Dn(s,l):this.Sn.pn(s,m).next(function(D){var M=b.Cn(l,D);return(Ar(l)||dc(l))&&b.Nn(l.limitType,M,m,f)?b.Dn(s,l):(Bl()<=me.in.DEBUG&&tt("QueryEngine","Re-using previous result from %s to execute query: %s",f.toString(),Xc(l)),b.Sn.getDocumentsMatchingQuery(s,l,f).next(function(F){return M.forEach(function(H){F=F.insert(H.key,H)}),F}))})},a.prototype.Cn=function(s,l){var f=new Ei(ao(s));return l.forEach(function(m,b){Vs(s,b)&&(f=f.add(b))}),f},a.prototype.Nn=function(s,l,f,m){if(f.size!==l.size)return!0;var b="F"===s?l.last():l.first();return!!b&&(b.hasPendingWrites||b.version.compareTo(m)>0)},a.prototype.Dn=function(s,l){return Bl()<=me.in.DEBUG&&tt("QueryEngine","Using full collection scan to execute query:",Xc(l)),this.Sn.getDocumentsMatchingQuery(s,l,bn.min())},a}(),Nw=function(){function a(s,l,f,m){this.persistence=s,this.xn=l,this.R=m,this.kn=new Zi(fn),this.Fn=new Tu(function(b){return Fr(b)},Un),this.$n=bn.min(),this._n=s.getMutationQueue(f),this.On=s.getRemoteDocumentCache(),this.qe=s.getTargetCache(),this.Mn=new nd(this.On,this._n,this.persistence.getIndexManager()),this.Ke=s.getBundleCache(),this.xn.Vn(this.Mn)}return a.prototype.collectGarbage=function(s){var l=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(f){return s.collect(f,l.kn)})},a}();function c_(a,s,l,f){return new Nw(a,s,l,f)}function Fg(a,s){return(0,L.mG)(this,void 0,void 0,function(){var l,f,m,b;return(0,L.Jh)(this,function(D){switch(D.label){case 0:return l=vt(a),f=l._n,m=l.Mn,[4,l.persistence.runTransaction("Handle user change","readonly",function(M){var F;return l._n.getAllMutationBatches(M).next(function(H){return F=H,f=l.persistence.getMutationQueue(s),m=new nd(l.On,f,l.persistence.getIndexManager()),f.getAllMutationBatches(M)}).next(function(H){for(var Y=[],se=[],de=qn(),Se=0,De=F;Se<De.length;Se++){var $e=De[Se];Y.push($e.batchId);for(var gt=0,bt=$e.mutations;gt<bt.length;gt++)de=de.add(bt[gt].key)}for(var sn=0,On=H;sn<On.length;sn++){var Wn=On[sn];se.push(Wn.batchId);for(var ur=0,Jo=Wn.mutations;ur<Jo.length;ur++)de=de.add(Jo[ur].key)}return m.pn(M,de).next(function(sm){return{Ln:sm,removedBatchIds:Y,addedBatchIds:se}})})})];case 1:return b=D.sent(),[2,(l._n=f,l.Mn=m,l.xn.Vn(l.Mn),b)]}})})}function Pw(a,s){var l=vt(a);return l.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(f){var D,M,F,H,Y,se,de,m=s.batch.keys(),b=l.On.newChangeBuffer({trackRemovals:!0});return(D=l,M=f,F=s,H=b,Y=F.batch,se=Y.keys(),de=at.resolve(),se.forEach(function(Se){de=de.next(function(){return H.getEntry(M,Se)}).next(function(De){var $e=F.docVersions.get(Se);rn(null!==$e),De.version.compareTo($e)<0&&(Y.applyToRemoteDocument(De,F),De.isValidDocument()&&H.addEntry(De,F.commitVersion))})}),de.next(function(){return D._n.removeMutationBatch(M,Y)})).next(function(){return b.apply(f)}).next(function(){return l._n.performConsistencyCheck(f)}).next(function(){return l.Mn.pn(f,m)})})}function l_(a){var s=vt(a);return s.persistence.runTransaction("Get last remote snapshot version","readonly",function(l){return s.qe.getLastRemoteSnapshotVersion(l)})}function kw(a,s){var l=vt(a),f=s.snapshotVersion,m=l.kn;return l.persistence.runTransaction("Apply remote event","readwrite-primary",function(b){var D=l.On.newChangeBuffer({trackRemovals:!0});m=l.kn;var M=[];s.targetChanges.forEach(function(Y,se){var $e,gt,bt,de=m.get(se);if(de){M.push(l.qe.removeMatchingKeys(b,Y.removedDocuments,se).next(function(){return l.qe.addMatchingKeys(b,Y.addedDocuments,se)}));var Se=Y.resumeToken;if(Se.approximateByteSize()>0){var De=de.withResumeToken(Se,f).withSequenceNumber(b.currentSequenceNumber);m=m.insert(se,De),$e=de,bt=Y,rn((gt=De).resumeToken.approximateByteSize()>0),(0===$e.resumeToken.approximateByteSize()||gt.snapshotVersion.toMicroseconds()-$e.snapshotVersion.toMicroseconds()>=3e8||bt.addedDocuments.size+bt.modifiedDocuments.size+bt.removedDocuments.size>0)&&M.push(l.qe.updateTargetData(b,De))}}});var F=ms();if(s.documentUpdates.forEach(function(Y,se){s.resolvedLimboDocuments.has(Y)&&M.push(l.persistence.referenceDelegate.updateLimboDocument(b,Y))}),M.push(ry(b,D,s.documentUpdates,f,void 0).next(function(Y){F=Y})),!f.isEqual(bn.min())){var H=l.qe.getLastRemoteSnapshotVersion(b).next(function(Y){return l.qe.setTargetsMetadata(b,b.currentSequenceNumber,f)});M.push(H)}return at.waitFor(M).next(function(){return D.apply(b)}).next(function(){return l.Mn.En(b,F)}).next(function(){return F})}).then(function(b){return l.kn=m,b})}function ry(a,s,l,f,m){var b=qn();return l.forEach(function(D){return b=b.add(D)}),s.getEntries(a,b).next(function(D){var M=ms();return l.forEach(function(F,H){var Y=D.get(F),se=m?.get(F)||f;H.isNoDocument()&&H.version.isEqual(bn.min())?(s.removeEntry(F,se),M=M.insert(F,H)):!Y.isValidDocument()||H.version.compareTo(Y.version)>0||0===H.version.compareTo(Y.version)&&Y.hasPendingWrites?(s.addEntry(H,se),M=M.insert(F,H)):tt("LocalStore","Ignoring outdated watch update for ",F,". Current version:",Y.version," Watch version:",H.version)}),M})}function d_(a,s){var l=vt(a);return l.persistence.runTransaction("Get next mutation batch","readonly",function(f){return void 0===s&&(s=-1),l._n.getNextMutationBatchAfterBatchId(f,s)})}function nf(a,s){var l=vt(a);return l.persistence.runTransaction("Allocate target","readwrite",function(f){var m;return l.qe.getTargetData(f,s).next(function(b){return b?at.resolve(m=b):l.qe.allocateTargetId(f).next(function(D){return m=new Er(s,D,0,f.currentSequenceNumber),l.qe.addTargetData(f,m).next(function(){return m})})})}).then(function(f){var m=l.kn.get(f.targetId);return(null===m||f.snapshotVersion.compareTo(m.snapshotVersion)>0)&&(l.kn=l.kn.insert(f.targetId,f),l.Fn.set(s,f.targetId)),f})}function gi(a,s,l){return(0,L.mG)(this,void 0,void 0,function(){var f,m,b,D;return(0,L.Jh)(this,function(M){switch(M.label){case 0:f=vt(a),m=f.kn.get(s),b=l?"readwrite":"readwrite-primary",M.label=1;case 1:return M.trys.push([1,4,,5]),l?[3,3]:[4,f.persistence.runTransaction("Release target",b,function(F){return f.persistence.referenceDelegate.removeTarget(F,m)})];case 2:M.sent(),M.label=3;case 3:return[3,5];case 4:if(!vs(D=M.sent()))throw D;return tt("LocalStore","Failed to update sequence numbers for target "+s+": "+D),[3,5];case 5:return f.kn=f.kn.remove(s),f.Fn.delete(m.target),[2]}})})}function ah(a,s,l){var f=vt(a),m=bn.min(),b=qn();return f.persistence.runTransaction("Execute query","readonly",function(D){return(M=f,F=D,H=Fi(s),Y=vt(M),se=Y.Fn.get(H),void 0!==se?at.resolve(Y.kn.get(se)):Y.qe.getTargetData(F,H)).next(function(M){if(M)return m=M.lastLimboFreeSnapshotVersion,f.qe.getMatchingKeysForTargetId(D,M.targetId).next(function(F){b=F})}).next(function(){return f.xn.getDocumentsMatchingQuery(D,s,l?m:bn.min(),l?b:qn())}).next(function(M){return{documents:M,Bn:b}});var M,F,H,Y,se})}function pp(a,s){var l=vt(a),f=vt(l.qe),m=l.kn.get(s);return m?Promise.resolve(m.target):l.persistence.runTransaction("Get target data","readonly",function(b){return f.lt(b,s).next(function(D){return D?D.target:null})})}function uh(a){var s=vt(a);return s.persistence.runTransaction("Get new document changes","readonly",function(l){return m=l,b=s.$n,D=vt(s.On),M=ms(),F=ba(b),H=al(m),Y=IDBKeyRange.lowerBound(F,!0),H.$t({index:xr.readTimeIndex,range:Y},function(se,de){var Se=Du(D.R,de);M=M.insert(Se.key,Se),F=de.readTime}).next(function(){return{wn:M,readTime:Ia(F)}});var m,b,D,M,F,H,Y}).then(function(l){var f=l.wn;return s.$n=l.readTime,f})}function Wo(a){return(0,L.mG)(this,void 0,void 0,function(){var s;return(0,L.Jh)(this,function(l){return[2,(s=vt(a)).persistence.runTransaction("Synchronize last document change read time","readonly",function(f){return b=al(f),D=bn.min(),b.$t({index:xr.readTimeIndex,reverse:!0},function(M,F,H){F.readTime&&(D=Ia(F.readTime)),H.done()}).next(function(){return D});var b,D}).then(function(f){s.$n=f})]})})}function gp(a,s,l,f){return(0,L.mG)(this,void 0,void 0,function(){var m,b,D,M,F,H,Y,se,de,Se;return(0,L.Jh)(this,function(De){switch(De.label){case 0:for(m=vt(a),b=qn(),D=ms(),M=hc(),F=0,H=l;F<H.length;F++)se=s.qn((Y=H[F]).metadata.name),Y.document&&(b=b.add(se)),D=D.insert(se,s.Un(Y)),M=M.insert(se,s.Kn(Y.metadata.readTime));return de=m.On.newChangeBuffer({trackRemovals:!0}),[4,nf(m,($e=f,Fi(hs(Vn.fromString("__bundle__/docs/"+$e)))))];case 1:return Se=De.sent(),[2,m.persistence.runTransaction("Apply bundle documents","readwrite",function($e){return ry($e,de,D,bn.min(),M).next(function(gt){return de.apply($e),gt}).next(function(gt){return m.qe.removeMatchingKeysForTargetId($e,Se.targetId).next(function(){return m.qe.addMatchingKeys($e,b,Se.targetId)}).next(function(){return m.Mn.En($e,gt)}).next(function(){return gt})})})]}var $e})})}function iy(a,s,l){return void 0===l&&(l=qn()),(0,L.mG)(this,void 0,void 0,function(){var f,m;return(0,L.Jh)(this,function(b){switch(b.label){case 0:return[4,nf(a,Fi(Xl(s.bundledQuery)))];case 1:return f=b.sent(),[2,(m=vt(a)).persistence.runTransaction("Save named query","readwrite",function(D){var M=Ki(s.readTime);if(f.snapshotVersion.compareTo(M)>=0)return m.Ke.saveNamedQuery(D,s);var F=f.withResumeToken(qr.EMPTY_BYTE_STRING,M);return m.kn=m.kn.insert(F.targetId,F),m.qe.updateTargetData(D,F).next(function(){return m.qe.removeMatchingKeysForTargetId(D,f.targetId)}).next(function(){return m.qe.addMatchingKeys(D,l,f.targetId)}).next(function(){return m.Ke.saveNamedQuery(D,s)})})]}})})}var Fw=function(){function a(s){this.R=s,this.Qn=new Map,this.jn=new Map}return a.prototype.getBundleMetadata=function(s,l){return at.resolve(this.Qn.get(l))},a.prototype.saveBundleMetadata=function(s,l){var f;return this.Qn.set(l.id,{id:(f=l).id,version:f.version,createTime:Ki(f.createTime)}),at.resolve()},a.prototype.getNamedQuery=function(s,l){return at.resolve(this.jn.get(l))},a.prototype.saveNamedQuery=function(s,l){return this.jn.set(l.name,{name:(f=l).name,query:Xl(f.bundledQuery),readTime:Ki(f.readTime)}),at.resolve();var f},a}(),rf=function(){function a(){this.Wn=new Ei(Vi.Gn),this.zn=new Ei(Vi.Hn)}return a.prototype.isEmpty=function(){return this.Wn.isEmpty()},a.prototype.addReference=function(s,l){var f=new Vi(s,l);this.Wn=this.Wn.add(f),this.zn=this.zn.add(f)},a.prototype.Jn=function(s,l){var f=this;s.forEach(function(m){return f.addReference(m,l)})},a.prototype.removeReference=function(s,l){this.Yn(new Vi(s,l))},a.prototype.Xn=function(s,l){var f=this;s.forEach(function(m){return f.removeReference(m,l)})},a.prototype.Zn=function(s){var l=this,f=new jt(new Vn([])),m=new Vi(f,s),b=new Vi(f,s+1),D=[];return this.zn.forEachInRange([m,b],function(M){l.Yn(M),D.push(M.key)}),D},a.prototype.ts=function(){var s=this;this.Wn.forEach(function(l){return s.Yn(l)})},a.prototype.Yn=function(s){this.Wn=this.Wn.delete(s),this.zn=this.zn.delete(s)},a.prototype.es=function(s){var l=new jt(new Vn([])),f=new Vi(l,s),m=new Vi(l,s+1),b=qn();return this.zn.forEachInRange([f,m],function(D){b=b.add(D.key)}),b},a.prototype.containsKey=function(s){var l=new Vi(s,0),f=this.Wn.firstAfterOrEqual(l);return null!==f&&s.isEqual(f.key)},a}(),Vi=function(){function a(s,l){this.key=s,this.ns=l}return a.Gn=function(s,l){return jt.comparator(s.key,l.key)||fn(s.ns,l.ns)},a.Hn=function(s,l){return fn(s.ns,l.ns)||jt.comparator(s.key,l.key)},a}(),h_=function(){function a(s,l){this.Ut=s,this.referenceDelegate=l,this._n=[],this.ss=1,this.rs=new Ei(Vi.Gn)}return a.prototype.checkEmpty=function(s){return at.resolve(0===this._n.length)},a.prototype.addMutationBatch=function(s,l,f,m){var b=this.ss;this.ss++;var D=new vc(b,l,f,m);this._n.push(D);for(var M=0,F=m;M<F.length;M++){var H=F[M];this.rs=this.rs.add(new Vi(H.key,b)),this.Ut.addToCollectionParentIndex(s,H.key.path.popLast())}return at.resolve(D)},a.prototype.lookupMutationBatch=function(s,l){return at.resolve(this.os(l))},a.prototype.getNextMutationBatchAfterBatchId=function(s,l){var m=this.cs(l+1),b=m<0?0:m;return at.resolve(this._n.length>b?this._n[b]:null)},a.prototype.getHighestUnacknowledgedBatchId=function(){return at.resolve(0===this._n.length?-1:this.ss-1)},a.prototype.getAllMutationBatches=function(s){return at.resolve(this._n.slice())},a.prototype.getAllMutationBatchesAffectingDocumentKey=function(s,l){var f=this,m=new Vi(l,0),b=new Vi(l,Number.POSITIVE_INFINITY),D=[];return this.rs.forEachInRange([m,b],function(M){var F=f.os(M.ns);D.push(F)}),at.resolve(D)},a.prototype.getAllMutationBatchesAffectingDocumentKeys=function(s,l){var f=this,m=new Ei(fn);return l.forEach(function(b){var D=new Vi(b,0),M=new Vi(b,Number.POSITIVE_INFINITY);f.rs.forEachInRange([D,M],function(F){m=m.add(F.ns)})}),at.resolve(this.us(m))},a.prototype.getAllMutationBatchesAffectingQuery=function(s,l){var f=l.path,m=f.length+1,b=f;jt.isDocumentKey(b)||(b=b.child(""));var D=new Vi(new jt(b),0),M=new Ei(fn);return this.rs.forEachWhile(function(F){var H=F.key.path;return!!f.isPrefixOf(H)&&(H.length===m&&(M=M.add(F.ns)),!0)},D),at.resolve(this.us(M))},a.prototype.us=function(s){var l=this,f=[];return s.forEach(function(m){var b=l.os(m);null!==b&&f.push(b)}),f},a.prototype.removeMutationBatch=function(s,l){var f=this;rn(0===this.hs(l.batchId,"removed")),this._n.shift();var m=this.rs;return at.forEach(l.mutations,function(b){var D=new Vi(b.key,l.batchId);return m=m.delete(D),f.referenceDelegate.markPotentiallyOrphaned(s,b.key)}).next(function(){f.rs=m})},a.prototype.Gt=function(s){},a.prototype.containsKey=function(s,l){var f=new Vi(l,0),m=this.rs.firstAfterOrEqual(f);return at.resolve(l.isEqual(m&&m.key))},a.prototype.performConsistencyCheck=function(s){return at.resolve()},a.prototype.hs=function(s,l){return this.cs(s)},a.prototype.cs=function(s){return 0===this._n.length?0:s-this._n[0].batchId},a.prototype.os=function(s){var l=this.cs(s);return l<0||l>=this._n.length?null:this._n[l]},a}(),mp=function(){function a(s,l){this.Ut=s,this.ls=l,this.docs=new Zi(jt.comparator),this.size=0}return a.prototype.addEntry=function(s,l,f){var m=l.key,b=this.docs.get(m),D=b?b.size:0,M=this.ls(l);return this.docs=this.docs.insert(m,{document:l.clone(),size:M,readTime:f}),this.size+=M-D,this.Ut.addToCollectionParentIndex(s,m.path.popLast())},a.prototype.removeEntry=function(s){var l=this.docs.get(s);l&&(this.docs=this.docs.remove(s),this.size-=l.size)},a.prototype.getEntry=function(s,l){var f=this.docs.get(l);return at.resolve(f?f.document.clone():ri.newInvalidDocument(l))},a.prototype.getEntries=function(s,l){var f=this,m=ms();return l.forEach(function(b){var D=f.docs.get(b);m=m.insert(b,D?D.document.clone():ri.newInvalidDocument(b))}),at.resolve(m)},a.prototype.getDocumentsMatchingQuery=function(s,l,f){for(var m=ms(),b=new jt(l.path.child("")),D=this.docs.getIteratorFrom(b);D.hasNext();){var M=D.getNext(),H=M.value,Y=H.document,se=H.readTime;if(!l.path.isPrefixOf(M.key.path))break;se.compareTo(f)<=0||Vs(l,Y)&&(m=m.insert(Y.key,Y.clone()))}return at.resolve(m)},a.prototype.fs=function(s,l){return at.forEach(this.docs,function(f){return l(f)})},a.prototype.newChangeBuffer=function(s){return new Lg(this)},a.prototype.getSize=function(s){return at.resolve(this.size)},a}(),Lg=function(a){function s(l){var f=this;return(f=a.call(this)||this).Ie=l,f}return(0,L.ZT)(s,a),s.prototype.applyChanges=function(l){var f=this,m=[];return this.changes.forEach(function(b,D){D.document.isValidDocument()?m.push(f.Ie.addEntry(l,D.document,f.getReadTime(b))):f.Ie.removeEntry(b)}),at.waitFor(m)},s.prototype.getFromCache=function(l,f){return this.Ie.getEntry(l,f)},s.prototype.getAllFromCache=function(l,f){return this.Ie.getEntries(l,f)},s}(Mw),oy=function(){function a(s){this.persistence=s,this.ds=new Tu(function(l){return Fr(l)},Un),this.lastRemoteSnapshotVersion=bn.min(),this.highestTargetId=0,this.ws=0,this._s=new rf,this.targetCount=0,this.ys=bc.Jt()}return a.prototype.forEachTarget=function(s,l){return this.ds.forEach(function(f,m){return l(m)}),at.resolve()},a.prototype.getLastRemoteSnapshotVersion=function(s){return at.resolve(this.lastRemoteSnapshotVersion)},a.prototype.getHighestSequenceNumber=function(s){return at.resolve(this.ws)},a.prototype.allocateTargetId=function(s){return this.highestTargetId=this.ys.next(),at.resolve(this.highestTargetId)},a.prototype.setTargetsMetadata=function(s,l,f){return f&&(this.lastRemoteSnapshotVersion=f),l>this.ws&&(this.ws=l),at.resolve()},a.prototype.te=function(s){this.ds.set(s.target,s);var l=s.targetId;l>this.highestTargetId&&(this.ys=new bc(l),this.highestTargetId=l),s.sequenceNumber>this.ws&&(this.ws=s.sequenceNumber)},a.prototype.addTargetData=function(s,l){return this.te(l),this.targetCount+=1,at.resolve()},a.prototype.updateTargetData=function(s,l){return this.te(l),at.resolve()},a.prototype.removeTargetData=function(s,l){return this.ds.delete(l.target),this._s.Zn(l.targetId),this.targetCount-=1,at.resolve()},a.prototype.removeTargets=function(s,l,f){var m=this,b=0,D=[];return this.ds.forEach(function(M,F){F.sequenceNumber<=l&&null===f.get(F.targetId)&&(m.ds.delete(M),D.push(m.removeMatchingKeysForTargetId(s,F.targetId)),b++)}),at.waitFor(D).next(function(){return b})},a.prototype.getTargetCount=function(s){return at.resolve(this.targetCount)},a.prototype.getTargetData=function(s,l){var f=this.ds.get(l)||null;return at.resolve(f)},a.prototype.addMatchingKeys=function(s,l,f){return this._s.Jn(l,f),at.resolve()},a.prototype.removeMatchingKeys=function(s,l,f){this._s.Xn(l,f);var m=this.persistence.referenceDelegate,b=[];return m&&l.forEach(function(D){b.push(m.markPotentiallyOrphaned(s,D))}),at.waitFor(b)},a.prototype.removeMatchingKeysForTargetId=function(s,l){return this._s.Zn(l),at.resolve()},a.prototype.getMatchingKeysForTargetId=function(s,l){var f=this._s.es(l);return at.resolve(f)},a.prototype.containsKey=function(s,l){return at.resolve(this._s.containsKey(l))},a}(),yp=function(){function a(s,l){var f=this;this.gs={},this.Ne=new ti(0),this.xe=!1,this.xe=!0,this.referenceDelegate=s(this),this.qe=new oy(this),this.Ut=new w,this.Ue=new mp(this.Ut,function(D){return f.referenceDelegate.ps(D)}),this.R=new Jl(l),this.Ke=new Fw(this.R)}return a.prototype.start=function(){return Promise.resolve()},a.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(a.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),a.prototype.setDatabaseDeletedListener=function(){},a.prototype.setNetworkEnabled=function(){},a.prototype.getIndexManager=function(){return this.Ut},a.prototype.getMutationQueue=function(s){var l=this.gs[s.toKey()];return l||(l=new h_(this.Ut,this.referenceDelegate),this.gs[s.toKey()]=l),l},a.prototype.getTargetCache=function(){return this.qe},a.prototype.getRemoteDocumentCache=function(){return this.Ue},a.prototype.getBundleCache=function(){return this.Ke},a.prototype.runTransaction=function(s,l,f){var m=this;tt("MemoryPersistence","Starting transaction:",s);var b=new f_(this.Ne.next());return this.referenceDelegate.Es(),f(b).next(function(D){return m.referenceDelegate.Ts(b).next(function(){return D})}).toPromise().then(function(D){return b.raiseOnCommittedEvent(),D})},a.prototype.Is=function(s,l){return at.or(Object.values(this.gs).map(function(f){return function(){return f.containsKey(s,l)}}))},a}(),f_=function(a){function s(l){var f=this;return(f=a.call(this)||this).currentSequenceNumber=l,f}return(0,L.ZT)(s,a),s}(xg),Lw=function(){function a(s){this.persistence=s,this.As=new rf,this.Rs=null}return a.bs=function(s){return new a(s)},Object.defineProperty(a.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw kt()},enumerable:!1,configurable:!0}),a.prototype.addReference=function(s,l,f){return this.As.addReference(f,l),this.vs.delete(f.toString()),at.resolve()},a.prototype.removeReference=function(s,l,f){return this.As.removeReference(f,l),this.vs.add(f.toString()),at.resolve()},a.prototype.markPotentiallyOrphaned=function(s,l){return this.vs.add(l.toString()),at.resolve()},a.prototype.removeTarget=function(s,l){var f=this;this.As.Zn(l.targetId).forEach(function(b){return f.vs.add(b.toString())});var m=this.persistence.getTargetCache();return m.getMatchingKeysForTargetId(s,l.targetId).next(function(b){b.forEach(function(D){return f.vs.add(D.toString())})}).next(function(){return m.removeTargetData(s,l)})},a.prototype.Es=function(){this.Rs=new Set},a.prototype.Ts=function(s){var l=this,f=this.persistence.getRemoteDocumentCache().newChangeBuffer();return at.forEach(this.vs,function(m){var b=jt.fromPath(m);return l.Ps(s,b).next(function(D){D||f.removeEntry(b)})}).next(function(){return l.Rs=null,f.apply(s)})},a.prototype.updateLimboDocument=function(s,l){var f=this;return this.Ps(s,l).next(function(m){m?f.vs.delete(l.toString()):f.vs.add(l.toString())})},a.prototype.ps=function(s){return 0},a.prototype.Ps=function(s,l){var f=this;return at.or([function(){return at.resolve(f.As.containsKey(l))},function(){return f.persistence.getTargetCache().containsKey(s,l)},function(){return f.persistence.Is(s,l)}])},a}(),Io=function(){function a(s){this.uid=s}return a.prototype.isAuthenticated=function(){return null!=this.uid},a.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},a.prototype.isEqual=function(s){return s.uid===this.uid},a}();function p_(a,s){return"firestore_clients_"+a+"_"+s}function ch(a,s,l){var f="firestore_mutations_"+a+"_"+l;return s.isAuthenticated()&&(f+="_"+s.uid),f}function Su(a,s){return"firestore_targets_"+a+"_"+s}Io.UNAUTHENTICATED=new Io(null),Io.GOOGLE_CREDENTIALS=new Io("google-credentials-uid"),Io.FIRST_PARTY=new Io("first-party-uid"),Io.MOCK_USER=new Io("mock-user");var vp=function(){function a(s,l,f,m){this.user=s,this.batchId=l,this.state=f,this.error=m}return a.Vs=function(s,l,f){var m,b=JSON.parse(f),D="object"==typeof b&&-1!==["pending","acknowledged","rejected"].indexOf(b.state)&&(void 0===b.error||"object"==typeof b.error);return D&&b.error&&(D="string"==typeof b.error.message&&"string"==typeof b.error.code)&&(m=new et(b.error.code,b.error.message)),D?new a(s,l,b.state,m):(fr("SharedClientState","Failed to parse mutation state for ID '"+l+"': "+f),null)},a.prototype.Ss=function(){var s={state:this.state,updateTimeMs:Date.now()};return this.error&&(s.error={code:this.error.code,message:this.error.message}),JSON.stringify(s)},a}(),sy=function(){function a(s,l,f){this.targetId=s,this.state=l,this.error=f}return a.Vs=function(s,l){var f,m=JSON.parse(l),b="object"==typeof m&&-1!==["not-current","current","rejected"].indexOf(m.state)&&(void 0===m.error||"object"==typeof m.error);return b&&m.error&&(b="string"==typeof m.error.message&&"string"==typeof m.error.code)&&(f=new et(m.error.code,m.error.message)),b?new a(s,m.state,f):(fr("SharedClientState","Failed to parse target state for ID '"+s+"': "+l),null)},a.prototype.Ss=function(){var s={state:this.state,updateTimeMs:Date.now()};return this.error&&(s.error={code:this.error.code,message:this.error.message}),JSON.stringify(s)},a}(),Vw=function(){function a(s,l){this.clientId=s,this.activeTargetIds=l}return a.Vs=function(s,l){for(var f=JSON.parse(l),m="object"==typeof f&&f.activeTargetIds instanceof Array,b=Us(),D=0;m&&D<f.activeTargetIds.length;++D)m=yu(f.activeTargetIds[D]),b=b.add(f.activeTargetIds[D]);return m?new a(s,b):(fr("SharedClientState","Failed to parse client data for instance '"+s+"': "+l),null)},a}(),mE=function(){function a(s,l){this.clientId=s,this.onlineState=l}return a.Vs=function(s){var l=JSON.parse(s);return"object"==typeof l&&-1!==["Unknown","Online","Offline"].indexOf(l.onlineState)&&"string"==typeof l.clientId?new a(l.clientId,l.onlineState):(fr("SharedClientState","Failed to parse online state: "+s),null)},a}(),Vg=function(){function a(){this.activeTargetIds=Us()}return a.prototype.Ds=function(s){this.activeTargetIds=this.activeTargetIds.add(s)},a.prototype.Cs=function(s){this.activeTargetIds=this.activeTargetIds.delete(s)},a.prototype.Ss=function(){var s={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(s)},a}(),g_=function(){function a(s,l,f,m,b){this.window=s,this.Se=l,this.persistenceKey=f,this.Ns=m,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.ks.bind(this),this.Fs=new Zi(fn),this.started=!1,this.$s=[];var D=f.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=b,this.Os=p_(this.persistenceKey,this.Ns),this.Ms="firestore_sequence_number_"+this.persistenceKey,this.Fs=this.Fs.insert(this.Ns,new Vg),this.Ls=new RegExp("^firestore_clients_"+D+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+D+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+D+"_(\\d+)$"),this.Us="firestore_online_state_"+this.persistenceKey,this.Ks=function(M){return"firestore_bundle_loaded_"+M}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return a.yt=function(s){return!(!s||!s.localStorage)},a.prototype.start=function(){return(0,L.mG)(this,void 0,void 0,function(){var s,l,f,m,b,D,M,F,H,Y,de=this;return(0,L.Jh)(this,function(Se){switch(Se.label){case 0:return[4,this.syncEngine.fn()];case 1:for(s=Se.sent(),l=0,f=s;l<f.length;l++)(m=f[l])!==this.Ns&&(b=this.getItem(p_(this.persistenceKey,m)))&&(D=Vw.Vs(m,b))&&(this.Fs=this.Fs.insert(D.clientId,D));for(this.Qs(),(M=this.storage.getItem(this.Us))&&(F=this.js(M))&&this.Ws(F),H=0,Y=this.$s;H<Y.length;H++)this.ks(Y[H]);return this.$s=[],this.window.addEventListener("pagehide",function(){return de.shutdown()}),this.started=!0,[2]}})})},a.prototype.writeSequenceNumber=function(s){this.setItem(this.Ms,JSON.stringify(s))},a.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.Fs)},a.prototype.isActiveQueryTarget=function(s){var l=!1;return this.Fs.forEach(function(f,m){m.activeTargetIds.has(s)&&(l=!0)}),l},a.prototype.addPendingMutation=function(s){this.zs(s,"pending")},a.prototype.updateMutationState=function(s,l,f){this.zs(s,l,f),this.Hs(s)},a.prototype.addLocalQueryTarget=function(s){var l="not-current";if(this.isActiveQueryTarget(s)){var f=this.storage.getItem(Su(this.persistenceKey,s));if(f){var m=sy.Vs(s,f);m&&(l=m.state)}}return this.Js.Ds(s),this.Qs(),l},a.prototype.removeLocalQueryTarget=function(s){this.Js.Cs(s),this.Qs()},a.prototype.isLocalQueryTarget=function(s){return this.Js.activeTargetIds.has(s)},a.prototype.clearQueryState=function(s){this.removeItem(Su(this.persistenceKey,s))},a.prototype.updateQueryState=function(s,l,f){this.Ys(s,l,f)},a.prototype.handleUserChange=function(s,l,f){var m=this;l.forEach(function(b){m.Hs(b)}),this.currentUser=s,f.forEach(function(b){m.addPendingMutation(b)})},a.prototype.setOnlineState=function(s){this.Xs(s)},a.prototype.notifyBundleLoaded=function(){this.Zs()},a.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},a.prototype.getItem=function(s){var l=this.storage.getItem(s);return tt("SharedClientState","READ",s,l),l},a.prototype.setItem=function(s,l){tt("SharedClientState","SET",s,l),this.storage.setItem(s,l)},a.prototype.removeItem=function(s){tt("SharedClientState","REMOVE",s),this.storage.removeItem(s)},a.prototype.ks=function(s){var l=this,f=s;if(f.storageArea===this.storage){if(tt("SharedClientState","EVENT",f.key,f.newValue),f.key===this.Os)return void fr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return(0,L.mG)(l,void 0,void 0,function(){var m,b,D,M,F,H;return(0,L.Jh)(this,function(Y){if(this.started){if(null!==f.key)if(this.Ls.test(f.key)){if(null==f.newValue)return m=this.ti(f.key),[2,this.ei(m,null)];if(b=this.ni(f.key,f.newValue))return[2,this.ei(b.clientId,b)]}else if(this.Bs.test(f.key)){if(null!==f.newValue&&(D=this.si(f.key,f.newValue)))return[2,this.ii(D)]}else if(this.qs.test(f.key)){if(null!==f.newValue&&(M=this.ri(f.key,f.newValue)))return[2,this.oi(M)]}else if(f.key===this.Us){if(null!==f.newValue&&(F=this.js(f.newValue)))return[2,this.Ws(F)]}else if(f.key===this.Ms)(H=function(se){var de=ti.o;if(null!=se)try{var Se=JSON.parse(se);rn("number"==typeof Se),de=Se}catch(De){fr("SharedClientState","Failed to read sequence number from WebStorage",De)}return de}(f.newValue))!==ti.o&&this.sequenceNumberHandler(H);else if(f.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(f);return[2]})})})}},Object.defineProperty(a.prototype,"Js",{get:function(){return this.Fs.get(this.Ns)},enumerable:!1,configurable:!0}),a.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},a.prototype.zs=function(s,l,f){var m=new vp(this.currentUser,s,l,f),b=ch(this.persistenceKey,this.currentUser,s);this.setItem(b,m.Ss())},a.prototype.Hs=function(s){var l=ch(this.persistenceKey,this.currentUser,s);this.removeItem(l)},a.prototype.Xs=function(s){this.storage.setItem(this.Us,JSON.stringify({clientId:this.Ns,onlineState:s}))},a.prototype.Ys=function(s,l,f){var m=Su(this.persistenceKey,s),b=new sy(s,l,f);this.setItem(m,b.Ss())},a.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},a.prototype.ti=function(s){var l=this.Ls.exec(s);return l?l[1]:null},a.prototype.ni=function(s,l){var f=this.ti(s);return Vw.Vs(f,l)},a.prototype.si=function(s,l){var f=this.Bs.exec(s),m=Number(f[1]);return vp.Vs(new Io(void 0!==f[2]?f[2]:null),m,l)},a.prototype.ri=function(s,l){var f=this.qs.exec(s),m=Number(f[1]);return sy.Vs(m,l)},a.prototype.js=function(s){return mE.Vs(s)},a.prototype.ii=function(s){return(0,L.mG)(this,void 0,void 0,function(){return(0,L.Jh)(this,function(l){return s.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(s.batchId,s.state,s.error)]:(tt("SharedClientState","Ignoring mutation for non-active user "+s.user.uid),[2])})})},a.prototype.oi=function(s){return this.syncEngine.ai(s.targetId,s.state,s.error)},a.prototype.ei=function(s,l){var f=this,m=l?this.Fs.insert(s,l):this.Fs.remove(s),b=this.Gs(this.Fs),D=this.Gs(m),M=[],F=[];return D.forEach(function(H){b.has(H)||M.push(H)}),b.forEach(function(H){D.has(H)||F.push(H)}),this.syncEngine.hi(M,F).then(function(){f.Fs=m})},a.prototype.Ws=function(s){this.Fs.get(s.clientId)&&this.onlineStateHandler(s.onlineState)},a.prototype.Gs=function(s){var l=Us();return s.forEach(function(f,m){l=l.unionWith(m.activeTargetIds)}),l},a}(),Au=function(){function a(){this.li=new Vg,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return a.prototype.addPendingMutation=function(s){},a.prototype.updateMutationState=function(s,l,f){},a.prototype.addLocalQueryTarget=function(s){return this.li.Ds(s),this.fi[s]||"not-current"},a.prototype.updateQueryState=function(s,l,f){this.fi[s]=l},a.prototype.removeLocalQueryTarget=function(s){this.li.Cs(s)},a.prototype.isLocalQueryTarget=function(s){return this.li.activeTargetIds.has(s)},a.prototype.clearQueryState=function(s){delete this.fi[s]},a.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},a.prototype.isActiveQueryTarget=function(s){return this.li.activeTargetIds.has(s)},a.prototype.start=function(){return this.li=new Vg,Promise.resolve()},a.prototype.handleUserChange=function(s,l,f){},a.prototype.setOnlineState=function(s){},a.prototype.shutdown=function(){},a.prototype.writeSequenceNumber=function(s){},a.prototype.notifyBundleLoaded=function(){},a}(),ay=function(){function a(){}return a.prototype.di=function(s){},a.prototype.shutdown=function(){},a}(),_p=function(){function a(){var s=this;this.wi=function(){return s._i()},this.mi=function(){return s.yi()},this.gi=[],this.pi()}return a.prototype.di=function(s){this.gi.push(s)},a.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},a.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},a.prototype._i=function(){tt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var s=0,l=this.gi;s<l.length;s++)(0,l[s])(0)},a.prototype.yi=function(){tt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var s=0,l=this.gi;s<l.length;s++)(0,l[s])(1)},a.yt=function(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},a}(),Uw={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},uy=function(){function a(s){this.Ei=s.Ei,this.Ti=s.Ti}return a.prototype.Ii=function(s){this.Ai=s},a.prototype.Ri=function(s){this.bi=s},a.prototype.onMessage=function(s){this.vi=s},a.prototype.close=function(){this.Ti()},a.prototype.send=function(s){this.Ei(s)},a.prototype.Pi=function(){this.Ai()},a.prototype.Vi=function(s){this.bi(s)},a.prototype.Si=function(s){this.vi(s)},a}(),m_=function(a){function s(l){var f=this;return(f=a.call(this,l)||this).forceLongPolling=l.forceLongPolling,f.autoDetectLongPolling=l.autoDetectLongPolling,f.useFetchStreams=l.useFetchStreams,f}return(0,L.ZT)(s,a),s.prototype.Fi=function(l,f,m,b){return new Promise(function(D,M){var F=new $h;F.listenOnce(zc.COMPLETE,function(){try{switch(F.getLastErrorCode()){case Ns.NO_ERROR:var Y=F.getResponseJson();tt("Connection","XHR received:",JSON.stringify(Y)),D(Y);break;case Ns.TIMEOUT:tt("Connection",'RPC "'+l+'" timed out'),M(new et(ke.DEADLINE_EXCEEDED,"Request time out"));break;case Ns.HTTP_ERROR:var se=F.getStatus();if(tt("Connection",'RPC "'+l+'" failed with status:',se,"response text:",F.getResponseText()),se>0){var de=F.getResponseJson().error;if(de&&de.status&&de.message){var Se=($e=de.status.toLowerCase().replace(/_/g,"-"),Object.values(ke).indexOf($e)>=0?$e:ke.UNKNOWN);M(new et(Se,de.message))}else M(new et(ke.UNKNOWN,"Server responded with status "+F.getStatus()))}else M(new et(ke.UNAVAILABLE,"Connection failed."));break;default:kt()}}finally{tt("Connection",'RPC "'+l+'" completed.')}var $e});var H=JSON.stringify(b);F.send(f,"POST",H,m,15)})},s.prototype.Oi=function(l,f){var m=[this.Di,"/","google.firestore.v1.Firestore","/",l,"/channel"],b=new sa,D=As(),M={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(M.xmlHttpFactory=new Wc({})),this.ki(M.initMessageHeaders,f),(0,J.uI)()||(0,J.b$)()||(0,J.d)()||(0,J.w1)()||(0,J.Mn)()||(0,J.ru)()||(M.httpHeadersOverwriteParam="$httpHeaders");var F=m.join("");tt("Connection","Creating WebChannel: "+F,M);var H=b.createWebChannel(F,M),Y=!1,se=!1,de=new uy({Ei:function(De){se?tt("Connection","Not sending because WebChannel is closed:",De):(Y||(tt("Connection","Opening WebChannel transport."),H.open(),Y=!0),tt("Connection","WebChannel sending:",De),H.send(De))},Ti:function(){return H.close()}}),Se=function(De,$e,gt){De.listen($e,function(bt){try{gt(bt)}catch(Qt){setTimeout(function(){throw Qt},0)}})};return Se(H,ac.EventType.OPEN,function(){se||tt("Connection","WebChannel transport opened.")}),Se(H,ac.EventType.CLOSE,function(){se||(se=!0,tt("Connection","WebChannel transport closed"),de.Vi())}),Se(H,ac.EventType.ERROR,function(De){se||(se=!0,ca("Connection","WebChannel transport errored:",De),de.Vi(new et(ke.UNAVAILABLE,"The operation could not be completed")))}),Se(H,ac.EventType.MESSAGE,function(De){var $e;if(!se){var gt=De.data[0];rn(!!gt);var Qt=gt.error||(null===($e=gt[0])||void 0===$e?void 0:$e.error);if(Qt){tt("Connection","WebChannel received error:",Qt);var sn=Qt.status,On=function(ur){var Jo=zr[ur];if(void 0!==Jo)return Wh(Jo)}(sn),Wn=Qt.message;void 0===On&&(On=ke.INTERNAL,Wn="Unknown error status: "+sn+" with message "+Qt.message),se=!0,de.Vi(new et(On,Wn)),H.close()}else tt("Connection","WebChannel received:",gt),de.Si(gt)}}),Se(D,Sr.STAT_EVENT,function(De){De.stat===sc_PROXY?tt("Connection","Detected buffering proxy"):De.stat===sc_NOPROXY&&tt("Connection","Detected no buffering proxy")}),setTimeout(function(){de.Pi()},0),de},s}(function(){function a(s){this.databaseInfo=s,this.databaseId=s.databaseId,this.Di=(s.ssl?"https":"http")+"://"+s.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return a.prototype.Ni=function(s,l,f,m){var b=this.xi(s,l);tt("RestConnection","Sending: ",b,f);var D={};return this.ki(D,m),this.Fi(s,b,D,f).then(function(M){return tt("RestConnection","Received: ",M),M},function(M){throw ca("RestConnection",s+" failed with error: ",M,"url: ",b,"request:",f),M})},a.prototype.$i=function(s,l,f,m){return this.Ni(s,l,f,m)},a.prototype.ki=function(s,l){if(s["X-Goog-Api-Client"]="gl-js/ fire/8.10.1",s["Content-Type"]="text/plain",this.databaseInfo.appId&&(s["X-Firebase-GMPID"]=this.databaseInfo.appId),l)for(var f in l.authHeaders)l.authHeaders.hasOwnProperty(f)&&(s[f]=l.authHeaders[f])},a.prototype.xi=function(s,l){return this.Di+"/v1/"+l+":"+Uw[s]},a}());function lh(){return typeof window<"u"?window:null}function wp(){return typeof document<"u"?document:null}function sf(a){return new sp(a,!0)}var bp=function(){function a(s,l,f,m,b){void 0===f&&(f=1e3),void 0===m&&(m=1.5),void 0===b&&(b=6e4),this.Se=s,this.timerId=l,this.Mi=f,this.Li=m,this.Bi=b,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return a.prototype.reset=function(){this.qi=0},a.prototype.Qi=function(){this.qi=this.Bi},a.prototype.ji=function(s){var l=this;this.cancel();var f=Math.floor(this.qi+this.Wi()),m=Math.max(0,Date.now()-this.Ki),b=Math.max(0,f-m);b>0&&tt("ExponentialBackoff","Backing off for "+b+" ms (base delay: "+this.qi+" ms, delay with jitter: "+f+" ms, last attempt: "+m+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,b,function(){return l.Ki=Date.now(),s()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},a.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},a.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},a.prototype.Wi=function(){return(Math.random()-.5)*this.qi},a}(),Ug=function(){function a(s,l,f,m,b,D){this.Se=s,this.zi=f,this.Hi=m,this.Ji=b,this.listener=D,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new bp(s,l)}return a.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},a.prototype.er=function(){return 2===this.state},a.prototype.start=function(){3!==this.state?this.auth():this.nr()},a.prototype.stop=function(){return(0,L.mG)(this,void 0,void 0,function(){return(0,L.Jh)(this,function(s){switch(s.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:s.sent(),s.label=2;case 2:return[2]}})})},a.prototype.sr=function(){this.state=0,this.Zi.reset()},a.prototype.ir=function(){var s=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return s.rr()}))},a.prototype.cr=function(s){this.ur(),this.stream.send(s)},a.prototype.rr=function(){return(0,L.mG)(this,void 0,void 0,function(){return(0,L.Jh)(this,function(s){return this.er()?[2,this.close(0)]:[2]})})},a.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},a.prototype.close=function(s,l){return(0,L.mG)(this,void 0,void 0,function(){return(0,L.Jh)(this,function(f){switch(f.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==s?this.Zi.reset():l&&l.code===ke.RESOURCE_EXHAUSTED?(fr(l.toString()),fr("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):l&&l.code===ke.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=s,[4,this.listener.Ri(l)];case 1:return f.sent(),[2]}})})},a.prototype.ar=function(){},a.prototype.auth=function(){var s=this;this.state=1;var l=this.hr(this.Yi),f=this.Yi;this.Ji.getToken().then(function(m){s.Yi===f&&s.lr(m)},function(m){l(function(){var b=new et(ke.UNKNOWN,"Fetching auth token failed: "+m.message);return s.dr(b)})})},a.prototype.lr=function(s){var l=this,f=this.hr(this.Yi);this.stream=this.wr(s),this.stream.Ii(function(){f(function(){return l.state=2,l.listener.Ii()})}),this.stream.Ri(function(m){f(function(){return l.dr(m)})}),this.stream.onMessage(function(m){f(function(){return l.onMessage(m)})})},a.prototype.nr=function(){var s=this;this.state=4,this.Zi.ji(function(){return(0,L.mG)(s,void 0,void 0,function(){return(0,L.Jh)(this,function(l){return this.state=0,this.start(),[2]})})})},a.prototype.dr=function(s){return tt("PersistentStream","close with error: "+s),this.stream=null,this.close(3,s)},a.prototype.hr=function(s){var l=this;return function(f){l.Se.enqueueAndForget(function(){return l.Yi===s?f():(tt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},a}(),y_=function(a){function s(l,f,m,b,D){var M=this;return(M=a.call(this,l,"listen_stream_connection_backoff","listen_stream_idle",f,m,D)||this).R=b,M}return(0,L.ZT)(s,a),s.prototype.wr=function(l){return this.Hi.Oi("Listen",l)},s.prototype.onMessage=function(l){this.Zi.reset();var f=function(b,D){var M,gt;if("targetChange"in D){var F="NO_CHANGE"===(gt=D.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===gt?1:"REMOVE"===gt?2:"CURRENT"===gt?3:"RESET"===gt?4:kt(),H=D.targetChange.targetIds||[],Y=function(gt,bt){return gt.I?(rn(void 0===bt||"string"==typeof bt),qr.fromBase64String(bt||"")):(rn(void 0===bt||bt instanceof Uint8Array),qr.fromUint8Array(bt||new Uint8Array))}(b,D.targetChange.resumeToken),se=(de=D.targetChange.cause)&&function(gt){var bt=void 0===gt.code?ke.UNKNOWN:Wh(gt.code);return new et(bt,gt.message||"")}(de);M=new Jd(F,H,Y,se||null)}else if("documentChange"in D){H=qa(b,(F=D.documentChange).document.name),Y=Ki(F.document.updateTime);var de=new wo({mapValue:{fields:F.document.fields}}),Se=(se=ri.newFoundDocument(H,Y,de),F.targetIds||[]);M=new nl(Se,F.removedTargetIds||[],se.key,se)}else if("documentDelete"in D)H=qa(b,(F=D.documentDelete).document),Y=F.readTime?Ki(F.readTime):bn.min(),de=ri.newNoDocument(H,Y),M=new nl([],se=F.removedTargetIds||[],de.key,de);else if("documentRemove"in D)H=qa(b,(F=D.documentRemove).document),M=new nl([],Y=F.removedTargetIds||[],H,null);else{if(!("filter"in D))return kt();var $e=D.filter;H=new fi(F=$e.count||0),M=new Qd(Y=$e.targetId,H)}return M}(this.R,l),m=function(b){if(!("targetChange"in b))return bn.min();var D=b.targetChange;return D.targetIds&&D.targetIds.length?bn.min():D.readTime?Ki(D.readTime):bn.min()}(l);return this.listener._r(f,m)},s.prototype.mr=function(l){var b,D,M,F,f={};f.database=js(this.R),f.addTarget=(b=this.R,(M=so(F=(D=l).target)?{documents:th(b,F)}:{query:Jm(b,F)}).targetId=D.targetId,D.resumeToken.approximateByteSize()>0?M.resumeToken=Qm(b,D.resumeToken):D.snapshotVersion.compareTo(bn.min())>0&&(M.readTime=zl(b,D.snapshotVersion.toTimestamp())),M);var m=function(b,D){var M=function(F,H){switch(H){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return kt()}}(0,D.purpose);return null==M?null:{"goog-listen-tags":M}}(0,l);m&&(f.labels=m),this.cr(f)},s.prototype.yr=function(l){var f={};f.database=js(this.R),f.removeTarget=l,this.cr(f)},s}(Ug),yE=function(a){function s(l,f,m,b,D){var M=this;return(M=a.call(this,l,"write_stream_connection_backoff","write_stream_idle",f,m,D)||this).R=b,M.gr=!1,M}return(0,L.ZT)(s,a),Object.defineProperty(s.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),s.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,a.prototype.start.call(this)},s.prototype.ar=function(){this.gr&&this.Er([])},s.prototype.wr=function(l){return this.Hi.Oi("Write",l)},s.prototype.onMessage=function(l){if(rn(!!l.streamToken),this.lastStreamToken=l.streamToken,this.gr){this.Zi.reset();var f=(D=l.commitTime,(b=l.writeResults)&&b.length>0?(rn(void 0!==D),b.map(function(M){return H=D,(Y=Ki((F=M).updateTime?F.updateTime:H)).isEqual(bn.min())&&(Y=Ki(H)),new on(Y,F.transformResults||[]);var F,H,Y})):[]),m=Ki(l.commitTime);return this.listener.Tr(m,f)}var b,D;return rn(!l.writeResults||0===l.writeResults.length),this.gr=!0,this.listener.Ir()},s.prototype.Ar=function(){var l={};l.database=js(this.R),this.cr(l)},s.prototype.Er=function(l){var f=this,m={streamToken:this.lastStreamToken,writes:l.map(function(b){return rl(f.R,b)})};this.cr(m)},s}(Ug),af=function(a){function s(l,f,m){var b=this;return(b=a.call(this)||this).credentials=l,b.Hi=f,b.R=m,b.Rr=!1,b}return(0,L.ZT)(s,a),s.prototype.br=function(){if(this.Rr)throw new et(ke.FAILED_PRECONDITION,"The client has already been terminated.")},s.prototype.Ni=function(l,f,m){var b=this;return this.br(),this.credentials.getToken().then(function(D){return b.Hi.Ni(l,f,m,D)}).catch(function(D){throw"FirebaseError"===D.name?(D.code===ke.UNAUTHENTICATED&&b.credentials.invalidateToken(),D):new et(ke.UNKNOWN,D.toString())})},s.prototype.$i=function(l,f,m){var b=this;return this.br(),this.credentials.getToken().then(function(D){return b.Hi.$i(l,f,m,D)}).catch(function(D){throw"FirebaseError"===D.name?(D.code===ke.UNAUTHENTICATED&&b.credentials.invalidateToken(),D):new et(ke.UNKNOWN,D.toString())})},s.prototype.terminate=function(){this.Rr=!0},s}(function(){}),cy=function(){function a(s,l){this.asyncQueue=s,this.onlineStateHandler=l,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return a.prototype.Sr=function(){var s=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return s.Pr=null,s.Cr("Backend didn't respond within 10 seconds."),s.Dr("Offline"),Promise.resolve()}))},a.prototype.Nr=function(s){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.kr(),this.Cr("Connection failed 1 times. Most recent error: "+s.toString()),this.Dr("Offline")))},a.prototype.set=function(s){this.kr(),this.vr=0,"Online"===s&&(this.Vr=!1),this.Dr(s)},a.prototype.Dr=function(s){s!==this.state&&(this.state=s,this.onlineStateHandler(s))},a.prototype.Cr=function(s){var l="Could not reach Cloud Firestore backend. "+s+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(fr(l),this.Vr=!1):tt("OnlineStateTracker",l)},a.prototype.kr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},a}(),ly=function(a,s,l,f,m){var b=this;this.localStore=a,this.datastore=s,this.asyncQueue=l,this.remoteSyncer={},this.Fr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=m,this.Lr.di(function(D){l.enqueueAndForget(function(){return(0,L.mG)(b,void 0,void 0,function(){return(0,L.Jh)(this,function(M){switch(M.label){case 0:return Ka(this)?(tt("RemoteStore","Restarting streams for network reachability change."),[4,function(F){return(0,L.mG)(this,void 0,void 0,function(){var H;return(0,L.Jh)(this,function(Y){switch(Y.label){case 0:return(H=vt(F)).Or.add(4),[4,ul(H)];case 1:return Y.sent(),H.Br.set("Unknown"),H.Or.delete(4),[4,dh(H)];case 2:return Y.sent(),[2]}})})}(this)]):[3,2];case 1:M.sent(),M.label=2;case 2:return[2]}})})})}),this.Br=new cy(l,f)};function dh(a){return(0,L.mG)(this,void 0,void 0,function(){var s,l;return(0,L.Jh)(this,function(f){switch(f.label){case 0:if(!Ka(a))return[3,4];s=0,l=a.Mr,f.label=1;case 1:return s<l.length?[4,(0,l[s])(!0)]:[3,4];case 2:f.sent(),f.label=3;case 3:return s++,[3,1];case 4:return[2]}})})}function ul(a){return(0,L.mG)(this,void 0,void 0,function(){var s,l;return(0,L.Jh)(this,function(f){switch(f.label){case 0:s=0,l=a.Mr,f.label=1;case 1:return s<l.length?[4,(0,l[s])(!1)]:[3,4];case 2:f.sent(),f.label=3;case 3:return s++,[3,1];case 4:return[2]}})})}function Ip(a,s){var l=vt(a);l.$r.has(s.targetId)||(l.$r.set(s.targetId,s),fy(l)?hy(l):id(l).er()&&dy(l,s))}function Bg(a,s){var l=vt(a),f=id(l);l.$r.delete(s),f.er()&&v_(l,s),0===l.$r.size&&(f.er()?f.ir():Ka(l)&&l.Br.set("Unknown"))}function dy(a,s){a.qr.U(s.targetId),id(a).mr(s)}function v_(a,s){a.qr.U(s),id(a).yr(s)}function hy(a){a.qr=new wg({getRemoteKeysForTarget:function(s){return a.remoteSyncer.getRemoteKeysForTarget(s)},lt:function(s){return a.$r.get(s)||null}}),id(a).start(),a.Br.Sr()}function fy(a){return Ka(a)&&!id(a).tr()&&a.$r.size>0}function Ka(a){return 0===vt(a).Or.size}function Ep(a){a.qr=void 0}function jg(a){return(0,L.mG)(this,void 0,void 0,function(){return(0,L.Jh)(this,function(s){return a.$r.forEach(function(l,f){dy(a,l)}),[2]})})}function Cp(a,s){return(0,L.mG)(this,void 0,void 0,function(){return(0,L.Jh)(this,function(l){return Ep(a),fy(a)?(a.Br.Nr(s),hy(a)):a.Br.set("Unknown"),[2]})})}function Bw(a,s,l){return(0,L.mG)(this,void 0,void 0,function(){var f,m,b;return(0,L.Jh)(this,function(D){switch(D.label){case 0:if(a.Br.set("Online"),!(s instanceof Jd&&2===s.state&&s.cause))return[3,6];D.label=1;case 1:return D.trys.push([1,3,,5]),[4,function(M,F){return(0,L.mG)(this,void 0,void 0,function(){var H,Y,se,de;return(0,L.Jh)(this,function(Se){switch(Se.label){case 0:H=F.cause,Y=0,se=F.targetIds,Se.label=1;case 1:return Y<se.length?M.$r.has(de=se[Y])?[4,M.remoteSyncer.rejectListen(de,H)]:[3,3]:[3,5];case 2:Se.sent(),M.$r.delete(de),M.qr.removeTarget(de),Se.label=3;case 3:Se.label=4;case 4:return Y++,[3,1];case 5:return[2]}})})}(a,s)];case 2:return D.sent(),[3,5];case 3:return f=D.sent(),tt("RemoteStore","Failed to remove targets %s: %s ",s.targetIds.join(","),f),[4,Hg(a,f)];case 4:return D.sent(),[3,5];case 5:return[3,13];case 6:if(s instanceof nl?a.qr.X(s):s instanceof Qd?a.qr.rt(s):a.qr.et(s),l.isEqual(bn.min()))return[3,13];D.label=7;case 7:return D.trys.push([7,11,,13]),[4,l_(a.localStore)];case 8:return m=D.sent(),l.compareTo(m)>=0?[4,(M=a,F=l,H=M.qr.ut(F),H.targetChanges.forEach(function(Y,se){if(Y.resumeToken.approximateByteSize()>0){var de=M.$r.get(se);de&&M.$r.set(se,de.withResumeToken(Y.resumeToken,F))}}),H.targetMismatches.forEach(function(Y){var se=M.$r.get(Y);if(se){M.$r.set(Y,se.withResumeToken(qr.EMPTY_BYTE_STRING,se.snapshotVersion)),v_(M,Y);var de=new Er(se.target,Y,1,se.sequenceNumber);dy(M,de)}}),M.remoteSyncer.applyRemoteEvent(H))]:[3,10];case 9:D.sent(),D.label=10;case 10:return[3,13];case 11:return tt("RemoteStore","Failed to raise snapshot:",b=D.sent()),[4,Hg(a,b)];case 12:return D.sent(),[3,13];case 13:return[2]}var M,F,H})})}function Hg(a,s,l){return(0,L.mG)(this,void 0,void 0,function(){var f=this;return(0,L.Jh)(this,function(m){switch(m.label){case 0:if(!vs(s))throw s;return a.Or.add(1),[4,ul(a)];case 1:return m.sent(),a.Br.set("Offline"),l||(l=function(){return l_(a.localStore)}),a.asyncQueue.enqueueRetryable(function(){return(0,L.mG)(f,void 0,void 0,function(){return(0,L.Jh)(this,function(b){switch(b.label){case 0:return tt("RemoteStore","Retrying IndexedDB access"),[4,l()];case 1:return b.sent(),a.Or.delete(1),[4,dh(a)];case 2:return b.sent(),[2]}})})}),[2]}})})}function uf(a,s){return s().catch(function(l){return Hg(a,l,s)})}function hh(a){return(0,L.mG)(this,void 0,void 0,function(){var s,l,f,m,b;return(0,L.Jh)(this,function(D){switch(D.label){case 0:s=vt(a),l=Zo(s),f=s.Fr.length>0?s.Fr[s.Fr.length-1].batchId:-1,D.label=1;case 1:if(!(Ka(M=s)&&M.Fr.length<10))return[3,7];D.label=2;case 2:return D.trys.push([2,4,,6]),[4,d_(s.localStore,f)];case 3:return null===(m=D.sent())?(0===s.Fr.length&&l.ir(),[3,7]):(f=m.batchId,function(M,F){M.Fr.push(F);var H=Zo(M);H.er()&&H.pr&&H.Er(F.mutations)}(s,m),[3,6]);case 4:return b=D.sent(),[4,Hg(s,b)];case 5:return D.sent(),[3,6];case 6:return[3,1];case 7:return rd(s)&&py(s),[2]}var M})})}function rd(a){return Ka(a)&&!Zo(a).tr()&&a.Fr.length>0}function py(a){Zo(a).start()}function __(a){return(0,L.mG)(this,void 0,void 0,function(){return(0,L.Jh)(this,function(s){return Zo(a).Ar(),[2]})})}function jw(a){return(0,L.mG)(this,void 0,void 0,function(){var s,l,f;return(0,L.Jh)(this,function(b){for(s=Zo(a),l=0,f=a.Fr;l<f.length;l++)s.Er(f[l].mutations);return[2]})})}function Hw(a,s,l){return(0,L.mG)(this,void 0,void 0,function(){var f,m;return(0,L.Jh)(this,function(b){switch(b.label){case 0:return f=a.Fr.shift(),m=Ql.from(f,s,l),[4,uf(a,function(){return a.remoteSyncer.applySuccessfulWrite(m)})];case 1:return b.sent(),[4,hh(a)];case 2:return b.sent(),[2]}})})}function Vr(a,s){return(0,L.mG)(this,void 0,void 0,function(){return(0,L.Jh)(this,function(l){switch(l.label){case 0:return s&&Zo(a).pr?[4,function(f,m){return(0,L.mG)(this,void 0,void 0,function(){var b,D;return(0,L.Jh)(this,function(M){switch(M.label){case 0:return gs(D=m.code)&&D!==ke.ABORTED?(b=f.Fr.shift(),Zo(f).sr(),[4,uf(f,function(){return f.remoteSyncer.rejectFailedWrite(b.batchId,m)})]):[3,3];case 1:return M.sent(),[4,hh(f)];case 2:M.sent(),M.label=3;case 3:return[2]}})})}(a,s)]:[3,2];case 1:l.sent(),l.label=2;case 2:return rd(a)&&py(a),[2]}})})}function gy(a,s){return(0,L.mG)(this,void 0,void 0,function(){var l;return(0,L.Jh)(this,function(f){switch(f.label){case 0:return l=vt(a),s?(l.Or.delete(2),[4,dh(l)]):[3,2];case 1:return f.sent(),[3,5];case 2:return s?[3,4]:(l.Or.add(2),[4,ul(l)]);case 3:f.sent(),l.Br.set("Unknown"),f.label=4;case 4:f.label=5;case 5:return[2]}})})}function id(a){var l,f,m,b,s=this;return a.Ur||(a.Ur=(l=a.datastore,f=a.asyncQueue,m={Ii:jg.bind(null,a),Ri:Cp.bind(null,a),_r:Bw.bind(null,a)},(b=vt(l)).br(),new y_(f,b.Hi,b.credentials,b.R,m)),a.Mr.push(function(l){return(0,L.mG)(s,void 0,void 0,function(){return(0,L.Jh)(this,function(f){switch(f.label){case 0:return l?(a.Ur.sr(),fy(a)?hy(a):a.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,a.Ur.stop()];case 2:f.sent(),Ep(a),f.label=3;case 3:return[2]}})})})),a.Ur}function Zo(a){var l,f,m,b,s=this;return a.Kr||(a.Kr=(l=a.datastore,f=a.asyncQueue,m={Ii:__.bind(null,a),Ri:Vr.bind(null,a),Ir:jw.bind(null,a),Tr:Hw.bind(null,a)},(b=vt(l)).br(),new yE(f,b.Hi,b.credentials,b.R,m)),a.Mr.push(function(l){return(0,L.mG)(s,void 0,void 0,function(){return(0,L.Jh)(this,function(f){switch(f.label){case 0:return l?(a.Kr.sr(),[4,hh(a)]):[3,2];case 1:return f.sent(),[3,4];case 2:return[4,a.Kr.stop()];case 3:f.sent(),a.Fr.length>0&&(tt("RemoteStore","Stopping write stream with "+a.Fr.length+" pending writes"),a.Fr=[]),f.label=4;case 4:return[2]}})})})),a.Kr}var Dp=function(){function a(s,l,f,m,b){this.asyncQueue=s,this.timerId=l,this.targetTimeMs=f,this.op=m,this.removalCallback=b,this.deferred=new Jn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(D){})}return a.createAndSchedule=function(s,l,f,m,b){var D=new a(s,l,Date.now()+f,m,b);return D.start(f),D},a.prototype.start=function(s){var l=this;this.timerHandle=setTimeout(function(){return l.handleDelayElapsed()},s)},a.prototype.skipDelay=function(){return this.handleDelayElapsed()},a.prototype.cancel=function(s){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new et(ke.CANCELLED,"Operation cancelled"+(s?": "+s:""))))},a.prototype.handleDelayElapsed=function(){var s=this;this.asyncQueue.enqueueAndForget(function(){return null!==s.timerHandle?(s.clearTimeout(),s.op().then(function(l){return s.deferred.resolve(l)})):Promise.resolve()})},a.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},a}();function cl(a,s){if(fr("AsyncQueue",s+": "+a),vs(a))return new et(ke.UNAVAILABLE,s+": "+a);throw a}var my=function(){function a(s){this.comparator=s?function(l,f){return s(l,f)||jt.comparator(l.key,f.key)}:function(l,f){return jt.comparator(l.key,f.key)},this.keyedMap=Gl(),this.sortedSet=new Zi(this.comparator)}return a.emptySet=function(s){return new a(s.comparator)},a.prototype.has=function(s){return null!=this.keyedMap.get(s)},a.prototype.get=function(s){return this.keyedMap.get(s)},a.prototype.first=function(){return this.sortedSet.minKey()},a.prototype.last=function(){return this.sortedSet.maxKey()},a.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},a.prototype.indexOf=function(s){var l=this.keyedMap.get(s);return l?this.sortedSet.indexOf(l):-1},Object.defineProperty(a.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),a.prototype.forEach=function(s){this.sortedSet.inorderTraversal(function(l,f){return s(l),!1})},a.prototype.add=function(s){var l=this.delete(s.key);return l.copy(l.keyedMap.insert(s.key,s),l.sortedSet.insert(s,null))},a.prototype.delete=function(s){var l=this.get(s);return l?this.copy(this.keyedMap.remove(s),this.sortedSet.remove(l)):this},a.prototype.isEqual=function(s){if(!(s instanceof a)||this.size!==s.size)return!1;for(var l=this.sortedSet.getIterator(),f=s.sortedSet.getIterator();l.hasNext();){var m=l.getNext().key,b=f.getNext().key;if(!m.isEqual(b))return!1}return!0},a.prototype.toString=function(){var s=[];return this.forEach(function(l){s.push(l.toString())}),0===s.length?"DocumentSet ()":"DocumentSet (\n  "+s.join("  \n")+"\n)"},a.prototype.copy=function(s,l){var f=new a;return f.comparator=this.comparator,f.keyedMap=s,f.sortedSet=l,f},a}(),cf=function(){function a(){this.Qr=new Zi(jt.comparator)}return a.prototype.track=function(s){var l=s.doc.key,f=this.Qr.get(l);f?0!==s.type&&3===f.type?this.Qr=this.Qr.insert(l,s):3===s.type&&1!==f.type?this.Qr=this.Qr.insert(l,{type:f.type,doc:s.doc}):2===s.type&&2===f.type?this.Qr=this.Qr.insert(l,{type:2,doc:s.doc}):2===s.type&&0===f.type?this.Qr=this.Qr.insert(l,{type:0,doc:s.doc}):1===s.type&&0===f.type?this.Qr=this.Qr.remove(l):1===s.type&&2===f.type?this.Qr=this.Qr.insert(l,{type:1,doc:f.doc}):0===s.type&&1===f.type?this.Qr=this.Qr.insert(l,{type:2,doc:s.doc}):kt():this.Qr=this.Qr.insert(l,s)},a.prototype.jr=function(){var s=[];return this.Qr.inorderTraversal(function(l,f){s.push(f)}),s},a}(),lf=function(){function a(s,l,f,m,b,D,M,F){this.query=s,this.docs=l,this.oldDocs=f,this.docChanges=m,this.mutatedKeys=b,this.fromCache=D,this.syncStateChanged=M,this.excludesMetadataChanges=F}return a.fromInitialDocuments=function(s,l,f,m){var b=[];return l.forEach(function(D){b.push({type:0,doc:D})}),new a(s,l,my.emptySet(l),b,f,m,!0,!1)},Object.defineProperty(a.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),a.prototype.isEqual=function(s){if(!(this.fromCache===s.fromCache&&this.syncStateChanged===s.syncStateChanged&&this.mutatedKeys.isEqual(s.mutatedKeys)&&Vo(this.query,s.query)&&this.docs.isEqual(s.docs)&&this.oldDocs.isEqual(s.oldDocs)))return!1;var l=this.docChanges,f=s.docChanges;if(l.length!==f.length)return!1;for(var m=0;m<l.length;m++)if(l[m].type!==f[m].type||!l[m].doc.isEqual(f[m].doc))return!1;return!0},a}(),$w=function(){this.Wr=void 0,this.listeners=[]},yy=function(){this.queries=new Tu(function(a){return Uo(a)},Vo),this.onlineState="Unknown",this.Gr=new Set};function df(a,s){return(0,L.mG)(this,void 0,void 0,function(){var l,f,m,b,D,M,F;return(0,L.Jh)(this,function(H){switch(H.label){case 0:if(l=vt(a),m=!1,(b=l.queries.get(f=s.query))||(m=!0,b=new $w),!m)return[3,4];H.label=1;case 1:return H.trys.push([1,3,,4]),D=b,[4,l.onListen(f)];case 2:return D.Wr=H.sent(),[3,4];case 3:return M=H.sent(),F=cl(M,"Initialization of query '"+Xc(s.query)+"' failed"),[2,void s.onError(F)];case 4:return l.queries.set(f,b),b.listeners.push(s),s.zr(l.onlineState),b.Wr&&s.Hr(b.Wr)&&Tp(l),[2]}})})}function hf(a,s){return(0,L.mG)(this,void 0,void 0,function(){var l,f,m,b,D;return(0,L.Jh)(this,function(M){return l=vt(a),m=!1,(b=l.queries.get(f=s.query))&&(D=b.listeners.indexOf(s))>=0&&(b.listeners.splice(D,1),m=0===b.listeners.length),m?[2,(l.queries.delete(f),l.onUnlisten(f))]:[2]})})}function od(a,s){for(var l=vt(a),f=!1,m=0,b=s;m<b.length;m++){var D=b[m],F=l.queries.get(D.query);if(F){for(var H=0,Y=F.listeners;H<Y.length;H++)Y[H].Hr(D)&&(f=!0);F.Wr=D}}f&&Tp(l)}function vE(a,s,l){var f=vt(a),m=f.queries.get(s);if(m)for(var b=0,D=m.listeners;b<D.length;b++)D[b].onError(l);f.queries.delete(s)}function Tp(a){a.Gr.forEach(function(s){s.next()})}var sd=function(){function a(s,l,f){this.query=s,this.Jr=l,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=f||{}}return a.prototype.Hr=function(s){if(!this.options.includeMetadataChanges){for(var l=[],f=0,m=s.docChanges;f<m.length;f++){var b=m[f];3!==b.type&&l.push(b)}s=new lf(s.query,s.docs,s.oldDocs,l,s.mutatedKeys,s.fromCache,s.syncStateChanged,!0)}var D=!1;return this.Yr?this.Zr(s)&&(this.Jr.next(s),D=!0):this.eo(s,this.onlineState)&&(this.no(s),D=!0),this.Xr=s,D},a.prototype.onError=function(s){this.Jr.error(s)},a.prototype.zr=function(s){this.onlineState=s;var l=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,s)&&(this.no(this.Xr),l=!0),l},a.prototype.eo=function(s,l){return!s.fromCache||!(this.options.so&&"Offline"!==l||s.docs.isEmpty()&&"Offline"!==l)},a.prototype.Zr=function(s){return s.docChanges.length>0||!!(s.syncStateChanged||this.Xr&&this.Xr.hasPendingWrites!==s.hasPendingWrites)&&!0===this.options.includeMetadataChanges},a.prototype.no=function(s){s=lf.fromInitialDocuments(s.query,s.docs,s.mutatedKeys,s.fromCache),this.Yr=!0,this.Jr.next(s)},a}(),vy=function(){function a(s,l){this.payload=s,this.byteLength=l}return a.prototype.io=function(){return"metadata"in this.payload},a}(),w_=function(){function a(s){this.R=s}return a.prototype.qn=function(s){return qa(this.R,s)},a.prototype.Un=function(s){return s.metadata.exists?$o(this.R,s.document,!1):ri.newNoDocument(this.qn(s.metadata.name),this.Kn(s.metadata.readTime))},a.prototype.Kn=function(s){return Ki(s)},a}();!function(){function a(s,l,f){this.ro=s,this.localStore=l,this.R=f,this.queries=[],this.documents=[],this.progress=function Gg(a){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:a.totalDocuments,totalBytes:a.totalBytes}}(s)}a.prototype.oo=function(s){this.progress.bytesLoaded+=s.byteLength;var l=this.progress.documentsLoaded;return s.payload.namedQuery?this.queries.push(s.payload.namedQuery):s.payload.documentMetadata?(this.documents.push({metadata:s.payload.documentMetadata}),s.payload.documentMetadata.exists||++l):s.payload.document&&(this.documents[this.documents.length-1].document=s.payload.document,++l),l!==this.progress.documentsLoaded?(this.progress.documentsLoaded=l,Object.assign({},this.progress)):null},a.prototype.co=function(s){for(var l=new Map,f=new w_(this.R),m=0,b=s;m<b.length;m++){var D=b[m];if(D.metadata.queries)for(var M=f.qn(D.metadata.name),F=0,H=D.metadata.queries;F<H.length;F++){var Y=H[F],se=(l.get(Y)||qn()).add(M);l.set(Y,se)}}return l},a.prototype.complete=function(){return(0,L.mG)(this,void 0,void 0,function(){var s,l,f,m,b;return(0,L.Jh)(this,function(D){switch(D.label){case 0:return[4,gp(this.localStore,new w_(this.R),this.documents,this.ro.id)];case 1:s=D.sent(),l=this.co(this.documents),f=0,m=this.queries,D.label=2;case 2:return f<m.length?[4,iy(this.localStore,b=m[f],l.get(b.name))]:[3,5];case 3:D.sent(),D.label=4;case 4:return f++,[3,2];case 5:return[2,(this.progress.taskState="Success",new kg(Object.assign({},this.progress),s))]}})})}}();var _y=function(a){this.key=a},wy=function(a){this.key=a},b_=function(){function a(s,l){this.query=s,this.uo=l,this.ao=null,this.current=!1,this.ho=qn(),this.mutatedKeys=qn(),this.lo=ao(s),this.fo=new my(this.lo)}return Object.defineProperty(a.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),a.prototype._o=function(s,l){var f=this,m=l?l.mo:new cf,b=l?l.fo:this.fo,D=l?l.mutatedKeys:this.mutatedKeys,M=b,F=!1,H=Ar(this.query)&&b.size===this.query.limit?b.last():null,Y=dc(this.query)&&b.size===this.query.limit?b.first():null;if(s.inorderTraversal(function(de,Se){var De=b.get(de),$e=Vs(f.query,Se)?Se:null,gt=!!De&&f.mutatedKeys.has(De.key),bt=!!$e&&($e.hasLocalMutations||f.mutatedKeys.has($e.key)&&$e.hasCommittedMutations),Qt=!1;De&&$e?De.data.isEqual($e.data)?gt!==bt&&(m.track({type:3,doc:$e}),Qt=!0):f.yo(De,$e)||(m.track({type:2,doc:$e}),Qt=!0,(H&&f.lo($e,H)>0||Y&&f.lo($e,Y)<0)&&(F=!0)):!De&&$e?(m.track({type:0,doc:$e}),Qt=!0):De&&!$e&&(m.track({type:1,doc:De}),Qt=!0,(H||Y)&&(F=!0)),Qt&&($e?(M=M.add($e),D=bt?D.add(de):D.delete(de)):(M=M.delete(de),D=D.delete(de)))}),Ar(this.query)||dc(this.query))for(;M.size>this.query.limit;){var se=Ar(this.query)?M.last():M.first();M=M.delete(se.key),D=D.delete(se.key),m.track({type:1,doc:se})}return{fo:M,mo:m,Nn:F,mutatedKeys:D}},a.prototype.yo=function(s,l){return s.hasLocalMutations&&l.hasCommittedMutations&&!l.hasLocalMutations},a.prototype.applyChanges=function(s,l,f){var m=this,b=this.fo;this.fo=s.fo,this.mutatedKeys=s.mutatedKeys;var D=s.mo.jr();D.sort(function(Y,se){return Se=se.type,(De=function($e){switch($e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return kt()}})(Y.type)-De(Se)||m.lo(Y.doc,se.doc);var Se,De}),this.po(f);var M=l?this.Eo():[],F=0===this.ho.size&&this.current?1:0,H=F!==this.ao;return this.ao=F,0!==D.length||H?{snapshot:new lf(this.query,s.fo,b,D,s.mutatedKeys,0===F,H,!1),To:M}:{To:M}},a.prototype.zr=function(s){return this.current&&"Offline"===s?(this.current=!1,this.applyChanges({fo:this.fo,mo:new cf,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},a.prototype.Io=function(s){return!this.uo.has(s)&&!!this.fo.has(s)&&!this.fo.get(s).hasLocalMutations},a.prototype.po=function(s){var l=this;s&&(s.addedDocuments.forEach(function(f){return l.uo=l.uo.add(f)}),s.modifiedDocuments.forEach(function(f){}),s.removedDocuments.forEach(function(f){return l.uo=l.uo.delete(f)}),this.current=s.current)},a.prototype.Eo=function(){var s=this;if(!this.current)return[];var l=this.ho;this.ho=qn(),this.fo.forEach(function(m){s.Io(m.key)&&(s.ho=s.ho.add(m.key))});var f=[];return l.forEach(function(m){s.ho.has(m)||f.push(new wy(m))}),this.ho.forEach(function(m){l.has(m)||f.push(new _y(m))}),f},a.prototype.Ao=function(s){this.uo=s.Bn,this.ho=qn();var l=this._o(s.documents);return this.applyChanges(l,!0)},a.prototype.Ro=function(){return lf.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},a}(),I_=function(a,s,l){this.query=a,this.targetId=s,this.view=l},E_=function(a){this.key=a,this.bo=!1},Gw=function(){function a(s,l,f,m,b,D){this.localStore=s,this.remoteStore=l,this.eventManager=f,this.sharedClientState=m,this.currentUser=b,this.maxConcurrentLimboResolutions=D,this.vo={},this.Po=new Tu(function(M){return Uo(M)},Vo),this.Vo=new Map,this.So=new Set,this.Do=new Zi(jt.comparator),this.Co=new Map,this.No=new rf,this.xo={},this.ko=new Map,this.Fo=bc.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(a.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),a}();function Ec(a,s){return(0,L.mG)(this,void 0,void 0,function(){var l,m,b,D,M;return(0,L.Jh)(this,function(F){switch(F.label){case 0:return l=Dc(a),(b=l.Po.get(s))?(l.sharedClientState.addLocalQueryTarget(b.targetId),m=b.view.Ro(),[3,4]):[3,1];case 1:return[4,nf(l.localStore,Fi(s))];case 2:return D=F.sent(),M=l.sharedClientState.addLocalQueryTarget(D.targetId),[4,ff(l,s,D.targetId,"current"===M)];case 3:m=F.sent(),l.isPrimaryClient&&Ip(l.remoteStore,D),F.label=4;case 4:return[2,m]}})})}function ff(a,s,l,f){return(0,L.mG)(this,void 0,void 0,function(){var m,b,D,M,F,H;return(0,L.Jh)(this,function(Y){switch(Y.label){case 0:return a.Oo=function(se,de,Se){return function(De,$e,gt,bt){return(0,L.mG)(this,void 0,void 0,function(){var Qt,sn,On;return(0,L.Jh)(this,function(Wn){switch(Wn.label){case 0:return(Qt=$e.view._o(gt)).Nn?[4,ah(De.localStore,$e.query,!1).then(function(ur){return $e.view._o(ur.documents,Qt)})]:[3,2];case 1:Qt=Wn.sent(),Wn.label=2;case 2:return sn=bt&&bt.targetChanges.get($e.targetId),On=$e.view.applyChanges(Qt,De.isPrimaryClient,sn),[2,(Ey(De,$e.targetId,On.To),On.snapshot)]}})})}(a,se,de,Se)},[4,ah(a.localStore,s,!0)];case 1:return m=Y.sent(),b=new b_(s,m.Bn),D=b._o(m.documents),M=Yd.createSynthesizedTargetChangeForCurrentChange(l,f&&"Offline"!==a.onlineState),F=b.applyChanges(D,a.isPrimaryClient,M),Ey(a,l,F.To),H=new I_(s,l,b),[2,(a.Po.set(s,H),a.Vo.has(l)?a.Vo.get(l).push(s):a.Vo.set(l,[s]),F.snapshot)]}})})}function qw(a,s){return(0,L.mG)(this,void 0,void 0,function(){var l,f,m;return(0,L.Jh)(this,function(b){switch(b.label){case 0:return l=vt(a),f=l.Po.get(s),(m=l.Vo.get(f.targetId)).length>1?[2,(l.Vo.set(f.targetId,m.filter(function(D){return!Vo(D,s)})),void l.Po.delete(s))]:l.isPrimaryClient?(l.sharedClientState.removeLocalQueryTarget(f.targetId),l.sharedClientState.isActiveQueryTarget(f.targetId)?[3,2]:[4,gi(l.localStore,f.targetId,!1).then(function(){l.sharedClientState.clearQueryState(f.targetId),Bg(l.remoteStore,f.targetId),ad(l,f.targetId)}).catch(Ea)]):[3,3];case 1:b.sent(),b.label=2;case 2:return[3,5];case 3:return ad(l,f.targetId),[4,gi(l.localStore,f.targetId,!0)];case 4:b.sent(),b.label=5;case 5:return[2]}})})}function C_(a,s,l){return(0,L.mG)(this,void 0,void 0,function(){var f,m,b,D;return(0,L.Jh)(this,function(M){switch(M.label){case 0:f=O_(a),M.label=1;case 1:return M.trys.push([1,5,,6]),[4,(F=f.localStore,H=s,se=vt(F),de=di.now(),Se=H.reduce(function(De,$e){return De.add($e.key)},qn()),se.persistence.runTransaction("Locally write mutations","readwrite",function(De){return se.Mn.pn(De,Se).next(function($e){Y=$e;for(var gt=[],bt=0,Qt=H;bt<Qt.length;bt++){var sn=Qt[bt],On=Ha(sn,Y.get(sn.key));null!=On&&gt.push(new ii(sn.key,On,Km(On.value.mapValue),Bt.exists(!0)))}return se._n.addMutationBatch(De,de,gt,H)})}).then(function(De){return De.applyToLocalDocumentSet(Y),{batchId:De.batchId,changes:Y}}))];case 2:return m=M.sent(),f.sharedClientState.addPendingMutation(m.batchId),function(F,H,Y){var se=F.xo[F.currentUser.toKey()];se||(se=new Zi(fn)),se=se.insert(H,Y),F.xo[F.currentUser.toKey()]=se}(f,m.batchId,l),[4,Ko(f,m.changes)];case 3:return M.sent(),[4,hh(f.remoteStore)];case 4:return M.sent(),[3,6];case 5:return b=M.sent(),D=cl(b,"Failed to persist write"),l.reject(D),[3,6];case 6:return[2]}var F,H,Y,se,de,Se})})}function D_(a,s){return(0,L.mG)(this,void 0,void 0,function(){var l,f;return(0,L.Jh)(this,function(m){switch(m.label){case 0:l=vt(a),m.label=1;case 1:return m.trys.push([1,4,,6]),[4,kw(l.localStore,s)];case 2:return f=m.sent(),s.targetChanges.forEach(function(b,D){var M=l.Co.get(D);M&&(rn(b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size<=1),b.addedDocuments.size>0?M.bo=!0:b.modifiedDocuments.size>0?rn(M.bo):b.removedDocuments.size>0&&(rn(M.bo),M.bo=!1))}),[4,Ko(l,f,s)];case 3:return m.sent(),[3,6];case 4:return[4,Ea(m.sent())];case 5:return m.sent(),[3,6];case 6:return[2]}})})}function T_(a,s,l){var f=vt(a);if(f.isPrimaryClient&&0===l||!f.isPrimaryClient&&1===l){var m=[];f.Po.forEach(function(b,D){var M=D.view.zr(s);M.snapshot&&m.push(M.snapshot)}),function(b,D){var M=vt(b);M.onlineState=D;var F=!1;M.queries.forEach(function(H,Y){for(var se=0,de=Y.listeners;se<de.length;se++)de[se].zr(D)&&(F=!0)}),F&&Tp(M)}(f.eventManager,s),m.length&&f.vo._r(m),f.onlineState=s,f.isPrimaryClient&&f.sharedClientState.setOnlineState(s)}}function S_(a,s,l){return(0,L.mG)(this,void 0,void 0,function(){var f,m,b,D,M,F;return(0,L.Jh)(this,function(H){switch(H.label){case 0:return(f=vt(a)).sharedClientState.updateQueryState(s,"rejected",l),m=f.Co.get(s),(b=m&&m.key)?(D=(D=new Zi(jt.comparator)).insert(b,ri.newNoDocument(b,bn.min())),M=qn().add(b),F=new Kh(bn.min(),new Map,new Ei(fn),D,M),[4,D_(f,F)]):[3,2];case 1:return H.sent(),f.Do=f.Do.remove(b),f.Co.delete(s),qg(f),[3,4];case 2:return[4,gi(f.localStore,s,!1).then(function(){return ad(f,s,l)}).catch(Ea)];case 3:H.sent(),H.label=4;case 4:return[2]}})})}function A_(a,s){return(0,L.mG)(this,void 0,void 0,function(){var l,f,m;return(0,L.Jh)(this,function(b){switch(b.label){case 0:l=vt(a),f=s.batch.batchId,b.label=1;case 1:return b.trys.push([1,4,,6]),[4,Pw(l.localStore,s)];case 2:return m=b.sent(),In(l,f,null),by(l,f),l.sharedClientState.updateMutationState(f,"acknowledged"),[4,Ko(l,m)];case 3:return b.sent(),[3,6];case 4:return[4,Ea(b.sent())];case 5:return b.sent(),[3,6];case 6:return[2]}})})}function zw(a,s,l){return(0,L.mG)(this,void 0,void 0,function(){var f,m;return(0,L.Jh)(this,function(b){switch(b.label){case 0:f=vt(a),b.label=1;case 1:return b.trys.push([1,4,,6]),[4,(D=f.localStore,M=s,F=vt(D),F.persistence.runTransaction("Reject batch","readwrite-primary",function(H){var Y;return F._n.lookupMutationBatch(H,M).next(function(se){return rn(null!==se),Y=se.keys(),F._n.removeMutationBatch(H,se)}).next(function(){return F._n.performConsistencyCheck(H)}).next(function(){return F.Mn.pn(H,Y)})}))];case 2:return m=b.sent(),In(f,s,l),by(f,s),f.sharedClientState.updateMutationState(s,"rejected",l),[4,Ko(f,m)];case 3:return b.sent(),[3,6];case 4:return[4,Ea(b.sent())];case 5:return b.sent(),[3,6];case 6:return[2]}var D,M,F})})}function Ww(a,s){return(0,L.mG)(this,void 0,void 0,function(){var l,f,m,b,D;return(0,L.Jh)(this,function(M){switch(M.label){case 0:Ka((l=vt(a)).remoteStore)||tt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),M.label=1;case 1:return M.trys.push([1,3,,4]),[4,(F=l.localStore,H=vt(F),H.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(Y){return H._n.getHighestUnacknowledgedBatchId(Y)}))];case 2:return-1===(f=M.sent())?[2,void s.resolve()]:((m=l.ko.get(f)||[]).push(s),l.ko.set(f,m),[3,4]);case 3:return b=M.sent(),D=cl(b,"Initialization of waitForPendingWrites() operation failed"),s.reject(D),[3,4];case 4:return[2]}var F,H})})}function by(a,s){(a.ko.get(s)||[]).forEach(function(l){l.resolve()}),a.ko.delete(s)}function In(a,s,l){var f=vt(a),m=f.xo[f.currentUser.toKey()];if(m){var b=m.get(s);b&&(l?b.reject(l):b.resolve(),m=m.remove(s)),f.xo[f.currentUser.toKey()]=m}}function ad(a,s,l){void 0===l&&(l=null),a.sharedClientState.removeLocalQueryTarget(s);for(var f=0,m=a.Vo.get(s);f<m.length;f++){var b=m[f];a.Po.delete(b),l&&a.vo.Mo(b,l)}a.Vo.delete(s),a.isPrimaryClient&&a.No.Zn(s).forEach(function(D){a.No.containsKey(D)||Iy(a,D)})}function Iy(a,s){a.So.delete(s.path.canonicalString());var l=a.Do.get(s);null!==l&&(Bg(a.remoteStore,l),a.Do=a.Do.remove(s),a.Co.delete(l),qg(a))}function Ey(a,s,l){for(var f=0,m=l;f<m.length;f++){var b=m[f];b instanceof _y?(a.No.addReference(b.key,s),Zw(a,b)):b instanceof wy?(tt("SyncEngine","Document no longer in limbo: "+b.key),a.No.removeReference(b.key,s),a.No.containsKey(b.key)||Iy(a,b.key)):kt()}}function Zw(a,s){var l=s.key,f=l.path.canonicalString();a.Do.get(l)||a.So.has(f)||(tt("SyncEngine","New document in limbo: "+l),a.So.add(f),qg(a))}function qg(a){for(;a.So.size>0&&a.Do.size<a.maxConcurrentLimboResolutions;){var s=a.So.values().next().value;a.So.delete(s);var l=new jt(Vn.fromString(s)),f=a.Fo.next();a.Co.set(f,new E_(l)),a.Do=a.Do.insert(l,f),Ip(a.remoteStore,new Er(Fi(hs(l.path)),f,2,ti.o))}}function Ko(a,s,l){return(0,L.mG)(this,void 0,void 0,function(){var f,m,b,D;return(0,L.Jh)(this,function(M){switch(M.label){case 0:return f=vt(a),m=[],b=[],D=[],f.Po.isEmpty()?[3,3]:(f.Po.forEach(function(F,H){D.push(f.Oo(H,s,l).then(function(Y){if(Y){f.isPrimaryClient&&f.sharedClientState.updateQueryState(H.targetId,Y.fromCache?"not-current":"current"),m.push(Y);var se=Ow.Pn(H.targetId,Y);b.push(se)}}))}),[4,Promise.all(D)]);case 1:return M.sent(),f.vo._r(m),[4,function(F,H){return(0,L.mG)(this,void 0,void 0,function(){var Y,se,de,Se,De,$e,gt,Qt;return(0,L.Jh)(this,function(sn){switch(sn.label){case 0:Y=vt(F),sn.label=1;case 1:return sn.trys.push([1,3,,4]),[4,Y.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(On){return at.forEach(H,function(Wn){return at.forEach(Wn.bn,function(ur){return Y.persistence.referenceDelegate.addReference(On,Wn.targetId,ur)}).next(function(){return at.forEach(Wn.vn,function(ur){return Y.persistence.referenceDelegate.removeReference(On,Wn.targetId,ur)})})})})];case 2:return sn.sent(),[3,4];case 3:if(!vs(se=sn.sent()))throw se;return tt("LocalStore","Failed to update sequence numbers: "+se),[3,4];case 4:for(de=0,Se=H;de<Se.length;de++)$e=(De=Se[de]).targetId,De.fromCache||(gt=Y.kn.get($e),Qt=gt.withLastLimboFreeSnapshotVersion(gt.snapshotVersion),Y.kn=Y.kn.insert($e,Qt));return[2]}})})}(f.localStore,b)];case 2:M.sent(),M.label=3;case 3:return[2]}})})}function Cc(a,s){return(0,L.mG)(this,void 0,void 0,function(){var l,f;return(0,L.Jh)(this,function(m){switch(m.label){case 0:return(l=vt(a)).currentUser.isEqual(s)?[3,3]:(tt("SyncEngine","User change. New user:",s.toKey()),[4,Fg(l.localStore,s)]);case 1:return f=m.sent(),l.currentUser=s,(b=l).ko.forEach(function(M){M.forEach(function(F){F.reject(new et(ke.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),b.ko.clear(),l.sharedClientState.handleUserChange(s,f.removedBatchIds,f.addedBatchIds),[4,Ko(l,f.Ln)];case 2:m.sent(),m.label=3;case 3:return[2]}var b})})}function x_(a,s){var l=vt(a),f=l.Co.get(s);if(f&&f.bo)return qn().add(f.key);var m=qn(),b=l.Vo.get(s);if(!b)return m;for(var D=0,M=b;D<M.length;D++){var H=l.Po.get(M[D]);m=m.unionWith(H.view.wo)}return m}function M_(a,s){return(0,L.mG)(this,void 0,void 0,function(){var l,f,m;return(0,L.Jh)(this,function(b){switch(b.label){case 0:return[4,ah((l=vt(a)).localStore,s.query,!0)];case 1:return f=b.sent(),m=s.view.Ao(f),[2,(l.isPrimaryClient&&Ey(l,s.targetId,m.To),m)]}})})}function Kw(a){return(0,L.mG)(this,void 0,void 0,function(){var s;return(0,L.Jh)(this,function(l){return[2,uh((s=vt(a)).localStore).then(function(f){return Ko(s,f)})]})})}function _E(a,s,l,f){return(0,L.mG)(this,void 0,void 0,function(){var m,b;return(0,L.Jh)(this,function(D){switch(D.label){case 0:return[4,(M=(m=vt(a)).localStore,F=s,H=vt(M),Y=vt(H._n),H.persistence.runTransaction("Lookup mutation documents","readonly",function(se){return Y.jt(se,F).next(function(de){return de?H.Mn.pn(se,de):at.resolve(null)})}))];case 1:return null===(b=D.sent())?[3,6]:"pending"!==l?[3,3]:[4,hh(m.remoteStore)];case 2:return D.sent(),[3,4];case 3:"acknowledged"===l||"rejected"===l?(In(m,s,f||null),by(m,s),function(M,F){vt(vt(M)._n).Gt(F)}(m.localStore,s)):kt(),D.label=4;case 4:return[4,Ko(m,b)];case 5:return D.sent(),[3,7];case 6:tt("SyncEngine","Cannot apply mutation batch with id: "+s),D.label=7;case 7:return[2]}var M,F,H,Y})})}function R_(a,s){return(0,L.mG)(this,void 0,void 0,function(){var l,f,m,b,D,F,H;return(0,L.Jh)(this,function(Y){switch(Y.label){case 0:return Dc(l=vt(a)),O_(l),!0!==s||!0===l.$o?[3,3]:(f=l.sharedClientState.getAllActiveQueryTargets(),[4,ud(l,f.toArray())]);case 1:return m=Y.sent(),l.$o=!0,[4,gy(l.remoteStore,!0)];case 2:for(Y.sent(),b=0,D=m;b<D.length;b++)Ip(l.remoteStore,D[b]);return[3,7];case 3:return!1!==s||!1===l.$o?[3,7]:(F=[],H=Promise.resolve(),l.Vo.forEach(function(se,de){l.sharedClientState.isLocalQueryTarget(de)?F.push(de):H=H.then(function(){return ad(l,de),gi(l.localStore,de,!0)}),Bg(l.remoteStore,de)}),[4,H]);case 4:return Y.sent(),[4,ud(l,F)];case 5:return Y.sent(),(de=vt(l)).Co.forEach(function(Se,De){Bg(de.remoteStore,De)}),de.No.ts(),de.Co=new Map,de.Do=new Zi(jt.comparator),l.$o=!1,[4,gy(l.remoteStore,!1)];case 6:Y.sent(),Y.label=7;case 7:return[2]}var de})})}function ud(a,s,l){return(0,L.mG)(this,void 0,void 0,function(){var f,m,b,D,M,F,H,Y,se,de,De,$e,gt;return(0,L.Jh)(this,function(bt){switch(bt.label){case 0:f=vt(a),m=[],b=[],D=0,M=s,bt.label=1;case 1:return D<M.length?(H=void 0,(Y=f.Vo.get(F=M[D]))&&0!==Y.length?[4,nf(f.localStore,Fi(Y[0]))]:[3,7]):[3,13];case 2:H=bt.sent(),se=0,de=Y,bt.label=3;case 3:return se<de.length?(De=f.Po.get(de[se]),[4,M_(f,De)]):[3,6];case 4:($e=bt.sent()).snapshot&&b.push($e.snapshot),bt.label=5;case 5:return se++,[3,3];case 6:return[3,11];case 7:return[4,pp(f.localStore,F)];case 8:return gt=bt.sent(),[4,nf(f.localStore,gt)];case 9:return H=bt.sent(),[4,ff(f,cd(gt),F,!1)];case 10:bt.sent(),bt.label=11;case 11:m.push(H),bt.label=12;case 12:return D++,[3,1];case 13:return[2,(f.vo._r(b),m)]}})})}function cd(a){return lc(a.path,a.collectionGroup,a.orderBy,a.filters,a.limit,"F",a.startAt,a.endAt)}function ld(a){var s=vt(a);return vt(vt(s.localStore).persistence).fn()}function zg(a,s,l,f){return(0,L.mG)(this,void 0,void 0,function(){var m,b,D;return(0,L.Jh)(this,function(M){switch(M.label){case 0:return(m=vt(a)).$o?(tt("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!m.Vo.has(s))return[3,8];switch(l){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,uh(m.localStore)];case 3:return b=M.sent(),D=Kh.createSynthesizedRemoteEventForCurrentChange(s,"current"===l),[4,Ko(m,b,D)];case 4:return M.sent(),[3,8];case 5:return[4,gi(m.localStore,s,!0)];case 6:return M.sent(),ad(m,s,f),[3,8];case 7:kt(),M.label=8;case 8:return[2]}})})}function uo(a,s,l){return(0,L.mG)(this,void 0,void 0,function(){var f,m,b,D,M,F,H,Y,se;return(0,L.Jh)(this,function(Se){switch(Se.label){case 0:if(!(f=Dc(a)).$o)return[3,10];m=0,b=s,Se.label=1;case 1:return m<b.length?f.Vo.has(D=b[m])?(tt("SyncEngine","Adding an already active target "+D),[3,5]):[4,pp(f.localStore,D)]:[3,6];case 2:return M=Se.sent(),[4,nf(f.localStore,M)];case 3:return F=Se.sent(),[4,ff(f,cd(M),F.targetId,!1)];case 4:Se.sent(),Ip(f.remoteStore,F),Se.label=5;case 5:return m++,[3,1];case 6:H=function(De){return(0,L.Jh)(this,function($e){switch($e.label){case 0:return f.Vo.has(De)?[4,gi(f.localStore,De,!1).then(function(){Bg(f.remoteStore,De),ad(f,De)}).catch(Ea)]:[3,2];case 1:$e.sent(),$e.label=2;case 2:return[2]}})},Y=0,se=l,Se.label=7;case 7:return Y<se.length?[5,H(se[Y])]:[3,10];case 8:Se.sent(),Se.label=9;case 9:return Y++,[3,7];case 10:return[2]}})})}function Dc(a){var s=vt(a);return s.remoteStore.remoteSyncer.applyRemoteEvent=D_.bind(null,s),s.remoteStore.remoteSyncer.getRemoteKeysForTarget=x_.bind(null,s),s.remoteStore.remoteSyncer.rejectListen=S_.bind(null,s),s.vo._r=od.bind(null,s.eventManager),s.vo.Mo=vE.bind(null,s.eventManager),s}function O_(a){var s=vt(a);return s.remoteStore.remoteSyncer.applySuccessfulWrite=A_.bind(null,s),s.remoteStore.remoteSyncer.rejectFailedWrite=zw.bind(null,s),s}var N_=function(){function a(){this.synchronizeTabs=!1}return a.prototype.initialize=function(s){return(0,L.mG)(this,void 0,void 0,function(){return(0,L.Jh)(this,function(l){switch(l.label){case 0:return this.R=sf(s.databaseInfo.databaseId),this.sharedClientState=this.Bo(s),this.persistence=this.qo(s),[4,this.persistence.start()];case 1:return l.sent(),this.gcScheduler=this.Uo(s),this.localStore=this.Ko(s),[2]}})})},a.prototype.Uo=function(s){return null},a.prototype.Ko=function(s){return c_(this.persistence,new u_,s.initialUser,this.R)},a.prototype.qo=function(s){return new yp(Lw.bs,this.R)},a.prototype.Bo=function(s){return new Au},a.prototype.terminate=function(){return(0,L.mG)(this,void 0,void 0,function(){return(0,L.Jh)(this,function(s){switch(s.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return s.sent(),[4,this.persistence.shutdown()];case 2:return s.sent(),[2]}})})},a}(),Cy=function(a){function s(l,f,m){var b=this;return(b=a.call(this)||this).Qo=l,b.cacheSizeBytes=f,b.forceOwnership=m,b.synchronizeTabs=!1,b}return(0,L.ZT)(s,a),s.prototype.initialize=function(l){return(0,L.mG)(this,void 0,void 0,function(){var f=this;return(0,L.Jh)(this,function(m){switch(m.label){case 0:return[4,a.prototype.initialize.call(this,l)];case 1:return m.sent(),[4,Wo(this.localStore)];case 2:return m.sent(),[4,this.Qo.initialize(this,l)];case 3:return m.sent(),[4,O_(this.Qo.syncEngine)];case 4:return m.sent(),[4,hh(this.Qo.remoteStore)];case 5:return m.sent(),[4,this.persistence.He(function(){return f.gcScheduler&&!f.gcScheduler.started&&f.gcScheduler.start(f.localStore),Promise.resolve()})];case 6:return m.sent(),[2]}})})},s.prototype.Ko=function(l){return c_(this.persistence,new u_,l.initialUser,this.R)},s.prototype.Uo=function(l){return new Ic(this.persistence.referenceDelegate.garbageCollector,l.asyncQueue)},s.prototype.qo=function(l){var f=fp(l.databaseInfo.databaseId,l.databaseInfo.persistenceKey),m=void 0!==this.cacheSizeBytes?he.withCacheSize(this.cacheSizeBytes):he.DEFAULT;return new ny(this.synchronizeTabs,f,l.clientId,m,l.asyncQueue,lh(),wp(),this.R,this.sharedClientState,!!this.forceOwnership)},s.prototype.Bo=function(l){return new Au},s}(N_),Dy=function(a){function s(l,f){var m=this;return(m=a.call(this,l,f,!1)||this).Qo=l,m.cacheSizeBytes=f,m.synchronizeTabs=!0,m}return(0,L.ZT)(s,a),s.prototype.initialize=function(l){return(0,L.mG)(this,void 0,void 0,function(){var f,m=this;return(0,L.Jh)(this,function(b){switch(b.label){case 0:return[4,a.prototype.initialize.call(this,l)];case 1:return b.sent(),f=this.Qo.syncEngine,this.sharedClientState instanceof g_?(this.sharedClientState.syncEngine={ui:_E.bind(null,f),ai:zg.bind(null,f),hi:uo.bind(null,f),fn:ld.bind(null,f),ci:Kw.bind(null,f)},[4,this.sharedClientState.start()]):[3,3];case 2:b.sent(),b.label=3;case 3:return[4,this.persistence.He(function(D){return(0,L.mG)(m,void 0,void 0,function(){return(0,L.Jh)(this,function(M){switch(M.label){case 0:return[4,R_(this.Qo.syncEngine,D)];case 1:return M.sent(),this.gcScheduler&&(D&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):D||this.gcScheduler.stop()),[2]}})})})];case 4:return b.sent(),[2]}})})},s.prototype.Bo=function(l){var f=lh();if(!g_.yt(f))throw new et(ke.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var m=fp(l.databaseInfo.databaseId,l.databaseInfo.persistenceKey);return new g_(f,l.asyncQueue,m,l.clientId,l.initialUser)},s}(Cy),Ty=function(){function a(){}return a.prototype.initialize=function(s,l){return(0,L.mG)(this,void 0,void 0,function(){var f=this;return(0,L.Jh)(this,function(m){switch(m.label){case 0:return this.localStore?[3,2]:(this.localStore=s.localStore,this.sharedClientState=s.sharedClientState,this.datastore=this.createDatastore(l),this.remoteStore=this.createRemoteStore(l),this.eventManager=this.createEventManager(l),this.syncEngine=this.createSyncEngine(l,!s.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(b){return T_(f.syncEngine,b,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Cc.bind(null,this.syncEngine),[4,gy(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:m.sent(),m.label=2;case 2:return[2]}})})},a.prototype.createEventManager=function(s){return new yy},a.prototype.createDatastore=function(s){var f=sf(s.databaseInfo.databaseId),m=new m_(s.databaseInfo);return new af(s.credentials,m,f)},a.prototype.createRemoteStore=function(s){var l,f,m,b,D,M=this;return l=this.localStore,f=this.datastore,m=s.asyncQueue,b=function(F){return T_(M.syncEngine,F,0)},D=_p.yt()?new _p:new ay,new ly(l,f,m,b,D)},a.prototype.createSyncEngine=function(s,l){return H=l,Y=new Gw(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,s.initialUser,s.maxConcurrentLimboResolutions),H&&(Y.$o=!0),Y;var H,Y},a.prototype.terminate=function(){return function(s){return(0,L.mG)(this,void 0,void 0,function(){var l;return(0,L.Jh)(this,function(f){switch(f.label){case 0:return l=vt(s),tt("RemoteStore","RemoteStore shutting down."),l.Or.add(5),[4,ul(l)];case 1:return f.sent(),l.Lr.shutdown(),l.Br.set("Unknown"),[2]}})})}(this.remoteStore)},a}(),Tc=function(){function a(s){this.observer=s,this.muted=!1}return a.prototype.next=function(s){this.observer.next&&this.jo(this.observer.next,s)},a.prototype.error=function(s){this.observer.error?this.jo(this.observer.error,s):console.error("Uncaught Error in snapshot listener:",s)},a.prototype.Wo=function(){this.muted=!0},a.prototype.jo=function(s,l){var f=this;this.muted||setTimeout(function(){f.muted||s(l)},0)},a}(),Ay=(function(){function a(s,l){var f=this;this.Go=s,this.R=l,this.metadata=new Jn,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(m){m&&m.io()?f.metadata.resolve(m.payload.metadata):f.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(m?.payload)))},function(m){return f.metadata.reject(m)})}a.prototype.close=function(){return this.Go.cancel()},a.prototype.getMetadata=function(){return(0,L.mG)(this,void 0,void 0,function(){return(0,L.Jh)(this,function(s){return[2,this.metadata.promise]})})},a.prototype.Lo=function(){return(0,L.mG)(this,void 0,void 0,function(){return(0,L.Jh)(this,function(s){switch(s.label){case 0:return[4,this.getMetadata()];case 1:return[2,(s.sent(),this.Ho())]}})})},a.prototype.Ho=function(){return(0,L.mG)(this,void 0,void 0,function(){var s,l,f,m;return(0,L.Jh)(this,function(b){switch(b.label){case 0:return[4,this.Jo()];case 1:return null===(s=b.sent())?[2,null]:(l=this.zo.decode(s),f=Number(l),isNaN(f)&&this.Yo("length string ("+l+") is not valid number"),[4,this.Xo(f)]);case 2:return m=b.sent(),[2,new vy(JSON.parse(m),s.length+f)]}})})},a.prototype.Zo=function(){return this.buffer.findIndex(function(s){return s==="{".charCodeAt(0)})},a.prototype.Jo=function(){return(0,L.mG)(this,void 0,void 0,function(){var s,l;return(0,L.Jh)(this,function(f){switch(f.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(f.sent())return[3,3];f.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((s=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),l=this.buffer.slice(0,s),[2,(this.buffer=this.buffer.slice(s),l)])}})})},a.prototype.Xo=function(s){return(0,L.mG)(this,void 0,void 0,function(){var l;return(0,L.Jh)(this,function(f){switch(f.label){case 0:return this.buffer.length<s?[4,this.tc()]:[3,3];case 1:f.sent()&&this.Yo("Reached the end of bundle when more is expected."),f.label=2;case 2:return[3,0];case 3:return l=this.zo.decode(this.buffer.slice(0,s)),[2,(this.buffer=this.buffer.slice(s),l)]}})})},a.prototype.Yo=function(s){throw this.Go.cancel(),new Error("Invalid bundle format: "+s)},a.prototype.tc=function(){return(0,L.mG)(this,void 0,void 0,function(){var s,l;return(0,L.Jh)(this,function(f){switch(f.label){case 0:return[4,this.Go.read()];case 1:return(s=f.sent()).done||((l=new Uint8Array(this.buffer.length+s.value.length)).set(this.buffer),l.set(s.value,this.buffer.length),this.buffer=l),[2,s.done]}})})}}(),function(){function a(s){this.datastore=s,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return a.prototype.lookup=function(s){return(0,L.mG)(this,void 0,void 0,function(){var l,f=this;return(0,L.Jh)(this,function(m){switch(m.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new et(ke.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(b,D){return(0,L.mG)(this,void 0,void 0,function(){var M,F,H,Y,se,de;return(0,L.Jh)(this,function(Se){switch(Se.label){case 0:return M=vt(b),F=js(M.R)+"/documents",H={documents:D.map(function(De){return Xd(M.R,De)})},[4,M.$i("BatchGetDocuments",F,H)];case 1:return Y=Se.sent(),se=new Map,Y.forEach(function(De){var gt,bt,$e=(gt=M.R,"found"in(bt=De)?function(Qt,sn){rn(!!sn.found);var On=qa(Qt,sn.found.name),Wn=Ki(sn.found.updateTime),ur=new wo({mapValue:{fields:sn.found.fields}});return ri.newFoundDocument(On,Wn,ur)}(gt,bt):"missing"in bt?function(Qt,sn){rn(!!sn.missing),rn(!!sn.readTime);var On=qa(Qt,sn.missing),Wn=Ki(sn.readTime);return ri.newNoDocument(On,Wn)}(gt,bt):kt());se.set($e.key.toString(),$e)}),de=[],[2,(D.forEach(function(De){var $e=se.get(De.toString());rn(!!$e),de.push($e)}),de)]}})})}(this.datastore,s)];case 1:return[2,((l=m.sent()).forEach(function(b){return f.recordVersion(b)}),l)]}})})},a.prototype.set=function(s,l){this.write(l.toMutation(s,this.precondition(s))),this.writtenDocs.add(s.toString())},a.prototype.update=function(s,l){try{this.write(l.toMutation(s,this.preconditionForUpdate(s)))}catch(f){this.lastWriteError=f}this.writtenDocs.add(s.toString())},a.prototype.delete=function(s){this.write(new $l(s,this.precondition(s))),this.writtenDocs.add(s.toString())},a.prototype.commit=function(){return(0,L.mG)(this,void 0,void 0,function(){var s,l=this;return(0,L.Jh)(this,function(f){switch(f.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return s=this.readVersions,this.mutations.forEach(function(m){s.delete(m.key.toString())}),s.forEach(function(m,b){var D=jt.fromPath(b);l.mutations.push(new ip(D,l.precondition(D)))}),[4,function(m,b){return(0,L.mG)(this,void 0,void 0,function(){var D,M,F;return(0,L.Jh)(this,function(H){switch(H.label){case 0:return D=vt(m),M=js(D.R)+"/documents",F={writes:b.map(function(Y){return rl(D.R,Y)})},[4,D.Ni("Commit",M,F)];case 1:return H.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return f.sent(),this.committed=!0,[2]}})})},a.prototype.recordVersion=function(s){var l;if(s.isFoundDocument())l=s.version;else{if(!s.isNoDocument())throw kt();l=bn.min()}var f=this.readVersions.get(s.key.toString());if(f){if(!l.isEqual(f))throw new et(ke.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(s.key.toString(),l)},a.prototype.precondition=function(s){var l=this.readVersions.get(s.toString());return!this.writtenDocs.has(s.toString())&&l?Bt.updateTime(l):Bt.none()},a.prototype.preconditionForUpdate=function(s){var l=this.readVersions.get(s.toString());if(!this.writtenDocs.has(s.toString())&&l){if(l.isEqual(bn.min()))throw new et(ke.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Bt.updateTime(l)}return Bt.exists(!0)},a.prototype.write=function(s){this.ensureCommitNotCalled(),this.mutations.push(s)},a.prototype.ensureCommitNotCalled=function(){},a}()),ph=function(){function a(s,l,f,m){this.asyncQueue=s,this.datastore=l,this.updateFunction=f,this.deferred=m,this.ec=5,this.Zi=new bp(this.asyncQueue,"transaction_retry")}return a.prototype.run=function(){this.ec-=1,this.nc()},a.prototype.nc=function(){var s=this;this.Zi.ji(function(){return(0,L.mG)(s,void 0,void 0,function(){var l,f,m=this;return(0,L.Jh)(this,function(b){return l=new Ay(this.datastore),(f=this.sc(l))&&f.then(function(D){m.asyncQueue.enqueueAndForget(function(){return l.commit().then(function(){m.deferred.resolve(D)}).catch(function(M){m.ic(M)})})}).catch(function(D){m.ic(D)}),[2]})})})},a.prototype.sc=function(s){try{var l=this.updateFunction(s);return!Fs(l)&&l.catch&&l.then?l:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(f){return this.deferred.reject(f),null}},a.prototype.ic=function(s){var l=this;this.ec>0&&this.rc(s)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return l.nc(),Promise.resolve()})):this.deferred.reject(s)},a.prototype.rc=function(s){if("FirebaseError"===s.name){var l=s.code;return"aborted"===l||"failed-precondition"===l||!gs(l)}return!1},a}(),k_=function(){function a(s,l,f){var m=this;this.credentials=s,this.asyncQueue=l,this.databaseInfo=f,this.user=Io.UNAUTHENTICATED,this.clientId=kr.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(l,function(b){return(0,L.mG)(m,void 0,void 0,function(){return(0,L.Jh)(this,function(D){switch(D.label){case 0:return tt("FirestoreClient","Received user=",b.uid),[4,this.credentialListener(b)];case 1:return D.sent(),this.user=b,[2]}})})})}return a.prototype.getConfiguration=function(){return(0,L.mG)(this,void 0,void 0,function(){return(0,L.Jh)(this,function(s){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]})})},a.prototype.setCredentialChangeListener=function(s){this.credentialListener=s},a.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new et(ke.FAILED_PRECONDITION,"The client has already been terminated.")},a.prototype.terminate=function(){var s=this;this.asyncQueue.enterRestrictedMode();var l=new Jn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return(0,L.mG)(s,void 0,void 0,function(){var f,m;return(0,L.Jh)(this,function(b){switch(b.label){case 0:return b.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:b.sent(),b.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:b.sent(),b.label=4;case 4:return this.credentials.removeChangeListener(),l.resolve(),[3,6];case 5:return f=b.sent(),m=cl(f,"Failed to shutdown persistence"),l.reject(m),[3,6];case 6:return[2]}})})}),l.promise},a}();function Wg(a,s){return(0,L.mG)(this,void 0,void 0,function(){var l,f,m=this;return(0,L.Jh)(this,function(b){switch(b.label){case 0:return a.asyncQueue.verifyOperationInProgress(),tt("FirestoreClient","Initializing OfflineComponentProvider"),[4,a.getConfiguration()];case 1:return l=b.sent(),[4,s.initialize(l)];case 2:return b.sent(),f=l.initialUser,a.setCredentialChangeListener(function(D){return(0,L.mG)(m,void 0,void 0,function(){return(0,L.Jh)(this,function(M){switch(M.label){case 0:return f.isEqual(D)?[3,2]:[4,Fg(s.localStore,D)];case 1:M.sent(),f=D,M.label=2;case 2:return[2]}})})}),s.persistence.setDatabaseDeletedListener(function(){return a.terminate()}),a.offlineComponents=s,[2]}})})}function xy(a,s){return(0,L.mG)(this,void 0,void 0,function(){var l,f;return(0,L.Jh)(this,function(m){switch(m.label){case 0:return a.asyncQueue.verifyOperationInProgress(),[4,Zg(a)];case 1:return l=m.sent(),tt("FirestoreClient","Initializing OnlineComponentProvider"),[4,a.getConfiguration()];case 2:return f=m.sent(),[4,s.initialize(l,f)];case 3:return m.sent(),a.setCredentialChangeListener(function(b){return function(D,M){return(0,L.mG)(this,void 0,void 0,function(){var F,H;return(0,L.Jh)(this,function(Y){switch(Y.label){case 0:return(F=vt(D)).asyncQueue.verifyOperationInProgress(),tt("RemoteStore","RemoteStore received new credentials"),H=Ka(F),F.Or.add(3),[4,ul(F)];case 1:return Y.sent(),H&&F.Br.set("Unknown"),[4,F.remoteSyncer.handleCredentialChange(M)];case 2:return Y.sent(),F.Or.delete(3),[4,dh(F)];case 3:return Y.sent(),[2]}})})}(s.remoteStore,b)}),a.onlineComponents=s,[2]}})})}function Zg(a){return(0,L.mG)(this,void 0,void 0,function(){return(0,L.Jh)(this,function(s){switch(s.label){case 0:return a.offlineComponents?[3,2]:(tt("FirestoreClient","Using default OfflineComponentProvider"),[4,Wg(a,new N_)]);case 1:s.sent(),s.label=2;case 2:return[2,a.offlineComponents]}})})}function Kg(a){return(0,L.mG)(this,void 0,void 0,function(){return(0,L.Jh)(this,function(s){switch(s.label){case 0:return a.onlineComponents?[3,2]:(tt("FirestoreClient","Using default OnlineComponentProvider"),[4,xy(a,new Ty)]);case 1:s.sent(),s.label=2;case 2:return[2,a.onlineComponents]}})})}function My(a){return Zg(a).then(function(s){return s.persistence})}function Yg(a){return Zg(a).then(function(s){return s.localStore})}function Sp(a){return Kg(a).then(function(s){return s.remoteStore})}function Qg(a){return Kg(a).then(function(s){return s.syncEngine})}function ll(a){return(0,L.mG)(this,void 0,void 0,function(){var s,l;return(0,L.Jh)(this,function(f){switch(f.label){case 0:return[4,Kg(a)];case 1:return s=f.sent(),[2,((l=s.eventManager).onListen=Ec.bind(null,s.syncEngine),l.onUnlisten=qw.bind(null,s.syncEngine),l)]}})})}function Jg(a,s,l){var f=this;void 0===l&&(l={});var m=new Jn;return a.asyncQueue.enqueueAndForget(function(){return(0,L.mG)(f,void 0,void 0,function(){var b;return(0,L.Jh)(this,function(D){switch(D.label){case 0:return b=function(M,F,H,Y,se){var de=new Tc({next:function(De){F.enqueueAndForget(function(){return hf(M,Se)});var $e=De.docs.has(H);!$e&&De.fromCache?se.reject(new et(ke.UNAVAILABLE,"Failed to get document because the client is offline.")):$e&&De.fromCache&&Y&&"server"===Y.source?se.reject(new et(ke.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):se.resolve(De)},error:function(De){return se.reject(De)}}),Se=new sd(hs(H.path),de,{includeMetadataChanges:!0,so:!0});return df(M,Se)},[4,ll(a)];case 1:return[2,b.apply(void 0,[D.sent(),a.asyncQueue,s,l,m])]}})})}),m.promise}function Ap(a,s,l){var f=this;void 0===l&&(l={});var m=new Jn;return a.asyncQueue.enqueueAndForget(function(){return(0,L.mG)(f,void 0,void 0,function(){var b;return(0,L.Jh)(this,function(D){switch(D.label){case 0:return b=function(M,F,H,Y,se){var de=new Tc({next:function(De){F.enqueueAndForget(function(){return hf(M,Se)}),De.fromCache&&"server"===Y.source?se.reject(new et(ke.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):se.resolve(De)},error:function(De){return se.reject(De)}}),Se=new sd(H,de,{includeMetadataChanges:!0,so:!0});return df(M,Se)},[4,ll(a)];case 1:return[2,b.apply(void 0,[D.sent(),a.asyncQueue,s,l,m])]}})})}),m.promise}var Yw=function(a,s,l,f,m,b,D,M){this.databaseId=a,this.appId=s,this.persistenceKey=l,this.host=f,this.ssl=m,this.forceLongPolling=b,this.autoDetectLongPolling=D,this.useFetchStreams=M},dd=function(){function a(s,l){this.projectId=s,this.database=l||"(default)"}return Object.defineProperty(a.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),a.prototype.isEqual=function(s){return s instanceof a&&s.projectId===this.projectId&&s.database===this.database},a}(),xp=new Map,F_=function(a,s){this.user=s,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+a},hd=function(){function a(){this.changeListener=null}return a.prototype.getToken=function(){return Promise.resolve(null)},a.prototype.invalidateToken=function(){},a.prototype.setChangeListener=function(s,l){this.changeListener=l,s.enqueueRetryable(function(){return l(Io.UNAUTHENTICATED)})},a.prototype.removeChangeListener=function(){this.changeListener=null},a}(),Ry=function(){function a(s){this.token=s,this.changeListener=null}return a.prototype.getToken=function(){return Promise.resolve(this.token)},a.prototype.invalidateToken=function(){},a.prototype.setChangeListener=function(s,l){var f=this;this.changeListener=l,s.enqueueRetryable(function(){return l(f.token.user)})},a.prototype.removeChangeListener=function(){this.changeListener=null},a}(),Yo=function(){function a(s){var l=this;this.currentUser=Io.UNAUTHENTICATED,this.oc=new Jn,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){l.cc++,l.currentUser=l.ac(),l.oc.resolve(),l.changeListener&&l.asyncQueue.enqueueRetryable(function(){return l.changeListener(l.currentUser)})};var f=function(m){tt("FirebaseCredentialsProvider","Auth detected"),l.auth=m,l.auth.addAuthTokenListener(l.uc)};s.onInit(function(m){return f(m)}),setTimeout(function(){if(!l.auth){var m=s.getImmediate({optional:!0});m?f(m):(tt("FirebaseCredentialsProvider","Auth not yet detected"),l.oc.resolve())}},0)}return a.prototype.getToken=function(){var s=this,l=this.cc,f=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(f).then(function(m){return s.cc!==l?(tt("FirebaseCredentialsProvider","getToken aborted due to token change."),s.getToken()):m?(rn("string"==typeof m.accessToken),new F_(m.accessToken,s.currentUser)):null}):Promise.resolve(null)},a.prototype.invalidateToken=function(){this.forceRefresh=!0},a.prototype.setChangeListener=function(s,l){var f=this;this.asyncQueue=s,this.asyncQueue.enqueueRetryable(function(){return(0,L.mG)(f,void 0,void 0,function(){return(0,L.Jh)(this,function(m){switch(m.label){case 0:return[4,this.oc.promise];case 1:return m.sent(),[4,l(this.currentUser)];case 2:return m.sent(),this.changeListener=l,[2]}})})})},a.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},a.prototype.ac=function(){var s=this.auth&&this.auth.getUid();return rn(null===s||"string"==typeof s),new Io(s)},a}(),xu=function(){function a(s,l,f){this.hc=s,this.lc=l,this.fc=f,this.type="FirstParty",this.user=Io.FIRST_PARTY}return Object.defineProperty(a.prototype,"authHeaders",{get:function(){var s={"X-Goog-AuthUser":this.lc},l=this.hc.auth.getAuthHeaderValueForFirstParty([]);return l&&(s.Authorization=l),this.fc&&(s["X-Goog-Iam-Authorization-Token"]=this.fc),s},enumerable:!1,configurable:!0}),a}(),Ya=function(){function a(s,l,f){this.hc=s,this.lc=l,this.fc=f}return a.prototype.getToken=function(){return Promise.resolve(new xu(this.hc,this.lc,this.fc))},a.prototype.setChangeListener=function(s,l){s.enqueueRetryable(function(){return l(Io.FIRST_PARTY)})},a.prototype.removeChangeListener=function(){},a.prototype.invalidateToken=function(){},a}();function Oy(a,s,l){if(!l)throw new et(ke.INVALID_ARGUMENT,"Function "+a+"() cannot be called with an empty "+s+".")}function L_(a,s){if(void 0===s)return{merge:!1};if(void 0!==s.mergeFields&&void 0!==s.merge)throw new et(ke.INVALID_ARGUMENT,"Invalid options passed to function "+a+'(): You cannot specify both "merge" and "mergeFields".');return s}function gh(a,s,l,f){if(!0===s&&!0===f)throw new et(ke.INVALID_ARGUMENT,a+" and "+l+" cannot be used together.")}function Ca(a){if(!jt.isDocumentKey(a))throw new et(ke.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+a+" has "+a.length+".")}function pf(a){if(jt.isDocumentKey(a))throw new et(ke.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+a+" has "+a.length+".")}function fd(a){if(void 0===a)return"undefined";if(null===a)return"null";if("string"==typeof a)return a.length>20&&(a=a.substring(0,20)+"..."),JSON.stringify(a);if("number"==typeof a||"boolean"==typeof a)return""+a;if("object"==typeof a){if(a instanceof Array)return"an array";var s=function(l){if(l.constructor){var f=/function\s+([^\s(]+)\s*\(/.exec(l.constructor.toString());if(f&&f.length>1)return f[1]}return null}(a);return s?"a custom "+s+" object":"an object"}return"function"==typeof a?"a function":kt()}function zn(a,s){if("_delegate"in a&&(a=a._delegate),!(a instanceof s)){if(s.name===a.constructor.name)throw new et(ke.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var l=fd(a);throw new et(ke.INVALID_ARGUMENT,"Expected type '"+s.name+"', but it was: "+l)}return a}function Ny(a,s){if(s<=0)throw new et(ke.INVALID_ARGUMENT,"Function "+a+"() requires a positive number, but it was: "+s+".")}var Py=function(){function a(s){var l;if(void 0===s.host){if(void 0!==s.ssl)throw new et(ke.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=s.host,this.ssl=null===(l=s.ssl)||void 0===l||l;if(this.credentials=s.credentials,this.ignoreUndefinedProperties=!!s.ignoreUndefinedProperties,void 0===s.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==s.cacheSizeBytes&&s.cacheSizeBytes<1048576)throw new et(ke.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=s.cacheSizeBytes}this.experimentalForceLongPolling=!!s.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!s.experimentalAutoDetectLongPolling,this.useFetchStreams=!!s.useFetchStreams,gh("experimentalForceLongPolling",s.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",s.experimentalAutoDetectLongPolling)}return a.prototype.isEqual=function(s){return this.host===s.host&&this.ssl===s.ssl&&this.credentials===s.credentials&&this.cacheSizeBytes===s.cacheSizeBytes&&this.experimentalForceLongPolling===s.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===s.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===s.ignoreUndefinedProperties&&this.useFetchStreams===s.useFetchStreams},a}(),ky=function(){function a(s,l){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Py({}),this._settingsFrozen=!1,s instanceof dd?(this._databaseId=s,this._credentials=new hd):(this._app=s,this._databaseId=function(f){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new et(ke.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new dd(f.options.projectId)}(s),this._credentials=new Yo(l))}return Object.defineProperty(a.prototype,"app",{get:function(){if(!this._app)throw new et(ke.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),a.prototype._setSettings=function(s){if(this._settingsFrozen)throw new et(ke.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Py(s),void 0!==s.credentials&&(this._credentials=function(l){if(!l)return new hd;switch(l.type){case"gapi":var f=l.client;return rn(!("object"!=typeof f||null===f||!f.auth||!f.auth.getAuthHeaderValueForFirstParty)),new Ya(f,l.sessionIndex||"0",l.iamToken||null);case"provider":return l.client;default:throw new et(ke.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(s.credentials))},a.prototype._getSettings=function(){return this._settings},a.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},a.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},a.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},a.prototype._terminate=function(){return(l=xp.get(this))&&(tt("ComponentProvider","Removing Datastore"),xp.delete(this),l.terminate()),Promise.resolve();var l},a}(),Ur=function(){function a(s,l,f){this.converter=l,this._key=f,this.type="document",this.firestore=s}return Object.defineProperty(a.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"parent",{get:function(){return new dl(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),a.prototype.withConverter=function(s){return new a(this.firestore,s,this._key)},a}(),Qo=function(){function a(s,l,f){this.converter=l,this._query=f,this.type="query",this.firestore=s}return a.prototype.withConverter=function(s){return new a(this.firestore,s,this._query)},a}(),dl=function(a){function s(l,f,m){var b=this;return(b=a.call(this,l,f,hs(m))||this)._path=m,b.type="collection",b}return(0,L.ZT)(s,a),Object.defineProperty(s.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"parent",{get:function(){var l=this._path.popLast();return l.isEmpty()?null:new Ur(this.firestore,null,new jt(l))},enumerable:!1,configurable:!0}),s.prototype.withConverter=function(l){return new s(this.firestore,l,this._path)},s}(Qo);function Fy(a,s){for(var l,f=[],m=2;m<arguments.length;m++)f[m-2]=arguments[m];if(a=(0,J.m9)(a),Oy("collection","path",s),a instanceof ky)return pf(l=Vn.fromString.apply(Vn,(0,L.ev)([s],f))),new dl(a,null,l);if(!(a instanceof Ur||a instanceof dl))throw new et(ke.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return pf(l=Vn.fromString.apply(Vn,(0,L.ev)([a.path],f)).child(Vn.fromString(s))),new dl(a.firestore,null,l)}function Mp(a,s){for(var l,f=[],m=2;m<arguments.length;m++)f[m-2]=arguments[m];if(a=(0,J.m9)(a),1===arguments.length&&(s=kr.u()),Oy("doc","path",s),a instanceof ky)return Ca(l=Vn.fromString.apply(Vn,(0,L.ev)([s],f))),new Ur(a,null,new jt(l));if(!(a instanceof Ur||a instanceof dl))throw new et(ke.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Ca(l=a._path.child(Vn.fromString.apply(Vn,(0,L.ev)([s],f)))),new Ur(a.firestore,a instanceof dl?a.converter:null,new jt(l))}function wE(a,s){return a=(0,J.m9)(a),s=(0,J.m9)(s),(a instanceof Ur||a instanceof dl)&&(s instanceof Ur||s instanceof dl)&&a.firestore===s.firestore&&a.path===s.path&&a.converter===s.converter}function V_(a,s){return a=(0,J.m9)(a),s=(0,J.m9)(s),a instanceof Qo&&s instanceof Qo&&a.firestore===s.firestore&&Vo(a._query,s._query)&&a.converter===s.converter}var U_=function(){function a(){var s=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new bp(this,"async_queue_retry"),this.Ic=function(){var f=wp();f&&tt("AsyncQueue","Visibility state changed to "+f.visibilityState),s.Zi.Gi()};var l=wp();l&&"function"==typeof l.addEventListener&&l.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(a.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),a.prototype.enqueueAndForget=function(s){this.enqueue(s)},a.prototype.enqueueAndForgetEvenWhileRestricted=function(s){this.Ac(),this.Rc(s)},a.prototype.enterRestrictedMode=function(s){if(!this._c){this._c=!0,this.Ec=s||!1;var l=wp();l&&"function"==typeof l.removeEventListener&&l.removeEventListener("visibilitychange",this.Ic)}},a.prototype.enqueue=function(s){var l=this;if(this.Ac(),this._c)return new Promise(function(){});var f=new Jn;return this.Rc(function(){return l._c&&l.Ec?Promise.resolve():(s().then(f.resolve,f.reject),f.promise)}).then(function(){return f.promise})},a.prototype.enqueueRetryable=function(s){var l=this;this.enqueueAndForget(function(){return l.wc.push(s),l.bc()})},a.prototype.bc=function(){return(0,L.mG)(this,void 0,void 0,function(){var s,l=this;return(0,L.Jh)(this,function(f){switch(f.label){case 0:if(0===this.wc.length)return[3,5];f.label=1;case 1:return f.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return f.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!vs(s=f.sent()))throw s;return tt("AsyncQueue","Operation failed with retryable error: "+s),[3,4];case 4:this.wc.length>0&&this.Zi.ji(function(){return l.bc()}),f.label=5;case 5:return[2]}})})},a.prototype.Rc=function(s){var l=this,f=this.dc.then(function(){return l.gc=!0,s().catch(function(m){throw l.yc=m,l.gc=!1,fr("INTERNAL UNHANDLED ERROR: ",(D=(b=m).message||"",b.stack&&(D=b.stack.includes(b.message)?b.stack:b.message+"\n"+b.stack),D)),m;var b,D}).then(function(m){return l.gc=!1,m})});return this.dc=f,f},a.prototype.enqueueAfterDelay=function(s,l,f){var m=this;this.Ac(),this.Tc.indexOf(s)>-1&&(l=0);var b=Dp.createAndSchedule(this,s,l,f,function(D){return m.vc(D)});return this.mc.push(b),b},a.prototype.Ac=function(){this.yc&&kt()},a.prototype.verifyOperationInProgress=function(){},a.prototype.Pc=function(){return(0,L.mG)(this,void 0,void 0,function(){var s;return(0,L.Jh)(this,function(l){switch(l.label){case 0:return[4,s=this.dc];case 1:l.sent(),l.label=2;case 2:if(s!==this.dc)return[3,0];l.label=3;case 3:return[2]}})})},a.prototype.Vc=function(s){for(var l=0,f=this.mc;l<f.length;l++)if(f[l].timerId===s)return!0;return!1},a.prototype.Sc=function(s){var l=this;return this.Pc().then(function(){l.mc.sort(function(D,M){return D.targetTimeMs-M.targetTimeMs});for(var f=0,m=l.mc;f<m.length;f++){var b=m[f];if(b.skipDelay(),"all"!==s&&b.timerId===s)break}return l.Pc()})},a.prototype.Dc=function(s){this.Tc.push(s)},a.prototype.vc=function(s){var l=this.mc.indexOf(s);this.mc.splice(l,1)},a}();function gf(a){return function(s,l){if("object"!=typeof s||null===s)return!1;for(var f=s,m=0,b=["next","error","complete"];m<b.length;m++){var D=b[m];if(D in f&&"function"==typeof f[D])return!0}return!1}(a)}!function(){function a(){this._progressObserver={},this._taskCompletionResolver=new Jn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}a.prototype.onProgress=function(s,l,f){this._progressObserver={next:s,error:l,complete:f}},a.prototype.catch=function(s){return this._taskCompletionResolver.promise.catch(s)},a.prototype.then=function(s,l){return this._taskCompletionResolver.promise.then(s,l)},a.prototype._completeWith=function(s){this._updateProgress(s),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(s)},a.prototype._failWith=function(s){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(s),this._taskCompletionResolver.reject(s)},a.prototype._updateProgress=function(s){this._lastProgress=s,this._progressObserver.next&&this._progressObserver.next(s)}}();var mi=function(a){function s(l,f){var m=this;return(m=a.call(this,l,f)||this).type="firestore",m._queue=new U_,m._persistenceKey="name"in l?l.name:"[DEFAULT]",m}return(0,L.ZT)(s,a),s.prototype._terminate=function(){return this._firestoreClient||Xg(this),this._firestoreClient.terminate()},s}(ky);function yi(a){return a._firestoreClient||Xg(a),a._firestoreClient.verifyNotTerminated(),a._firestoreClient}function Xg(a){var s,b,M,l=a._freezeSettings(),f=(b=(null===(s=a._app)||void 0===s?void 0:s.options.appId)||"",new Yw(a._databaseId,b,a._persistenceKey,(M=l).host,M.ssl,M.experimentalForceLongPolling,M.experimentalAutoDetectLongPolling,M.useFetchStreams));a._firestoreClient=new k_(a._credentials,a._queue,f)}function pd(a,s,l){var f=this,m=new Jn;return a.asyncQueue.enqueue(function(){return(0,L.mG)(f,void 0,void 0,function(){var b;return(0,L.Jh)(this,function(D){switch(D.label){case 0:return D.trys.push([0,3,,4]),[4,Wg(a,l)];case 1:return D.sent(),[4,xy(a,s)];case 2:return D.sent(),m.resolve(),[3,4];case 3:if(!("FirebaseError"===(M=b=D.sent()).name?M.code===ke.FAILED_PRECONDITION||M.code===ke.UNIMPLEMENTED:!(typeof DOMException<"u"&&M instanceof DOMException)||22===M.code||20===M.code||11===M.code))throw b;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+b),m.reject(b),[3,4];case 4:return[2]}var M})})}).then(function(){return m.promise})}function mh(a){if(a._initialized||a._terminated)throw new et(ke.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Qa=function(){function a(){for(var s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];for(var f=0;f<s.length;++f)if(0===s[f].length)throw new et(ke.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wi(s)}return a.prototype.isEqual=function(s){return this._internalPath.isEqual(s._internalPath)},a}(),Sc=function(){function a(s){this._byteString=s}return a.fromBase64String=function(s){try{return new a(qr.fromBase64String(s))}catch(l){throw new et(ke.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+l)}},a.fromUint8Array=function(s){return new a(qr.fromUint8Array(s))},a.prototype.toBase64=function(){return this._byteString.toBase64()},a.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},a.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},a.prototype.isEqual=function(s){return this._byteString.isEqual(s._byteString)},a}(),gd=function(a){this._methodName=a},em=function(){function a(s,l){if(!isFinite(s)||s<-90||s>90)throw new et(ke.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+s);if(!isFinite(l)||l<-180||l>180)throw new et(ke.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+l);this._lat=s,this._long=l}return Object.defineProperty(a.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),a.prototype.isEqual=function(s){return this._lat===s._lat&&this._long===s._long},a.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},a.prototype._compareTo=function(s){return fn(this._lat,s._lat)||fn(this._long,s._long)},a}(),Ly=/^__.*__$/,Jw=function(){function a(s,l,f){this.data=s,this.fieldMask=l,this.fieldTransforms=f}return a.prototype.toMutation=function(s,l){return null!==this.fieldMask?new ii(s,this.data,this.fieldMask,l,this.fieldTransforms):new jo(s,this.data,l,this.fieldTransforms)},a}(),j_=function(){function a(s,l,f){this.data=s,this.fieldMask=l,this.fieldTransforms=f}return a.prototype.toMutation=function(s,l){return new ii(s,this.data,this.fieldMask,l,this.fieldTransforms)},a}();function H_(a){switch(a){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw kt()}}var mf=function(){function a(s,l,f,m,b,D){this.settings=s,this.databaseId=l,this.R=f,this.ignoreUndefinedProperties=m,void 0===b&&this.Cc(),this.fieldTransforms=b||[],this.fieldMask=D||[]}return Object.defineProperty(a.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),a.prototype.xc=function(s){return new a(Object.assign(Object.assign({},this.settings),s),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},a.prototype.kc=function(s){var l,f=null===(l=this.path)||void 0===l?void 0:l.child(s),m=this.xc({path:f,Fc:!1});return m.$c(s),m},a.prototype.Oc=function(s){var l,f=null===(l=this.path)||void 0===l?void 0:l.child(s),m=this.xc({path:f,Fc:!1});return m.Cc(),m},a.prototype.Mc=function(s){return this.xc({path:void 0,Fc:!0})},a.prototype.Lc=function(s){return Ac(s,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},a.prototype.contains=function(s){return void 0!==this.fieldMask.find(function(l){return s.isPrefixOf(l)})||void 0!==this.fieldTransforms.find(function(l){return s.isPrefixOf(l.field)})},a.prototype.Cc=function(){if(this.path)for(var s=0;s<this.path.length;s++)this.$c(this.path.get(s))},a.prototype.$c=function(s){if(0===s.length)throw this.Lc("Document fields must not be empty");if(H_(this.Nc)&&Ly.test(s))throw this.Lc('Document fields cannot begin and end with "__"')},a}(),YD=function(){function a(s,l,f){this.databaseId=s,this.ignoreUndefinedProperties=l,this.R=f||sf(s)}return a.prototype.Uc=function(s,l,f,m){return void 0===m&&(m=!1),new mf({Nc:s,methodName:l,qc:f,path:Wi.emptyPath(),Fc:!1,Bc:m},this.databaseId,this.R,this.ignoreUndefinedProperties)},a}();function Rp(a){var s=a._freezeSettings(),l=sf(a._databaseId);return new YD(a._databaseId,!!s.ignoreUndefinedProperties,l)}function Vy(a,s,l,f,m,b){void 0===b&&(b={});var D=a.Uc(b.merge||b.mergeFields?2:0,s,l,m);Pp("Data must be an object, but it was:",D,f);var M,F,H=Uy(f,D);if(b.merge)M=new mu(D.fieldMask),F=D.fieldTransforms;else if(b.mergeFields){for(var Y=[],se=0,de=b.mergeFields;se<de.length;se++){var Se=By(s,de[se],l);if(!D.contains(Se))throw new et(ke.INVALID_ARGUMENT,"Field '"+Se+"' is specified in your field mask but missing from your input data.");jy(Y,Se)||Y.push(Se)}M=new mu(Y),F=D.fieldTransforms.filter(function(De){return M.covers(De.field)})}else M=null,F=D.fieldTransforms;return new Jw(new wo(H),M,F)}var hl=function(a){function s(){return null!==a&&a.apply(this,arguments)||this}return(0,L.ZT)(s,a),s.prototype._toFieldTransform=function(l){if(2!==l.Nc)throw l.Lc(1===l.Nc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return l.fieldMask.push(l.path),null},s.prototype.isEqual=function(l){return l instanceof s},s}(gd);function yh(a,s,l){return new mf({Nc:3,qc:s.settings.qc,methodName:a._methodName,Fc:l},s.databaseId,s.R,s.ignoreUndefinedProperties)}var Op=function(a){function s(){return null!==a&&a.apply(this,arguments)||this}return(0,L.ZT)(s,a),s.prototype._toFieldTransform=function(l){return new xt(l.path,new P)},s.prototype.isEqual=function(l){return l instanceof s},s}(gd),Np=function(a){function s(l,f){var m=this;return(m=a.call(this,l)||this).Kc=f,m}return(0,L.ZT)(s,a),s.prototype._toFieldTransform=function(l){var f=yh(this,l,!0),m=this.Kc.map(function(D){return md(D,f)}),b=new k(m);return new xt(l.path,b)},s.prototype.isEqual=function(l){return this===l},s}(gd),yf=function(a){function s(l,f){var m=this;return(m=a.call(this,l)||this).Kc=f,m}return(0,L.ZT)(s,a),s.prototype._toFieldTransform=function(l){var f=yh(this,l,!0),m=this.Kc.map(function(D){return md(D,f)}),b=new ie(m);return new xt(l.path,b)},s.prototype.isEqual=function(l){return this===l},s}(gd),$_=function(a){function s(l,f){var m=this;return(m=a.call(this,l)||this).Qc=f,m}return(0,L.ZT)(s,a),s.prototype._toFieldTransform=function(l){var f=new Ae(l.R,_a(l.R,this.Qc));return new xt(l.path,f)},s.prototype.isEqual=function(l){return this===l},s}(gd);function vh(a,s,l,f){var m=a.Uc(1,s,l);Pp("Data must be an object, but it was:",m,f);var b=[],D=wo.empty();oo(f,function(F,H){var Y=_f(s,F,l);H=(0,J.m9)(H);var se=m.Oc(Y);if(H instanceof hl)b.push(Y);else{var de=md(H,se);null!=de&&(b.push(Y),D.set(Y,de))}});var M=new mu(b);return new j_(D,M,m.fieldTransforms)}function vf(a,s,l,f,m,b){var D=a.Uc(1,s,l),M=[By(s,f,l)],F=[m];if(b.length%2!=0)throw new et(ke.INVALID_ARGUMENT,"Function "+s+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var H=0;H<b.length;H+=2)M.push(By(s,b[H])),F.push(b[H+1]);for(var Y=[],se=wo.empty(),de=M.length-1;de>=0;--de)if(!jy(Y,M[de])){var Se=M[de],De=F[de];De=(0,J.m9)(De);var $e=D.Oc(Se);if(De instanceof hl)Y.push(Se);else{var gt=md(De,$e);null!=gt&&(Y.push(Se),se.set(Se,gt))}}var bt=new mu(Y);return new j_(se,bt,D.fieldTransforms)}function fl(a,s,l,f){return void 0===f&&(f=!1),md(l,a.Uc(f?4:3,s))}function md(a,s){if(G_(a=(0,J.m9)(a)))return Pp("Unsupported field value:",s,a),Uy(a,s);if(a instanceof gd)return function(l,f){if(!H_(f.Nc))throw f.Lc(l._methodName+"() can only be used with update() and set()");if(!f.path)throw f.Lc(l._methodName+"() is not currently supported inside arrays");var m=l._toFieldTransform(f);m&&f.fieldTransforms.push(m)}(a,s),null;if(void 0===a&&s.ignoreUndefinedProperties)return null;if(s.path&&s.fieldMask.push(s.path),a instanceof Array){if(s.settings.Fc&&4!==s.Nc)throw s.Lc("Nested arrays are not supported");return function(l,f){for(var m=[],b=0,D=0,M=l;D<M.length;D++){var F=md(M[D],f.Mc(b));null==F&&(F={nullValue:"NULL_VALUE"}),m.push(F),b++}return{arrayValue:{values:m}}}(a,s)}return function(l,f){if(null===(l=(0,J.m9)(l)))return{nullValue:"NULL_VALUE"};if("number"==typeof l)return _a(f.R,l);if("boolean"==typeof l)return{booleanValue:l};if("string"==typeof l)return{stringValue:l};if(l instanceof Date){var m=di.fromDate(l);return{timestampValue:zl(f.R,m)}}if(l instanceof di)return m=new di(l.seconds,1e3*Math.floor(l.nanoseconds/1e3)),{timestampValue:zl(f.R,m)};if(l instanceof em)return{geoPointValue:{latitude:l.latitude,longitude:l.longitude}};if(l instanceof Sc)return{bytesValue:Qm(f.R,l._byteString)};if(l instanceof Ur){var b=l.firestore._databaseId;if(!b.isEqual(m=f.databaseId))throw f.Lc("Document reference is for database "+b.projectId+"/"+b.database+" but should be for database "+m.projectId+"/"+m.database);return{referenceValue:Yh(l.firestore._databaseId||f.databaseId,l._key.path)}}throw f.Lc("Unsupported field value: "+fd(l))}(a,s)}function Uy(a,s){var l={};return Wd(a)?s.path&&s.path.length>0&&s.fieldMask.push(s.path):oo(a,function(f,m){var b=md(m,s.kc(f));null!=b&&(l[f]=b)}),{mapValue:{fields:l}}}function G_(a){return!("object"!=typeof a||null===a||a instanceof Array||a instanceof Date||a instanceof di||a instanceof em||a instanceof Sc||a instanceof Ur||a instanceof gd)}function Pp(a,s,l){if(!G_(l)||"object"!=typeof(m=l)||null===m||Object.getPrototypeOf(m)!==Object.prototype&&null!==Object.getPrototypeOf(m)){var f=fd(l);throw s.Lc("an object"===f?a+" a custom object":a+" "+f)}var m}function By(a,s,l){if((s=(0,J.m9)(s))instanceof Qa)return s._internalPath;if("string"==typeof s)return _f(a,s);throw Ac("Field path arguments must be of type string or FieldPath.",a,!1,void 0,l)}var bE=new RegExp("[~\\*/\\[\\]]");function _f(a,s,l){if(s.search(bE)>=0)throw Ac("Invalid field path ("+s+"). Paths must not contain '~', '*', '/', '[', or ']'",a,!1,void 0,l);try{return(new(Qa.bind.apply(Qa,(0,L.ev)([void 0],s.split(".")))))._internalPath}catch{throw Ac("Invalid field path ("+s+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",a,!1,void 0,l)}}function Ac(a,s,l,f,m){var b=f&&!f.isEmpty(),D=void 0!==m,M="Function "+s+"() called with invalid data";l&&(M+=" (via `toFirestore()`)");var F="";return(b||D)&&(F+=" (found",b&&(F+=" in field "+f),D&&(F+=" in document "+m),F+=")"),new et(ke.INVALID_ARGUMENT,(M+=". ")+a+F)}function jy(a,s){return a.some(function(l){return l.isEqual(s)})}var Ja=function(){function a(s,l,f,m,b){this._firestore=s,this._userDataWriter=l,this._key=f,this._document=m,this._converter=b}return Object.defineProperty(a.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"ref",{get:function(){return new Ur(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),a.prototype.exists=function(){return null!==this._document},a.prototype.data=function(){if(this._document){if(this._converter){var s=new tm(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(s)}return this._userDataWriter.convertValue(this._document.data.value)}},a.prototype.get=function(s){if(this._document){var l=this._document.data.field(pl("DocumentSnapshot.get",s));if(null!==l)return this._userDataWriter.convertValue(l)}},a}(),tm=function(a){function s(){return null!==a&&a.apply(this,arguments)||this}return(0,L.ZT)(s,a),s.prototype.data=function(){return a.prototype.data.call(this)},s}(Ja);function pl(a,s){return"string"==typeof s?_f(a,s):s instanceof Qa?s._internalPath:s._delegate._internalPath}var gl=function(){function a(s,l){this.hasPendingWrites=s,this.fromCache=l}return a.prototype.isEqual=function(s){return this.hasPendingWrites===s.hasPendingWrites&&this.fromCache===s.fromCache},a}(),xc=function(a){function s(l,f,m,b,D,M){var F=this;return(F=a.call(this,l,f,m,b,M)||this)._firestore=l,F._firestoreImpl=l,F.metadata=D,F}return(0,L.ZT)(s,a),s.prototype.exists=function(){return a.prototype.exists.call(this)},s.prototype.data=function(l){if(void 0===l&&(l={}),this._document){if(this._converter){var f=new kp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(f,l)}return this._userDataWriter.convertValue(this._document.data.value,l.serverTimestamps)}},s.prototype.get=function(l,f){if(void 0===f&&(f={}),this._document){var m=this._document.data.field(pl("DocumentSnapshot.get",l));if(null!==m)return this._userDataWriter.convertValue(m,f.serverTimestamps)}},s}(Ja),kp=function(a){function s(){return null!==a&&a.apply(this,arguments)||this}return(0,L.ZT)(s,a),s.prototype.data=function(l){return void 0===l&&(l={}),a.prototype.data.call(this,l)},s}(xc),Mc=function(){function a(s,l,f,m){this._firestore=s,this._userDataWriter=l,this._snapshot=m,this.metadata=new gl(m.hasPendingWrites,m.fromCache),this.query=f}return Object.defineProperty(a.prototype,"docs",{get:function(){var s=[];return this.forEach(function(l){return s.push(l)}),s},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),a.prototype.forEach=function(s,l){var f=this;this._snapshot.docs.forEach(function(m){s.call(l,new kp(f._firestore,f._userDataWriter,m.key,m,new gl(f._snapshot.mutatedKeys.has(m.key),f._snapshot.fromCache),f.query.converter))})},a.prototype.docChanges=function(s){void 0===s&&(s={});var l=!!s.includeMetadataChanges;if(l&&this._snapshot.excludesMetadataChanges)throw new et(ke.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===l||(this._cachedChanges=function(f,m){if(f._snapshot.oldDocs.isEmpty()){var b=0;return f._snapshot.docChanges.map(function(M){return{type:"added",doc:new kp(f._firestore,f._userDataWriter,M.doc.key,M.doc,new gl(f._snapshot.mutatedKeys.has(M.doc.key),f._snapshot.fromCache),f.query.converter),oldIndex:-1,newIndex:b++}})}var D=f._snapshot.oldDocs;return f._snapshot.docChanges.filter(function(M){return m||3!==M.type}).map(function(M){var F=new kp(f._firestore,f._userDataWriter,M.doc.key,M.doc,new gl(f._snapshot.mutatedKeys.has(M.doc.key),f._snapshot.fromCache),f.query.converter),H=-1,Y=-1;return 0!==M.type&&(H=D.indexOf(M.doc.key),D=D.delete(M.doc.key)),1!==M.type&&(Y=(D=D.add(M.doc)).indexOf(M.doc.key)),{type:_h(M.type),doc:F,oldIndex:H,newIndex:Y}})}(this,l),this._cachedChangesIncludeMetadataChanges=l),this._cachedChanges},a}();function _h(a){switch(a){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return kt()}}function Fp(a,s){return a instanceof xc&&s instanceof xc?a._firestore===s._firestore&&a._key.isEqual(s._key)&&(null===a._document?null===s._document:a._document.isEqual(s._document))&&a._converter===s._converter:a instanceof Mc&&s instanceof Mc&&a._firestore===s._firestore&&V_(a.query,s.query)&&a.metadata.isEqual(s.metadata)&&a._snapshot.isEqual(s._snapshot)}function Lp(a){if(dc(a)&&0===a.explicitOrderBy.length)throw new et(ke.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var wf=function(){};function ws(a){for(var s=[],l=1;l<arguments.length;l++)s[l-1]=arguments[l];for(var f=0,m=s;f<m.length;f++){var b=m[f];a=b._apply(a)}return a}var IE=function(a){function s(l,f,m){var b=this;return(b=a.call(this)||this).jc=l,b.Wc=f,b.Gc=m,b.type="where",b}return(0,L.ZT)(s,a),s.prototype._apply=function(l){var b,M,f=Rp(l.firestore),m=function(b,D,M,F,H,Y,se){var de;if(H.isKeyField()){if("array-contains"===Y||"array-contains-any"===Y)throw new et(ke.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+Y+"' queries on FieldPath.documentId().");if("in"===Y||"not-in"===Y){$y(se,Y);for(var Se=[],De=0,$e=se;De<$e.length;De++)Se.push(Da(F,b,$e[De]));de={arrayValue:{values:Se}}}else de=Da(F,b,se)}else"in"!==Y&&"not-in"!==Y&&"array-contains-any"!==Y||$y(se,Y),de=fl(M,"where",se,"in"===Y||"not-in"===Y);var bt=Et.create(H,Y,de);return function(Qt,sn){if(sn.g()){var On=zh(Qt);if(null!==On&&!On.isEqual(sn.field))throw new et(ke.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+On.toString()+"' and '"+sn.field.toString()+"'");var Wn=Ba(Qt);null!==Wn&&Gy(0,sn.field,Wn)}var ur=function(Jo,t0){for(var sm=0,rb=Jo.filters;sm<rb.length;sm++){var ib=rb[sm];if(t0.indexOf(ib.op)>=0)return ib.op}return null}(Qt,function(Jo){switch(Jo){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(sn.op));if(null!==ur)throw new et(ke.INVALID_ARGUMENT,ur===sn.op?"Invalid query. You cannot use more than one '"+sn.op.toString()+"' filter.":"Invalid query. You cannot use '"+sn.op.toString()+"' filters with '"+ur.toString()+"' filters.")}(b,bt),bt}(l._query,0,f,l.firestore._databaseId,this.jc,this.Wc,this.Gc);return new Qo(l.firestore,l.converter,(M=(b=l._query).filters.concat([m]),new ki(b.path,b.collectionGroup,b.explicitOrderBy.slice(),M,b.limit,b.limitType,b.startAt,b.endAt)))},s}(wf),q_=function(a){function s(l,f){var m=this;return(m=a.call(this)||this).jc=l,m.zc=f,m.type="orderBy",m}return(0,L.ZT)(s,a),s.prototype._apply=function(l){var m,D,f=function(m,b,D){if(null!==m.startAt)throw new et(ke.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==m.endAt)throw new et(ke.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var M=new Lo(b,D);return function(F,H){if(null===Ba(F)){var Y=zh(F);null!==Y&&Gy(0,Y,H.field)}}(m,M),M}(l._query,this.jc,this.zc);return new Qo(l.firestore,l.converter,(D=(m=l._query).explicitOrderBy.concat([f]),new ki(m.path,m.collectionGroup,D,m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)))},s}(wf),Hy=function(a){function s(l,f,m){var b=this;return(b=a.call(this)||this).type=l,b.Hc=f,b.Jc=m,b}return(0,L.ZT)(s,a),s.prototype._apply=function(l){return new Qo(l.firestore,l.converter,ya(l._query,this.Hc,this.Jc))},s}(wf),z_=function(a){function s(l,f,m){var b=this;return(b=a.call(this)||this).type=l,b.Yc=f,b.Xc=m,b}return(0,L.ZT)(s,a),s.prototype._apply=function(l){var m,b,f=Xw(l,this.type,this.Yc,this.Xc);return new Qo(l.firestore,l.converter,(b=f,new ki((m=l._query).path,m.collectionGroup,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,b,m.endAt)))},s}(wf),W_=function(a){function s(l,f,m){var b=this;return(b=a.call(this)||this).type=l,b.Yc=f,b.Xc=m,b}return(0,L.ZT)(s,a),s.prototype._apply=function(l){var m,b,f=Xw(l,this.type,this.Yc,this.Xc);return new Qo(l.firestore,l.converter,(b=f,new ki((m=l._query).path,m.collectionGroup,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,b)))},s}(wf);function Xw(a,s,l,f){if(l[0]=(0,J.m9)(l[0]),l[0]instanceof Ja)return function(b,D,M,F,H){if(!F)throw new et(ke.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+M+"().");for(var Y=[],se=0,de=ma(b);se<de.length;se++){var Se=de[se];if(Se.field.isKeyField())Y.push(Fa(D,F.key));else{var De=F.data.field(Se.field);if(fa(De))throw new et(ke.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+Se.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===De){var $e=Se.field.canonicalString();throw new et(ke.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+$e+"' (used as the orderBy) does not exist.")}Y.push(De)}}return new vu(Y,H)}(a._query,a.firestore._databaseId,s,l[0]._document,f);var m=Rp(a.firestore);return function(b,D,M,F,H,Y){var se=b.explicitOrderBy;if(H.length>se.length)throw new et(ke.INVALID_ARGUMENT,"Too many arguments provided to "+F+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var de=[],Se=0;Se<H.length;Se++){var De=H[Se];if(se[Se].field.isKeyField()){if("string"!=typeof De)throw new et(ke.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+F+"(), but got a "+typeof De);if(!Jc(b)&&-1!==De.indexOf("/"))throw new et(ke.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+F+"() must be a plain document ID, but '"+De+"' contains a slash.");var $e=b.path.child(Vn.fromString(De));if(!jt.isDocumentKey($e))throw new et(ke.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+F+"() must result in a valid document path, but '"+$e+"' is not because it contains an odd number of segments.");var gt=new jt($e);de.push(Fa(D,gt))}else{var bt=fl(M,F,De);de.push(bt)}}return new vu(de,Y)}(a._query,a.firestore._databaseId,m,s,l,f)}function Da(a,s,l){if("string"==typeof(l=(0,J.m9)(l))){if(""===l)throw new et(ke.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Jc(s)&&-1!==l.indexOf("/"))throw new et(ke.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+l+"' contains a '/' character.");var f=s.path.child(Vn.fromString(l));if(!jt.isDocumentKey(f))throw new et(ke.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+f+"' is not because it has an odd number of segments ("+f.length+").");return Fa(a,new jt(f))}if(l instanceof Ur)return Fa(a,l._key);throw new et(ke.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+fd(l)+".")}function $y(a,s){if(!Array.isArray(a)||0===a.length)throw new et(ke.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+s.toString()+"' filters.");if(a.length>10)throw new et(ke.INVALID_ARGUMENT,"Invalid Query. '"+s.toString()+"' filters support a maximum of 10 elements in the value array.")}function Gy(a,s,l){if(!l.isEqual(s))throw new et(ke.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+s.toString()+"' and so you must also use '"+s.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+l.toString()+"' instead.")}var Z_=function(){function a(){}return a.prototype.convertValue=function(s,l){switch(void 0===l&&(l="none"),ni(s)){case 0:return null;case 1:return s.booleanValue;case 2:return br(s.integerValue||s.doubleValue);case 3:return this.convertTimestamp(s.timestampValue);case 4:return this.convertServerTimestamp(s,l);case 5:return s.stringValue;case 6:return this.convertBytes(ks(s.bytesValue));case 7:return this.convertReference(s.referenceValue);case 8:return this.convertGeoPoint(s.geoPointValue);case 9:return this.convertArray(s.arrayValue,l);case 10:return this.convertObject(s.mapValue,l);default:throw kt()}},a.prototype.convertObject=function(s,l){var f=this,m={};return oo(s.fields,function(b,D){m[b]=f.convertValue(D,l)}),m},a.prototype.convertGeoPoint=function(s){return new em(br(s.latitude),br(s.longitude))},a.prototype.convertArray=function(s,l){var f=this;return(s.values||[]).map(function(m){return f.convertValue(m,l)})},a.prototype.convertServerTimestamp=function(s,l){switch(l){case"previous":var f=jl(s);return null==f?null:this.convertValue(f,l);case"estimate":return this.convertTimestamp(_o(s));default:return null}},a.prototype.convertTimestamp=function(s){var l=Ps(s);return new di(l.seconds,l.nanos)},a.prototype.convertDocumentKey=function(s,l){var f=Vn.fromString(s);rn(Dg(f));var m=new dd(f.get(1),f.get(3)),b=new jt(f.popFirst(5));return m.isEqual(l)||fr("Document "+b+" contains a document reference within a different database ("+m.projectId+"/"+m.database+") which is not supported. It will be treated as a reference in the current database ("+l.projectId+"/"+l.database+") instead."),b},a}();function Vp(a,s,l){return a?l&&(l.merge||l.mergeFields)?a.toFirestore(s,l):a.toFirestore(s):s}var nm=function(a){function s(l){var f=this;return(f=a.call(this)||this).firestore=l,f}return(0,L.ZT)(s,a),s.prototype.convertBytes=function(l){return new Sc(l)},s.prototype.convertReference=function(l){var f=this.convertDocumentKey(l,this.firestore._databaseId);return new Ur(this.firestore,null,f)},s}(Z_),Up=function(){function a(s,l){this._firestore=s,this._commitHandler=l,this._mutations=[],this._committed=!1,this._dataReader=Rp(s)}return a.prototype.set=function(s,l,f){this._verifyNotCommitted();var m=yd(s,this._firestore),b=Vp(m.converter,l,f),D=Vy(this._dataReader,"WriteBatch.set",m._key,b,null!==m.converter,f);return this._mutations.push(D.toMutation(m._key,Bt.none())),this},a.prototype.update=function(s,l,f){for(var m=[],b=3;b<arguments.length;b++)m[b-3]=arguments[b];this._verifyNotCommitted();var D,M=yd(s,this._firestore);return D="string"==typeof(l=(0,J.m9)(l))||l instanceof Qa?vf(this._dataReader,"WriteBatch.update",M._key,l,f,m):vh(this._dataReader,"WriteBatch.update",M._key,l),this._mutations.push(D.toMutation(M._key,Bt.exists(!0))),this},a.prototype.delete=function(s){this._verifyNotCommitted();var l=yd(s,this._firestore);return this._mutations=this._mutations.concat(new $l(l._key,Bt.none())),this},a.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},a.prototype._verifyNotCommitted=function(){if(this._committed)throw new et(ke.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},a}();function yd(a,s){if((a=(0,J.m9)(a)).firestore!==s)throw new et(ke.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return a}var vd=function(a){function s(l){var f=this;return(f=a.call(this)||this).firestore=l,f}return(0,L.ZT)(s,a),s.prototype.convertBytes=function(l){return new Sc(l)},s.prototype.convertReference=function(l){var f=this.convertDocumentKey(l,this.firestore._databaseId);return new Ur(this.firestore,null,f)},s}(Z_);function K_(a,s,l){a=zn(a,Ur);var f=zn(a.firestore,mi),m=Vp(a.converter,s,l);return bf(f,[Vy(Rp(f),"setDoc",a._key,m,null!==a.converter,l).toMutation(a._key,Bt.none())])}function Y_(a,s,l){for(var f=[],m=3;m<arguments.length;m++)f[m-3]=arguments[m];a=zn(a,Ur);var b=zn(a.firestore,mi),D=Rp(b);return bf(b,[("string"==typeof(s=(0,J.m9)(s))||s instanceof Qa?vf(D,"updateDoc",a._key,s,l,f):vh(D,"updateDoc",a._key,s)).toMutation(a._key,Bt.exists(!0))])}function qy(a){for(var s,l,f,m=[],b=1;b<arguments.length;b++)m[b-1]=arguments[b];a=(0,J.m9)(a);var D={includeMetadataChanges:!1},M=0;"object"!=typeof m[M]||gf(m[M])||(D=m[M],M++);var F,H,Y,se={includeMetadataChanges:D.includeMetadataChanges};if(gf(m[M])){var de=m[M];m[M]=null===(s=de.next)||void 0===s?void 0:s.bind(de),m[M+1]=null===(l=de.error)||void 0===l?void 0:l.bind(de),m[M+2]=null===(f=de.complete)||void 0===f?void 0:f.bind(de)}if(a instanceof Ur)H=zn(a.firestore,mi),Y=hs(a._key.path),F={next:function($e){m[M]&&m[M](rm(H,a,$e))},error:m[M+1],complete:m[M+2]};else{var Se=zn(a,Qo);H=zn(Se.firestore,mi),Y=Se._query;var De=new vd(H);F={next:function($e){m[M]&&m[M](new Mc(H,De,Se,$e))},error:m[M+1],complete:m[M+2]},Lp(a._query)}return function($e,gt,bt,Qt){var sn=this,On=new Tc(Qt),Wn=new sd(gt,On,bt);return $e.asyncQueue.enqueueAndForget(function(){return(0,L.mG)(sn,void 0,void 0,function(){var ur;return(0,L.Jh)(this,function(Jo){switch(Jo.label){case 0:return ur=df,[4,ll($e)];case 1:return[2,ur.apply(void 0,[Jo.sent(),Wn])]}})})}),function(){On.Wo(),$e.asyncQueue.enqueueAndForget(function(){return(0,L.mG)(sn,void 0,void 0,function(){var ur;return(0,L.Jh)(this,function(Jo){switch(Jo.label){case 0:return ur=hf,[4,ll($e)];case 1:return[2,ur.apply(void 0,[Jo.sent(),Wn])]}})})})}}(yi(H),Y,se,F)}function bf(a,s){return function(l,f){var m=this,b=new Jn;return l.asyncQueue.enqueueAndForget(function(){return(0,L.mG)(m,void 0,void 0,function(){var D;return(0,L.Jh)(this,function(M){switch(M.label){case 0:return D=C_,[4,Qg(l)];case 1:return[2,D.apply(void 0,[M.sent(),f,b])]}})})}),b.promise}(yi(a),s)}function rm(a,s,l){var f=l.docs.get(s._key),m=new vd(a);return new xc(a,m,s._key,f,new gl(l.hasPendingWrites,l.fromCache),s.converter)}var eb=function(a){function s(l,f){var m=this;return(m=a.call(this,l,f)||this)._firestore=l,m}return(0,L.ZT)(s,a),s.prototype.get=function(l){var f=this,m=yd(l,this._firestore),b=new vd(this._firestore);return a.prototype.get.call(this,l).then(function(D){return new xc(f._firestore,b,m._key,D._document,new gl(!1,!1),m.converter)})},s}(function(){function a(s,l){this._firestore=s,this._transaction=l,this._dataReader=Rp(s)}return a.prototype.get=function(s){var l=this,f=yd(s,this._firestore),m=new nm(this._firestore);return this._transaction.lookup([f._key]).then(function(b){if(!b||1!==b.length)return kt();var D=b[0];if(D.isFoundDocument())return new Ja(l._firestore,m,D.key,D,f.converter);if(D.isNoDocument())return new Ja(l._firestore,m,f._key,null,f.converter);throw kt()})},a.prototype.set=function(s,l,f){var m=yd(s,this._firestore),b=Vp(m.converter,l,f),D=Vy(this._dataReader,"Transaction.set",m._key,b,null!==m.converter,f);return this._transaction.set(m._key,D),this},a.prototype.update=function(s,l,f){for(var m=[],b=3;b<arguments.length;b++)m[b-3]=arguments[b];var D,M=yd(s,this._firestore);return D="string"==typeof(l=(0,J.m9)(l))||l instanceof Qa?vf(this._dataReader,"Transaction.update",M._key,l,f,m):vh(this._dataReader,"Transaction.update",M._key,l),this._transaction.update(M._key,D),this},a.prototype.delete=function(s){var l=yd(s,this._firestore);return this._transaction.delete(l._key),this},a}());function im(){if(typeof Uint8Array>"u")throw new et(ke.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Bp(){if(typeof atob>"u")throw new et(ke.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Q_=function(){function a(s){this._delegate=s}return a.fromBase64String=function(s){return Bp(),new a(Sc.fromBase64String(s))},a.fromUint8Array=function(s){return im(),new a(Sc.fromUint8Array(s))},a.prototype.toBase64=function(){return Bp(),this._delegate.toBase64()},a.prototype.toUint8Array=function(){return im(),this._delegate.toUint8Array()},a.prototype.isEqual=function(s){return this._delegate.isEqual(s._delegate)},a.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},a}(),Mu=function(){function a(){}return a.prototype.enableIndexedDbPersistence=function(s,l){return function(f,m){mh(f=zn(f,mi));var b=yi(f),D=f._freezeSettings(),M=new Ty;return pd(b,M,new Cy(M,D.cacheSizeBytes,m?.forceOwnership))}(s._delegate,{forceOwnership:l})},a.prototype.enableMultiTabIndexedDbPersistence=function(s){return function(l){mh(l=zn(l,mi));var f=yi(l),m=l._freezeSettings(),b=new Ty;return pd(f,b,new Dy(b,m.cacheSizeBytes))}(s._delegate)},a.prototype.clearIndexedDbPersistence=function(s){return function(l){var f=this;if(l._initialized&&!l._terminated)throw new et(ke.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var m=new Jn;return l._queue.enqueueAndForgetEvenWhileRestricted(function(){return(0,L.mG)(f,void 0,void 0,function(){var b;return(0,L.Jh)(this,function(D){switch(D.label){case 0:return D.trys.push([0,2,,3]),[4,function(M){return(0,L.mG)(this,void 0,void 0,function(){return(0,L.Jh)(this,function(H){switch(H.label){case 0:return ol.yt()?[4,ol.delete(M+"main")]:[2,Promise.resolve()];case 1:return H.sent(),[2]}})})}(fp(l._databaseId,l._persistenceKey))];case 1:return D.sent(),m.resolve(),[3,3];case 2:return b=D.sent(),m.reject(b),[3,3];case 3:return[2]}})})}),m.promise}(s._delegate)},a}(),om=function(){function a(s,l,f){var m=this;this._delegate=l,this.Zc=f,this.INTERNAL={delete:function(){return m.terminate()}},s instanceof dd||(this.tu=s)}return Object.defineProperty(a.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),a.prototype.settings=function(s){var l=this._delegate._getSettings();s.merge||l.host===s.host||ca("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),s.merge&&delete(s=Object.assign(Object.assign({},l),s)).merge,this._delegate._setSettings(s)},a.prototype.useEmulator=function(s,l,f){void 0===f&&(f={}),function(m,b,D,M){var F;void 0===M&&(M={});var H=(m=zn(m,ky))._getSettings();if("firestore.googleapis.com"!==H.host&&H.host!==b&&ca("Host has been set in both settings() and useEmulator(), emulator host will be used"),m._setSettings(Object.assign(Object.assign({},H),{host:b+":"+D,ssl:!1})),M.mockUserToken){var Y,se;if("string"==typeof M.mockUserToken)Y=M.mockUserToken,se=Io.MOCK_USER;else{Y=(0,J.Sg)(M.mockUserToken,null===(F=m._app)||void 0===F?void 0:F.options.projectId);var de=M.mockUserToken.sub||M.mockUserToken.user_id;if(!de)throw new et(ke.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");se=new Io(de)}m._credentials=new Ry(new F_(Y,se))}}(this._delegate,s,l,f)},a.prototype.enableNetwork=function(){return function(s){var l=this;return s.asyncQueue.enqueue(function(){return(0,L.mG)(l,void 0,void 0,function(){var f,m;return(0,L.Jh)(this,function(b){switch(b.label){case 0:return[4,My(s)];case 1:return f=b.sent(),[4,Sp(s)];case 2:return m=b.sent(),[2,(f.setNetworkEnabled(!0),D=m,M=vt(D),M.Or.delete(0),dh(M))]}var D,M})})})}(yi(zn(this._delegate,mi)))},a.prototype.disableNetwork=function(){return function(s){var l=this;return s.asyncQueue.enqueue(function(){return(0,L.mG)(l,void 0,void 0,function(){var f,m;return(0,L.Jh)(this,function(b){switch(b.label){case 0:return[4,My(s)];case 1:return f=b.sent(),[4,Sp(s)];case 2:return m=b.sent(),[2,(f.setNetworkEnabled(!1),function(D){return(0,L.mG)(this,void 0,void 0,function(){var M;return(0,L.Jh)(this,function(F){switch(F.label){case 0:return(M=vt(D)).Or.add(0),[4,ul(M)];case 1:return F.sent(),M.Br.set("Offline"),[2]}})})}(m))]}})})})}(yi(zn(this._delegate,mi)))},a.prototype.enablePersistence=function(s){var l=!1,f=!1;return s&&gh("synchronizeTabs",l=!!s.synchronizeTabs,"experimentalForceOwningTab",f=!!s.experimentalForceOwningTab),l?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,f)},a.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},a.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},a.prototype.waitForPendingWrites=function(){return function(s){var l=this,f=new Jn;return s.asyncQueue.enqueueAndForget(function(){return(0,L.mG)(l,void 0,void 0,function(){var m;return(0,L.Jh)(this,function(b){switch(b.label){case 0:return m=Ww,[4,Qg(s)];case 1:return[2,m.apply(void 0,[b.sent(),f])]}})})}),f.promise}(yi(zn(this._delegate,mi)))},a.prototype.onSnapshotsInSync=function(s){return f=s,function(m,b){var D=this,M=new Tc(b);return m.asyncQueue.enqueueAndForget(function(){return(0,L.mG)(D,void 0,void 0,function(){var F;return(0,L.Jh)(this,function(H){switch(H.label){case 0:return F=function(Y,se){vt(Y).Gr.add(se),se.next()},[4,ll(m)];case 1:return[2,F.apply(void 0,[H.sent(),M])]}})})}),function(){M.Wo(),m.asyncQueue.enqueueAndForget(function(){return(0,L.mG)(D,void 0,void 0,function(){var F;return(0,L.Jh)(this,function(H){switch(H.label){case 0:return F=function(Y,se){vt(Y).Gr.delete(se)},[4,ll(m)];case 1:return[2,F.apply(void 0,[H.sent(),M])]}})})})}}(yi(zn(this._delegate,mi)),gf(f)?f:{next:f});var f},Object.defineProperty(a.prototype,"app",{get:function(){if(!this.tu)throw new et(ke.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),a.prototype.collection=function(s){try{return new Cf(this,Fy(this._delegate,s))}catch(l){throw bs(l,"collection()","Firestore.collection()")}},a.prototype.doc=function(s){try{return new _d(this,Mp(this._delegate,s))}catch(l){throw bs(l,"doc()","Firestore.doc()")}},a.prototype.collectionGroup=function(s){try{return new yl(this,function(l,f){if(l=zn(l,ky),Oy("collectionGroup","collection id",f),f.indexOf("/")>=0)throw new et(ke.INVALID_ARGUMENT,"Invalid collection ID '"+f+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Qo(l,null,(m=f,new ki(Vn.emptyPath(),m)));var m}(this._delegate,s))}catch(l){throw bs(l,"collectionGroup()","Firestore.collectionGroup()")}},a.prototype.runTransaction=function(s){var f,l=this;return function(b,D){var M=this,F=new Jn;return b.asyncQueue.enqueueAndForget(function(){return(0,L.mG)(M,void 0,void 0,function(){var H;return(0,L.Jh)(this,function(Y){switch(Y.label){case 0:return[4,(se=b,Kg(se).then(function(de){return de.datastore}))];case 1:return H=Y.sent(),new ph(b.asyncQueue,H,D,F).run(),[2]}var se})})}),F.promise}(yi(f=this._delegate),function(b){return function(f){return s(new zy(l,f))}(new eb(f,b))})},a.prototype.batch=function(){var s=this;return yi(this._delegate),new Wy(new Up(this._delegate,function(l){return bf(s._delegate,l)}))},a.prototype.loadBundle=function(s){throw new et(ke.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},a.prototype.namedQuery=function(s){throw new et(ke.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},a}(),ml=function(a){function s(l){var f=this;return(f=a.call(this)||this).firestore=l,f}return(0,L.ZT)(s,a),s.prototype.convertBytes=function(l){return new Q_(new Sc(l))},s.prototype.convertReference=function(l){var f=this.convertDocumentKey(l,this.firestore._databaseId);return _d.eu(f,this.firestore,null)},s}(Z_),zy=function(){function a(s,l){this._firestore=s,this._delegate=l,this._userDataWriter=new ml(s)}return a.prototype.get=function(s){var l=this,f=Df(s);return this._delegate.get(f).then(function(m){return new Ef(l._firestore,new xc(l._firestore._delegate,l._userDataWriter,m._key,m._document,m.metadata,f.converter))})},a.prototype.set=function(s,l,f){var m=Df(s);return f?(L_("Transaction.set",f),this._delegate.set(m,l,f)):this._delegate.set(m,l),this},a.prototype.update=function(s,l,f){for(var m,b=[],D=3;D<arguments.length;D++)b[D-3]=arguments[D];var M=Df(s);return 2===arguments.length?this._delegate.update(M,l):(m=this._delegate).update.apply(m,(0,L.ev)([M,l,f],b)),this},a.prototype.delete=function(s){var l=Df(s);return this._delegate.delete(l),this},a}(),Wy=function(){function a(s){this._delegate=s}return a.prototype.set=function(s,l,f){var m=Df(s);return f?(L_("WriteBatch.set",f),this._delegate.set(m,l,f)):this._delegate.set(m,l),this},a.prototype.update=function(s,l,f){for(var m,b=[],D=3;D<arguments.length;D++)b[D-3]=arguments[D];var M=Df(s);return 2===arguments.length?this._delegate.update(M,l):(m=this._delegate).update.apply(m,(0,L.ev)([M,l,f],b)),this},a.prototype.delete=function(s){var l=Df(s);return this._delegate.delete(l),this},a.prototype.commit=function(){return this._delegate.commit()},a}(),If=function(){function a(s,l,f){this._firestore=s,this._userDataWriter=l,this._delegate=f}return a.prototype.fromFirestore=function(s,l){var f=new kp(this._firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,null);return this._delegate.fromFirestore(new bd(this._firestore,f),l??{})},a.prototype.toFirestore=function(s,l){return l?this._delegate.toFirestore(s,l):this._delegate.toFirestore(s)},a.nu=function(s,l){var f=a.su,m=f.get(s);m||f.set(s,m=new WeakMap);var b=m.get(l);return b||(b=new a(s,new ml(s),l),m.set(l,b)),b},a}();If.su=new WeakMap;var _d=function(){function a(s,l){this.firestore=s,this._delegate=l,this._userDataWriter=new ml(s)}return a.iu=function(s,l,f){if(s.length%2!=0)throw new et(ke.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+s.canonicalString()+" has "+s.length);return new a(l,new Ur(l._delegate,f,new jt(s)))},a.eu=function(s,l,f){return new a(l,new Ur(l._delegate,f,s))},Object.defineProperty(a.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"parent",{get:function(){return new Cf(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),a.prototype.collection=function(s){try{return new Cf(this.firestore,Fy(this._delegate,s))}catch(l){throw bs(l,"collection()","DocumentReference.collection()")}},a.prototype.isEqual=function(s){return(s=(0,J.m9)(s))instanceof Ur&&wE(this._delegate,s)},a.prototype.set=function(s,l){l=L_("DocumentReference.set",l);try{return l?K_(this._delegate,s,l):K_(this._delegate,s)}catch(f){throw bs(f,"setDoc()","DocumentReference.set()")}},a.prototype.update=function(s,l){for(var f=[],m=2;m<arguments.length;m++)f[m-2]=arguments[m];try{return 1===arguments.length?Y_(this._delegate,s):Y_.apply(void 0,(0,L.ev)([this._delegate,s,l],f))}catch(b){throw bs(b,"updateDoc()","DocumentReference.update()")}},a.prototype.delete=function(){return bf(zn((s=this._delegate).firestore,mi),[new $l(s._key,Bt.none())]);var s},a.prototype.onSnapshot=function(){for(var s=this,l=[],f=0;f<arguments.length;f++)l[f]=arguments[f];var m=wd(l),b=J_(l,function(D){return new Ef(s.firestore,new xc(s.firestore._delegate,s._userDataWriter,D._key,D._document,D.metadata,s._delegate.converter))});return qy(this._delegate,m,b)},a.prototype.get=function(s){var l=this;return("cache"===s?.source?function(f){f=zn(f,Ur);var m=zn(f.firestore,mi),b=yi(m),D=new vd(m);return function(M,F){var H=this,Y=new Jn;return M.asyncQueue.enqueueAndForget(function(){return(0,L.mG)(H,void 0,void 0,function(){var se;return(0,L.Jh)(this,function(de){switch(de.label){case 0:return se=function(Se,De,$e){return(0,L.mG)(this,void 0,void 0,function(){var gt,bt;return(0,L.Jh)(this,function(Qt){switch(Qt.label){case 0:return Qt.trys.push([0,2,,3]),[4,(sn=Se,On=De,Wn=vt(sn),Wn.persistence.runTransaction("read document","readonly",function(ur){return Wn.Mn.mn(ur,On)}))];case 1:return(bt=Qt.sent()).isFoundDocument()?$e.resolve(bt):bt.isNoDocument()?$e.resolve(null):$e.reject(new et(ke.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return gt=Qt.sent(),bt=cl(gt,"Failed to get document '"+De+" from cache"),$e.reject(bt),[3,3];case 3:return[2]}var sn,On,Wn})})},[4,Yg(M)];case 1:return[2,se.apply(void 0,[de.sent(),F,Y])]}})})}),Y.promise}(b,f._key).then(function(M){return new xc(m,D,f._key,M,new gl(null!==M&&M.hasLocalMutations,!0),f.converter)})}(this._delegate):"server"===s?.source?function(f){f=zn(f,Ur);var m=zn(f.firestore,mi);return Jg(yi(m),f._key,{source:"server"}).then(function(b){return rm(m,f,b)})}(this._delegate):function(f){f=zn(f,Ur);var m=zn(f.firestore,mi);return Jg(yi(m),f._key).then(function(b){return rm(m,f,b)})}(this._delegate)).then(function(f){return new Ef(l.firestore,new xc(l.firestore._delegate,l._userDataWriter,f._key,f._document,f.metadata,l._delegate.converter))})},a.prototype.withConverter=function(s){return new a(this.firestore,this._delegate.withConverter(s?If.nu(this.firestore,s):null))},a}();function bs(a,s,l){return a.message=a.message.replace(s,l),a}function wd(a){for(var s=0,l=a;s<l.length;s++){var f=l[s];if("object"==typeof f&&!gf(f))return f}return{}}function J_(a,s){var l,f,m;return{next:function(b){m.next&&m.next(s(b))},error:null===(l=(m=gf(a[0])?a[0]:gf(a[1])?a[1]:"function"==typeof a[0]?{next:a[0],error:a[1],complete:a[2]}:{next:a[1],error:a[2],complete:a[3]}).error)||void 0===l?void 0:l.bind(m),complete:null===(f=m.complete)||void 0===f?void 0:f.bind(m)}}var Ef=function(){function a(s,l){this._firestore=s,this._delegate=l}return Object.defineProperty(a.prototype,"ref",{get:function(){return new _d(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),a.prototype.data=function(s){return this._delegate.data(s)},a.prototype.get=function(s,l){return this._delegate.get(s,l)},a.prototype.isEqual=function(s){return Fp(this._delegate,s._delegate)},a}(),bd=function(a){function s(){return null!==a&&a.apply(this,arguments)||this}return(0,L.ZT)(s,a),s.prototype.data=function(l){return this._delegate.data(l)},s}(Ef),yl=function(){function a(s,l){this.firestore=s,this._delegate=l,this._userDataWriter=new ml(s)}return a.prototype.where=function(s,l,f){try{return new a(this.firestore,ws(this._delegate,(D=f,M=l,F=pl("where",m=s),new IE(F,M,D))))}catch(m){throw bs(m,/(orderBy|where)\(\)/,"Query.$1()")}var m,D,M,F},a.prototype.orderBy=function(s,l){try{return new a(this.firestore,ws(this._delegate,function(f,m){void 0===m&&(m="asc");var b=m,D=pl("orderBy",f);return new q_(D,b)}(s,l)))}catch(f){throw bs(f,/(orderBy|where)\(\)/,"Query.$1()")}},a.prototype.limit=function(s){try{return new a(this.firestore,ws(this._delegate,(Ny("limit",l=s),new Hy("limit",l,"F"))))}catch(l){throw bs(l,"limit()","Query.limit()")}var l},a.prototype.limitToLast=function(s){try{return new a(this.firestore,ws(this._delegate,(Ny("limitToLast",l=s),new Hy("limitToLast",l,"L"))))}catch(l){throw bs(l,"limitToLast()","Query.limitToLast()")}var l},a.prototype.startAt=function(){for(var s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];try{return new a(this.firestore,ws(this._delegate,function(){for(var f=[],m=0;m<arguments.length;m++)f[m]=arguments[m];return new z_("startAt",f,!0)}.apply(void 0,s)))}catch(f){throw bs(f,"startAt()","Query.startAt()")}},a.prototype.startAfter=function(){for(var s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];try{return new a(this.firestore,ws(this._delegate,function(){for(var f=[],m=0;m<arguments.length;m++)f[m]=arguments[m];return new z_("startAfter",f,!1)}.apply(void 0,s)))}catch(f){throw bs(f,"startAfter()","Query.startAfter()")}},a.prototype.endBefore=function(){for(var s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];try{return new a(this.firestore,ws(this._delegate,function(){for(var f=[],m=0;m<arguments.length;m++)f[m]=arguments[m];return new W_("endBefore",f,!0)}.apply(void 0,s)))}catch(f){throw bs(f,"endBefore()","Query.endBefore()")}},a.prototype.endAt=function(){for(var s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];try{return new a(this.firestore,ws(this._delegate,function(){for(var f=[],m=0;m<arguments.length;m++)f[m]=arguments[m];return new W_("endAt",f,!1)}.apply(void 0,s)))}catch(f){throw bs(f,"endAt()","Query.endAt()")}},a.prototype.isEqual=function(s){return V_(this._delegate,s._delegate)},a.prototype.get=function(s){var l=this;return("cache"===s?.source?function(f){f=zn(f,Qo);var m=zn(f.firestore,mi),b=yi(m),D=new vd(m);return function(M,F){var H=this,Y=new Jn;return M.asyncQueue.enqueueAndForget(function(){return(0,L.mG)(H,void 0,void 0,function(){var se;return(0,L.Jh)(this,function(de){switch(de.label){case 0:return se=function(Se,De,$e){return(0,L.mG)(this,void 0,void 0,function(){var gt,bt,Qt,sn,On;return(0,L.Jh)(this,function(Wn){switch(Wn.label){case 0:return Wn.trys.push([0,2,,3]),[4,ah(Se,De,!0)];case 1:return On=Wn.sent(),gt=new b_(De,On.Bn),bt=gt._o(On.documents),Qt=gt.applyChanges(bt,!1),$e.resolve(Qt.snapshot),[3,3];case 2:return sn=Wn.sent(),On=cl(sn,"Failed to execute query '"+De+" against cache"),$e.reject(On),[3,3];case 3:return[2]}})})},[4,Yg(M)];case 1:return[2,se.apply(void 0,[de.sent(),F,Y])]}})})}),Y.promise}(b,f._query).then(function(M){return new Mc(m,D,f,M)})}(this._delegate):"server"===s?.source?function(f){f=zn(f,Qo);var m=zn(f.firestore,mi),b=yi(m),D=new vd(m);return Ap(b,f._query,{source:"server"}).then(function(M){return new Mc(m,D,f,M)})}(this._delegate):function(f){f=zn(f,Qo);var m=zn(f.firestore,mi),b=yi(m),D=new vd(m);return Lp(f._query),Ap(b,f._query).then(function(M){return new Mc(m,D,f,M)})}(this._delegate)).then(function(f){return new jp(l.firestore,new Mc(l.firestore._delegate,l._userDataWriter,l._delegate,f._snapshot))})},a.prototype.onSnapshot=function(){for(var s=this,l=[],f=0;f<arguments.length;f++)l[f]=arguments[f];var m=wd(l),b=J_(l,function(D){return new jp(s.firestore,new Mc(s.firestore._delegate,s._userDataWriter,s._delegate,D._snapshot))});return qy(this._delegate,m,b)},a.prototype.withConverter=function(s){return new a(this.firestore,this._delegate.withConverter(s?If.nu(this.firestore,s):null))},a}(),nb=function(){function a(s,l){this._firestore=s,this._delegate=l}return Object.defineProperty(a.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"doc",{get:function(){return new bd(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),a}(),jp=function(){function a(s,l){this._firestore=s,this._delegate=l}return Object.defineProperty(a.prototype,"query",{get:function(){return new yl(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"docs",{get:function(){var s=this;return this._delegate.docs.map(function(l){return new bd(s._firestore,l)})},enumerable:!1,configurable:!0}),a.prototype.docChanges=function(s){var l=this;return this._delegate.docChanges(s).map(function(f){return new nb(l._firestore,f)})},a.prototype.forEach=function(s,l){var f=this;this._delegate.forEach(function(m){s.call(l,new bd(f._firestore,m))})},a.prototype.isEqual=function(s){return Fp(this._delegate,s._delegate)},a}(),Cf=function(a){function s(l,f){var m=this;return(m=a.call(this,l,f)||this).firestore=l,m._delegate=f,m}return(0,L.ZT)(s,a),Object.defineProperty(s.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"parent",{get:function(){var l=this._delegate.parent;return l?new _d(this.firestore,l):null},enumerable:!1,configurable:!0}),s.prototype.doc=function(l){try{return new _d(this.firestore,void 0===l?Mp(this._delegate):Mp(this._delegate,l))}catch(f){throw bs(f,"doc()","CollectionReference.doc()")}},s.prototype.add=function(l){var m,b,D,M,F,f=this;return(m=this._delegate,b=l,D=zn(m.firestore,mi),M=Mp(m),F=Vp(m.converter,b),bf(D,[Vy(Rp(m.firestore),"addDoc",M._key,F,null!==m.converter,{}).toMutation(M._key,Bt.exists(!1))]).then(function(){return M})).then(function(m){return new _d(f.firestore,m)})},s.prototype.isEqual=function(l){return wE(this._delegate,l._delegate)},s.prototype.withConverter=function(l){return new s(this.firestore,this._delegate.withConverter(l?If.nu(this.firestore,l):null))},s}(yl);function Df(a){return zn(a,Ur)}var QD=function(){function a(){for(var s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];this._delegate=new(Qa.bind.apply(Qa,(0,L.ev)([void 0],s)))}return a.documentId=function(){return new a(Wi.keyField().canonicalString())},a.prototype.isEqual=function(s){return(s=(0,J.m9)(s))instanceof Qa&&this._delegate._internalPath.isEqual(s._internalPath)},a}(),Hp=function(){function a(s){this._delegate=s}return a.serverTimestamp=function(){var s=new Op("serverTimestamp");return s._methodName="FieldValue.serverTimestamp",new a(s)},a.delete=function(){var s=new hl("deleteField");return s._methodName="FieldValue.delete",new a(s)},a.arrayUnion=function(){for(var s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];var f=function(){for(var m=[],b=0;b<arguments.length;b++)m[b]=arguments[b];return new Np("arrayUnion",m)}.apply(void 0,s);return f._methodName="FieldValue.arrayUnion",new a(f)},a.arrayRemove=function(){for(var s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];var f=function(){for(var m=[],b=0;b<arguments.length;b++)m[b]=arguments[b];return new yf("arrayRemove",m)}.apply(void 0,s);return f._methodName="FieldValue.arrayRemove",new a(f)},a.increment=function(s){var l=new $_("increment",s);return l._methodName="FieldValue.increment",new a(l)},a.prototype.isEqual=function(s){return this._delegate.isEqual(s._delegate)},a}(),Zy=ee(1716),Id={Firestore:om,GeoPoint:em,Timestamp:di,Blob:Q_,Transaction:zy,WriteBatch:Wy,DocumentReference:_d,DocumentSnapshot:Ef,Query:yl,QueryDocumentSnapshot:bd,QuerySnapshot:jp,CollectionReference:Cf,FieldPath:QD,FieldValue:Hp,setLogLevel:function tb(a){Po.setLogLevel(a)},CACHE_SIZE_UNLIMITED:-1};!function e0(a){a.INTERNAL.registerComponent(new Zy.wA("firestore",function(f){return s=f.getProvider("app").getImmediate(),l=f.getProvider("auth-internal"),new om(s,new mi(s,l),new Mu);var s,l},"PUBLIC").setServiceProps(Object.assign({},Id))),a.registerVersion("@firebase/firestore","2.4.1")}(y.Z)},9751:(Ut,qe,ee)=>{ee.d(qe,{y:()=>Le});var y=ee(2961),L=ee(727),J=ee(8822),me=ee(9635),Ie=ee(2416),Ue=ee(576),Oe=ee(2806);let Le=(()=>{class oe{constructor(we){we&&(this._subscribe=we)}lift(we){const Ne=new oe;return Ne.source=this,Ne.operator=we,Ne}subscribe(we,Ne,ut){const Pe=function X(oe){return oe&&oe instanceof y.Lv||function te(oe){return oe&&(0,Ue.m)(oe.next)&&(0,Ue.m)(oe.error)&&(0,Ue.m)(oe.complete)}(oe)&&(0,L.Nn)(oe)}(we)?we:new y.Hp(we,Ne,ut);return(0,Oe.x)(()=>{const{operator:Me,source:yt}=this;Pe.add(Me?Me.call(Pe,yt):yt?this._subscribe(Pe):this._trySubscribe(Pe))}),Pe}_trySubscribe(we){try{return this._subscribe(we)}catch(Ne){we.error(Ne)}}forEach(we,Ne){return new(Ne=ue(Ne))((ut,Pe)=>{const Me=new y.Hp({next:yt=>{try{we(yt)}catch(ht){Pe(ht),Me.unsubscribe()}},error:Pe,complete:ut});this.subscribe(Me)})}_subscribe(we){var Ne;return null===(Ne=this.source)||void 0===Ne?void 0:Ne.subscribe(we)}[J.L](){return this}pipe(...we){return(0,me.U)(we)(this)}toPromise(we){return new(we=ue(we))((Ne,ut)=>{let Pe;this.subscribe(Me=>Pe=Me,Me=>ut(Me),()=>Ne(Pe))})}}return oe.create=be=>new oe(be),oe})();function ue(oe){var be;return null!==(be=oe??Ie.v.Promise)&&void 0!==be?be:Promise}},7579:(Ut,qe,ee)=>{ee.d(qe,{x:()=>Oe});var y=ee(9751),L=ee(727);const me=(0,ee(3888).d)(ue=>function(){ue(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ie=ee(8737),Ue=ee(2806);let Oe=(()=>{class ue extends y.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(X){const oe=new Le(this,this);return oe.operator=X,oe}_throwIfClosed(){if(this.closed)throw new me}next(X){(0,Ue.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const oe of this.currentObservers)oe.next(X)}})}error(X){(0,Ue.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=X;const{observers:oe}=this;for(;oe.length;)oe.shift().error(X)}})}complete(){(0,Ue.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:X}=this;for(;X.length;)X.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var X;return(null===(X=this.observers)||void 0===X?void 0:X.length)>0}_trySubscribe(X){return this._throwIfClosed(),super._trySubscribe(X)}_subscribe(X){return this._throwIfClosed(),this._checkFinalizedStatuses(X),this._innerSubscribe(X)}_innerSubscribe(X){const{hasError:oe,isStopped:be,observers:we}=this;return oe||be?L.Lc:(this.currentObservers=null,we.push(X),new L.w0(()=>{this.currentObservers=null,(0,Ie.P)(we,X)}))}_checkFinalizedStatuses(X){const{hasError:oe,thrownError:be,isStopped:we}=this;oe?X.error(be):we&&X.complete()}asObservable(){const X=new y.y;return X.source=this,X}}return ue.create=(te,X)=>new Le(te,X),ue})();class Le extends Oe{constructor(te,X){super(),this.destination=te,this.source=X}next(te){var X,oe;null===(oe=null===(X=this.destination)||void 0===X?void 0:X.next)||void 0===oe||oe.call(X,te)}error(te){var X,oe;null===(oe=null===(X=this.destination)||void 0===X?void 0:X.error)||void 0===oe||oe.call(X,te)}complete(){var te,X;null===(X=null===(te=this.destination)||void 0===te?void 0:te.complete)||void 0===X||X.call(te)}_subscribe(te){var X,oe;return null!==(oe=null===(X=this.source)||void 0===X?void 0:X.subscribe(te))&&void 0!==oe?oe:L.Lc}}},2961:(Ut,qe,ee)=>{ee.d(qe,{Hp:()=>ut,Lv:()=>oe});var y=ee(576),L=ee(727),J=ee(2416),me=ee(7849);function Ie(){}const Ue=ue("C",void 0,void 0);function ue(ze,Ce,je){return{kind:ze,value:Ce,error:je}}var te=ee(3410),X=ee(2806);class oe extends L.w0{constructor(Ce){super(),this.isStopped=!1,Ce?(this.destination=Ce,(0,L.Nn)(Ce)&&Ce.add(this)):this.destination=ht}static create(Ce,je,ft){return new ut(Ce,je,ft)}next(Ce){this.isStopped?yt(function Le(ze){return ue("N",ze,void 0)}(Ce),this):this._next(Ce)}error(Ce){this.isStopped?yt(function Oe(ze){return ue("E",void 0,ze)}(Ce),this):(this.isStopped=!0,this._error(Ce))}complete(){this.isStopped?yt(Ue,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ce){this.destination.next(Ce)}_error(Ce){try{this.destination.error(Ce)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const be=Function.prototype.bind;function we(ze,Ce){return be.call(ze,Ce)}class Ne{constructor(Ce){this.partialObserver=Ce}next(Ce){const{partialObserver:je}=this;if(je.next)try{je.next(Ce)}catch(ft){Pe(ft)}}error(Ce){const{partialObserver:je}=this;if(je.error)try{je.error(Ce)}catch(ft){Pe(ft)}else Pe(Ce)}complete(){const{partialObserver:Ce}=this;if(Ce.complete)try{Ce.complete()}catch(je){Pe(je)}}}class ut extends oe{constructor(Ce,je,ft){let rt;if(super(),(0,y.m)(Ce)||!Ce)rt={next:Ce??void 0,error:je??void 0,complete:ft??void 0};else{let le;this&&J.v.useDeprecatedNextContext?(le=Object.create(Ce),le.unsubscribe=()=>this.unsubscribe(),rt={next:Ce.next&&we(Ce.next,le),error:Ce.error&&we(Ce.error,le),complete:Ce.complete&&we(Ce.complete,le)}):rt=Ce}this.destination=new Ne(rt)}}function Pe(ze){J.v.useDeprecatedSynchronousErrorHandling?(0,X.O)(ze):(0,me.h)(ze)}function yt(ze,Ce){const{onStoppedNotification:je}=J.v;je&&te.z.setTimeout(()=>je(ze,Ce))}const ht={closed:!0,next:Ie,error:function Me(ze){throw ze},complete:Ie}},727:(Ut,qe,ee)=>{ee.d(qe,{Lc:()=>Ue,w0:()=>Ie,Nn:()=>Oe});var y=ee(576);const J=(0,ee(3888).d)(ue=>function(X){ue(this),this.message=X?`${X.length} errors occurred during unsubscription:\n${X.map((oe,be)=>`${be+1}) ${oe.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=X});var me=ee(8737);class Ie{constructor(te){this.initialTeardown=te,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let te;if(!this.closed){this.closed=!0;const{_parentage:X}=this;if(X)if(this._parentage=null,Array.isArray(X))for(const we of X)we.remove(this);else X.remove(this);const{initialTeardown:oe}=this;if((0,y.m)(oe))try{oe()}catch(we){te=we instanceof J?we.errors:[we]}const{_finalizers:be}=this;if(be){this._finalizers=null;for(const we of be)try{Le(we)}catch(Ne){te=te??[],Ne instanceof J?te=[...te,...Ne.errors]:te.push(Ne)}}if(te)throw new J(te)}}add(te){var X;if(te&&te!==this)if(this.closed)Le(te);else{if(te instanceof Ie){if(te.closed||te._hasParent(this))return;te._addParent(this)}(this._finalizers=null!==(X=this._finalizers)&&void 0!==X?X:[]).push(te)}}_hasParent(te){const{_parentage:X}=this;return X===te||Array.isArray(X)&&X.includes(te)}_addParent(te){const{_parentage:X}=this;this._parentage=Array.isArray(X)?(X.push(te),X):X?[X,te]:te}_removeParent(te){const{_parentage:X}=this;X===te?this._parentage=null:Array.isArray(X)&&(0,me.P)(X,te)}remove(te){const{_finalizers:X}=this;X&&(0,me.P)(X,te),te instanceof Ie&&te._removeParent(this)}}Ie.EMPTY=(()=>{const ue=new Ie;return ue.closed=!0,ue})();const Ue=Ie.EMPTY;function Oe(ue){return ue instanceof Ie||ue&&"closed"in ue&&(0,y.m)(ue.remove)&&(0,y.m)(ue.add)&&(0,y.m)(ue.unsubscribe)}function Le(ue){(0,y.m)(ue)?ue():ue.unsubscribe()}},2416:(Ut,qe,ee)=>{ee.d(qe,{v:()=>y});const y={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(Ut,qe,ee)=>{ee.d(qe,{E:()=>L});const L=new(ee(9751).y)(Ie=>Ie.complete())},8996:(Ut,qe,ee)=>{ee.d(qe,{D:()=>Ce});var y=ee(8421),L=ee(5363),J=ee(9468),Ue=ee(9751),Le=ee(2202),ue=ee(576),te=ee(9672);function oe(je,ft){if(!je)throw new Error("Iterable cannot be null");return new Ue.y(rt=>{(0,te.f)(rt,ft,()=>{const le=je[Symbol.asyncIterator]();(0,te.f)(rt,ft,()=>{le.next().then(He=>{He.done?rt.complete():rt.next(He.value)})},0,!0)})})}var be=ee(3670),we=ee(8239),Ne=ee(1144),ut=ee(6495),Pe=ee(2206),Me=ee(4532),yt=ee(3260);function Ce(je,ft){return ft?function ze(je,ft){if(null!=je){if((0,be.c)(je))return function me(je,ft){return(0,y.Xf)(je).pipe((0,J.R)(ft),(0,L.Q)(ft))}(je,ft);if((0,Ne.z)(je))return function Oe(je,ft){return new Ue.y(rt=>{let le=0;return ft.schedule(function(){le===je.length?rt.complete():(rt.next(je[le++]),rt.closed||this.schedule())})})}(je,ft);if((0,we.t)(je))return function Ie(je,ft){return(0,y.Xf)(je).pipe((0,J.R)(ft),(0,L.Q)(ft))}(je,ft);if((0,Pe.D)(je))return oe(je,ft);if((0,ut.T)(je))return function X(je,ft){return new Ue.y(rt=>{let le;return(0,te.f)(rt,ft,()=>{le=je[Le.h](),(0,te.f)(rt,ft,()=>{let He,ge;try{({value:He,done:ge}=le.next())}catch(_e){return void rt.error(_e)}ge?rt.complete():rt.next(He)},0,!0)}),()=>(0,ue.m)(le?.return)&&le.return()})}(je,ft);if((0,yt.L)(je))return function ht(je,ft){return oe((0,yt.Q)(je),ft)}(je,ft)}throw(0,Me.z)(je)}(je,ft):(0,y.Xf)(je)}},8421:(Ut,qe,ee)=>{ee.d(qe,{Xf:()=>be});var y=ee(655),L=ee(1144),J=ee(8239),me=ee(9751),Ie=ee(3670),Ue=ee(2206),Oe=ee(4532),Le=ee(6495),ue=ee(3260),te=ee(576),X=ee(7849),oe=ee(8822);function be(ze){if(ze instanceof me.y)return ze;if(null!=ze){if((0,Ie.c)(ze))return function we(ze){return new me.y(Ce=>{const je=ze[oe.L]();if((0,te.m)(je.subscribe))return je.subscribe(Ce);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ze);if((0,L.z)(ze))return function Ne(ze){return new me.y(Ce=>{for(let je=0;je<ze.length&&!Ce.closed;je++)Ce.next(ze[je]);Ce.complete()})}(ze);if((0,J.t)(ze))return function ut(ze){return new me.y(Ce=>{ze.then(je=>{Ce.closed||(Ce.next(je),Ce.complete())},je=>Ce.error(je)).then(null,X.h)})}(ze);if((0,Ue.D)(ze))return Me(ze);if((0,Le.T)(ze))return function Pe(ze){return new me.y(Ce=>{for(const je of ze)if(Ce.next(je),Ce.closed)return;Ce.complete()})}(ze);if((0,ue.L)(ze))return function yt(ze){return Me((0,ue.Q)(ze))}(ze)}throw(0,Oe.z)(ze)}function Me(ze){return new me.y(Ce=>{(function ht(ze,Ce){var je,ft,rt,le;return(0,y.mG)(this,void 0,void 0,function*(){try{for(je=(0,y.KL)(ze);!(ft=yield je.next()).done;)if(Ce.next(ft.value),Ce.closed)return}catch(He){rt={error:He}}finally{try{ft&&!ft.done&&(le=je.return)&&(yield le.call(je))}finally{if(rt)throw rt.error}}Ce.complete()})})(ze,Ce).catch(je=>Ce.error(je))})}},6451:(Ut,qe,ee)=>{ee.d(qe,{T:()=>Ue});var y=ee(8189),L=ee(8421),J=ee(515),me=ee(7669),Ie=ee(8996);function Ue(...Oe){const Le=(0,me.yG)(Oe),ue=(0,me._6)(Oe,1/0),te=Oe;return te.length?1===te.length?(0,L.Xf)(te[0]):(0,y.J)(ue)((0,Ie.D)(te,Le)):J.E}},5403:(Ut,qe,ee)=>{ee.d(qe,{x:()=>L});var y=ee(2961);function L(me,Ie,Ue,Oe,Le){return new J(me,Ie,Ue,Oe,Le)}class J extends y.Lv{constructor(Ie,Ue,Oe,Le,ue,te){super(Ie),this.onFinalize=ue,this.shouldUnsubscribe=te,this._next=Ue?function(X){try{Ue(X)}catch(oe){Ie.error(oe)}}:super._next,this._error=Le?function(X){try{Le(X)}catch(oe){Ie.error(oe)}finally{this.unsubscribe()}}:super._error,this._complete=Oe?function(){try{Oe()}catch(X){Ie.error(X)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Ie;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Ue}=this;super.unsubscribe(),!Ue&&(null===(Ie=this.onFinalize)||void 0===Ie||Ie.call(this))}}}},4004:(Ut,qe,ee)=>{ee.d(qe,{U:()=>J});var y=ee(4482),L=ee(5403);function J(me,Ie){return(0,y.e)((Ue,Oe)=>{let Le=0;Ue.subscribe((0,L.x)(Oe,ue=>{Oe.next(me.call(Ie,ue,Le++))}))})}},8189:(Ut,qe,ee)=>{ee.d(qe,{J:()=>J});var y=ee(5577),L=ee(4671);function J(me=1/0){return(0,y.z)(L.y,me)}},5577:(Ut,qe,ee)=>{ee.d(qe,{z:()=>Le});var y=ee(4004),L=ee(8421),J=ee(4482),me=ee(9672),Ie=ee(5403),Oe=ee(576);function Le(ue,te,X=1/0){return(0,Oe.m)(te)?Le((oe,be)=>(0,y.U)((we,Ne)=>te(oe,we,be,Ne))((0,L.Xf)(ue(oe,be))),X):("number"==typeof te&&(X=te),(0,J.e)((oe,be)=>function Ue(ue,te,X,oe,be,we,Ne,ut){const Pe=[];let Me=0,yt=0,ht=!1;const ze=()=>{ht&&!Pe.length&&!Me&&te.complete()},Ce=ft=>Me<oe?je(ft):Pe.push(ft),je=ft=>{we&&te.next(ft),Me++;let rt=!1;(0,L.Xf)(X(ft,yt++)).subscribe((0,Ie.x)(te,le=>{be?.(le),we?Ce(le):te.next(le)},()=>{rt=!0},void 0,()=>{if(rt)try{for(Me--;Pe.length&&Me<oe;){const le=Pe.shift();Ne?(0,me.f)(te,Ne,()=>je(le)):je(le)}ze()}catch(le){te.error(le)}}))};return ue.subscribe((0,Ie.x)(te,Ce,()=>{ht=!0,ze()})),()=>{ut?.()}}(oe,be,ue,X)))}},5363:(Ut,qe,ee)=>{ee.d(qe,{Q:()=>me});var y=ee(9672),L=ee(4482),J=ee(5403);function me(Ie,Ue=0){return(0,L.e)((Oe,Le)=>{Oe.subscribe((0,J.x)(Le,ue=>(0,y.f)(Le,Ie,()=>Le.next(ue),Ue),()=>(0,y.f)(Le,Ie,()=>Le.complete(),Ue),ue=>(0,y.f)(Le,Ie,()=>Le.error(ue),Ue)))})}},3099:(Ut,qe,ee)=>{ee.d(qe,{B:()=>Ie});var y=ee(8421),L=ee(7579),J=ee(2961),me=ee(4482);function Ie(Oe={}){const{connector:Le=(()=>new L.x),resetOnError:ue=!0,resetOnComplete:te=!0,resetOnRefCountZero:X=!0}=Oe;return oe=>{let be,we,Ne,ut=0,Pe=!1,Me=!1;const yt=()=>{we?.unsubscribe(),we=void 0},ht=()=>{yt(),be=Ne=void 0,Pe=Me=!1},ze=()=>{const Ce=be;ht(),Ce?.unsubscribe()};return(0,me.e)((Ce,je)=>{ut++,!Me&&!Pe&&yt();const ft=Ne=Ne??Le();je.add(()=>{ut--,0===ut&&!Me&&!Pe&&(we=Ue(ze,X))}),ft.subscribe(je),!be&&ut>0&&(be=new J.Hp({next:rt=>ft.next(rt),error:rt=>{Me=!0,yt(),we=Ue(ht,ue,rt),ft.error(rt)},complete:()=>{Pe=!0,yt(),we=Ue(ht,te),ft.complete()}}),(0,y.Xf)(Ce).subscribe(be))})(oe)}}function Ue(Oe,Le,...ue){if(!0===Le)return void Oe();if(!1===Le)return;const te=new J.Hp({next:()=>{te.unsubscribe(),Oe()}});return Le(...ue).subscribe(te)}},9468:(Ut,qe,ee)=>{ee.d(qe,{R:()=>L});var y=ee(4482);function L(J,me=0){return(0,y.e)((Ie,Ue)=>{Ue.add(J.schedule(()=>Ie.subscribe(Ue),me))})}},8505:(Ut,qe,ee)=>{ee.d(qe,{b:()=>Ie});var y=ee(576),L=ee(4482),J=ee(5403),me=ee(4671);function Ie(Ue,Oe,Le){const ue=(0,y.m)(Ue)||Oe||Le?{next:Ue,error:Oe,complete:Le}:Ue;return ue?(0,L.e)((te,X)=>{var oe;null===(oe=ue.subscribe)||void 0===oe||oe.call(ue);let be=!0;te.subscribe((0,J.x)(X,we=>{var Ne;null===(Ne=ue.next)||void 0===Ne||Ne.call(ue,we),X.next(we)},()=>{var we;be=!1,null===(we=ue.complete)||void 0===we||we.call(ue),X.complete()},we=>{var Ne;be=!1,null===(Ne=ue.error)||void 0===Ne||Ne.call(ue,we),X.error(we)},()=>{var we,Ne;be&&(null===(we=ue.unsubscribe)||void 0===we||we.call(ue)),null===(Ne=ue.finalize)||void 0===Ne||Ne.call(ue)}))}):me.y}},4408:(Ut,qe,ee)=>{ee.d(qe,{o:()=>Ie});var y=ee(727);class L extends y.w0{constructor(Oe,Le){super()}schedule(Oe,Le=0){return this}}const J={setInterval(Ue,Oe,...Le){const{delegate:ue}=J;return ue?.setInterval?ue.setInterval(Ue,Oe,...Le):setInterval(Ue,Oe,...Le)},clearInterval(Ue){const{delegate:Oe}=J;return(Oe?.clearInterval||clearInterval)(Ue)},delegate:void 0};var me=ee(8737);class Ie extends L{constructor(Oe,Le){super(Oe,Le),this.scheduler=Oe,this.work=Le,this.pending=!1}schedule(Oe,Le=0){if(this.closed)return this;this.state=Oe;const ue=this.id,te=this.scheduler;return null!=ue&&(this.id=this.recycleAsyncId(te,ue,Le)),this.pending=!0,this.delay=Le,this.id=this.id||this.requestAsyncId(te,this.id,Le),this}requestAsyncId(Oe,Le,ue=0){return J.setInterval(Oe.flush.bind(Oe,this),ue)}recycleAsyncId(Oe,Le,ue=0){if(null!=ue&&this.delay===ue&&!1===this.pending)return Le;J.clearInterval(Le)}execute(Oe,Le){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ue=this._execute(Oe,Le);if(ue)return ue;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Oe,Le){let te,ue=!1;try{this.work(Oe)}catch(X){ue=!0,te=X||new Error("Scheduled action threw falsy error")}if(ue)return this.unsubscribe(),te}unsubscribe(){if(!this.closed){const{id:Oe,scheduler:Le}=this,{actions:ue}=Le;this.work=this.state=this.scheduler=null,this.pending=!1,(0,me.P)(ue,this),null!=Oe&&(this.id=this.recycleAsyncId(Le,Oe,null)),this.delay=null,super.unsubscribe()}}}},7565:(Ut,qe,ee)=>{ee.d(qe,{v:()=>J});var y=ee(6063);class L{constructor(Ie,Ue=L.now){this.schedulerActionCtor=Ie,this.now=Ue}schedule(Ie,Ue=0,Oe){return new this.schedulerActionCtor(this,Ie).schedule(Oe,Ue)}}L.now=y.l.now;class J extends L{constructor(Ie,Ue=L.now){super(Ie,Ue),this.actions=[],this._active=!1,this._scheduled=void 0}flush(Ie){const{actions:Ue}=this;if(this._active)return void Ue.push(Ie);let Oe;this._active=!0;do{if(Oe=Ie.execute(Ie.state,Ie.delay))break}while(Ie=Ue.shift());if(this._active=!1,Oe){for(;Ie=Ue.shift();)Ie.unsubscribe();throw Oe}}}},4986:(Ut,qe,ee)=>{ee.d(qe,{z:()=>J});var y=ee(4408);const J=new(ee(7565).v)(y.o)},6063:(Ut,qe,ee)=>{ee.d(qe,{l:()=>y});const y={now:()=>(y.delegate||Date).now(),delegate:void 0}},3410:(Ut,qe,ee)=>{ee.d(qe,{z:()=>y});const y={setTimeout(L,J,...me){const{delegate:Ie}=y;return Ie?.setTimeout?Ie.setTimeout(L,J,...me):setTimeout(L,J,...me)},clearTimeout(L){const{delegate:J}=y;return(J?.clearTimeout||clearTimeout)(L)},delegate:void 0}},2202:(Ut,qe,ee)=>{ee.d(qe,{h:()=>L});const L=function y(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Ut,qe,ee)=>{ee.d(qe,{L:()=>y});const y="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(Ut,qe,ee)=>{ee.d(qe,{_6:()=>Ue,jO:()=>me,yG:()=>Ie});var y=ee(576);function J(Oe){return Oe[Oe.length-1]}function me(Oe){return(0,y.m)(J(Oe))?Oe.pop():void 0}function Ie(Oe){return function L(Oe){return Oe&&(0,y.m)(Oe.schedule)}(J(Oe))?Oe.pop():void 0}function Ue(Oe,Le){return"number"==typeof J(Oe)?Oe.pop():Le}},8737:(Ut,qe,ee)=>{function y(L,J){if(L){const me=L.indexOf(J);0<=me&&L.splice(me,1)}}ee.d(qe,{P:()=>y})},3888:(Ut,qe,ee)=>{function y(L){const me=L(Ie=>{Error.call(Ie),Ie.stack=(new Error).stack});return me.prototype=Object.create(Error.prototype),me.prototype.constructor=me,me}ee.d(qe,{d:()=>y})},2806:(Ut,qe,ee)=>{ee.d(qe,{O:()=>me,x:()=>J});var y=ee(2416);let L=null;function J(Ie){if(y.v.useDeprecatedSynchronousErrorHandling){const Ue=!L;if(Ue&&(L={errorThrown:!1,error:null}),Ie(),Ue){const{errorThrown:Oe,error:Le}=L;if(L=null,Oe)throw Le}}else Ie()}function me(Ie){y.v.useDeprecatedSynchronousErrorHandling&&L&&(L.errorThrown=!0,L.error=Ie)}},9672:(Ut,qe,ee)=>{function y(L,J,me,Ie=0,Ue=!1){const Oe=J.schedule(function(){me(),Ue?L.add(this.schedule(null,Ie)):this.unsubscribe()},Ie);if(L.add(Oe),!Ue)return Oe}ee.d(qe,{f:()=>y})},4671:(Ut,qe,ee)=>{function y(L){return L}ee.d(qe,{y:()=>y})},1144:(Ut,qe,ee)=>{ee.d(qe,{z:()=>y});const y=L=>L&&"number"==typeof L.length&&"function"!=typeof L},2206:(Ut,qe,ee)=>{ee.d(qe,{D:()=>L});var y=ee(576);function L(J){return Symbol.asyncIterator&&(0,y.m)(J?.[Symbol.asyncIterator])}},576:(Ut,qe,ee)=>{function y(L){return"function"==typeof L}ee.d(qe,{m:()=>y})},3670:(Ut,qe,ee)=>{ee.d(qe,{c:()=>J});var y=ee(8822),L=ee(576);function J(me){return(0,L.m)(me[y.L])}},6495:(Ut,qe,ee)=>{ee.d(qe,{T:()=>J});var y=ee(2202),L=ee(576);function J(me){return(0,L.m)(me?.[y.h])}},8239:(Ut,qe,ee)=>{ee.d(qe,{t:()=>L});var y=ee(576);function L(J){return(0,y.m)(J?.then)}},3260:(Ut,qe,ee)=>{ee.d(qe,{L:()=>me,Q:()=>J});var y=ee(655),L=ee(576);function J(Ie){return(0,y.FC)(this,arguments,function*(){const Oe=Ie.getReader();try{for(;;){const{value:Le,done:ue}=yield(0,y.qq)(Oe.read());if(ue)return yield(0,y.qq)(void 0);yield yield(0,y.qq)(Le)}}finally{Oe.releaseLock()}})}function me(Ie){return(0,L.m)(Ie?.getReader)}},4482:(Ut,qe,ee)=>{ee.d(qe,{A:()=>L,e:()=>J});var y=ee(576);function L(me){return(0,y.m)(me?.lift)}function J(me){return Ie=>{if(L(Ie))return Ie.lift(function(Ue){try{return me(Ue,this)}catch(Oe){this.error(Oe)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(Ut,qe,ee)=>{ee.d(qe,{U:()=>J,z:()=>L});var y=ee(4671);function L(...me){return J(me)}function J(me){return 0===me.length?y.y:1===me.length?me[0]:function(Ue){return me.reduce((Oe,Le)=>Le(Oe),Ue)}}},7849:(Ut,qe,ee)=>{ee.d(qe,{h:()=>J});var y=ee(2416),L=ee(3410);function J(me){L.z.setTimeout(()=>{const{onUnhandledError:Ie}=y.v;if(!Ie)throw me;Ie(me)})}},4532:(Ut,qe,ee)=>{function y(L){return new TypeError(`You provided ${null!==L&&"object"==typeof L?"an invalid object":`'${L}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}ee.d(qe,{z:()=>y})},655:(Ut,qe,ee)=>{ee.d(qe,{CR:()=>be,FC:()=>Me,Jh:()=>ue,KL:()=>ht,XA:()=>oe,ZT:()=>L,_T:()=>me,ev:()=>ut,mG:()=>Le,pi:()=>J,qq:()=>Pe});var y=function(ge,_e){return(y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Re,Ee){Re.__proto__=Ee}||function(Re,Ee){for(var ot in Ee)Object.prototype.hasOwnProperty.call(Ee,ot)&&(Re[ot]=Ee[ot])})(ge,_e)};function L(ge,_e){if("function"!=typeof _e&&null!==_e)throw new TypeError("Class extends value "+String(_e)+" is not a constructor or null");function Re(){this.constructor=ge}y(ge,_e),ge.prototype=null===_e?Object.create(_e):(Re.prototype=_e.prototype,new Re)}var J=function(){return J=Object.assign||function(_e){for(var Re,Ee=1,ot=arguments.length;Ee<ot;Ee++)for(var Qe in Re=arguments[Ee])Object.prototype.hasOwnProperty.call(Re,Qe)&&(_e[Qe]=Re[Qe]);return _e},J.apply(this,arguments)};function me(ge,_e){var Re={};for(var Ee in ge)Object.prototype.hasOwnProperty.call(ge,Ee)&&_e.indexOf(Ee)<0&&(Re[Ee]=ge[Ee]);if(null!=ge&&"function"==typeof Object.getOwnPropertySymbols){var ot=0;for(Ee=Object.getOwnPropertySymbols(ge);ot<Ee.length;ot++)_e.indexOf(Ee[ot])<0&&Object.prototype.propertyIsEnumerable.call(ge,Ee[ot])&&(Re[Ee[ot]]=ge[Ee[ot]])}return Re}function Le(ge,_e,Re,Ee){return new(Re||(Re=Promise))(function(Qe,Vt){function Jt(St){try{_t(Ee.next(St))}catch(Tt){Vt(Tt)}}function _n(St){try{_t(Ee.throw(St))}catch(Tt){Vt(Tt)}}function _t(St){St.done?Qe(St.value):function ot(Qe){return Qe instanceof Re?Qe:new Re(function(Vt){Vt(Qe)})}(St.value).then(Jt,_n)}_t((Ee=Ee.apply(ge,_e||[])).next())})}function ue(ge,_e){var Ee,ot,Qe,Vt,Re={label:0,sent:function(){if(1&Qe[0])throw Qe[1];return Qe[1]},trys:[],ops:[]};return Vt={next:Jt(0),throw:Jt(1),return:Jt(2)},"function"==typeof Symbol&&(Vt[Symbol.iterator]=function(){return this}),Vt;function Jt(_t){return function(St){return function _n(_t){if(Ee)throw new TypeError("Generator is already executing.");for(;Re;)try{if(Ee=1,ot&&(Qe=2&_t[0]?ot.return:_t[0]?ot.throw||((Qe=ot.return)&&Qe.call(ot),0):ot.next)&&!(Qe=Qe.call(ot,_t[1])).done)return Qe;switch(ot=0,Qe&&(_t=[2&_t[0],Qe.value]),_t[0]){case 0:case 1:Qe=_t;break;case 4:return Re.label++,{value:_t[1],done:!1};case 5:Re.label++,ot=_t[1],_t=[0];continue;case 7:_t=Re.ops.pop(),Re.trys.pop();continue;default:if(!(Qe=(Qe=Re.trys).length>0&&Qe[Qe.length-1])&&(6===_t[0]||2===_t[0])){Re=0;continue}if(3===_t[0]&&(!Qe||_t[1]>Qe[0]&&_t[1]<Qe[3])){Re.label=_t[1];break}if(6===_t[0]&&Re.label<Qe[1]){Re.label=Qe[1],Qe=_t;break}if(Qe&&Re.label<Qe[2]){Re.label=Qe[2],Re.ops.push(_t);break}Qe[2]&&Re.ops.pop(),Re.trys.pop();continue}_t=_e.call(ge,Re)}catch(St){_t=[6,St],ot=0}finally{Ee=Qe=0}if(5&_t[0])throw _t[1];return{value:_t[0]?_t[1]:void 0,done:!0}}([_t,St])}}}function oe(ge){var _e="function"==typeof Symbol&&Symbol.iterator,Re=_e&&ge[_e],Ee=0;if(Re)return Re.call(ge);if(ge&&"number"==typeof ge.length)return{next:function(){return ge&&Ee>=ge.length&&(ge=void 0),{value:ge&&ge[Ee++],done:!ge}}};throw new TypeError(_e?"Object is not iterable.":"Symbol.iterator is not defined.")}function be(ge,_e){var Re="function"==typeof Symbol&&ge[Symbol.iterator];if(!Re)return ge;var ot,Vt,Ee=Re.call(ge),Qe=[];try{for(;(void 0===_e||_e-- >0)&&!(ot=Ee.next()).done;)Qe.push(ot.value)}catch(Jt){Vt={error:Jt}}finally{try{ot&&!ot.done&&(Re=Ee.return)&&Re.call(Ee)}finally{if(Vt)throw Vt.error}}return Qe}function ut(ge,_e,Re){if(Re||2===arguments.length)for(var Qe,Ee=0,ot=_e.length;Ee<ot;Ee++)(Qe||!(Ee in _e))&&(Qe||(Qe=Array.prototype.slice.call(_e,0,Ee)),Qe[Ee]=_e[Ee]);return ge.concat(Qe||Array.prototype.slice.call(_e))}function Pe(ge){return this instanceof Pe?(this.v=ge,this):new Pe(ge)}function Me(ge,_e,Re){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ot,Ee=Re.apply(ge,_e||[]),Qe=[];return ot={},Vt("next"),Vt("throw"),Vt("return"),ot[Symbol.asyncIterator]=function(){return this},ot;function Vt(Ot){Ee[Ot]&&(ot[Ot]=function(Xt){return new Promise(function(Xn,un){Qe.push([Ot,Xt,Xn,un])>1||Jt(Ot,Xt)})})}function Jt(Ot,Xt){try{!function _n(Ot){Ot.value instanceof Pe?Promise.resolve(Ot.value.v).then(_t,St):Tt(Qe[0][2],Ot)}(Ee[Ot](Xt))}catch(Xn){Tt(Qe[0][3],Xn)}}function _t(Ot){Jt("next",Ot)}function St(Ot){Jt("throw",Ot)}function Tt(Ot,Xt){Ot(Xt),Qe.shift(),Qe.length&&Jt(Qe[0][0],Qe[0][1])}}function ht(ge){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Re,_e=ge[Symbol.asyncIterator];return _e?_e.call(ge):(ge=oe(ge),Re={},Ee("next"),Ee("throw"),Ee("return"),Re[Symbol.asyncIterator]=function(){return this},Re);function Ee(Qe){Re[Qe]=ge[Qe]&&function(Vt){return new Promise(function(Jt,_n){!function ot(Qe,Vt,Jt,_n){Promise.resolve(_n).then(function(_t){Qe({value:_t,done:Jt})},Vt)}(Jt,_n,(Vt=ge[Qe](Vt)).done,Vt.value)})}}}},4650:(Ut,qe,ee)=>{ee.d(qe,{$8M:()=>jt,$Z:()=>Ry,AFp:()=>Cv,AaK:()=>Le,AsE:()=>Zp,CHM:()=>Ma,CRH:()=>mI,CZH:()=>ag,CqO:()=>lT,D6c:()=>IS,EJc:()=>$f,EpF:()=>cT,F4k:()=>DE,FYo:()=>en,FiY:()=>st,G48:()=>qf,GfV:()=>bc,Gpc:()=>X,JOm:()=>Au,KtG:()=>cu,LFG:()=>pr,LSH:()=>pi,Lbi:()=>oS,Lck:()=>gv,MGl:()=>pb,MMx:()=>Im,NdJ:()=>TE,OlP:()=>rr,Oqu:()=>Wp,PXZ:()=>hS,Q6J:()=>ub,QGY:()=>db,QP$:()=>Ts,Qsj:()=>Ft,R0b:()=>ku,RDi:()=>_g,Rgc:()=>mv,SBq:()=>Ve,Sil:()=>Ah,Suo:()=>G0,TTD:()=>xs,TgZ:()=>cm,X6Q:()=>QC,XFs:()=>dt,Xpm:()=>z,Xts:()=>Wa,Y36:()=>hd,YKP:()=>N0,YNc:()=>sT,Yjl:()=>Nt,Yz7:()=>Xt,Z0I:()=>go,ZZ4:()=>$I,_Bn:()=>iI,_UZ:()=>u0,_Vd:()=>U,_c5:()=>bS,_uU:()=>BE,aQg:()=>Lv,c2e:()=>aS,cJS:()=>un,cg1:()=>I0,dDg:()=>lS,dqk:()=>Yn,eFA:()=>RI,ekj:()=>vb,eoX:()=>xI,f3M:()=>P,g9A:()=>UC,h0i:()=>Jp,hGG:()=>iD,hij:()=>g0,iGM:()=>gI,ifc:()=>Pt,ip1:()=>Om,jDz:()=>oI,kL8:()=>fm,lG2:()=>ln,lqb:()=>Er,lri:()=>xv,n5z:()=>_o,oAB:()=>mt,oxw:()=>Di,q4F:()=>sh,qLn:()=>td,qOj:()=>On,qZA:()=>lm,rWj:()=>ZC,sBO:()=>Ov,sIi:()=>n0,s_b:()=>fI,soG:()=>X0,tb:()=>BC,tp0:()=>on,uIk:()=>o0,vHH:()=>Ne,vpe:()=>wl,wAp:()=>hn,xp6:()=>ad,z2F:()=>Rh,zSh:()=>qs,zs3:()=>cd});var y=ee(7579),L=ee(727),J=ee(9751),me=ee(6451),Ie=ee(3099);function Ue(u){for(let d in u)if(u[d]===Ue)return d;throw Error("Could not find renamed property on target object.")}function Oe(u,d){for(const h in d)d.hasOwnProperty(h)&&!u.hasOwnProperty(h)&&(u[h]=d[h])}function Le(u){if("string"==typeof u)return u;if(Array.isArray(u))return"["+u.map(Le).join(", ")+"]";if(null==u)return""+u;if(u.overriddenName)return`${u.overriddenName}`;if(u.name)return`${u.name}`;const d=u.toString();if(null==d)return""+d;const h=d.indexOf("\n");return-1===h?d:d.substring(0,h)}function ue(u,d){return null==u||""===u?null===d?"":d:null==d||""===d?u:u+" "+d}const te=Ue({__forward_ref__:Ue});function X(u){return u.__forward_ref__=X,u.toString=function(){return Le(this())},u}function oe(u){return be(u)?u():u}function be(u){return"function"==typeof u&&u.hasOwnProperty(te)&&u.__forward_ref__===X}class Ne extends Error{constructor(d,h){super(function ut(u,d){return`NG0${Math.abs(u)}${d?": "+d.trim():""}`}(d,h)),this.code=d}}function Pe(u){return"string"==typeof u?u:null==u?"":String(u)}function Ce(u,d){throw new Ne(-201,!1)}function _n(u,d){null==u&&function _t(u,d,h,g){throw new Error(`ASSERTION ERROR: ${u}`+(null==g?"":` [Expected=> ${h} ${g} ${d} <=Actual]`))}(d,u,null,"!=")}function Xt(u){return{token:u.token,providedIn:u.providedIn||null,factory:u.factory,value:void 0}}function un(u){return{providers:u.providers||[],imports:u.imports||[]}}function jn(u){return ci(u,wn)||ci(u,lr)}function go(u){return null!==jn(u)}function ci(u,d){return u.hasOwnProperty(d)?u[d]:null}function ns(u){return u&&(u.hasOwnProperty(cn)||u.hasOwnProperty(mr))?u[cn]:null}const wn=Ue({\u0275prov:Ue}),cn=Ue({\u0275inj:Ue}),lr=Ue({ngInjectableDef:Ue}),mr=Ue({ngInjectorDef:Ue});var dt=(()=>((dt=dt||{})[dt.Default=0]="Default",dt[dt.Host=1]="Host",dt[dt.Self=2]="Self",dt[dt.SkipSelf=4]="SkipSelf",dt[dt.Optional=8]="Optional",dt))();let yr;function Mn(u){const d=yr;return yr=u,d}function Hi(u,d,h){const g=jn(u);return g&&"root"==g.providedIn?void 0===g.value?g.value=g.factory():g.value:h&dt.Optional?null:void 0!==d?d:void Ce(Le(u))}function Or(u){return{toString:u}.toString()}var kn=(()=>((kn=kn||{})[kn.OnPush=0]="OnPush",kn[kn.Default=1]="Default",kn))(),Pt=(()=>{return(u=Pt||(Pt={}))[u.Emulated=0]="Emulated",u[u.None=2]="None",u[u.ShadowDom=3]="ShadowDom",Pt;var u})();const Yn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Kr={},nn=[],To=Ue({\u0275cmp:Ue}),Fn=Ue({\u0275dir:Ue}),$i=Ue({\u0275pipe:Ue}),ce=Ue({\u0275mod:Ue}),j=Ue({\u0275fac:Ue}),q=Ue({__NG_ELEMENT_ID__:Ue});let Z=0;function z(u){return Or(()=>{const h=!0===u.standalone,g={},_={type:u.type,providersResolver:null,decls:u.decls,vars:u.vars,factory:null,template:u.template||null,consts:u.consts||null,ngContentSelectors:u.ngContentSelectors,hostBindings:u.hostBindings||null,hostVars:u.hostVars||0,hostAttrs:u.hostAttrs||null,contentQueries:u.contentQueries||null,declaredInputs:g,inputs:null,outputs:null,exportAs:u.exportAs||null,onPush:u.changeDetection===kn.OnPush,directiveDefs:null,pipeDefs:null,standalone:h,dependencies:h&&u.dependencies||null,getStandaloneInjector:null,selectors:u.selectors||nn,viewQuery:u.viewQuery||null,features:u.features||null,data:u.data||{},encapsulation:u.encapsulation||Pt.Emulated,id:"c"+Z++,styles:u.styles||nn,_:null,setInput:null,schemas:u.schemas||null,tView:null},I=u.dependencies,S=u.features;return _.inputs=gn(u.inputs,g),_.outputs=gn(u.outputs),S&&S.forEach(R=>R(_)),_.directiveDefs=I?()=>("function"==typeof I?I():I).map(xe).filter(Ke):null,_.pipeDefs=I?()=>("function"==typeof I?I():I).map(Yr).filter(Ke):null,_})}function xe(u){return an(u)||er(u)}function Ke(u){return null!==u}function mt(u){return Or(()=>({type:u.type,bootstrap:u.bootstrap||nn,declarations:u.declarations||nn,imports:u.imports||nn,exports:u.exports||nn,transitiveCompileScopes:null,schemas:u.schemas||null,id:u.id||null}))}function gn(u,d){if(null==u)return Kr;const h={};for(const g in u)if(u.hasOwnProperty(g)){let _=u[g],I=_;Array.isArray(_)&&(I=_[1],_=_[0]),h[_]=g,d&&(d[_]=I)}return h}const ln=z;function Nt(u){return{type:u.type,name:u.name,factory:null,pure:!1!==u.pure,standalone:!0===u.standalone,onDestroy:u.type.prototype.ngOnDestroy||null}}function an(u){return u[To]||null}function er(u){return u[Fn]||null}function Yr(u){return u[$i]||null}function Ts(u){const d=an(u)||er(u)||Yr(u);return null!==d&&d.standalone}function Gi(u,d){const h=u[ce]||null;if(!h&&!0===d)throw new Error(`Type ${Le(u)} does not have '\u0275mod' property.`);return h}function Hr(u){return Array.isArray(u)&&"object"==typeof u[1]}function qi(u){return Array.isArray(u)&&!0===u[1]}function $u(u){return 0!=(8&u.flags)}function Gu(u){return 2==(2&u.flags)}function Dl(u){return 1==(1&u.flags)}function Xr(u){return null!==u.template}function Pd(u){return 0!=(256&u[2])}function xo(u,d){return u.hasOwnProperty(j)?u[j]:null}class zi{constructor(d,h,g){this.previousValue=d,this.currentValue=h,this.firstChange=g}isFirstChange(){return this.firstChange}}function xs(){return uu}function uu(u){return u.type.prototype.ngOnChanges&&(u.setInput=Mo),ss}function ss(){const u=xl(this),d=u?.current;if(d){const h=u.previous;if(h===Kr)u.previous=d;else for(let g in d)h[g]=d[g];u.current=null,this.ngOnChanges(d)}}function Mo(u,d,h,g){const _=xl(u)||function Aa(u,d){return u[Yu]=d}(u,{previous:Kr,current:null}),I=_.current||(_.current={}),S=_.previous,R=this.declaredInputs[h],O=S[R];I[R]=new zi(O&&O.currentValue,d,S===Kr),u[g]=d}xs.ngInherit=!0;const Yu="__ngSimpleChanges__";function xl(u){return u[Yu]||null}function Dr(u){for(;Array.isArray(u);)u=u[0];return u}function Ro(u,d){return Dr(d[u])}function no(u,d){return Dr(d[u.index])}function ro(u,d){return u.data[d]}function Ln(u,d){const h=d[u];return Hr(h)?h:h[0]}function Ju(u){return 4==(4&u[2])}function Oo(u){return 64==(64&u[2])}function as(u,d){return null==d?null:u[d]}function Vc(u){u[18]=0}function Tr(u,d){u[5]+=d;let h=u,g=u[3];for(;null!==g&&(1===d&&1===h[5]||-1===d&&0===h[5]);)g[5]+=d,h=g,g=g[3]}const dn={lFrame:Hd(null),bindingsEnabled:!0};function us(){return dn.bindingsEnabled}function Je(){return dn.lFrame.lView}function Tn(){return dn.lFrame.tView}function Ma(u){return dn.lFrame.contextLView=u,u[8]}function cu(u){return dn.lFrame.contextLView=null,u}function wr(){let u=Hc();for(;null!==u&&64===u.type;)u=u.parent;return u}function Hc(){return dn.lFrame.currentTNode}function Ni(u,d){const h=dn.lFrame;h.currentTNode=u,h.isParent=d}function $c(){return dn.lFrame.isParent}function Ra(){return dn.lFrame.bindingIndex++}function No(u){const d=dn.lFrame,h=d.bindingIndex;return d.bindingIndex=d.bindingIndex+u,h}function np(u,d){const h=dn.lFrame;h.bindingIndex=h.bindingRootIndex=u,ec(d)}function ec(u){dn.lFrame.currentDirectiveIndex=u}function kl(){return dn.lFrame.currentQueryIndex}function du(u){dn.lFrame.currentQueryIndex=u}function tc(u){const d=u[1];return 2===d.type?d.declTNode:1===d.type?u[6]:null}function Gc(u,d,h){if(h&dt.SkipSelf){let _=d,I=u;for(;!(_=_.parent,null!==_||h&dt.Host||(_=tc(I),null===_||(I=I[15],10&_.type))););if(null===_)return!1;d=_,u=I}const g=dn.lFrame=rc();return g.currentTNode=d,g.lView=u,!0}function nc(u){const d=rc(),h=u[1];dn.lFrame=d,d.currentTNode=h.firstChild,d.lView=u,d.tView=h,d.contextLView=u,d.bindingIndex=h.bindingStartIndex,d.inI18n=!1}function rc(){const u=dn.lFrame,d=null===u?null:u.child;return null===d?Hd(u):d}function Hd(u){const d={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:u,child:null,inI18n:!1};return null!==u&&(u.child=d),d}function Fl(){const u=dn.lFrame;return dn.lFrame=u.parent,u.currentTNode=null,u.lView=null,u}const ic=Fl;function Oa(){const u=Fl();u.isParent=!0,u.tView=null,u.selectedIndex=-1,u.contextLView=null,u.elementDepthCount=0,u.currentDirectiveIndex=-1,u.currentNamespace=null,u.bindingRootIndex=-1,u.bindingIndex=-1,u.currentQueryIndex=0}function Gr(){return dn.lFrame.selectedIndex}function io(u){dn.lFrame.selectedIndex=u}function nr(){const u=dn.lFrame;return ro(u.tView,u.selectedIndex)}function Ul(u,d){for(let h=d.directiveStart,g=d.directiveEnd;h<g;h++){const I=u.data[h].type.prototype,{ngAfterContentInit:S,ngAfterContentChecked:R,ngAfterViewInit:O,ngAfterViewChecked:V,ngOnDestroy:K}=I;S&&(u.contentHooks||(u.contentHooks=[])).push(-h,S),R&&((u.contentHooks||(u.contentHooks=[])).push(h,R),(u.contentCheckHooks||(u.contentCheckHooks=[])).push(h,R)),O&&(u.viewHooks||(u.viewHooks=[])).push(-h,O),V&&((u.viewHooks||(u.viewHooks=[])).push(h,V),(u.viewCheckHooks||(u.viewCheckHooks=[])).push(h,V)),null!=K&&(u.destroyHooks||(u.destroyHooks=[])).push(h,K)}}function sa(u,d,h){fu(u,d,3,h)}function li(u,d,h,g){(3&u[2])===h&&fu(u,d,h,g)}function qd(u,d){let h=u[2];(3&h)===d&&(h&=2047,h+=1,u[2]=h)}function fu(u,d,h,g){const I=g??-1,S=d.length-1;let R=0;for(let O=void 0!==g?65535&u[18]:0;O<S;O++)if("number"==typeof d[O+1]){if(R=d[O],null!=g&&R>=g)break}else d[O]<0&&(u[18]+=65536),(R<I||-1==I)&&(pu(u,h,d,O),u[18]=(4294901760&u[18])+O+2),O++}function pu(u,d,h,g){const _=h[g]<0,I=h[g+1],R=u[_?-h[g]:h[g]];if(_){if(u[2]>>11<u[18]>>16&&(3&u[2])===d){u[2]+=2048;try{I.call(R)}finally{}}}else try{I.call(R)}finally{}}class ua{constructor(d,h,g){this.factory=d,this.resolving=!1,this.canSeeViewProviders=h,this.injectImpl=g}}function Kc(u,d,h){let g=0;for(;g<h.length;){const _=h[g];if("number"==typeof _){if(0!==_)break;g++;const I=h[g++],S=h[g++],R=h[g++];u.setAttribute(d,S,R,I)}else{const I=_,S=h[++g];ke(I)?u.setProperty(d,I,S):u.setAttribute(d,I,S),g++}}return g}function ti(u){return 3===u||4===u||6===u}function ke(u){return 64===u.charCodeAt(0)}function et(u,d){if(null!==d&&0!==d.length)if(null===u||0===u.length)u=d.slice();else{let h=-1;for(let g=0;g<d.length;g++){const _=d[g];"number"==typeof _?h=_:0===h||Po(u,h,_,null,-1===h||2===h?d[++g]:null)}}return u}function Po(u,d,h,g,_){let I=0,S=u.length;if(-1===d)S=-1;else for(;I<u.length;){const R=u[I++];if("number"==typeof R){if(R===d){S=-1;break}if(R>d){S=I-1;break}}}for(;I<u.length;){const R=u[I];if("number"==typeof R)break;if(R===h){if(null===g)return void(null!==_&&(u[I+1]=_));if(g===u[I+1])return void(u[I+2]=_)}I++,null!==g&&I++,null!==_&&I++}-1!==S&&(u.splice(S,0,d),I=S+1),u.splice(I++,0,h),null!==g&&u.splice(I++,0,g),null!==_&&u.splice(I++,0,_)}function Bl(u){return-1!==u}function tt(u){return 32767&u}function ca(u,d){let h=function fr(u){return u>>16}(u),g=d;for(;h>0;)g=g[15],h--;return g}let ko=!0;function kt(u){const d=ko;return ko=u,d}let kr=0;const fn={};function Pa(u,d){const h=bn(u,d);if(-1!==h)return h;const g=d[1];g.firstCreatePass&&(u.injectorIndex=d.length,di(g.data,u),di(d,null),di(g.blueprint,null));const _=Yc(u,d),I=u.injectorIndex;if(Bl(_)){const S=tt(_),R=ca(_,d),O=R[1].data;for(let V=0;V<8;V++)d[I+V]=R[S+V]|O[S+V]}return d[I+8]=_,I}function di(u,d){u.push(0,0,0,0,0,0,0,0,d)}function bn(u,d){return-1===u.injectorIndex||u.parent&&u.parent.injectorIndex===u.injectorIndex||null===d[u.injectorIndex+8]?-1:u.injectorIndex}function Yc(u,d){if(u.parent&&-1!==u.parent.injectorIndex)return u.parent.injectorIndex;let h=0,g=null,_=d;for(;null!==_;){if(g=yu(_),null===g)return-1;if(h++,_=_[15],-1!==g.injectorIndex)return g.injectorIndex|h<<16}return-1}function oo(u,d,h){!function la(u,d,h){let g;"string"==typeof h?g=h.charCodeAt(0)||0:h.hasOwnProperty(q)&&(g=h[q]),null==g&&(g=h[q]=kr++);const _=255&g;d.data[u+(_>>5)]|=1<<_}(u,d,h)}function da(u,d,h){if(h&dt.Optional)return u;Ce()}function Vn(u,d,h,g){if(h&dt.Optional&&void 0===g&&(g=null),0==(h&(dt.Self|dt.Host))){const _=u[9],I=Mn(void 0);try{return _?_.get(d,g,h&dt.Optional):Hi(d,g,h&dt.Optional)}finally{Mn(I)}}return da(g,0,h)}function gu(u,d,h,g=dt.Default,_){if(null!==u){if(1024&d[2]){const S=function pa(u,d,h,g,_){let I=u,S=d;for(;null!==I&&null!==S&&1024&S[2]&&!(256&S[2]);){const R=Wi(I,S,h,g|dt.Self,fn);if(R!==fn)return R;let O=I.parent;if(!O){const V=S[21];if(V){const K=V.get(h,fn,g);if(K!==fn)return K}O=yu(S),S=S[15]}I=O}return _}(u,d,h,g,fn);if(S!==fn)return S}const I=Wi(u,d,h,g,fn);if(I!==fn)return I}return Vn(d,h,g,_)}function Wi(u,d,h,g,_){const I=function Ps(u){if("string"==typeof u)return u.charCodeAt(0)||0;const d=u.hasOwnProperty(q)?u[q]:void 0;return"number"==typeof d?d>=0?255&d:jl:d}(h);if("function"==typeof I){if(!Gc(d,u,g))return g&dt.Host?da(_,0,g):Vn(d,h,g,_);try{const S=I(g);if(null!=S||g&dt.Optional)return S;Ce()}finally{ic()}}else if("number"==typeof I){let S=null,R=bn(u,d),O=-1,V=g&dt.Host?d[16][6]:null;for((-1===R||g&dt.SkipSelf)&&(O=-1===R?Yc(u,d):d[R+8],-1!==O&&ks(g,!1)?(S=d[1],R=tt(O),d=ca(O,d)):R=-1);-1!==R;){const K=d[1];if(br(I,R,K.data)){const ne=mu(R,d,h,S,g,V);if(ne!==fn)return ne}O=d[R+8],-1!==O&&ks(g,d[1].data[R+8]===V)&&br(I,R,d)?(S=K,R=tt(O),d=ca(O,d)):R=-1}}return _}function mu(u,d,h,g,_,I){const S=d[1],R=S.data[u+8],K=qr(R,S,h,null==g?Gu(R)&&ko:g!=S&&0!=(3&R.type),_&dt.Host&&I===R);return null!==K?ha(d,S,K,R):fn}function qr(u,d,h,g,_){const I=u.providerIndexes,S=d.data,R=1048575&I,O=u.directiveStart,K=I>>20,pe=_?R+K:u.directiveEnd;for(let Te=g?R:R+K;Te<pe;Te++){const Ze=S[Te];if(Te<O&&h===Ze||Te>=O&&Ze.type===h)return Te}if(_){const Te=S[O];if(Te&&Xr(Te)&&Te.type===h)return O}return null}function ha(u,d,h,g){let _=u[h];const I=d.data;if(function Ns(u){return u instanceof ua}(_)){const S=_;S.resolving&&function yt(u,d){const h=d?`. Dependency path: ${d.join(" > ")} > ${u}`:"";throw new Ne(-200,`Circular dependency in DI detected for ${u}${h}`)}(function Me(u){return"function"==typeof u?u.name||u.toString():"object"==typeof u&&null!=u&&"function"==typeof u.type?u.type.name||u.type.toString():Pe(u)}(I[h]));const R=kt(S.canSeeViewProviders);S.resolving=!0;const O=S.injectImpl?Mn(S.injectImpl):null;Gc(u,g,dt.Default);try{_=u[h]=S.factory(void 0,I,u,g),d.firstCreatePass&&h>=g.directiveStart&&function Gd(u,d,h){const{ngOnChanges:g,ngOnInit:_,ngDoCheck:I}=d.type.prototype;if(g){const S=uu(d);(h.preOrderHooks||(h.preOrderHooks=[])).push(u,S),(h.preOrderCheckHooks||(h.preOrderCheckHooks=[])).push(u,S)}_&&(h.preOrderHooks||(h.preOrderHooks=[])).push(0-u,_),I&&((h.preOrderHooks||(h.preOrderHooks=[])).push(u,I),(h.preOrderCheckHooks||(h.preOrderCheckHooks=[])).push(u,I))}(h,I[h],d)}finally{null!==O&&Mn(O),kt(R),S.resolving=!1,ic()}}return _}function br(u,d,h){return!!(h[d+(u>>5)]&1<<u)}function ks(u,d){return!(u&dt.Self||u&dt.Host&&d)}class fa{constructor(d,h){this._tNode=d,this._lView=h}get(d,h,g){return gu(this._tNode,this._lView,d,g,h)}}function jl(){return new fa(wr(),Je())}function _o(u){return Or(()=>{const d=u.prototype.constructor,h=d[j]||Fs(d),g=Object.prototype;let _=Object.getPrototypeOf(u.prototype).constructor;for(;_&&_!==g;){const I=_[j]||Fs(_);if(I&&I!==h)return I;_=Object.getPrototypeOf(_)}return I=>new I})}function Fs(u){return be(u)?()=>{const d=Fs(oe(u));return d&&d()}:xo(u)}function yu(u){const d=u[1],h=d.type;return 2===h?d.declTNode:1===h?u[6]:null}function jt(u){return function Wd(u,d){if("class"===d)return u.classes;if("style"===d)return u.styles;const h=u.attrs;if(h){const g=h.length;let _=0;for(;_<g;){const I=h[_];if(ti(I))break;if(0===I)_+=2;else if("number"==typeof I)for(_++;_<g&&"string"==typeof h[_];)_++;else{if(I===d)return h[_+1];_+=2}}}return null}(wr(),u)}const Ii="__parameters__";function ka(u,d,h){return Or(()=>{const g=function Qc(u){return function(...h){if(u){const g=u(...h);for(const _ in g)this[_]=g[_]}}}(d);function _(...I){if(this instanceof _)return g.apply(this,I),this;const S=new _(...I);return R.annotation=S,R;function R(O,V,K){const ne=O.hasOwnProperty(Ii)?O[Ii]:Object.defineProperty(O,Ii,{value:[]})[Ii];for(;ne.length<=K;)ne.push(null);return(ne[K]=ne[K]||[]).push(S),O}}return h&&(_.prototype=Object.create(h.prototype)),_.prototype.ngMetadataName=u,_.annotationCls=_,_})}class rr{constructor(d,h){this._desc=d,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof h?this.__NG_ELEMENT_ID__=h:void 0!==h&&(this.\u0275prov=Xt({token:this,providedIn:h.providedIn||"root",factory:h.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Ir(u,d){void 0===d&&(d=u);for(let h=0;h<u.length;h++){let g=u[h];Array.isArray(g)?(d===u&&(d=u.slice(0,h)),Ir(g,d)):d!==u&&d.push(g)}return d}function ds(u,d){u.forEach(h=>Array.isArray(h)?ds(h,d):d(h))}function uc(u,d,h){d>=u.length?u.push(h):u.splice(d,0,h)}function Pi(u,d){return d>=u.length-1?u.pop():u.splice(d,1)[0]}function Mt(u,d,h){let g=ki(u,d);return g>=0?u[1|g]=h:(g=~g,function vu(u,d,h,g){let _=u.length;if(_==d)u.push(h,g);else if(1===_)u.push(g,u[0]),u[0]=h;else{for(_--,u.push(u[_-1],u[_]);_>d;)u[_]=u[_-2],_--;u[d]=h,u[d+1]=g}}(u,g,d,h)),g}function cc(u,d){const h=ki(u,d);if(h>=0)return u[1|h]}function ki(u,d){return function hs(u,d,h){let g=0,_=u.length>>h;for(;_!==g;){const I=g+(_-g>>1),S=u[I<<h];if(d===S)return I<<h;S>d?_=I:g=I+1}return~(_<<h)}(u,d,1)}const Uo={},Xc="__NG_DI_FLAG__",Vs="ngTempTokenPath",va=/\n/gm,hi="__source";let _a;function Bo(u){const d=_a;return _a=u,d}function Lr(u,d=dt.Default){if(void 0===_a)throw new Ne(-203,!1);return null===_a?Hi(u,void 0,d):_a.get(u,d&dt.Optional?null:void 0,d)}function pr(u,d=dt.Default){return(function vr(){return yr}()||Lr)(oe(u),d)}function P(u,d=dt.Default){return"number"!=typeof d&&(d=0|(d.optional&&8)|(d.host&&1)|(d.self&&2)|(d.skipSelf&&4)),pr(u,d)}function k(u){const d=[];for(let h=0;h<u.length;h++){const g=oe(u[h]);if(Array.isArray(g)){if(0===g.length)throw new Ne(900,!1);let _,I=dt.Default;for(let S=0;S<g.length;S++){const R=g[S],O=ie(R);"number"==typeof O?-1===O?_=R.token:I|=O:_=R}d.push(pr(_,I))}else d.push(pr(g))}return d}function G(u,d){return u[Xc]=d,u.prototype[Xc]=d,u}function ie(u){return u[Xc]}const st=G(ka("Optional"),8),on=G(ka("SkipSelf"),4);let Zh;function _g(u){Zh=u}class Qd{constructor(d){this.changingThisBreaksApplicationSecurity=d}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Bs(u){return u instanceof Qd?u.changingThisBreaksApplicationSecurity:u}const Ig=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var $n=(()=>(($n=$n||{})[$n.NONE=0]="NONE",$n[$n.HTML=1]="HTML",$n[$n.STYLE=2]="STYLE",$n[$n.SCRIPT=3]="SCRIPT",$n[$n.URL=4]="URL",$n[$n.RESOURCE_URL=5]="RESOURCE_URL",$n))();function pi(u){const d=function bo(){const u=Je();return u&&u[12]}();return d?d.sanitize($n.URL,u)||"":function pc(u,d){const h=function sp(u){return u instanceof Qd&&u.getTypeName()||null}(u);if(null!=h&&h!==d){if("ResourceURL"===h&&"URL"===d)return!0;throw new Error(`Required a safe ${d}, got a ${h} (see https://g.co/ng/security#xss)`)}return h===d}(u,"URL")?Bs(u):function js(u){return(u=String(u)).match(Ig)?u:"unsafe:"+u}(Pe(u))}const Wa=new rr("ENVIRONMENT_INITIALIZER"),yc=new rr("INJECTOR",-1),Ag=new rr("INJECTOR_DEF_TYPES");class ih{get(d,h=Uo){if(h===Uo){const g=new Error(`NullInjectorError: No provider for ${Le(d)}!`);throw g.name="NullInjectorError",g}return h}}function xg(...u){return{\u0275providers:Jn(0,u)}}function Jn(u,...d){const h=[],g=new Set;let _;return ds(d,I=>{const S=I;Kl(S,h,[],g)&&(_||(_=[]),_.push(S))}),void 0!==_&&at(_,h),h}function at(u,d){for(let h=0;h<u.length;h++){const{providers:_}=u[h];ds(_,I=>{d.push(I)})}}function Kl(u,d,h,g){if(!(u=oe(u)))return!1;let _=null,I=ns(u);const S=!I&&an(u);if(I||S){if(S&&!S.standalone)return!1;_=u}else{const O=u.ngModule;if(I=ns(O),!I)return!1;_=O}const R=g.has(_);if(S){if(R)return!1;if(g.add(_),S.dependencies){const O="function"==typeof S.dependencies?S.dependencies():S.dependencies;for(const V of O)Kl(V,d,h,g)}}else{if(!I)return!1;{if(null!=I.imports&&!R){let V;g.add(_);try{ds(I.imports,K=>{Kl(K,d,h,g)&&(V||(V=[]),V.push(K))})}finally{}void 0!==V&&at(V,d)}if(!R){const V=xo(_)||(()=>new _);d.push({provide:_,useFactory:V,deps:nn},{provide:Ag,useValue:_,multi:!0},{provide:Wa,useValue:()=>pr(_),multi:!0})}const O=I.providers;null==O||R||ds(O,K=>{d.push(K)})}}return _!==u&&void 0!==u.providers}const oh=Ue({provide:String,useValue:Ue});function Ji(u){return null!==u&&"object"==typeof u&&oh in u}function qo(u){return"function"==typeof u}const qs=new rr("Set Injector scope."),Yl={},zo={};let vc;function Ql(){return void 0===vc&&(vc=new ih),vc}class Er{}class Jl extends Er{constructor(d,h,g,_){super(),this.parent=h,this.source=g,this.scopes=_,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Xl(d,S=>this.processProvider(S)),this.records.set(yc,zs(void 0,this)),_.has("environment")&&this.records.set(Er,zs(void 0,this));const I=this.records.get(qs);null!=I&&"string"==typeof I.value&&this.scopes.add(I.value),this.injectorDefTypes=new Set(this.get(Ag.multi,nn,dt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const d of this._ngOnDestroyHooks)d.ngOnDestroy();for(const d of this._onDestroyHooks)d()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(d){this._onDestroyHooks.push(d)}runInContext(d){this.assertNotDestroyed();const h=Bo(this),g=Mn(void 0);try{return d()}finally{Bo(h),Mn(g)}}get(d,h=Uo,g=dt.Default){this.assertNotDestroyed();const _=Bo(this),I=Mn(void 0);try{if(!(g&dt.SkipSelf)){let R=this.records.get(d);if(void 0===R){const O=function wc(u){return"function"==typeof u||"object"==typeof u&&u instanceof rr}(d)&&jn(d);R=O&&this.injectableDefInScope(O)?zs(Du(d),Yl):null,this.records.set(d,R)}if(null!=R)return this.hydrate(d,R)}return(g&dt.Self?Ql():this.parent).get(d,h=g&dt.Optional&&h===Uo?null:h)}catch(S){if("NullInjectorError"===S.name){if((S[Vs]=S[Vs]||[]).unshift(Le(d)),_)throw S;return function ye(u,d,h,g){const _=u[Vs];throw d[hi]&&_.unshift(d[hi]),u.message=function Ae(u,d,h,g=null){u=u&&"\n"===u.charAt(0)&&"\u0275"==u.charAt(1)?u.slice(2):u;let _=Le(d);if(Array.isArray(d))_=d.map(Le).join(" -> ");else if("object"==typeof d){let I=[];for(let S in d)if(d.hasOwnProperty(S)){let R=d[S];I.push(S+":"+("string"==typeof R?JSON.stringify(R):Le(R)))}_=`{${I.join(", ")}}`}return`${h}${g?"("+g+")":""}[${_}]: ${u.replace(va,"\n  ")}`}("\n"+u.message,_,h,g),u.ngTokenPath=_,u[Vs]=null,u}(S,d,"R3InjectorError",this.source)}throw S}finally{Mn(I),Bo(_)}}resolveInjectorInitializers(){const d=Bo(this),h=Mn(void 0);try{const g=this.get(Wa.multi,nn,dt.Self);for(const _ of g)_()}finally{Bo(d),Mn(h)}}toString(){const d=[],h=this.records;for(const g of h.keys())d.push(Le(g));return`R3Injector[${d.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ne(205,!1)}processProvider(d){let h=qo(d=oe(d))?d:oe(d&&d.provide);const g=function ba(u){return Ji(u)?zs(void 0,u.useValue):zs(Ia(u),Yl)}(d);if(qo(d)||!0!==d.multi)this.records.get(h);else{let _=this.records.get(h);_||(_=zs(void 0,Yl,!0),_.factory=()=>k(_.multi),this.records.set(h,_)),h=d,_.multi.push(d)}this.records.set(h,g)}hydrate(d,h){return h.value===Yl&&(h.value=zo,h.value=h.factory()),"object"==typeof h.value&&h.value&&function _c(u){return null!==u&&"object"==typeof u&&"function"==typeof u.ngOnDestroy}(h.value)&&this._ngOnDestroyHooks.add(h.value),h.value}injectableDefInScope(d){if(!d.providedIn)return!1;const h=oe(d.providedIn);return"string"==typeof h?"any"===h||this.scopes.has(h):this.injectorDefTypes.has(h)}}function Du(u){const d=jn(u),h=null!==d?d.factory:xo(u);if(null!==h)return h;if(u instanceof rr)throw new Ne(204,!1);if(u instanceof Function)return function Xh(u){const d=u.length;if(d>0)throw function La(u,d){const h=[];for(let g=0;g<u;g++)h.push(d);return h}(d,"?"),new Ne(204,!1);const h=function Rr(u){const d=u&&(u[wn]||u[lr]);if(d){const h=function Wr(u){if(u.hasOwnProperty("name"))return u.name;const d=(""+u).match(/^function\s*([^\s(]+)/);return null===d?"":d[1]}(u);return console.warn(`DEPRECATED: DI is instantiating a token "${h}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${h}" class.`),d}return null}(u);return null!==h?()=>h.factory(u):()=>new u}(u);throw new Ne(204,!1)}function Ia(u,d,h){let g;if(qo(u)){const _=oe(u);return xo(_)||Du(_)}if(Ji(u))g=()=>oe(u.useValue);else if(function Jh(u){return!(!u||!u.useFactory)}(u))g=()=>u.useFactory(...k(u.deps||[]));else if(function vs(u){return!(!u||!u.useExisting)}(u))g=()=>pr(oe(u.useExisting));else{const _=oe(u&&(u.useClass||u.provide));if(!function sl(u){return!!u.deps}(u))return xo(_)||Du(_);g=()=>new _(...k(u.deps))}return g}function zs(u,d,h=!1){return{factory:u,value:d,multi:h?[]:void 0}}function lp(u){return!!u.\u0275providers}function Xl(u,d){for(const h of u)Array.isArray(h)?Xl(h,d):lp(h)?Xl(h.\u0275providers,d):d(h)}class dp{}class x{resolveComponentFactory(d){throw function T(u){const d=Error(`No component factory found for ${Le(u)}. Did you add it to @NgModule.entryComponents?`);return d.ngComponent=u,d}(d)}}let U=(()=>{class u{}return u.NULL=new x,u})();function Q(){return he(wr(),Je())}function he(u,d){return new Ve(no(u,d))}let Ve=(()=>{class u{constructor(h){this.nativeElement=h}}return u.__NG_ELEMENT_ID__=Q,u})();function pt(u){return u instanceof Ve?u.nativeElement:u}class en{}let Ft=(()=>{class u{}return u.__NG_ELEMENT_ID__=()=>function Mr(){const u=Je(),h=Ln(wr().index,u);return(Hr(h)?h:u)[11]}(),u})(),Ws=(()=>{class u{}return u.\u0275prov=Xt({token:u,providedIn:"root",factory:()=>null}),u})();class bc{constructor(d){this.full=d,this.major=d.split(".")[0],this.minor=d.split(".")[1],this.patch=d.split(".").slice(2).join(".")}}const sh=new bc("14.2.1"),oi={};function ny(u){return u.ngOriginalError}class td{constructor(){this._console=console}handleError(d){const h=this._findOriginalError(d);this._console.error("ERROR",d),h&&this._console.error("ORIGINAL ERROR",h)}_findOriginalError(d){let h=d&&ny(d);for(;h&&ny(h);)h=ny(h);return h||null}}const Fg=new Map;let Pw=0;const uh="__ngContext__";function Wo(u,d){Hr(d)?(u[uh]=d[20],function kw(u){Fg.set(u[20],u)}(d)):u[uh]=d}function gp(u){const d=u[uh];return"number"==typeof d?function ry(u){return Fg.get(u)||null}(d):d||null}function iy(u){const d=gp(u);return d?Hr(d)?d:d.lView:null}function Su(u){return u instanceof Function?u():u}var Au=(()=>((Au=Au||{})[Au.Important=1]="Important",Au[Au.DashCase=2]="DashCase",Au))();function _p(u,d){return undefined(u,d)}function lh(u){const d=u[3];return qi(d)?d[3]:d}function bp(u){return y_(u[13])}function Ug(u){return y_(u[4])}function y_(u){for(;null!==u&&!qi(u);)u=u[4];return u}function af(u,d,h,g,_){if(null!=g){let I,S=!1;qi(g)?I=g:Hr(g)&&(S=!0,g=g[0]);const R=Dr(g);0===u&&null!==h?null==_?py(d,h,R):rd(d,h,R,_||null,!0):1===u&&null!==h?rd(d,h,R,_||null,!0):2===u?function df(u,d,h){const g=Vr(u,d);g&&function jw(u,d,h,g){u.removeChild(d,h,g)}(u,g,d,h)}(d,R,S):3===u&&d.destroyNode(R),null!=I&&function sd(u,d,h,g,_){const I=h[7];I!==Dr(h)&&af(d,u,g,I,_);for(let R=10;R<h.length;R++){const O=h[R];od(O[1],O,u,d,g,I)}}(d,u,I,h,_)}}function ul(u,d,h){return u.createElement(d,h)}function Ka(u,d){const h=u[9],g=h.indexOf(d),_=d[3];512&d[2]&&(d[2]&=-513,Tr(_,-1)),h.splice(g,1)}function Ep(u,d){if(u.length<=10)return;const h=10+d,g=u[h];if(g){const _=g[17];null!==_&&_!==u&&Ka(_,g),d>0&&(u[h-1][4]=g[4]);const I=Pi(u,10+d);!function Ip(u,d){od(u,d,d[11],2,null,null),d[0]=null,d[6]=null}(g[1],g);const S=I[19];null!==S&&S.detachView(I[1]),g[3]=null,g[4]=null,g[2]&=-65}return g}function jg(u,d){if(!(128&d[2])){const h=d[11];h.destroyNode&&od(u,d,h,3,null,null),function v_(u){let d=u[13];if(!d)return Cp(u[1],u);for(;d;){let h=null;if(Hr(d))h=d[13];else{const g=d[10];g&&(h=g)}if(!h){for(;d&&!d[4]&&d!==u;)Hr(d)&&Cp(d[1],d),d=d[3];null===d&&(d=u),Hr(d)&&Cp(d[1],d),h=d&&d[4]}d=h}}(d)}}function Cp(u,d){if(!(128&d[2])){d[2]&=-65,d[2]|=128,function Hg(u,d){let h;if(null!=u&&null!=(h=u.destroyHooks))for(let g=0;g<h.length;g+=2){const _=d[h[g]];if(!(_ instanceof ua)){const I=h[g+1];if(Array.isArray(I))for(let S=0;S<I.length;S+=2){const R=_[I[S]],O=I[S+1];try{O.call(R)}finally{}}else try{I.call(_)}finally{}}}}(u,d),function Bw(u,d){const h=u.cleanup,g=d[7];let _=-1;if(null!==h)for(let I=0;I<h.length-1;I+=2)if("string"==typeof h[I]){const S=h[I+1],R="function"==typeof S?S(d):Dr(d[S]),O=g[_=h[I+2]],V=h[I+3];"boolean"==typeof V?R.removeEventListener(h[I],O,V):V>=0?g[_=V]():g[_=-V].unsubscribe(),I+=2}else{const S=g[_=h[I+1]];h[I].call(S)}if(null!==g){for(let I=_+1;I<g.length;I++)(0,g[I])();d[7]=null}}(u,d),1===d[1].type&&d[11].destroy();const h=d[17];if(null!==h&&qi(d[3])){h!==d[3]&&Ka(h,d);const g=d[19];null!==g&&g.detachView(u)}!function d_(u){Fg.delete(u[20])}(d)}}function uf(u,d,h){return function hh(u,d,h){let g=d;for(;null!==g&&40&g.type;)g=(d=g).parent;if(null===g)return h[0];if(2&g.flags){const _=u.data[g.directiveStart].encapsulation;if(_===Pt.None||_===Pt.Emulated)return null}return no(g,h)}(u,d.parent,h)}function rd(u,d,h,g,_){u.insertBefore(d,h,g,_)}function py(u,d,h){u.appendChild(d,h)}function __(u,d,h,g,_){null!==g?rd(u,d,h,g,_):py(u,d,h)}function Vr(u,d){return u.parentNode(d)}let Dp=function Zo(u,d,h){return 40&u.type?no(u,h):null};function cf(u,d,h,g){const _=uf(u,g,d),I=d[11],R=function id(u,d,h){return Dp(u,d,h)}(g.parent||d[6],g,d);if(null!=_)if(Array.isArray(h))for(let O=0;O<h.length;O++)__(I,_,h[O],R,!1);else __(I,_,h,R,!1)}function lf(u,d){if(null!==d){const h=d.type;if(3&h)return no(d,u);if(4&h)return yy(-1,u[d.index]);if(8&h){const g=d.child;if(null!==g)return lf(u,g);{const _=u[d.index];return qi(_)?yy(-1,_):Dr(_)}}if(32&h)return _p(d,u)()||Dr(u[d.index]);{const g=$w(u,d);return null!==g?Array.isArray(g)?g[0]:lf(lh(u[16]),g):lf(u,d.next)}}return null}function $w(u,d){return null!==d?u[16][6].projection[d.projection]:null}function yy(u,d){const h=10+u+1;if(h<d.length){const g=d[h],_=g[1].firstChild;if(null!==_)return lf(g,_)}return d[7]}function hf(u,d,h,g,_,I,S){for(;null!=h;){const R=g[h.index],O=h.type;if(S&&0===d&&(R&&Wo(Dr(R),g),h.flags|=4),64!=(64&h.flags))if(8&O)hf(u,d,h.child,g,_,I,!1),af(d,u,_,R,I);else if(32&O){const V=_p(h,g);let K;for(;K=V();)af(d,u,_,K,I);af(d,u,_,R,I)}else 16&O?Tp(u,d,g,h,_,I):af(d,u,_,R,I);h=S?h.projectionNext:h.next}}function od(u,d,h,g,_,I){hf(h,g,u.firstChild,d,_,I,!1)}function Tp(u,d,h,g,_,I){const S=h[16],O=S[6].projection[g.projection];if(Array.isArray(O))for(let V=0;V<O.length;V++)af(d,u,_,O[V],I);else hf(u,d,O,S[3],_,I,!0)}function w_(u,d,h){u.setAttribute(d,"style",h)}function $g(u,d,h){""===h?u.removeAttribute(d,"class"):u.setAttribute(d,"class",h)}function Gg(u,d,h){let g=u.length;for(;;){const _=u.indexOf(d,h);if(-1===_)return _;if(0===_||u.charCodeAt(_-1)<=32){const I=d.length;if(_+I===g||u.charCodeAt(_+I)<=32)return _}h=_+1}}const wy="ng-template";function b_(u,d,h){let g=0;for(;g<u.length;){let _=u[g++];if(h&&"class"===_){if(_=u[g],-1!==Gg(_.toLowerCase(),d,0))return!0}else if(1===_){for(;g<u.length&&"string"==typeof(_=u[g++]);)if(_.toLowerCase()===d)return!0;return!1}}return!1}function I_(u){return 4===u.type&&u.value!==wy}function E_(u,d,h){return d===(4!==u.type||h?u.value:wy)}function Gw(u,d,h){let g=4;const _=u.attrs||[],I=function D_(u){for(let d=0;d<u.length;d++)if(ti(u[d]))return d;return u.length}(_);let S=!1;for(let R=0;R<d.length;R++){const O=d[R];if("number"!=typeof O){if(!S)if(4&g){if(g=2|1&g,""!==O&&!E_(u,O,h)||""===O&&1===d.length){if(Ec(g))return!1;S=!0}}else{const V=8&g?O:d[++R];if(8&g&&null!==u.attrs){if(!b_(u.attrs,V,h)){if(Ec(g))return!1;S=!0}continue}const ne=ff(8&g?"class":O,_,I_(u),h);if(-1===ne){if(Ec(g))return!1;S=!0;continue}if(""!==V){let pe;pe=ne>I?"":_[ne+1].toLowerCase();const Te=8&g?pe:null;if(Te&&-1!==Gg(Te,V,0)||2&g&&V!==pe){if(Ec(g))return!1;S=!0}}}}else{if(!S&&!Ec(g)&&!Ec(O))return!1;if(S&&Ec(O))continue;S=!1,g=O|1&g}}return Ec(g)||S}function Ec(u){return 0==(1&u)}function ff(u,d,h,g){if(null===d)return-1;let _=0;if(g||!h){let I=!1;for(;_<d.length;){const S=d[_];if(S===u)return _;if(3===S||6===S)I=!0;else{if(1===S||2===S){let R=d[++_];for(;"string"==typeof R;)R=d[++_];continue}if(4===S)break;if(0===S){_+=4;continue}}_+=I?1:2}return-1}return function T_(u,d){let h=u.indexOf(4);if(h>-1)for(h++;h<u.length;){const g=u[h];if("number"==typeof g)return-1;if(g===d)return h;h++}return-1}(d,u)}function qw(u,d,h=!1){for(let g=0;g<d.length;g++)if(Gw(u,d[g],h))return!0;return!1}function A_(u,d){return u?":not("+d.trim()+")":d}function zw(u){let d=u[0],h=1,g=2,_="",I=!1;for(;h<u.length;){let S=u[h];if("string"==typeof S)if(2&g){const R=u[++h];_+="["+S+(R.length>0?'="'+R+'"':"")+"]"}else 8&g?_+="."+S:4&g&&(_+=" "+S);else""!==_&&!Ec(S)&&(d+=A_(I,_),_=""),g=S,I=I||!Ec(g);h++}return""!==_&&(d+=A_(I,_)),d}const In={};function ad(u){Iy(Tn(),Je(),Gr()+u,!1)}function Iy(u,d,h,g){if(!g)if(3==(3&d[2])){const I=u.preOrderCheckHooks;null!==I&&sa(d,I,h)}else{const I=u.preOrderHooks;null!==I&&li(d,I,0,h)}io(h)}function R_(u,d=null,h=null,g){const _=ud(u,d,h,g);return _.resolveInjectorInitializers(),_}function ud(u,d=null,h=null,g,_=new Set){const I=[h||nn,xg(u)];return g=g||("object"==typeof u?void 0:Le(u)),new Jl(I,d||Ql(),g||null,_)}let cd=(()=>{class u{static create(h,g){if(Array.isArray(h))return R_({name:""},g,h,"");{const _=h.name??"";return R_({name:_},h.parent,h.providers,_)}}}return u.THROW_IF_NOT_FOUND=Uo,u.NULL=new ih,u.\u0275prov=Xt({token:u,providedIn:"any",factory:()=>pr(yc)}),u.__NG_ELEMENT_ID__=-1,u})();function hd(u,d=dt.Default){const h=Je();return null===h?pr(u,d):gu(wr(),h,oe(u),d)}function Ry(){throw new Error("invalid")}function xu(u,d){return u<<17|d<<2}function Ya(u){return u>>17&32767}function gh(u){return 2|u}function Ca(u){return(131068&u)>>2}function pf(u,d){return-131069&u|d<<2}function zn(u){return 1|u}function Pp(u,d){const h=u.contentQueries;if(null!==h)for(let g=0;g<h.length;g+=2){const _=h[g],I=h[g+1];if(-1!==I){const S=u.data[I];du(_),S.contentQueries(2,d[I],I)}}}function _f(u,d,h,g,_,I,S,R,O,V,K){const ne=d.blueprint.slice();return ne[0]=_,ne[2]=76|g,(null!==K||u&&1024&u[2])&&(ne[2]|=1024),Vc(ne),ne[3]=ne[15]=u,ne[8]=h,ne[10]=S||u&&u[10],ne[11]=R||u&&u[11],ne[12]=O||u&&u[12]||null,ne[9]=V||u&&u[9]||null,ne[6]=I,ne[20]=function l_(){return Pw++}(),ne[21]=K,ne[16]=2==d.type?u[16]:ne,ne}function Ac(u,d,h,g,_){let I=u.data[d];if(null===I)I=function jy(u,d,h,g,_){const I=Hc(),S=$c(),O=u.data[d]=function Hy(u,d,h,g,_,I){return{type:h,index:g,insertBeforeIndex:null,injectorIndex:d?d.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:_,attrs:I,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:d,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,S?I:I&&I.parent,h,d,g,_);return null===u.firstChild&&(u.firstChild=O),null!==I&&(S?null==I.child&&null!==O.parent&&(I.child=O):null===I.next&&(I.next=O)),O}(u,d,h,g,_),function tp(){return dn.lFrame.inI18n}()&&(I.flags|=64);else if(64&I.type){I.type=h,I.value=g,I.attrs=_;const S=function Os(){const u=dn.lFrame,d=u.currentTNode;return u.isParent?d:d.parent}();I.injectorIndex=null===S?-1:S.injectorIndex}return Ni(I,!0),I}function Ja(u,d,h,g){if(0===h)return-1;const _=d.length;for(let I=0;I<h;I++)d.push(g),u.blueprint.push(g),u.data.push(null);return _}function tm(u,d,h){nc(d);try{const g=u.viewQuery;null!==g&&Hp(1,g,h);const _=u.template;null!==_&&xc(u,d,_,1,h),u.firstCreatePass&&(u.firstCreatePass=!1),u.staticContentQueries&&Pp(u,d),u.staticViewQueries&&Hp(2,u.viewQuery,h);const I=u.components;null!==I&&function bE(u,d){for(let h=0;h<d.length;h++)J_(u,d[h])}(d,I)}catch(g){throw u.firstCreatePass&&(u.incompleteFirstPass=!0,u.firstCreatePass=!1),g}finally{d[2]&=-5,Oa()}}function pl(u,d,h,g){const _=d[2];if(128!=(128&_)){nc(d);try{Vc(d),function Pl(u){return dn.lFrame.bindingIndex=u}(u.bindingStartIndex),null!==h&&xc(u,d,h,2,g);const S=3==(3&_);if(S){const V=u.preOrderCheckHooks;null!==V&&sa(d,V,null)}else{const V=u.preOrderHooks;null!==V&&li(d,V,0,null),qd(d,0)}if(function _d(u){for(let d=bp(u);null!==d;d=Ug(d)){if(!d[2])continue;const h=d[9];for(let g=0;g<h.length;g++){const _=h[g],I=_[3];0==(512&_[2])&&Tr(I,1),_[2]|=512}}}(d),function If(u){for(let d=bp(u);null!==d;d=Ug(d))for(let h=10;h<d.length;h++){const g=d[h],_=g[1];Oo(g)&&pl(_,g,_.template,g[8])}}(d),null!==u.contentQueries&&Pp(u,d),S){const V=u.contentCheckHooks;null!==V&&sa(d,V)}else{const V=u.contentHooks;null!==V&&li(d,V,1),qd(d,1)}!function G_(u,d){const h=u.hostBindingOpCodes;if(null!==h)try{for(let g=0;g<h.length;g++){const _=h[g];if(_<0)io(~_);else{const I=_,S=h[++g],R=h[++g];np(S,I),R(2,d[I])}}}finally{io(-1)}}(u,d);const R=u.components;null!==R&&function By(u,d){for(let h=0;h<d.length;h++)bs(u,d[h])}(d,R);const O=u.viewQuery;if(null!==O&&Hp(2,O,g),S){const V=u.viewCheckHooks;null!==V&&sa(d,V)}else{const V=u.viewHooks;null!==V&&li(d,V,2),qd(d,2)}!0===u.firstUpdatePass&&(u.firstUpdatePass=!1),d[2]&=-41,512&d[2]&&(d[2]&=-513,Tr(d[3],-1))}finally{Oa()}}}function gl(u,d,h,g){const _=d[10],S=Ju(d);try{!S&&_.begin&&_.begin(),S&&tm(u,d,g),pl(u,d,h,g)}finally{!S&&_.end&&_.end()}}function xc(u,d,h,g,_){const I=Gr(),S=2&g;try{io(-1),S&&d.length>22&&Iy(u,d,22,!1),h(g,_)}finally{io(I)}}function Mc(u,d,h){!us()||(function vd(u,d,h,g){const _=h.directiveStart,I=h.directiveEnd;u.firstCreatePass||Pa(h,d),Wo(g,d);const S=h.initialInputs;for(let R=_;R<I;R++){const O=u.data[R],V=Xr(O);V&&Q_(d,h,O);const K=ha(d,u,R,h);Wo(K,d),null!==S&&ml(0,R-_,K,O,0,S),V&&(Ln(h.index,d)[8]=K)}}(u,d,h,no(h,d)),128==(128&h.flags)&&function K_(u,d,h){const g=h.directiveStart,_=h.directiveEnd,I=h.index,S=function jd(){return dn.lFrame.currentDirectiveIndex}();try{io(I);for(let R=g;R<_;R++){const O=u.data[R],V=d[R];ec(R),(null!==O.hostBindings||0!==O.hostVars||null!==O.hostAttrs)&&Y_(O,V)}}finally{io(-1),ec(S)}}(u,d,h))}function _h(u,d,h=no){const g=d.localNames;if(null!==g){let _=d.index+1;for(let I=0;I<g.length;I+=2){const S=g[I+1],R=-1===S?h(d,u):u[S];u[_++]=R}}}function Fp(u){const d=u.tView;return null===d||d.incompleteFirstPass?u.tView=Lp(1,null,u.template,u.decls,u.vars,u.directiveDefs,u.pipeDefs,u.viewQuery,u.schemas,u.consts):d}function Lp(u,d,h,g,_,I,S,R,O,V){const K=22+g,ne=K+_,pe=function wf(u,d){const h=[];for(let g=0;g<d;g++)h.push(g<u?null:In);return h}(K,ne),Te="function"==typeof V?V():V;return pe[1]={type:u,blueprint:pe,template:h,queries:null,viewQuery:R,declTNode:d,data:pe.slice().fill(null,K),bindingStartIndex:K,expandoStartIndex:ne,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof I?I():I,pipeRegistry:"function"==typeof S?S():S,firstChild:null,schemas:O,consts:Te,incompleteFirstPass:!1}}function q_(u,d,h,g){const _=X_(d);null===h?_.push(g):(_.push(h),u.firstCreatePass&&Zy(u).push(g,_.length-1))}function z_(u,d,h){for(let g in u)if(u.hasOwnProperty(g)){const _=u[g];(h=null===h?{}:h).hasOwnProperty(g)?h[g].push(d,_):h[g]=[d,_]}return h}function W_(u,d){const g=d.directiveEnd,_=u.data,I=d.attrs,S=[];let R=null,O=null;for(let V=d.directiveStart;V<g;V++){const K=_[V],ne=K.inputs,pe=null===I||I_(d)?null:tb(ne,I);S.push(pe),R=z_(ne,V,R),O=z_(K.outputs,V,O)}null!==R&&(R.hasOwnProperty("class")&&(d.flags|=16),R.hasOwnProperty("style")&&(d.flags|=32)),d.initialInputs=S,d.inputs=R,d.outputs=O}function Da(u,d,h,g,_,I,S,R){const O=no(d,h);let K,V=d.inputs;!R&&null!=V&&(K=V[g])?(a(u,h,K,g,_),Gu(d)&&$y(h,d.index)):3&d.type&&(g=function Xw(u){return"class"===u?"className":"for"===u?"htmlFor":"formaction"===u?"formAction":"innerHtml"===u?"innerHTML":"readonly"===u?"readOnly":"tabindex"===u?"tabIndex":u}(g),_=null!=S?S(_,d.value||"",g):_,I.setProperty(O,g,_))}function $y(u,d){const h=Ln(d,u);16&h[2]||(h[2]|=32)}function nm(u,d,h,g){let _=!1;if(us()){const I=function qy(u,d,h){const g=u.directiveRegistry;let _=null;if(g)for(let I=0;I<g.length;I++){const S=g[I];qw(h,S.selectors,!1)&&(_||(_=[]),oo(Pa(h,d),u,S.type),Xr(S)?(bf(u,h),_.unshift(S)):_.push(S))}return _}(u,d,h),S=null===g?null:{"":-1};if(null!==I){_=!0,im(h,u.data.length,I.length);for(let K=0;K<I.length;K++){const ne=I[K];ne.providersResolver&&ne.providersResolver(ne)}let R=!1,O=!1,V=Ja(u,d,I.length,null);for(let K=0;K<I.length;K++){const ne=I[K];h.mergedAttrs=et(h.mergedAttrs,ne.hostAttrs),Bp(u,h,d,V,ne),eb(V,ne,S),null!==ne.contentQueries&&(h.flags|=8),(null!==ne.hostBindings||null!==ne.hostAttrs||0!==ne.hostVars)&&(h.flags|=128);const pe=ne.type.prototype;!R&&(pe.ngOnChanges||pe.ngOnInit||pe.ngDoCheck)&&((u.preOrderHooks||(u.preOrderHooks=[])).push(h.index),R=!0),!O&&(pe.ngOnChanges||pe.ngDoCheck)&&((u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(h.index),O=!0),V++}W_(u,h)}S&&function rm(u,d,h){if(d){const g=u.localNames=[];for(let _=0;_<d.length;_+=2){const I=h[d[_+1]];if(null==I)throw new Ne(-301,!1);g.push(d[_],I)}}}(h,g,S)}return h.mergedAttrs=et(h.mergedAttrs,h.attrs),_}function Up(u,d,h,g,_,I){const S=I.hostBindings;if(S){let R=u.hostBindingOpCodes;null===R&&(R=u.hostBindingOpCodes=[]);const O=~d.index;(function yd(u){let d=u.length;for(;d>0;){const h=u[--d];if("number"==typeof h&&h<0)return h}return 0})(R)!=O&&R.push(O),R.push(g,_,S)}}function Y_(u,d){null!==u.hostBindings&&u.hostBindings(1,d)}function bf(u,d){d.flags|=2,(u.components||(u.components=[])).push(d.index)}function eb(u,d,h){if(h){if(d.exportAs)for(let g=0;g<d.exportAs.length;g++)h[d.exportAs[g]]=u;Xr(d)&&(h[""]=u)}}function im(u,d,h){u.flags|=1,u.directiveStart=d,u.directiveEnd=d+h,u.providerIndexes=d}function Bp(u,d,h,g,_){u.data[g]=_;const I=_.factory||(_.factory=xo(_.type)),S=new ua(I,Xr(_),hd);u.blueprint[g]=S,h[g]=S,Up(u,d,0,g,Ja(u,h,_.hostVars,In),_)}function Q_(u,d,h){const g=no(d,u),_=Fp(h),I=u[10],S=bd(u,_f(u,_,null,h.onPush?32:16,g,d,I,I.createRenderer(g,h),null,null,null));u[d.index]=S}function Mu(u,d,h,g,_,I){const S=no(u,d);!function om(u,d,h,g,_,I,S){if(null==I)u.removeAttribute(d,_,h);else{const R=null==S?Pe(I):S(I,g||"",_);u.setAttribute(d,_,R,h)}}(d[11],S,I,u.value,h,g,_)}function ml(u,d,h,g,_,I){const S=I[d];if(null!==S){const R=g.setInput;for(let O=0;O<S.length;){const V=S[O++],K=S[O++],ne=S[O++];null!==R?g.setInput(h,ne,V,K):h[K]=ne}}}function tb(u,d){let h=null,g=0;for(;g<d.length;){const _=d[g];if(0!==_)if(5!==_){if("number"==typeof _)break;u.hasOwnProperty(_)&&(null===h&&(h=[]),h.push(_,u[_],d[g+1])),g+=2}else g+=2;else g+=4}return h}function Wy(u,d,h,g){return new Array(u,!0,!1,d,null,0,g,h,null,null)}function bs(u,d){const h=Ln(d,u);if(Oo(h)){const g=h[1];48&h[2]?pl(g,h,g.template,h[8]):h[5]>0&&wd(h)}}function wd(u){for(let g=bp(u);null!==g;g=Ug(g))for(let _=10;_<g.length;_++){const I=g[_];if(Oo(I))if(512&I[2]){const S=I[1];pl(S,I,S.template,I[8])}else I[5]>0&&wd(I)}const h=u[1].components;if(null!==h)for(let g=0;g<h.length;g++){const _=Ln(h[g],u);Oo(_)&&_[5]>0&&wd(_)}}function J_(u,d){const h=Ln(d,u),g=h[1];(function Ef(u,d){for(let h=d.length;h<u.blueprint.length;h++)d.push(u.blueprint[h])})(g,h),tm(g,h,h[8])}function bd(u,d){return u[13]?u[14][4]=d:u[13]=d,u[14]=d,d}function yl(u){for(;u;){u[2]|=32;const d=lh(u);if(Pd(u)&&!d)return u;u=d}return null}function Hp(u,d,h){du(0),d(u,h)}function X_(u){return u[7]||(u[7]=[])}function Zy(u){return u.cleanup||(u.cleanup=[])}function e0(u,d){const h=u[9],g=h?h.get(td,null):null;g&&g.handleError(d)}function a(u,d,h,g,_){for(let I=0;I<h.length;){const S=h[I++],R=h[I++],O=d[S],V=u.data[S];null!==V.setInput?V.setInput(O,_,g,R):O[R]=_}}function s(u,d,h){const g=Ro(d,u);!function ly(u,d,h){u.setValue(d,h)}(u[11],g,h)}function l(u,d,h){let g=h?u.styles:null,_=h?u.classes:null,I=0;if(null!==d)for(let S=0;S<d.length;S++){const R=d[S];"number"==typeof R?I=R:1==I?_=ue(_,R):2==I&&(g=ue(g,R+": "+d[++S]+";"))}h?u.styles=g:u.stylesWithoutHost=g,h?u.classes=_:u.classesWithoutHost=_}function f(u,d,h,g,_=!1){for(;null!==h;){const I=d[h.index];if(null!==I&&g.push(Dr(I)),qi(I))for(let R=10;R<I.length;R++){const O=I[R],V=O[1].firstChild;null!==V&&f(O[1],O,V,g)}const S=h.type;if(8&S)f(u,d,h.child,g);else if(32&S){const R=_p(h,d);let O;for(;O=R();)g.push(O)}else if(16&S){const R=$w(d,h);if(Array.isArray(R))g.push(...R);else{const O=lh(d[16]);f(O[1],O,R,g,!0)}}h=_?h.projectionNext:h.next}return g}class m{constructor(d,h){this._lView=d,this._cdRefInjectingView=h,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const d=this._lView,h=d[1];return f(h,d,h.firstChild,[])}get context(){return this._lView[8]}set context(d){this._lView[8]=d}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const d=this._lView[3];if(qi(d)){const h=d[8],g=h?h.indexOf(this):-1;g>-1&&(Ep(d,g),Pi(h,g))}this._attachedToViewContainer=!1}jg(this._lView[1],this._lView)}onDestroy(d){q_(this._lView[1],this._lView,null,d)}markForCheck(){yl(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){!function jp(u,d,h){const g=d[10];g.begin&&g.begin();try{pl(u,d,u.template,h)}catch(_){throw e0(d,_),_}finally{g.end&&g.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ne(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function dy(u,d){od(u,d,d[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(d){if(this._attachedToViewContainer)throw new Ne(902,!1);this._appRef=d}}class b extends m{constructor(d){super(d),this._view=d}detectChanges(){!function Cf(u){!function nb(u){for(let d=0;d<u.components.length;d++){const h=u.components[d],g=iy(h);if(null!==g){const _=g[1];gl(_,g,_.template,h)}}}(u[8])}(this._view)}checkNoChanges(){}get context(){return null}}class D extends U{constructor(d){super(),this.ngModule=d}resolveComponentFactory(d){const h=an(d);return new Y(h,this.ngModule)}}function M(u){const d=[];for(let h in u)u.hasOwnProperty(h)&&d.push({propName:u[h],templateName:h});return d}class H{constructor(d,h){this.injector=d,this.parentInjector=h}get(d,h,g){const _=this.injector.get(d,oi,g);return _!==oi||h===oi?_:this.parentInjector.get(d,h,g)}}class Y extends dp{constructor(d,h){super(),this.componentDef=d,this.ngModule=h,this.componentType=d.type,this.selector=function Ww(u){return u.map(zw).join(",")}(d.selectors),this.ngContentSelectors=d.ngContentSelectors?d.ngContentSelectors:[],this.isBoundToModule=!!h}get inputs(){return M(this.componentDef.inputs)}get outputs(){return M(this.componentDef.outputs)}create(d,h,g,_){let I=(_=_||this.ngModule)instanceof Er?_:_?.injector;I&&null!==this.componentDef.getStandaloneInjector&&(I=this.componentDef.getStandaloneInjector(I)||I);const S=I?new H(d,I):d,R=S.get(en,null);if(null===R)throw new Ne(407,!1);const O=S.get(Ws,null),V=R.createRenderer(null,this.componentDef),K=this.componentDef.selectors[0][0]||"div",ne=g?function IE(u,d,h){return u.selectRootElement(d,h===Pt.ShadowDom)}(V,g,this.componentDef.encapsulation):ul(R.createRenderer(null,this.componentDef),K,function F(u){const d=u.toLowerCase();return"svg"===d?"svg":"math"===d?"math":null}(K)),pe=this.componentDef.onPush?288:272,Te={components:[]},Ze=Lp(0,null,null,1,0,null,null,null,null,null),lt=_f(null,Ze,Te,pe,null,null,R,V,O,S,null);let Ct,Lt;nc(lt);try{const mn=function $e(u,d,h,g,_,I){const S=h[1];h[22]=u;const O=Ac(S,22,2,"#host",null),V=O.mergedAttrs=d.hostAttrs;null!==V&&(l(O,V,!0),null!==u&&(Kc(_,u,V),null!==O.classes&&$g(_,u,O.classes),null!==O.styles&&w_(_,u,O.styles)));const K=g.createRenderer(u,d),ne=_f(h,Fp(d),null,d.onPush?32:16,h[22],O,g,K,I||null,null,null);return S.firstCreatePass&&(oo(Pa(O,h),S,d.type),bf(S,O),im(O,h.length,1)),bd(h,ne),h[22]=ne}(ne,this.componentDef,lt,R,V);if(ne)if(g)Kc(V,ne,["ng-version",sh.full]);else{const{attrs:nt,classes:tn}=function by(u){const d=[],h=[];let g=1,_=2;for(;g<u.length;){let I=u[g];if("string"==typeof I)2===_?""!==I&&d.push(I,u[++g]):8===_&&h.push(I);else{if(!Ec(_))break;_=I}g++}return{attrs:d,classes:h}}(this.componentDef.selectors[0]);nt&&Kc(V,ne,nt),tn&&tn.length>0&&$g(V,ne,tn.join(" "))}if(Lt=ro(Ze,22),void 0!==h){const nt=Lt.projection=[];for(let tn=0;tn<this.ngContentSelectors.length;tn++){const Zn=h[tn];nt.push(null!=Zn?Array.from(Zn):null)}}Ct=function gt(u,d,h,g,_){const I=h[1],S=function Vp(u,d,h){const g=wr();u.firstCreatePass&&(h.providersResolver&&h.providersResolver(h),Bp(u,g,d,Ja(u,d,1,null),h),W_(u,g));const _=ha(d,u,g.directiveStart,g);Wo(_,d);const I=no(g,d);return I&&Wo(I,d),_}(I,h,d);if(g.components.push(S),u[8]=S,null!==_)for(const O of _)O(S,d);if(d.contentQueries){const O=wr();d.contentQueries(1,S,O.directiveStart)}const R=wr();return!I.firstCreatePass||null===d.hostBindings&&null===d.hostAttrs||(io(R.index),Up(h[1],R,0,R.directiveStart,R.directiveEnd,d),Y_(d,S)),S}(mn,this.componentDef,lt,Te,[Qt]),tm(Ze,lt,null)}finally{Oa()}return new Se(this.componentType,Ct,he(Lt,lt),lt,Lt)}}class Se extends class Mg{}{constructor(d,h,g,_,I){super(),this.location=g,this._rootLView=_,this._tNode=I,this.instance=h,this.hostView=this.changeDetectorRef=new b(_),this.componentType=d}setInput(d,h){const g=this._tNode.inputs;let _;if(null!==g&&(_=g[d])){const I=this._rootLView;a(I[1],I,_,d,h),$y(I,this._tNode.index)}}get injector(){return new fa(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(d){this.hostView.onDestroy(d)}}function Qt(){const u=wr();Ul(Je()[1],u)}function On(u){let d=function sn(u){return Object.getPrototypeOf(u.prototype).constructor}(u.type),h=!0;const g=[u];for(;d;){let _;if(Xr(u))_=d.\u0275cmp||d.\u0275dir;else{if(d.\u0275cmp)throw new Ne(903,!1);_=d.\u0275dir}if(_){if(h){g.push(_);const S=u;S.inputs=ur(u.inputs),S.declaredInputs=ur(u.declaredInputs),S.outputs=ur(u.outputs);const R=_.hostBindings;R&&sm(u,R);const O=_.viewQuery,V=_.contentQueries;if(O&&Jo(u,O),V&&t0(u,V),Oe(u.inputs,_.inputs),Oe(u.declaredInputs,_.declaredInputs),Oe(u.outputs,_.outputs),Xr(_)&&_.data.animation){const K=u.data;K.animation=(K.animation||[]).concat(_.data.animation)}}const I=_.features;if(I)for(let S=0;S<I.length;S++){const R=I[S];R&&R.ngInherit&&R(u),R===On&&(h=!1)}}d=Object.getPrototypeOf(d)}!function Wn(u){let d=0,h=null;for(let g=u.length-1;g>=0;g--){const _=u[g];_.hostVars=d+=_.hostVars,_.hostAttrs=et(_.hostAttrs,h=et(h,_.hostAttrs))}}(g)}function ur(u){return u===Kr?{}:u===nn?[]:u}function Jo(u,d){const h=u.viewQuery;u.viewQuery=h?(g,_)=>{d(g,_),h(g,_)}:d}function t0(u,d){const h=u.contentQueries;u.contentQueries=h?(g,_,I)=>{d(g,_,I),h(g,_,I)}:d}function sm(u,d){const h=u.hostBindings;u.hostBindings=h?(g,_)=>{d(g,_),h(g,_)}:d}let Ky=null;function Tf(){if(!Ky){const u=Yn.Symbol;if(u&&u.iterator)Ky=u.iterator;else{const d=Object.getOwnPropertyNames(Map.prototype);for(let h=0;h<d.length;++h){const g=d[h];"entries"!==g&&"size"!==g&&Map.prototype[g]===Map.prototype.entries&&(Ky=g)}}}return Ky}function n0(u){return!!ob(u)&&(Array.isArray(u)||!(u instanceof Map)&&Tf()in u)}function ob(u){return null!==u&&("function"==typeof u||"object"==typeof u)}function Ci(u,d,h){return!Object.is(u[d],h)&&(u[d]=h,!0)}function o0(u,d,h,g){const _=Je();return Ci(_,Ra(),d)&&(Tn(),Mu(nr(),_,u,d,h,g)),o0}function Gp(u,d,h,g){return Ci(u,Ra(),h)?d+Pe(h)+g:In}function um(u,d,h,g,_,I){const R=function am(u,d,h,g){const _=Ci(u,d,h);return Ci(u,d+1,g)||_}(u,function cs(){return dn.lFrame.bindingIndex}(),h,_);return No(2),R?d+Pe(h)+g+Pe(_)+I:In}function sT(u,d,h,g,_,I,S,R){const O=Je(),V=Tn(),K=u+22,ne=V.firstCreatePass?function $x(u,d,h,g,_,I,S,R,O){const V=d.consts,K=Ac(d,u,4,S||null,as(V,R));nm(d,h,K,as(V,O)),Ul(d,K);const ne=K.tViews=Lp(2,K,g,_,I,d.directiveRegistry,d.pipeRegistry,null,d.schemas,V);return null!==d.queries&&(d.queries.template(d,K),ne.queries=d.queries.embeddedTView(K)),K}(K,V,O,d,h,g,_,I,S):V.data[K];Ni(ne,!1);const pe=O[11].createComment("");cf(V,O,pe,ne),Wo(pe,O),bd(O,O[K]=Wy(pe,O,pe,ne)),Dl(ne)&&Mc(V,O,ne),null!=S&&_h(O,ne,R)}function ub(u,d,h){const g=Je();return Ci(g,Ra(),d)&&Da(Tn(),nr(),g,u,d,g[11],h,!1),ub}function cb(u,d,h,g,_){const S=_?"class":"style";a(u,h,d.inputs[S],S,g)}function cm(u,d,h,g){const _=Je(),I=Tn(),S=22+u,R=_[11],O=_[S]=ul(R,d,function qc(){return dn.lFrame.currentNamespace}()),V=I.firstCreatePass?function CE(u,d,h,g,_,I,S){const R=d.consts,V=Ac(d,u,2,_,as(R,I));return nm(d,h,V,as(R,S)),null!==V.attrs&&l(V,V.attrs,!1),null!==V.mergedAttrs&&l(V,V.mergedAttrs,!0),null!==d.queries&&d.queries.elementStart(d,V),V}(S,I,_,0,d,h,g):I.data[S];Ni(V,!0);const K=V.mergedAttrs;null!==K&&Kc(R,O,K);const ne=V.classes;null!==ne&&$g(R,O,ne);const pe=V.styles;return null!==pe&&w_(R,O,pe),64!=(64&V.flags)&&cf(I,_,O,V),0===function Xu(){return dn.lFrame.elementDepthCount}()&&Wo(O,_),function Bc(){dn.lFrame.elementDepthCount++}(),Dl(V)&&(Mc(I,_,V),function kp(u,d,h){if($u(d)){const _=d.directiveEnd;for(let I=d.directiveStart;I<_;I++){const S=u.data[I];S.contentQueries&&S.contentQueries(1,h[I],I)}}}(I,V,_)),null!==g&&_h(_,V),cm}function lm(){let u=wr();$c()?function hr(){dn.lFrame.isParent=!1}():(u=u.parent,Ni(u,!1));const d=u;!function Ol(){dn.lFrame.elementDepthCount--}();const h=Tn();return h.firstCreatePass&&(Ul(h,u),$u(u)&&h.queries.elementEnd(u)),null!=d.classesWithoutHost&&function Wc(u){return 0!=(16&u.flags)}(d)&&cb(h,d,Je(),d.classesWithoutHost,!0),null!=d.stylesWithoutHost&&function ac(u){return 0!=(32&u.flags)}(d)&&cb(h,d,Je(),d.stylesWithoutHost,!1),lm}function u0(u,d,h,g){return cm(u,d,h,g),lm(),u0}function cT(){return Je()}function db(u){return!!u&&"function"==typeof u.then}function DE(u){return!!u&&"function"==typeof u.subscribe}const lT=DE;function TE(u,d,h,g){const _=Je(),I=Tn(),S=wr();return function SE(u,d,h,g,_,I,S,R){const O=Dl(g),K=u.firstCreatePass&&Zy(u),ne=d[8],pe=X_(d);let Te=!0;if(3&g.type||R){const Ct=no(g,d),Lt=R?R(Ct):Ct,mn=pe.length,nt=R?Zn=>R(Dr(Zn[g.index])):g.index;let tn=null;if(!R&&O&&(tn=function dT(u,d,h,g){const _=u.cleanup;if(null!=_)for(let I=0;I<_.length-1;I+=2){const S=_[I];if(S===h&&_[I+1]===g){const R=d[7],O=_[I+2];return R.length>O?R[O]:null}"string"==typeof S&&(I+=2)}return null}(u,d,_,g.index)),null!==tn)(tn.__ngLastListenerFn__||tn).__ngNextListenerFn__=I,tn.__ngLastListenerFn__=I,Te=!1;else{I=hb(g,d,ne,I,!1);const Zn=h.listen(Lt,_,I);pe.push(I,Zn),K&&K.push(_,nt,mn,mn+1)}}else I=hb(g,d,ne,I,!1);const Ze=g.outputs;let lt;if(Te&&null!==Ze&&(lt=Ze[_])){const Ct=lt.length;if(Ct)for(let Lt=0;Lt<Ct;Lt+=2){const Br=d[lt[Lt]][lt[Lt+1]].subscribe(I),bi=pe.length;pe.push(I,Br),K&&K.push(_,g.index,bi,-(bi+1))}}}(I,_,_[11],S,u,d,0,g),TE}function AE(u,d,h,g){try{return!1!==h(g)}catch(_){return e0(u,_),!1}}function hb(u,d,h,g,_){return function I(S){if(S===Function)return g;yl(2&u.flags?Ln(u.index,d):d);let O=AE(d,0,g,S),V=I.__ngNextListenerFn__;for(;V;)O=AE(d,0,V,S)&&O,V=V.__ngNextListenerFn__;return _&&!1===O&&(S.preventDefault(),S.returnValue=!1),O}}function Di(u=1){return function Na(u){return(dn.lFrame.contextLView=function oc(u,d){for(;u>0;)d=d[15],u--;return d}(u,dn.lFrame.contextLView))[8]}(u)}function pb(u,d,h,g,_){const I=Je(),S=Gp(I,d,h,g);return S!==In&&Da(Tn(),nr(),I,u,S,I[11],_,!1),pb}function Jy(u,d,h,g,_){const I=u[h+1],S=null===d;let R=g?Ya(I):Ca(I),O=!1;for(;0!==R&&(!1===O||S);){const K=u[R+1];c0(u[R],d)&&(O=!0,u[R+1]=g?zn(K):gh(K)),R=g?Ya(K):Ca(K)}O&&(u[h+1]=g?gh(I):zn(I))}function c0(u,d){return null===u||null==d||(Array.isArray(u)?u[1]:u)===d||!(!Array.isArray(u)||"string"!=typeof d)&&ki(u,d)>=0}function vb(u,d){return function co(u,d,h,g){const _=Je(),I=Tn(),S=No(2);I.firstUpdatePass&&function FE(u,d,h,g){const _=u.data;if(null===_[h+1]){const I=_[Gr()],S=function kE(u,d){return d>=u.expandoStartIndex}(u,h);(function Cb(u,d){return 0!=(u.flags&(d?16:32))})(I,g)&&null===d&&!S&&(d=!1),d=function dm(u,d,h,g){const _=function oa(u){const d=dn.lFrame.currentDirectiveIndex;return-1===d?null:u[d]}(u);let I=g?d.residualClasses:d.residualStyles;if(null===_)0===(g?d.classBindings:d.styleBindings)&&(h=hm(h=bb(null,u,d,h,g),d.attrs,g),I=null);else{const S=d.directiveStylingLast;if(-1===S||u[S]!==_)if(h=bb(_,u,d,h,g),null===I){let O=function LE(u,d,h){const g=h?d.classBindings:d.styleBindings;if(0!==Ca(g))return u[Ya(g)]}(u,d,g);void 0!==O&&Array.isArray(O)&&(O=bb(null,u,d,O[1],g),O=hm(O,d.attrs,g),function wb(u,d,h,g){u[Ya(h?d.classBindings:d.styleBindings)]=g}(u,d,g,O))}else I=function VE(u,d,h){let g;const _=d.directiveEnd;for(let I=1+d.directiveStylingLast;I<_;I++)g=hm(g,u[I].hostAttrs,h);return hm(g,d.attrs,h)}(u,d,g)}return void 0!==I&&(g?d.residualClasses=I:d.residualStyles=I),h}(_,I,d,g),function mb(u,d,h,g,_,I){let S=I?d.classBindings:d.styleBindings,R=Ya(S),O=Ca(S);u[g]=h;let K,V=!1;if(Array.isArray(h)){const ne=h;K=ne[1],(null===K||ki(ne,K)>0)&&(V=!0)}else K=h;if(_)if(0!==O){const pe=Ya(u[R+1]);u[g+1]=xu(pe,R),0!==pe&&(u[pe+1]=pf(u[pe+1],g)),u[R+1]=function L_(u,d){return 131071&u|d<<17}(u[R+1],g)}else u[g+1]=xu(R,0),0!==R&&(u[R+1]=pf(u[R+1],g)),R=g;else u[g+1]=xu(O,0),0===R?R=g:u[O+1]=pf(u[O+1],g),O=g;V&&(u[g+1]=gh(u[g+1])),Jy(u,K,g,!0),Jy(u,K,g,!1),function Sn(u,d,h,g,_){const I=_?u.residualClasses:u.residualStyles;null!=I&&"string"==typeof d&&ki(I,d)>=0&&(h[g+1]=zn(h[g+1]))}(d,K,u,g,I),S=xu(R,O),I?d.classBindings=S:d.styleBindings=S}(_,I,d,h,S,g)}}(I,u,S,g),d!==In&&Ci(_,S,d)&&function f0(u,d,h,g,_,I,S,R){if(!(3&d.type))return;const O=u.data,V=O[R+1];p0(function fd(u){return 1==(1&u)}(V)?UE(O,d,h,_,Ca(V),S):void 0)||(p0(I)||function Oy(u){return 2==(2&u)}(V)&&(I=UE(O,null,h,_,R,S)),function vy(u,d,h,g,_){if(d)_?u.addClass(h,g):u.removeClass(h,g);else{let I=-1===g.indexOf("-")?void 0:Au.DashCase;null==_?u.removeStyle(h,g,I):("string"==typeof _&&_.endsWith("!important")&&(_=_.slice(0,-10),I|=Au.Important),u.setStyle(h,g,_,I))}}(g,S,Ro(Gr(),h),_,I))}(I,I.data[Gr()],_,_[11],u,_[S+1]=function Eb(u,d){return null==u||("string"==typeof d?u+=d:"object"==typeof u&&(u=Le(Bs(u)))),u}(d,h),g,S)}(u,d,null,!0),vb}function bb(u,d,h,g,_){let I=null;const S=h.directiveEnd;let R=h.directiveStylingLast;for(-1===R?R=h.directiveStart:R++;R<S&&(I=d[R],g=hm(g,I.hostAttrs,_),I!==u);)R++;return null!==u&&(h.directiveStylingLast=R),g}function hm(u,d,h){const g=h?1:2;let _=-1;if(null!==d)for(let I=0;I<d.length;I++){const S=d[I];"number"==typeof S?_=S:_===g&&(Array.isArray(u)||(u=void 0===u?[]:["",u]),Mt(u,S,!!h||d[++I]))}return void 0===u?null:u}function UE(u,d,h,g,_,I){const S=null===d;let R;for(;_>0;){const O=u[_],V=Array.isArray(O),K=V?O[1]:O,ne=null===K;let pe=h[_+1];pe===In&&(pe=ne?nn:void 0);let Te=ne?cc(pe,g):K===g?pe:void 0;if(V&&!p0(Te)&&(Te=cc(O,g)),p0(Te)&&(R=Te,S))return R;const Ze=u[_+1];_=S?Ya(Ze):Ca(Ze)}if(null!==d){let O=I?d.residualClasses:d.residualStyles;null!=O&&(R=cc(O,g))}return R}function p0(u){return void 0!==u}function BE(u,d=""){const h=Je(),g=Tn(),_=u+22,I=g.firstCreatePass?Ac(g,_,1,d,null):g.data[_],S=h[_]=function cy(u,d){return u.createText(d)}(h[11],d);cf(g,h,S,I),Ni(I,!1)}function Wp(u){return g0("",u,""),Wp}function g0(u,d,h){const g=Je(),_=Gp(g,u,d,h);return _!==In&&s(g,Gr(),_),g0}function Zp(u,d,h,g,_){const I=Je(),S=um(I,u,d,h,g,_);return S!==In&&s(I,Gr(),S),Zp}const Of=void 0;var b0=["en",[["a","p"],["AM","PM"],Of],[["AM","PM"],Of,Of],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Of,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Of,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Of,"{1} 'at' {0}",Of],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function wT(u){const h=Math.floor(Math.abs(u)),g=u.toString().replace(/^[^.]*\.?/,"").length;return 1===h&&0===g?1:5}];let Nf={};function I0(u){const d=function E0(u){return u.toLowerCase().replace(/_/g,"-")}(u);let h=Vb(d);if(h)return h;const g=d.split("-")[0];if(h=Vb(g),h)return h;if("en"===g)return b0;throw new Ne(701,!1)}function fm(u){return I0(u)[hn.PluralCase]}function Vb(u){return u in Nf||(Nf[u]=Yn.ng&&Yn.ng.common&&Yn.ng.common.locales&&Yn.ng.common.locales[u]),Nf[u]}var hn=(()=>((hn=hn||{})[hn.LocaleId=0]="LocaleId",hn[hn.DayPeriodsFormat=1]="DayPeriodsFormat",hn[hn.DayPeriodsStandalone=2]="DayPeriodsStandalone",hn[hn.DaysFormat=3]="DaysFormat",hn[hn.DaysStandalone=4]="DaysStandalone",hn[hn.MonthsFormat=5]="MonthsFormat",hn[hn.MonthsStandalone=6]="MonthsStandalone",hn[hn.Eras=7]="Eras",hn[hn.FirstDayOfWeek=8]="FirstDayOfWeek",hn[hn.WeekendRange=9]="WeekendRange",hn[hn.DateFormat=10]="DateFormat",hn[hn.TimeFormat=11]="TimeFormat",hn[hn.DateTimeFormat=12]="DateTimeFormat",hn[hn.NumberSymbols=13]="NumberSymbols",hn[hn.NumberFormats=14]="NumberFormats",hn[hn.CurrencyCode=15]="CurrencyCode",hn[hn.CurrencySymbol=16]="CurrencySymbol",hn[hn.CurrencyName=17]="CurrencyName",hn[hn.Currencies=18]="Currencies",hn[hn.Directionality=19]="Directionality",hn[hn.PluralCase=20]="PluralCase",hn[hn.ExtraData=21]="ExtraData",hn))();const _l="en-US";let Bb=_l;function tI(u,d,h,g,_){if(u=oe(u),Array.isArray(u))for(let I=0;I<u.length;I++)tI(u[I],d,h,g,_);else{const I=Tn(),S=Je();let R=qo(u)?u:oe(u.provide),O=Ia(u);const V=wr(),K=1048575&V.providerIndexes,ne=V.directiveStart,pe=V.providerIndexes>>20;if(qo(u)||!u.multi){const Te=new ua(O,_,hd),Ze=M0(R,d,_?K:K+pe,ne);-1===Ze?(oo(Pa(V,S),I,R),nI(I,u,d.length),d.push(R),V.directiveStart++,V.directiveEnd++,_&&(V.providerIndexes+=1048576),h.push(Te),S.push(Te)):(h[Ze]=Te,S[Ze]=Te)}else{const Te=M0(R,d,K+pe,ne),Ze=M0(R,d,K,K+pe),lt=Te>=0&&h[Te],Ct=Ze>=0&&h[Ze];if(_&&!Ct||!_&&!lt){oo(Pa(V,S),I,R);const Lt=function Ch(u,d,h,g,_){const I=new ua(u,h,hd);return I.multi=[],I.index=d,I.componentProviders=0,rI(I,_,g&&!h),I}(_?R0:wC,h.length,_,g,O);!_&&Ct&&(h[Ze].providerFactory=Lt),nI(I,u,d.length,0),d.push(R),V.directiveStart++,V.directiveEnd++,_&&(V.providerIndexes+=1048576),h.push(Lt),S.push(Lt)}else nI(I,u,Te>-1?Te:Ze,rI(h[_?Ze:Te],O,!_&&g));!_&&g&&Ct&&h[Ze].componentProviders++}}}function nI(u,d,h,g){const _=qo(d),I=function Cu(u){return!!u.useClass}(d);if(_||I){const O=(I?oe(d.useClass):d).prototype.ngOnDestroy;if(O){const V=u.destroyHooks||(u.destroyHooks=[]);if(!_&&d.multi){const K=V.indexOf(h);-1===K?V.push(h,[g,O]):V[K+1].push(g,O)}else V.push(h,O)}}}function rI(u,d,h){return h&&u.componentProviders++,u.multi.push(d)-1}function M0(u,d,h,g){for(let _=h;_<g;_++)if(d[_]===u)return _;return-1}function wC(u,d,h,g){return O0(this.multi,[])}function R0(u,d,h,g){const _=this.multi;let I;if(this.providerFactory){const S=this.providerFactory.componentProviders,R=ha(h,h[1],this.providerFactory.index,g);I=R.slice(0,S),O0(_,I);for(let O=S;O<R.length;O++)I.push(R[O])}else I=[],O0(_,I);return I}function O0(u,d){for(let h=0;h<u.length;h++)d.push((0,u[h])());return d}function iI(u,d=[]){return h=>{h.providersResolver=(g,_)=>function PT(u,d,h){const g=Tn();if(g.firstCreatePass){const _=Xr(u);tI(h,g.data,g.blueprint,_,!0),tI(d,g.data,g.blueprint,_,!1)}}(g,_?_(u):u,d)}}class Jp{}class N0{}function gv(u,d){return new P0(u,d??null)}class P0 extends Jp{constructor(d,h){super(),this._parent=h,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new D(this);const g=Gi(d);this._bootstrapComponents=Su(g.bootstrap),this._r3Injector=ud(d,h,[{provide:Jp,useValue:this},{provide:U,useValue:this.componentFactoryResolver}],Le(d),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(d)}get injector(){return this._r3Injector}destroy(){const d=this._r3Injector;!d.destroyed&&d.destroy(),this.destroyCbs.forEach(h=>h()),this.destroyCbs=null}onDestroy(d){this.destroyCbs.push(d)}}class bm extends N0{constructor(d){super(),this.moduleType=d}create(d){return new P0(this.moduleType,d)}}class bC extends Jp{constructor(d,h,g){super(),this.componentFactoryResolver=new D(this),this.instance=null;const _=new Jl([...d,{provide:Jp,useValue:this},{provide:U,useValue:this.componentFactoryResolver}],h||Ql(),g,new Set(["environment"]));this.injector=_,_.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(d){this.injector.onDestroy(d)}}function Im(u,d,h=null){return new bC(u,d,h).injector}let FT=(()=>{class u{constructor(h){this._injector=h,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(h){if(!h.standalone)return null;if(!this.cachedInjectors.has(h.id)){const g=Jn(0,h.type),_=g.length>0?Im([g],this._injector,`Standalone[${h.type.name}]`):null;this.cachedInjectors.set(h.id,_)}return this.cachedInjectors.get(h.id)}ngOnDestroy(){try{for(const h of this.cachedInjectors.values())null!==h&&h.destroy()}finally{this.cachedInjectors.clear()}}}return u.\u0275prov=Xt({token:u,providedIn:"environment",factory:()=>new u(pr(Er))}),u})();function oI(u){u.getStandaloneInjector=d=>d.get(FT).getOrCreateStandaloneInjector(u)}function ho(u){return d=>{setTimeout(u,void 0,d)}}const wl=class it extends y.x{constructor(d=!1){super(),this.__isAsync=d}emit(d){super.next(d)}subscribe(d,h,g){let _=d,I=h||(()=>null),S=g;if(d&&"object"==typeof d){const O=d;_=O.next?.bind(O),I=O.error?.bind(O),S=O.complete?.bind(O)}this.__isAsync&&(I=ho(I),_&&(_=ho(_)),S&&(S=ho(S)));const R=super.subscribe({next:_,error:I,complete:S});return d instanceof L.w0&&d.add(R),R}};function qT(){return this._results[Tf()]()}class hI{constructor(d=!1){this._emitDistinctChangesOnly=d,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const h=Tf(),g=hI.prototype;g[h]||(g[h]=qT)}get changes(){return this._changes||(this._changes=new wl)}get(d){return this._results[d]}map(d){return this._results.map(d)}filter(d){return this._results.filter(d)}find(d){return this._results.find(d)}reduce(d,h){return this._results.reduce(d,h)}forEach(d){this._results.forEach(d)}some(d){return this._results.some(d)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(d,h){const g=this;g.dirty=!1;const _=Ir(d);(this._changesDetected=!function Fo(u,d,h){if(u.length!==d.length)return!1;for(let g=0;g<u.length;g++){let _=u[g],I=d[g];if(h&&(_=h(_),I=h(I)),I!==_)return!1}return!0}(g._results,_,h))&&(g._results=_,g.length=_.length,g.last=_[this.length-1],g.first=_[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let mv=(()=>{class u{}return u.__NG_ELEMENT_ID__=RC,u})();const zT=mv,WT=class extends zT{constructor(d,h,g){super(),this._declarationLView=d,this._declarationTContainer=h,this.elementRef=g}createEmbeddedView(d,h){const g=this._declarationTContainer.tViews,_=_f(this._declarationLView,g,d,16,null,g.declTNode,null,null,null,null,h||null);_[17]=this._declarationLView[this._declarationTContainer.index];const S=this._declarationLView[19];return null!==S&&(_[19]=S.createEmbeddedView(g)),tm(g,_,d),new m(_)}};function RC(){return B0(wr(),Je())}function B0(u,d){return 4&u.type?new WT(d,u,he(u,d)):null}let fI=(()=>{class u{}return u.__NG_ELEMENT_ID__=ZT,u})();function ZT(){return ai(wr(),Je())}const OC=fI,Dn=class extends OC{constructor(d,h,g){super(),this._lContainer=d,this._hostTNode=h,this._hostLView=g}get element(){return he(this._hostTNode,this._hostLView)}get injector(){return new fa(this._hostTNode,this._hostLView)}get parentInjector(){const d=Yc(this._hostTNode,this._hostLView);if(Bl(d)){const h=ca(d,this._hostLView),g=tt(d);return new fa(h[1].data[g+8],h)}return new fa(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(d){const h=tg(this._lContainer);return null!==h&&h[d]||null}get length(){return this._lContainer.length-10}createEmbeddedView(d,h,g){let _,I;"number"==typeof g?_=g:null!=g&&(_=g.index,I=g.injector);const S=d.createEmbeddedView(h||{},I);return this.insert(S,_),S}createComponent(d,h,g,_,I){const S=d&&!function so(u){return"function"==typeof u}(d);let R;if(S)R=h;else{const ne=h||{};R=ne.index,g=ne.injector,_=ne.projectableNodes,I=ne.environmentInjector||ne.ngModuleRef}const O=S?d:new Y(an(d)),V=g||this.parentInjector;if(!I&&null==O.ngModule){const pe=(S?V:this.parentInjector).get(Er,null);pe&&(I=pe)}const K=O.create(V,_,void 0,I);return this.insert(K.hostView,R),K}insert(d,h){const g=d._lView,_=g[1];if(function Rl(u){return qi(u[3])}(g)){const K=this.indexOf(d);if(-1!==K)this.detach(K);else{const ne=g[3],pe=new Dn(ne,ne[6],ne[3]);pe.detach(pe.indexOf(d))}}const I=this._adjustIndex(h),S=this._lContainer;!function hy(u,d,h,g){const _=10+g,I=h.length;g>0&&(h[_-1][4]=d),g<I-10?(d[4]=h[_],uc(h,10+g,d)):(h.push(d),d[4]=null),d[3]=h;const S=d[17];null!==S&&h!==S&&function fy(u,d){const h=u[9];d[16]!==d[3][3][16]&&(u[2]=!0),null===h?u[9]=[d]:h.push(d)}(S,d);const R=d[19];null!==R&&R.insertView(u),d[2]|=64}(_,g,S,I);const R=yy(I,S),O=g[11],V=Vr(O,S[7]);return null!==V&&function Bg(u,d,h,g,_,I){g[0]=_,g[6]=d,od(u,g,h,1,_,I)}(_,S[6],O,g,V,R),d.attachToViewContainerRef(),uc(j0(S),I,d),d}move(d,h){return this.insert(d,h)}indexOf(d){const h=tg(this._lContainer);return null!==h?h.indexOf(d):-1}remove(d){const h=this._adjustIndex(d,-1),g=Ep(this._lContainer,h);g&&(Pi(j0(this._lContainer),h),jg(g[1],g))}detach(d){const h=this._adjustIndex(d,-1),g=Ep(this._lContainer,h);return g&&null!=Pi(j0(this._lContainer),h)?new m(g):null}_adjustIndex(d,h=0){return d??this.length+h}};function tg(u){return u[8]}function j0(u){return u[8]||(u[8]=[])}function ai(u,d){let h;const g=d[u.index];if(qi(g))h=g;else{let _;if(8&u.type)_=Dr(g);else{const I=d[11];_=I.createComment("");const S=no(u,d);rd(I,Vr(I,S),_,function gy(u,d){return u.nextSibling(d)}(I,S),!1)}d[u.index]=h=Wy(g,d,_,u),bd(d,h)}return new Dn(h,u,d)}class pI{constructor(d){this.queryList=d,this.matches=null}clone(){return new pI(this.queryList)}setDirty(){this.queryList.setDirty()}}class _i{constructor(d=[]){this.queries=d}createEmbeddedView(d){const h=d.queries;if(null!==h){const g=null!==d.contentQueries?d.contentQueries[0]:h.length,_=[];for(let I=0;I<g;I++){const S=h.getByIndex(I);_.push(this.queries[S.indexInDeclarationView].clone())}return new _i(_)}return null}insertView(d){this.dirtyQueriesWithMatches(d)}detachView(d){this.dirtyQueriesWithMatches(d)}dirtyQueriesWithMatches(d){for(let h=0;h<this.queries.length;h++)null!==_v(d,h).matches&&this.queries[h].setDirty()}}class It{constructor(d,h,g=null){this.predicate=d,this.flags=h,this.read=g}}class Tm{constructor(d=[]){this.queries=d}elementStart(d,h){for(let g=0;g<this.queries.length;g++)this.queries[g].elementStart(d,h)}elementEnd(d){for(let h=0;h<this.queries.length;h++)this.queries[h].elementEnd(d)}embeddedTView(d){let h=null;for(let g=0;g<this.length;g++){const _=null!==h?h.length:0,I=this.getByIndex(g).embeddedTView(d,_);I&&(I.indexInDeclarationView=g,null!==h?h.push(I):h=[I])}return null!==h?new Tm(h):null}template(d,h){for(let g=0;g<this.queries.length;g++)this.queries[g].template(d,h)}getByIndex(d){return this.queries[d]}get length(){return this.queries.length}track(d){this.queries.push(d)}}class vv{constructor(d,h=-1){this.metadata=d,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=h}elementStart(d,h){this.isApplyingToNode(h)&&this.matchTNode(d,h)}elementEnd(d){this._declarationNodeIndex===d.index&&(this._appliesToNextNode=!1)}template(d,h){this.elementStart(d,h)}embeddedTView(d,h){return this.isApplyingToNode(d)?(this.crossesNgTemplate=!0,this.addMatch(-d.index,h),new vv(this.metadata)):null}isApplyingToNode(d){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const h=this._declarationNodeIndex;let g=d.parent;for(;null!==g&&8&g.type&&g.index!==h;)g=g.parent;return h===(null!==g?g.index:-1)}return this._appliesToNextNode}matchTNode(d,h){const g=this.metadata.predicate;if(Array.isArray(g))for(let _=0;_<g.length;_++){const I=g[_];this.matchTNodeWithReadOption(d,h,ng(h,I)),this.matchTNodeWithReadOption(d,h,qr(h,d,I,!1,!1))}else g===mv?4&h.type&&this.matchTNodeWithReadOption(d,h,-1):this.matchTNodeWithReadOption(d,h,qr(h,d,g,!1,!1))}matchTNodeWithReadOption(d,h,g){if(null!==g){const _=this.metadata.read;if(null!==_)if(_===Ve||_===fI||_===mv&&4&h.type)this.addMatch(h.index,-2);else{const I=qr(h,d,_,!1,!1);null!==I&&this.addMatch(h.index,I)}else this.addMatch(h.index,g)}}addMatch(d,h){null===this.matches?this.matches=[d,h]:this.matches.push(d,h)}}function ng(u,d){const h=u.localNames;if(null!==h)for(let g=0;g<h.length;g+=2)if(h[g]===d)return h[g+1];return null}function H0(u,d,h,g){return-1===h?function KT(u,d){return 11&u.type?he(u,d):4&u.type?B0(u,d):null}(d,u):-2===h?function YT(u,d,h){return h===Ve?he(d,u):h===mv?B0(d,u):h===fI?ai(d,u):void 0}(u,d,g):ha(u,u[1],h,d)}function Sm(u,d,h,g){const _=d[19].queries[g];if(null===_.matches){const I=u.data,S=h.matches,R=[];for(let O=0;O<S.length;O+=2){const V=S[O];R.push(V<0?null:H0(d,I[V],S[O+1],h.metadata.read))}_.matches=R}return _.matches}function $0(u,d,h,g){const _=u.queries.getByIndex(h),I=_.matches;if(null!==I){const S=Sm(u,d,_,h);for(let R=0;R<I.length;R+=2){const O=I[R];if(O>0)g.push(S[R/2]);else{const V=I[R+1],K=d[-O];for(let ne=10;ne<K.length;ne++){const pe=K[ne];pe[17]===pe[3]&&$0(pe[1],pe,V,g)}if(null!==K[9]){const ne=K[9];for(let pe=0;pe<ne.length;pe++){const Te=ne[pe];$0(Te[1],Te,V,g)}}}}}return g}function gI(u){const d=Je(),h=Tn(),g=kl();du(g+1);const _=_v(h,g);if(u.dirty&&Ju(d)===(2==(2&_.metadata.flags))){if(null===_.matches)u.reset([]);else{const I=_.crossesNgTemplate?$0(h,d,g,[]):Sm(h,d,_,g);u.reset(I,pt),u.notifyOnChanges()}return!0}return!1}function G0(u,d,h,g){const _=Tn();if(_.firstCreatePass){const I=wr();(function q0(u,d,h){null===u.queries&&(u.queries=new Tm),u.queries.track(new vv(d,h))})(_,new It(d,h,g),I.index),function Fe(u,d){const h=u.contentQueries||(u.contentQueries=[]);d!==(h.length?h[h.length-1]:-1)&&h.push(u.queries.length-1,d)}(_,u),2==(2&h)&&(_.staticContentQueries=!0)}!function Th(u,d,h){const g=new hI(4==(4&h));q_(u,d,g,g.destroy),null===d[19]&&(d[19]=new _i),d[19].queries.push(new pI(g))}(_,Je(),h)}function mI(){return function NC(u,d){return u[19].queries[d].queryList}(Je(),kl())}function _v(u,d){return u.queries.getByIndex(d)}function Ad(...u){}const Om=new rr("Application Initializer");let ag=(()=>{class u{constructor(h){this.appInits=h,this.resolve=Ad,this.reject=Ad,this.initialized=!1,this.done=!1,this.donePromise=new Promise((g,_)=>{this.resolve=g,this.reject=_})}runInitializers(){if(this.initialized)return;const h=[],g=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let _=0;_<this.appInits.length;_++){const I=this.appInits[_]();if(db(I))h.push(I);else if(lT(I)){const S=new Promise((R,O)=>{I.subscribe({complete:R,error:O})});h.push(S)}}Promise.all(h).then(()=>{g()}).catch(_=>{this.reject(_)}),0===h.length&&g(),this.initialized=!0}}return u.\u0275fac=function(h){return new(h||u)(pr(Om,8))},u.\u0275prov=Xt({token:u,factory:u.\u0275fac,providedIn:"root"}),u})();const Cv=new rr("AppId",{providedIn:"root",factory:function CI(){return`${Co()}${Co()}${Co()}`}});function Co(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const UC=new rr("Platform Initializer"),oS=new rr("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),BC=new rr("appBootstrapListener");let aS=(()=>{class u{log(h){console.log(h)}warn(h){console.warn(h)}}return u.\u0275fac=function(h){return new(h||u)},u.\u0275prov=Xt({token:u,factory:u.\u0275fac,providedIn:"platform"}),u})();const X0=new rr("LocaleId",{providedIn:"root",factory:()=>P(X0,dt.Optional|dt.SkipSelf)||function uS(){return typeof $localize<"u"&&$localize.locale||_l}()}),$f=new rr("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class jC{constructor(d,h){this.ngModuleFactory=d,this.componentFactories=h}}let Ah=(()=>{class u{compileModuleSync(h){return new bm(h)}compileModuleAsync(h){return Promise.resolve(this.compileModuleSync(h))}compileModuleAndAllComponentsSync(h){const g=this.compileModuleSync(h),I=Su(Gi(h).declarations).reduce((S,R)=>{const O=an(R);return O&&S.push(new Y(O)),S},[]);return new jC(g,I)}compileModuleAndAllComponentsAsync(h){return Promise.resolve(this.compileModuleAndAllComponentsSync(h))}clearCache(){}clearCacheFor(h){}getModuleId(h){}}return u.\u0275fac=function(h){return new(h||u)},u.\u0275prov=Xt({token:u,factory:u.\u0275fac,providedIn:"root"}),u})();const eu=(()=>Promise.resolve(0))();function Nm(u){typeof Zone>"u"?eu.then(()=>{u&&u.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",u)}class ku{constructor({enableLongStackTrace:d=!1,shouldCoalesceEventChangeDetection:h=!1,shouldCoalesceRunChangeDetection:g=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new wl(!1),this.onMicrotaskEmpty=new wl(!1),this.onStable=new wl(!1),this.onError=new wl(!1),typeof Zone>"u")throw new Ne(908,!1);Zone.assertZonePatched();const _=this;if(_._nesting=0,_._outer=_._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const I=Zone.AsyncStackTaggingZoneSpec;_._inner=_._inner.fork(new I("Angular"))}Zone.TaskTrackingZoneSpec&&(_._inner=_._inner.fork(new Zone.TaskTrackingZoneSpec)),d&&Zone.longStackTraceZoneSpec&&(_._inner=_._inner.fork(Zone.longStackTraceZoneSpec)),_.shouldCoalesceEventChangeDetection=!g&&h,_.shouldCoalesceRunChangeDetection=g,_.lastRequestAnimationFrameId=-1,_.nativeRequestAnimationFrame=function Sv(){let u=Yn.requestAnimationFrame,d=Yn.cancelAnimationFrame;if(typeof Zone<"u"&&u&&d){const h=u[Zone.__symbol__("OriginalDelegate")];h&&(u=h);const g=d[Zone.__symbol__("OriginalDelegate")];g&&(d=g)}return{nativeRequestAnimationFrame:u,nativeCancelAnimationFrame:d}}().nativeRequestAnimationFrame,function zC(u){const d=()=>{!function qC(u){u.isCheckStableRunning||-1!==u.lastRequestAnimationFrameId||(u.lastRequestAnimationFrameId=u.nativeRequestAnimationFrame.call(Yn,()=>{u.fakeTopEventTask||(u.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{u.lastRequestAnimationFrameId=-1,TI(u),u.isCheckStableRunning=!0,Av(u),u.isCheckStableRunning=!1},void 0,()=>{},()=>{})),u.fakeTopEventTask.invoke()}),TI(u))}(u)};u._inner=u._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(h,g,_,I,S,R)=>{try{return SI(u),h.invokeTask(_,I,S,R)}finally{(u.shouldCoalesceEventChangeDetection&&"eventTask"===I.type||u.shouldCoalesceRunChangeDetection)&&d(),AI(u)}},onInvoke:(h,g,_,I,S,R,O)=>{try{return SI(u),h.invoke(_,I,S,R,O)}finally{u.shouldCoalesceRunChangeDetection&&d(),AI(u)}},onHasTask:(h,g,_,I)=>{h.hasTask(_,I),g===_&&("microTask"==I.change?(u._hasPendingMicrotasks=I.microTask,TI(u),Av(u)):"macroTask"==I.change&&(u.hasPendingMacrotasks=I.macroTask))},onHandleError:(h,g,_,I)=>(h.handleError(_,I),u.runOutsideAngular(()=>u.onError.emit(I)),!1)})}(_)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ku.isInAngularZone())throw new Ne(909,!1)}static assertNotInAngularZone(){if(ku.isInAngularZone())throw new Ne(909,!1)}run(d,h,g){return this._inner.run(d,h,g)}runTask(d,h,g,_){const I=this._inner,S=I.scheduleEventTask("NgZoneEvent: "+_,d,DI,Ad,Ad);try{return I.runTask(S,h,g)}finally{I.cancelTask(S)}}runGuarded(d,h,g){return this._inner.runGuarded(d,h,g)}runOutsideAngular(d){return this._outer.run(d)}}const DI={};function Av(u){if(0==u._nesting&&!u.hasPendingMicrotasks&&!u.isStable)try{u._nesting++,u.onMicrotaskEmpty.emit(null)}finally{if(u._nesting--,!u.hasPendingMicrotasks)try{u.runOutsideAngular(()=>u.onStable.emit(null))}finally{u.isStable=!0}}}function TI(u){u.hasPendingMicrotasks=!!(u._hasPendingMicrotasks||(u.shouldCoalesceEventChangeDetection||u.shouldCoalesceRunChangeDetection)&&-1!==u.lastRequestAnimationFrameId)}function SI(u){u._nesting++,u.isStable&&(u.isStable=!1,u.onUnstable.emit(null))}function AI(u){u._nesting--,Av(u)}class WC{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new wl,this.onMicrotaskEmpty=new wl,this.onStable=new wl,this.onError=new wl}run(d,h,g){return d.apply(h,g)}runGuarded(d,h,g){return d.apply(h,g)}runOutsideAngular(d){return d()}runTask(d,h,g,_){return d.apply(h,g)}}const xv=new rr(""),ZC=new rr("");let xh,lS=(()=>{class u{constructor(h,g,_){this._ngZone=h,this.registry=g,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,xh||(function Pm(u){xh=u}(_),_.addToWindow(g)),this._watchAngularEvents(),h.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ku.assertNotInAngularZone(),Nm(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Nm(()=>{for(;0!==this._callbacks.length;){let h=this._callbacks.pop();clearTimeout(h.timeoutId),h.doneCb(this._didWork)}this._didWork=!1});else{let h=this.getPendingTasks();this._callbacks=this._callbacks.filter(g=>!g.updateCb||!g.updateCb(h)||(clearTimeout(g.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(h=>({source:h.source,creationLocation:h.creationLocation,data:h.data})):[]}addCallback(h,g,_){let I=-1;g&&g>0&&(I=setTimeout(()=>{this._callbacks=this._callbacks.filter(S=>S.timeoutId!==I),h(this._didWork,this.getPendingTasks())},g)),this._callbacks.push({doneCb:h,timeoutId:I,updateCb:_})}whenStable(h,g,_){if(_&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(h,g,_),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(h){this.registry.registerApplication(h,this)}unregisterApplication(h){this.registry.unregisterApplication(h)}findProviders(h,g,_){return[]}}return u.\u0275fac=function(h){return new(h||u)(pr(ku),pr(xI),pr(ZC))},u.\u0275prov=Xt({token:u,factory:u.\u0275fac}),u})(),xI=(()=>{class u{constructor(){this._applications=new Map}registerApplication(h,g){this._applications.set(h,g)}unregisterApplication(h){this._applications.delete(h)}unregisterAllApplications(){this._applications.clear()}getTestability(h){return this._applications.get(h)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(h,g=!0){return xh?.findTestabilityInTree(this,h,g)??null}}return u.\u0275fac=function(h){return new(h||u)},u.\u0275prov=Xt({token:u,factory:u.\u0275fac,providedIn:"platform"}),u})(),Mh=null;const Gf=new rr("AllowMultipleToken"),nw=new rr("PlatformDestroyListeners");class hS{constructor(d,h){this.name=d,this.token=h}}function RI(u,d,h=[]){const g=`Platform: ${d}`,_=new rr(g);return(I=[])=>{let S=rw();if(!S||S.injector.get(Gf,!1)){const R=[...h,...I,{provide:_,useValue:!0}];u?u(R):function fS(u){if(Mh&&!Mh.get(Gf,!1))throw new Ne(400,!1);Mh=u;const d=u.get(ug);(function Rv(u){const d=u.get(UC,null);d&&d.forEach(h=>h())})(u)}(function km(u=[],d){return cd.create({name:d,providers:[{provide:qs,useValue:"platform"},{provide:nw,useValue:new Set([()=>Mh=null])},...u]})}(R,g))}return function pS(u){const d=rw();if(!d)throw new Ne(401,!1);return d}()}}function rw(){return Mh?.get(ug)??null}let ug=(()=>{class u{constructor(h){this._injector=h,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(h,g){const _=function OI(u,d){let h;return h="noop"===u?new WC:("zone.js"===u?void 0:u)||new ku(d),h}(g?.ngZone,function xd(u){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!u||!u.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!u||!u.ngZoneRunCoalescing)||!1}}(g)),I=[{provide:ku,useValue:_}];return _.run(()=>{const S=cd.create({providers:I,parent:this.injector,name:h.moduleType.name}),R=h.create(S),O=R.injector.get(td,null);if(!O)throw new Ne(402,!1);return _.runOutsideAngular(()=>{const V=_.onError.subscribe({next:K=>{O.handleError(K)}});R.onDestroy(()=>{Fm(this._modules,R),V.unsubscribe()})}),function NI(u,d,h){try{const g=h();return db(g)?g.catch(_=>{throw d.runOutsideAngular(()=>u.handleError(_)),_}):g}catch(g){throw d.runOutsideAngular(()=>u.handleError(g)),g}}(O,_,()=>{const V=R.injector.get(ag);return V.runInitializers(),V.donePromise.then(()=>(function pm(u){_n(u,"Expected localeId to be defined"),"string"==typeof u&&(Bb=u.toLowerCase().replace(/_/g,"-"))}(R.injector.get(X0,_l)||_l),this._moduleDoBootstrap(R),R))})})}bootstrapModule(h,g=[]){const _=PI({},g);return function KC(u,d,h){const g=new bm(h);return Promise.resolve(g)}(0,0,h).then(I=>this.bootstrapModuleFactory(I,_))}_moduleDoBootstrap(h){const g=h.injector.get(Rh);if(h._bootstrapComponents.length>0)h._bootstrapComponents.forEach(_=>g.bootstrap(_));else{if(!h.instance.ngDoBootstrap)throw new Ne(403,!1);h.instance.ngDoBootstrap(g)}this._modules.push(h)}onDestroy(h){this._destroyListeners.push(h)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ne(404,!1);this._modules.slice().forEach(g=>g.destroy()),this._destroyListeners.forEach(g=>g());const h=this._injector.get(nw,null);h&&(h.forEach(g=>g()),h.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return u.\u0275fac=function(h){return new(h||u)(pr(cd))},u.\u0275prov=Xt({token:u,factory:u.\u0275fac,providedIn:"platform"}),u})();function PI(u,d){return Array.isArray(d)?d.reduce(PI,u):{...u,...d}}let Rh=(()=>{class u{constructor(h,g,_){this._zone=h,this._injector=g,this._exceptionHandler=_,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const I=new J.y(R=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{R.next(this._stable),R.complete()})}),S=new J.y(R=>{let O;this._zone.runOutsideAngular(()=>{O=this._zone.onStable.subscribe(()=>{ku.assertNotInAngularZone(),Nm(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,R.next(!0))})})});const V=this._zone.onUnstable.subscribe(()=>{ku.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{R.next(!1)}))});return()=>{O.unsubscribe(),V.unsubscribe()}});this.isStable=(0,me.T)(I,S.pipe((0,Ie.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(h,g){const _=h instanceof dp;if(!this._injector.get(ag).done)throw!_&&Ts(h),new Ne(405,false);let S;S=_?h:this._injector.get(U).resolveComponentFactory(h),this.componentTypes.push(S.componentType);const R=function Mv(u){return u.isBoundToModule}(S)?void 0:this._injector.get(Jp),V=S.create(cd.NULL,[],g||S.selector,R),K=V.location.nativeElement,ne=V.injector.get(xv,null);return ne?.registerApplication(K),V.onDestroy(()=>{this.detachView(V.hostView),Fm(this.components,V),ne?.unregisterApplication(K)}),this._loadComponent(V),V}tick(){if(this._runningTick)throw new Ne(101,!1);try{this._runningTick=!0;for(let h of this._views)h.detectChanges()}catch(h){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(h))}finally{this._runningTick=!1}}attachView(h){const g=h;this._views.push(g),g.attachToAppRef(this)}detachView(h){const g=h;Fm(this._views,g),g.detachFromAppRef()}_loadComponent(h){this.attachView(h.hostView),this.tick(),this.components.push(h),this._injector.get(BC,[]).concat(this._bootstrapListeners).forEach(_=>_(h))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(h=>h()),this._views.slice().forEach(h=>h.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(h){return this._destroyListeners.push(h),()=>Fm(this._destroyListeners,h)}destroy(){if(this._destroyed)throw new Ne(406,!1);const h=this._injector;h.destroy&&!h.destroyed&&h.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return u.\u0275fac=function(h){return new(h||u)(pr(ku),pr(Er),pr(td))},u.\u0275prov=Xt({token:u,factory:u.\u0275fac,providedIn:"root"}),u})();function Fm(u,d){const h=u.indexOf(d);h>-1&&u.splice(h,1)}let Qn=!0,kI=!1;function QC(){return kI=!0,Qn}function qf(){if(kI)throw new Error("Cannot enable prod mode after platform setup.");Qn=!1}let Ov=(()=>{class u{}return u.__NG_ELEMENT_ID__=JC,u})();function JC(u){return function Md(u,d,h){if(Gu(u)&&!h){const g=Ln(u.index,d);return new m(g,g)}return 47&u.type?new m(d[16],d):null}(wr(),Je(),16==(16&u))}class Do{constructor(){}supports(d){return n0(d)}create(d){return new eD(d)}}const BI=(u,d)=>d;class eD{constructor(d){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=d||BI}forEachItem(d){let h;for(h=this._itHead;null!==h;h=h._next)d(h)}forEachOperation(d){let h=this._itHead,g=this._removalsHead,_=0,I=null;for(;h||g;){const S=!g||h&&h.currentIndex<jI(g,_,I)?h:g,R=jI(S,_,I),O=S.currentIndex;if(S===g)_--,g=g._nextRemoved;else if(h=h._next,null==S.previousIndex)_++;else{I||(I=[]);const V=R-_,K=O-_;if(V!=K){for(let pe=0;pe<V;pe++){const Te=pe<I.length?I[pe]:I[pe]=0,Ze=Te+pe;K<=Ze&&Ze<V&&(I[pe]=Te+1)}I[S.previousIndex]=K-V}}R!==O&&d(S,R,O)}}forEachPreviousItem(d){let h;for(h=this._previousItHead;null!==h;h=h._nextPrevious)d(h)}forEachAddedItem(d){let h;for(h=this._additionsHead;null!==h;h=h._nextAdded)d(h)}forEachMovedItem(d){let h;for(h=this._movesHead;null!==h;h=h._nextMoved)d(h)}forEachRemovedItem(d){let h;for(h=this._removalsHead;null!==h;h=h._nextRemoved)d(h)}forEachIdentityChange(d){let h;for(h=this._identityChangesHead;null!==h;h=h._nextIdentityChange)d(h)}diff(d){if(null==d&&(d=[]),!n0(d))throw new Ne(900,!1);return this.check(d)?this:null}onDestroy(){}check(d){this._reset();let _,I,S,h=this._itHead,g=!1;if(Array.isArray(d)){this.length=d.length;for(let R=0;R<this.length;R++)I=d[R],S=this._trackByFn(R,I),null!==h&&Object.is(h.trackById,S)?(g&&(h=this._verifyReinsertion(h,I,S,R)),Object.is(h.item,I)||this._addIdentityChange(h,I)):(h=this._mismatch(h,I,S,R),g=!0),h=h._next}else _=0,function eT(u,d){if(Array.isArray(u))for(let h=0;h<u.length;h++)d(u[h]);else{const h=u[Tf()]();let g;for(;!(g=h.next()).done;)d(g.value)}}(d,R=>{S=this._trackByFn(_,R),null!==h&&Object.is(h.trackById,S)?(g&&(h=this._verifyReinsertion(h,R,S,_)),Object.is(h.item,R)||this._addIdentityChange(h,R)):(h=this._mismatch(h,R,S,_),g=!0),h=h._next,_++}),this.length=_;return this._truncate(h),this.collection=d,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let d;for(d=this._previousItHead=this._itHead;null!==d;d=d._next)d._nextPrevious=d._next;for(d=this._additionsHead;null!==d;d=d._nextAdded)d.previousIndex=d.currentIndex;for(this._additionsHead=this._additionsTail=null,d=this._movesHead;null!==d;d=d._nextMoved)d.previousIndex=d.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(d,h,g,_){let I;return null===d?I=this._itTail:(I=d._prev,this._remove(d)),null!==(d=null===this._unlinkedRecords?null:this._unlinkedRecords.get(g,null))?(Object.is(d.item,h)||this._addIdentityChange(d,h),this._reinsertAfter(d,I,_)):null!==(d=null===this._linkedRecords?null:this._linkedRecords.get(g,_))?(Object.is(d.item,h)||this._addIdentityChange(d,h),this._moveAfter(d,I,_)):d=this._addAfter(new Fv(h,g),I,_),d}_verifyReinsertion(d,h,g,_){let I=null===this._unlinkedRecords?null:this._unlinkedRecords.get(g,null);return null!==I?d=this._reinsertAfter(I,d._prev,_):d.currentIndex!=_&&(d.currentIndex=_,this._addToMoves(d,_)),d}_truncate(d){for(;null!==d;){const h=d._next;this._addToRemovals(this._unlink(d)),d=h}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(d,h,g){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(d);const _=d._prevRemoved,I=d._nextRemoved;return null===_?this._removalsHead=I:_._nextRemoved=I,null===I?this._removalsTail=_:I._prevRemoved=_,this._insertAfter(d,h,g),this._addToMoves(d,g),d}_moveAfter(d,h,g){return this._unlink(d),this._insertAfter(d,h,g),this._addToMoves(d,g),d}_addAfter(d,h,g){return this._insertAfter(d,h,g),this._additionsTail=null===this._additionsTail?this._additionsHead=d:this._additionsTail._nextAdded=d,d}_insertAfter(d,h,g){const _=null===h?this._itHead:h._next;return d._next=_,d._prev=h,null===_?this._itTail=d:_._prev=d,null===h?this._itHead=d:h._next=d,null===this._linkedRecords&&(this._linkedRecords=new cw),this._linkedRecords.put(d),d.currentIndex=g,d}_remove(d){return this._addToRemovals(this._unlink(d))}_unlink(d){null!==this._linkedRecords&&this._linkedRecords.remove(d);const h=d._prev,g=d._next;return null===h?this._itHead=g:h._next=g,null===g?this._itTail=h:g._prev=h,d}_addToMoves(d,h){return d.previousIndex===h||(this._movesTail=null===this._movesTail?this._movesHead=d:this._movesTail._nextMoved=d),d}_addToRemovals(d){return null===this._unlinkedRecords&&(this._unlinkedRecords=new cw),this._unlinkedRecords.put(d),d.currentIndex=null,d._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=d,d._prevRemoved=null):(d._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=d),d}_addIdentityChange(d,h){return d.item=h,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=d:this._identityChangesTail._nextIdentityChange=d,d}}class Fv{constructor(d,h){this.item=d,this.trackById=h,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Rd{constructor(){this._head=null,this._tail=null}add(d){null===this._head?(this._head=this._tail=d,d._nextDup=null,d._prevDup=null):(this._tail._nextDup=d,d._prevDup=this._tail,d._nextDup=null,this._tail=d)}get(d,h){let g;for(g=this._head;null!==g;g=g._nextDup)if((null===h||h<=g.currentIndex)&&Object.is(g.trackById,d))return g;return null}remove(d){const h=d._prevDup,g=d._nextDup;return null===h?this._head=g:h._nextDup=g,null===g?this._tail=h:g._prevDup=h,null===this._head}}class cw{constructor(){this.map=new Map}put(d){const h=d.trackById;let g=this.map.get(h);g||(g=new Rd,this.map.set(h,g)),g.add(d)}get(d,h){const _=this.map.get(d);return _?_.get(d,h):null}remove(d){const h=d.trackById;return this.map.get(h).remove(d)&&this.map.delete(h),d}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function jI(u,d,h){const g=u.previousIndex;if(null===g)return g;let _=0;return h&&g<h.length&&(_=h[g]),g+d+_}class Lm{constructor(){}supports(d){return d instanceof Map||ob(d)}create(){return new tD}}class tD{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(d){let h;for(h=this._mapHead;null!==h;h=h._next)d(h)}forEachPreviousItem(d){let h;for(h=this._previousMapHead;null!==h;h=h._nextPrevious)d(h)}forEachChangedItem(d){let h;for(h=this._changesHead;null!==h;h=h._nextChanged)d(h)}forEachAddedItem(d){let h;for(h=this._additionsHead;null!==h;h=h._nextAdded)d(h)}forEachRemovedItem(d){let h;for(h=this._removalsHead;null!==h;h=h._nextRemoved)d(h)}diff(d){if(d){if(!(d instanceof Map||ob(d)))throw new Ne(900,!1)}else d=new Map;return this.check(d)?this:null}onDestroy(){}check(d){this._reset();let h=this._mapHead;if(this._appendAfter=null,this._forEach(d,(g,_)=>{if(h&&h.key===_)this._maybeAddToChanges(h,g),this._appendAfter=h,h=h._next;else{const I=this._getOrCreateRecordForKey(_,g);h=this._insertBeforeOrAppend(h,I)}}),h){h._prev&&(h._prev._next=null),this._removalsHead=h;for(let g=h;null!==g;g=g._nextRemoved)g===this._mapHead&&(this._mapHead=null),this._records.delete(g.key),g._nextRemoved=g._next,g.previousValue=g.currentValue,g.currentValue=null,g._prev=null,g._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(d,h){if(d){const g=d._prev;return h._next=d,h._prev=g,d._prev=h,g&&(g._next=h),d===this._mapHead&&(this._mapHead=h),this._appendAfter=d,d}return this._appendAfter?(this._appendAfter._next=h,h._prev=this._appendAfter):this._mapHead=h,this._appendAfter=h,null}_getOrCreateRecordForKey(d,h){if(this._records.has(d)){const _=this._records.get(d);this._maybeAddToChanges(_,h);const I=_._prev,S=_._next;return I&&(I._next=S),S&&(S._prev=I),_._next=null,_._prev=null,_}const g=new nD(d);return this._records.set(d,g),g.currentValue=h,this._addToAdditions(g),g}_reset(){if(this.isDirty){let d;for(this._previousMapHead=this._mapHead,d=this._previousMapHead;null!==d;d=d._next)d._nextPrevious=d._next;for(d=this._changesHead;null!==d;d=d._nextChanged)d.previousValue=d.currentValue;for(d=this._additionsHead;null!=d;d=d._nextAdded)d.previousValue=d.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(d,h){Object.is(h,d.currentValue)||(d.previousValue=d.currentValue,d.currentValue=h,this._addToChanges(d))}_addToAdditions(d){null===this._additionsHead?this._additionsHead=this._additionsTail=d:(this._additionsTail._nextAdded=d,this._additionsTail=d)}_addToChanges(d){null===this._changesHead?this._changesHead=this._changesTail=d:(this._changesTail._nextChanged=d,this._changesTail=d)}_forEach(d,h){d instanceof Map?d.forEach(h):Object.keys(d).forEach(g=>h(d[g],g))}}class nD{constructor(d){this.key=d,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function HI(){return new $I([new Do])}let $I=(()=>{class u{constructor(h){this.factories=h}static create(h,g){if(null!=g){const _=g.factories.slice();h=h.concat(_)}return new u(h)}static extend(h){return{provide:u,useFactory:g=>u.create(h,g||HI()),deps:[[u,new on,new st]]}}find(h){const g=this.factories.find(_=>_.supports(h));if(null!=g)return g;throw new Ne(901,!1)}}return u.\u0275prov=Xt({token:u,providedIn:"root",factory:HI}),u})();function Vm(){return new Lv([new Lm])}let Lv=(()=>{class u{constructor(h){this.factories=h}static create(h,g){if(g){const _=g.factories.slice();h=h.concat(_)}return new u(h)}static extend(h){return{provide:u,useFactory:g=>u.create(h,g||Vm()),deps:[[u,new on,new st]]}}find(h){const g=this.factories.find(_=>_.supports(h));if(g)return g;throw new Ne(901,!1)}}return u.\u0275prov=Xt({token:u,providedIn:"root",factory:Vm}),u})();const bS=RI(null,"core",[]);let iD=(()=>{class u{constructor(h){}}return u.\u0275fac=function(h){return new(h||u)(pr(Rh))},u.\u0275mod=mt({type:u}),u.\u0275inj=un({}),u})();function IS(u){return"boolean"==typeof u?u:null!=u&&"false"!==u}},3942:(Ut,qe,ee)=>{ee.d(qe,{Z:()=>Ne});var y=ee(2090),L=ee(4859),J=ee(9681),me=ee(1877);class Ie{constructor(Pe,Me){this._delegate=Pe,this.firebase=Me,(0,J._addComponent)(Pe,new L.wA("app-compat",()=>this,"PUBLIC")),this.container=Pe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Pe){this._delegate.automaticDataCollectionEnabled=Pe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Pe=>{this._delegate.checkDestroyed(),Pe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,J.deleteApp)(this._delegate)))}_getService(Pe,Me=J._DEFAULT_ENTRY_NAME){var yt;this._delegate.checkDestroyed();const ht=this._delegate.container.getProvider(Pe);return!ht.isInitialized()&&"EXPLICIT"===(null===(yt=ht.getComponent())||void 0===yt?void 0:yt.instantiationMode)&&ht.initialize(),ht.getImmediate({identifier:Me})}_removeServiceInstance(Pe,Me=J._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Pe).clearInstance(Me)}_addComponent(Pe){(0,J._addComponent)(this._delegate,Pe)}_addOrOverwriteComponent(Pe){(0,J._addOrOverwriteComponent)(this._delegate,Pe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Oe=new y.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),te=function ue(){const ut=function Le(ut){const Pe={},Me={__esModule:!0,initializeApp:function ze(rt,le={}){const He=J.initializeApp(rt,le);if((0,y.r3)(Pe,He.name))return Pe[He.name];const ge=new ut(He,Me);return Pe[He.name]=ge,ge},app:ht,registerVersion:J.registerVersion,setLogLevel:J.setLogLevel,onLog:J.onLog,apps:null,SDK_VERSION:J.SDK_VERSION,INTERNAL:{registerComponent:function je(rt){const le=rt.name,He=le.replace("-compat","");if(J._registerComponent(rt)&&"PUBLIC"===rt.type){const ge=(_e=ht())=>{if("function"!=typeof _e[He])throw Oe.create("invalid-app-argument",{appName:le});return _e[He]()};void 0!==rt.serviceProps&&(0,y.ZB)(ge,rt.serviceProps),Me[He]=ge,ut.prototype[He]=function(..._e){return this._getService.bind(this,le).apply(this,rt.multipleInstances?_e:[])}}return"PUBLIC"===rt.type?Me[He]:null},removeApp:function yt(rt){delete Pe[rt]},useAsService:function ft(rt,le){return"serverAuth"===le?null:le},modularAPIs:J}};function ht(rt){if(!(0,y.r3)(Pe,rt=rt||J._DEFAULT_ENTRY_NAME))throw Oe.create("no-app",{appName:rt});return Pe[rt]}return Me.default=Me,Object.defineProperty(Me,"apps",{get:function Ce(){return Object.keys(Pe).map(rt=>Pe[rt])}}),ht.App=ut,Me}(Ie);return ut.INTERNAL=Object.assign(Object.assign({},ut.INTERNAL),{createFirebaseNamespace:ue,extendNamespace:function Pe(Me){(0,y.ZB)(ut,Me)},createSubscribe:y.ne,ErrorFactory:y.LL,deepExtend:y.ZB}),ut}(),X=new me.Yd("@firebase/app-compat");if((0,y.jU)()&&void 0!==self.firebase){X.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ut=self.firebase.SDK_VERSION;ut&&ut.indexOf("LITE")>=0&&X.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ne=te;!function we(ut){(0,J.registerVersion)("@firebase/app-compat","0.1.34",ut)}()},9681:(Ut,qe,ee)=>{ee.r(qe),ee.d(qe,{FirebaseError:()=>me.ZR,SDK_VERSION:()=>ns,_DEFAULT_ENTRY_NAME:()=>_n,_addComponent:()=>Ot,_addOrOverwriteComponent:()=>Xt,_apps:()=>St,_clearComponents:()=>go,_components:()=>Tt,_getProvider:()=>un,_registerComponent:()=>Xn,_removeServiceInstance:()=>jn,deleteApp:()=>mr,getApp:()=>cn,getApps:()=>lr,initializeApp:()=>wn,onLog:()=>vr,registerVersion:()=>yr,setLogLevel:()=>Mn});var y=ee(5861),L=ee(4859),J=ee(1877),me=ee(2090),Ie=ee(8766);class Ue{constructor(z){this.container=z}getPlatformInfoString(){return this.container.getProviders().map(re=>{if(function Oe(Z){return"VERSION"===Z.getComponent()?.type}(re)){const xe=re.getImmediate();return`${xe.library}/${xe.version}`}return null}).filter(re=>re).join(" ")}}const Le="@firebase/app",te=new J.Yd("@firebase/app"),_n="[DEFAULT]",_t={[Le]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},St=new Map,Tt=new Map;function Ot(Z,z){try{Z.container.addComponent(z)}catch(re){te.debug(`Component ${z.name} failed to register with FirebaseApp ${Z.name}`,re)}}function Xt(Z,z){Z.container.addOrOverwriteComponent(z)}function Xn(Z){const z=Z.name;if(Tt.has(z))return te.debug(`There were multiple attempts to register component ${z}.`),!1;Tt.set(z,Z);for(const re of St.values())Ot(re,Z);return!0}function un(Z,z){const re=Z.container.getProvider("heartbeat").getImmediate({optional:!0});return re&&re.triggerHeartbeat(),Z.container.getProvider(z)}function jn(Z,z,re=_n){un(Z,z).clearInstance(re)}function go(){Tt.clear()}const Rr=new me.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Wr{constructor(z,re,xe){this._isDeleted=!1,this._options=Object.assign({},z),this._config=Object.assign({},re),this._name=re.name,this._automaticDataCollectionEnabled=re.automaticDataCollectionEnabled,this._container=xe,this.container.addComponent(new L.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(z){this.checkDestroyed(),this._automaticDataCollectionEnabled=z}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(z){this._isDeleted=z}checkDestroyed(){if(this.isDeleted)throw Rr.create("app-deleted",{appName:this._name})}}const ns="9.10.0";function wn(Z,z={}){"object"!=typeof z&&(z={name:z});const re=Object.assign({name:_n,automaticDataCollectionEnabled:!1},z),xe=re.name;if("string"!=typeof xe||!xe)throw Rr.create("bad-app-name",{appName:String(xe)});const Ke=St.get(xe);if(Ke){if((0,me.vZ)(Z,Ke.options)&&(0,me.vZ)(re,Ke.config))return Ke;throw Rr.create("duplicate-app",{appName:xe})}const mt=new L.H0(xe);for(const gn of Tt.values())mt.addComponent(gn);const zt=new Wr(Z,re,mt);return St.set(xe,zt),zt}function cn(Z=_n){const z=St.get(Z);if(!z)throw Rr.create("no-app",{appName:Z});return z}function lr(){return Array.from(St.values())}function mr(Z){return dt.apply(this,arguments)}function dt(){return(dt=(0,y.Z)(function*(Z){const z=Z.name;St.has(z)&&(St.delete(z),yield Promise.all(Z.container.getProviders().map(re=>re.delete())),Z.isDeleted=!0)})).apply(this,arguments)}function yr(Z,z,re){var xe;let Ke=null!==(xe=_t[Z])&&void 0!==xe?xe:Z;re&&(Ke+=`-${re}`);const mt=Ke.match(/\s|\//),zt=z.match(/\s|\//);if(mt||zt){const gn=[`Unable to register library "${Ke}" with version "${z}":`];return mt&&gn.push(`library name "${Ke}" contains illegal characters (whitespace or "/")`),mt&&zt&&gn.push("and"),zt&&gn.push(`version name "${z}" contains illegal characters (whitespace or "/")`),void te.warn(gn.join(" "))}Xn(new L.wA(`${Ke}-version`,()=>({library:Ke,version:z}),"VERSION"))}function vr(Z,z){if(null!==Z&&"function"!=typeof Z)throw Rr.create("invalid-log-argument");(0,J.Am)(Z,z)}function Mn(Z){(0,J.Ub)(Z)}const Or="firebase-heartbeat-store";let kn=null;function Kn(){return kn||(kn=(0,Ie.X3)("firebase-heartbeat-database",1,{upgrade:(Z,z)=>{0===z&&Z.createObjectStore(Or)}}).catch(Z=>{throw Rr.create("idb-open",{originalErrorMessage:Z.message})})),kn}function Pt(){return(Pt=(0,y.Z)(function*(Z){var z;try{return(yield Kn()).transaction(Or).objectStore(Or).get(Cr(Z))}catch(re){if(re instanceof me.ZR)te.warn(re.message);else{const xe=Rr.create("idb-get",{originalErrorMessage:null===(z=re)||void 0===z?void 0:z.message});te.warn(xe.message)}}})).apply(this,arguments)}function Yn(Z,z){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,y.Z)(function*(Z,z){var re;try{const Ke=(yield Kn()).transaction(Or,"readwrite");return yield Ke.objectStore(Or).put(z,Cr(Z)),Ke.done}catch(xe){if(xe instanceof me.ZR)te.warn(xe.message);else{const Ke=Rr.create("idb-set",{originalErrorMessage:null===(re=xe)||void 0===re?void 0:re.message});te.warn(Ke.message)}}})).apply(this,arguments)}function Cr(Z){return`${Z.name}!${Z.options.appId}`}class To{constructor(z){this.container=z,this._heartbeatsCache=null;const re=this.container.getProvider("app").getImmediate();this._storage=new ce(re),this._heartbeatsCachePromise=this._storage.read().then(xe=>(this._heartbeatsCache=xe,xe))}triggerHeartbeat(){var z=this;return(0,y.Z)(function*(){const xe=z.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ke=Fn();if(null===z._heartbeatsCache&&(z._heartbeatsCache=yield z._heartbeatsCachePromise),z._heartbeatsCache.lastSentHeartbeatDate!==Ke&&!z._heartbeatsCache.heartbeats.some(mt=>mt.date===Ke))return z._heartbeatsCache.heartbeats.push({date:Ke,agent:xe}),z._heartbeatsCache.heartbeats=z._heartbeatsCache.heartbeats.filter(mt=>{const zt=new Date(mt.date).valueOf();return Date.now()-zt<=2592e6}),z._storage.overwrite(z._heartbeatsCache)})()}getHeartbeatsHeader(){var z=this;return(0,y.Z)(function*(){if(null===z._heartbeatsCache&&(yield z._heartbeatsCachePromise),null===z._heartbeatsCache||0===z._heartbeatsCache.heartbeats.length)return"";const re=Fn(),{heartbeatsToSend:xe,unsentEntries:Ke}=function $i(Z,z=1024){const re=[];let xe=Z.slice();for(const Ke of Z){const mt=re.find(zt=>zt.agent===Ke.agent);if(mt){if(mt.dates.push(Ke.date),j(re)>z){mt.dates.pop();break}}else if(re.push({agent:Ke.agent,dates:[Ke.date]}),j(re)>z){re.pop();break}xe=xe.slice(1)}return{heartbeatsToSend:re,unsentEntries:xe}}(z._heartbeatsCache.heartbeats),mt=(0,me.L)(JSON.stringify({version:2,heartbeats:xe}));return z._heartbeatsCache.lastSentHeartbeatDate=re,Ke.length>0?(z._heartbeatsCache.heartbeats=Ke,yield z._storage.overwrite(z._heartbeatsCache)):(z._heartbeatsCache.heartbeats=[],z._storage.overwrite(z._heartbeatsCache)),mt})()}}function Fn(){return(new Date).toISOString().substring(0,10)}class ce{constructor(z){this.app=z,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,y.Z)(function*(){return!!(0,me.hl)()&&(0,me.eu)().then(()=>!0).catch(()=>!1)})()}read(){var z=this;return(0,y.Z)(function*(){return(yield z._canUseIndexedDBPromise)&&(yield function qt(Z){return Pt.apply(this,arguments)}(z.app))||{heartbeats:[]}})()}overwrite(z){var re=this;return(0,y.Z)(function*(){var xe;if(yield re._canUseIndexedDBPromise){const mt=yield re.read();return Yn(re.app,{lastSentHeartbeatDate:null!==(xe=z.lastSentHeartbeatDate)&&void 0!==xe?xe:mt.lastSentHeartbeatDate,heartbeats:z.heartbeats})}})()}add(z){var re=this;return(0,y.Z)(function*(){var xe;if(yield re._canUseIndexedDBPromise){const mt=yield re.read();return Yn(re.app,{lastSentHeartbeatDate:null!==(xe=z.lastSentHeartbeatDate)&&void 0!==xe?xe:mt.lastSentHeartbeatDate,heartbeats:[...mt.heartbeats,...z.heartbeats]})}})()}}function j(Z){return(0,me.L)(JSON.stringify({version:2,heartbeats:Z})).length}!function q(Z){Xn(new L.wA("platform-logger",z=>new Ue(z),"PRIVATE")),Xn(new L.wA("heartbeat",z=>new To(z),"PRIVATE")),yr(Le,"0.7.33",Z),yr(Le,"0.7.33","esm2017"),yr("fire-js","")}("")},4859:(Ut,qe,ee)=>{ee.d(qe,{H0:()=>Le,wA:()=>J});var y=ee(5861),L=ee(2090);class J{constructor(te,X,oe){this.name=te,this.instanceFactory=X,this.type=oe,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(te){return this.instantiationMode=te,this}setMultipleInstances(te){return this.multipleInstances=te,this}setServiceProps(te){return this.serviceProps=te,this}setInstanceCreatedCallback(te){return this.onInstanceCreated=te,this}}const me="[DEFAULT]";class Ie{constructor(te,X){this.name=te,this.container=X,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(te){const X=this.normalizeInstanceIdentifier(te);if(!this.instancesDeferred.has(X)){const oe=new L.BH;if(this.instancesDeferred.set(X,oe),this.isInitialized(X)||this.shouldAutoInitialize())try{const be=this.getOrInitializeService({instanceIdentifier:X});be&&oe.resolve(be)}catch{}}return this.instancesDeferred.get(X).promise}getImmediate(te){var X;const oe=this.normalizeInstanceIdentifier(te?.identifier),be=null!==(X=te?.optional)&&void 0!==X&&X;if(!this.isInitialized(oe)&&!this.shouldAutoInitialize()){if(be)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:oe})}catch(we){if(be)return null;throw we}}getComponent(){return this.component}setComponent(te){if(te.name!==this.name)throw Error(`Mismatching Component ${te.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=te,this.shouldAutoInitialize()){if(function Oe(ue){return"EAGER"===ue.instantiationMode}(te))try{this.getOrInitializeService({instanceIdentifier:me})}catch{}for(const[X,oe]of this.instancesDeferred.entries()){const be=this.normalizeInstanceIdentifier(X);try{const we=this.getOrInitializeService({instanceIdentifier:be});oe.resolve(we)}catch{}}}}clearInstance(te=me){this.instancesDeferred.delete(te),this.instancesOptions.delete(te),this.instances.delete(te)}delete(){var te=this;return(0,y.Z)(function*(){const X=Array.from(te.instances.values());yield Promise.all([...X.filter(oe=>"INTERNAL"in oe).map(oe=>oe.INTERNAL.delete()),...X.filter(oe=>"_delete"in oe).map(oe=>oe._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(te=me){return this.instances.has(te)}getOptions(te=me){return this.instancesOptions.get(te)||{}}initialize(te={}){const{options:X={}}=te,oe=this.normalizeInstanceIdentifier(te.instanceIdentifier);if(this.isInitialized(oe))throw Error(`${this.name}(${oe}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const be=this.getOrInitializeService({instanceIdentifier:oe,options:X});for(const[we,Ne]of this.instancesDeferred.entries())oe===this.normalizeInstanceIdentifier(we)&&Ne.resolve(be);return be}onInit(te,X){var oe;const be=this.normalizeInstanceIdentifier(X),we=null!==(oe=this.onInitCallbacks.get(be))&&void 0!==oe?oe:new Set;we.add(te),this.onInitCallbacks.set(be,we);const Ne=this.instances.get(be);return Ne&&te(Ne,be),()=>{we.delete(te)}}invokeOnInitCallbacks(te,X){const oe=this.onInitCallbacks.get(X);if(oe)for(const be of oe)try{be(te,X)}catch{}}getOrInitializeService({instanceIdentifier:te,options:X={}}){let oe=this.instances.get(te);if(!oe&&this.component&&(oe=this.component.instanceFactory(this.container,{instanceIdentifier:(ue=te,ue===me?void 0:ue),options:X}),this.instances.set(te,oe),this.instancesOptions.set(te,X),this.invokeOnInitCallbacks(oe,te),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,te,oe)}catch{}var ue;return oe||null}normalizeInstanceIdentifier(te=me){return this.component?this.component.multipleInstances?te:me:te}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Le{constructor(te){this.name=te,this.providers=new Map}addComponent(te){const X=this.getProvider(te.name);if(X.isComponentSet())throw new Error(`Component ${te.name} has already been registered with ${this.name}`);X.setComponent(te)}addOrOverwriteComponent(te){this.getProvider(te.name).isComponentSet()&&this.providers.delete(te.name),this.addComponent(te)}getProvider(te){if(this.providers.has(te))return this.providers.get(te);const X=new Ie(te,this);return this.providers.set(te,X),X}getProviders(){return Array.from(this.providers.values())}}},1877:(Ut,qe,ee)=>{ee.d(qe,{Am:()=>ue,Ub:()=>Le,Yd:()=>Oe,in:()=>L});const y=[];var L=(()=>{return(te=L||(L={}))[te.DEBUG=0]="DEBUG",te[te.VERBOSE=1]="VERBOSE",te[te.INFO=2]="INFO",te[te.WARN=3]="WARN",te[te.ERROR=4]="ERROR",te[te.SILENT=5]="SILENT",L;var te})();const J={debug:L.DEBUG,verbose:L.VERBOSE,info:L.INFO,warn:L.WARN,error:L.ERROR,silent:L.SILENT},me=L.INFO,Ie={[L.DEBUG]:"log",[L.VERBOSE]:"log",[L.INFO]:"info",[L.WARN]:"warn",[L.ERROR]:"error"},Ue=(te,X,...oe)=>{if(X<te.logLevel)return;const be=(new Date).toISOString(),we=Ie[X];if(!we)throw new Error(`Attempted to log a message with an invalid logType (value: ${X})`);console[we](`[${be}]  ${te.name}:`,...oe)};class Oe{constructor(X){this.name=X,this._logLevel=me,this._logHandler=Ue,this._userLogHandler=null,y.push(this)}get logLevel(){return this._logLevel}set logLevel(X){if(!(X in L))throw new TypeError(`Invalid value "${X}" assigned to \`logLevel\``);this._logLevel=X}setLogLevel(X){this._logLevel="string"==typeof X?J[X]:X}get logHandler(){return this._logHandler}set logHandler(X){if("function"!=typeof X)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=X}get userLogHandler(){return this._userLogHandler}set userLogHandler(X){this._userLogHandler=X}debug(...X){this._userLogHandler&&this._userLogHandler(this,L.DEBUG,...X),this._logHandler(this,L.DEBUG,...X)}log(...X){this._userLogHandler&&this._userLogHandler(this,L.VERBOSE,...X),this._logHandler(this,L.VERBOSE,...X)}info(...X){this._userLogHandler&&this._userLogHandler(this,L.INFO,...X),this._logHandler(this,L.INFO,...X)}warn(...X){this._userLogHandler&&this._userLogHandler(this,L.WARN,...X),this._logHandler(this,L.WARN,...X)}error(...X){this._userLogHandler&&this._userLogHandler(this,L.ERROR,...X),this._logHandler(this,L.ERROR,...X)}}function Le(te){y.forEach(X=>{X.setLogLevel(te)})}function ue(te,X){for(const oe of y){let be=null;X&&X.level&&(be=J[X.level]),oe.userLogHandler=null===te?null:(we,Ne,...ut)=>{const Pe=ut.map(Me=>{if(null==Me)return null;if("string"==typeof Me)return Me;if("number"==typeof Me||"boolean"==typeof Me)return Me.toString();if(Me instanceof Error)return Me.message;try{return JSON.stringify(Me)}catch{return null}}).filter(Me=>Me).join(" ");Ne>=(be??we.logLevel)&&te({level:L[Ne].toLowerCase(),message:Pe,args:ut,type:we.name})}}}},8766:(Ut,qe,ee)=>{ee.d(qe,{Lj:()=>ze,X3:()=>ht});var y=ee(5861);let J,me;const Oe=new WeakMap,Le=new WeakMap,ue=new WeakMap,te=new WeakMap,X=new WeakMap;let we={get(le,He,ge){if(le instanceof IDBTransaction){if("done"===He)return Le.get(le);if("objectStoreNames"===He)return le.objectStoreNames||ue.get(le);if("store"===He)return ge.objectStoreNames[1]?void 0:ge.objectStore(ge.objectStoreNames[0])}return Me(le[He])},set:(le,He,ge)=>(le[He]=ge,!0),has:(le,He)=>le instanceof IDBTransaction&&("done"===He||"store"===He)||He in le};function Pe(le){return"function"==typeof le?function ut(le){return le!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ue(){return me||(me=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(le)?function(...He){return le.apply(yt(this),He),Me(Oe.get(this))}:function(...He){return Me(le.apply(yt(this),He))}:function(He,...ge){const _e=le.call(yt(this),He,...ge);return ue.set(_e,He.sort?He.sort():[He]),Me(_e)}}(le):(le instanceof IDBTransaction&&function be(le){if(Le.has(le))return;const He=new Promise((ge,_e)=>{const Re=()=>{le.removeEventListener("complete",Ee),le.removeEventListener("error",ot),le.removeEventListener("abort",ot)},Ee=()=>{ge(),Re()},ot=()=>{_e(le.error||new DOMException("AbortError","AbortError")),Re()};le.addEventListener("complete",Ee),le.addEventListener("error",ot),le.addEventListener("abort",ot)});Le.set(le,He)}(le),((le,He)=>He.some(ge=>le instanceof ge))(le,function Ie(){return J||(J=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(le,we):le)}function Me(le){if(le instanceof IDBRequest)return function oe(le){const He=new Promise((ge,_e)=>{const Re=()=>{le.removeEventListener("success",Ee),le.removeEventListener("error",ot)},Ee=()=>{ge(Me(le.result)),Re()},ot=()=>{_e(le.error),Re()};le.addEventListener("success",Ee),le.addEventListener("error",ot)});return He.then(ge=>{ge instanceof IDBCursor&&Oe.set(ge,le)}).catch(()=>{}),X.set(He,le),He}(le);if(te.has(le))return te.get(le);const He=Pe(le);return He!==le&&(te.set(le,He),X.set(He,le)),He}const yt=le=>X.get(le);function ht(le,He,{blocked:ge,upgrade:_e,blocking:Re,terminated:Ee}={}){const ot=indexedDB.open(le,He),Qe=Me(ot);return _e&&ot.addEventListener("upgradeneeded",Vt=>{_e(Me(ot.result),Vt.oldVersion,Vt.newVersion,Me(ot.transaction))}),ge&&ot.addEventListener("blocked",()=>ge()),Qe.then(Vt=>{Ee&&Vt.addEventListener("close",()=>Ee()),Re&&Vt.addEventListener("versionchange",()=>Re())}).catch(()=>{}),Qe}function ze(le,{blocked:He}={}){const ge=indexedDB.deleteDatabase(le);return He&&ge.addEventListener("blocked",()=>He()),Me(ge).then(()=>{})}const Ce=["get","getKey","getAll","getAllKeys","count"],je=["put","add","delete","clear"],ft=new Map;function rt(le,He){if(!(le instanceof IDBDatabase)||He in le||"string"!=typeof He)return;if(ft.get(He))return ft.get(He);const ge=He.replace(/FromIndex$/,""),_e=He!==ge,Re=je.includes(ge);if(!(ge in(_e?IDBIndex:IDBObjectStore).prototype)||!Re&&!Ce.includes(ge))return;const Ee=function(){var ot=(0,y.Z)(function*(Qe,...Vt){const Jt=this.transaction(Qe,Re?"readwrite":"readonly");let _n=Jt.store;return _e&&(_n=_n.index(Vt.shift())),(yield Promise.all([_n[ge](...Vt),Re&&Jt.done]))[0]});return function(Vt){return ot.apply(this,arguments)}}();return ft.set(He,Ee),Ee}!function Ne(le){we=le(we)}(le=>({...le,get:(He,ge,_e)=>rt(He,ge)||le.get(He,ge,_e),has:(He,ge)=>!!rt(He,ge)||le.has(He,ge)}))},5861:(Ut,qe,ee)=>{function y(J,me,Ie,Ue,Oe,Le,ue){try{var te=J[Le](ue),X=te.value}catch(oe){return void Ie(oe)}te.done?me(X):Promise.resolve(X).then(Ue,Oe)}function L(J){return function(){var me=this,Ie=arguments;return new Promise(function(Ue,Oe){var Le=J.apply(me,Ie);function ue(X){y(Le,Ue,Oe,ue,te,"next",X)}function te(X){y(Le,Ue,Oe,ue,te,"throw",X)}ue(void 0)})}}ee.d(qe,{Z:()=>L})}},Ut=>{Ut(Ut.s=6150)}]);